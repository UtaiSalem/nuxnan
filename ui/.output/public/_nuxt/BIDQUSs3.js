import{o as r,c as l,F as w,k as z,T as F,a7 as P,a as e,t as y,d as _,e as D,l as E,y as Q,W as T,b as j,g as G,p as V,r as g,s as L}from"./Brb_7992.js";import"./BQxta0Da.js";const K={__name:"GameBoard",props:["snake","food","gameOver","gridSize"],emits:["keydown"],setup(o){const n=o,t=(d,c)=>n.snake.some(s=>s.x===d&&s.y===c),i=(d,c)=>n.food.x===d&&n.food.y===c;return(d,c)=>(r(),l("div",{class:"bg-gray-100 dark:bg-gray-700 grid gap-0 border-4 border-gray-300 dark:border-gray-600 mx-auto rounded-xl shadow-lg",style:P({width:"min(90vw, 90vh, 400px)",height:"min(90vw, 90vh, 400px)",gridTemplateColumns:`repeat(${o.gridSize}, 1fr)`}),tabindex:"0",onKeydown:c[0]||(c[0]=s=>d.$emit("keydown",s))},[(r(!0),l(w,null,z(o.gridSize,s=>(r(),l(w,null,[(r(!0),l(w,null,z(o.gridSize,v=>(r(),l("div",{key:`${v}-${s}`,class:F(["aspect-square border border-gray-200 dark:border-gray-600",{"bg-green-500 shadow-lg":t(v-1,s-1),"bg-red-500 shadow-lg animate-pulse":i(v-1,s-1),"bg-gray-50 dark:bg-gray-800":!t(v-1,s-1)&&!i(v-1,s-1)}])},null,2))),128))],64))),256))],36))}},U={class:"mb-6 flex justify-between items-center bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4"},W={class:"text-center"},Y={class:"text-2xl font-bold text-gray-900 dark:text-white"},H={class:"text-center"},J={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},X={class:"text-center"},Z={class:"text-2xl font-bold text-green-600 dark:text-green-400"},ee={__name:"ScoreBoard",props:["score","level"],setup(o){return(n,t)=>(r(),l("div",U,[e("div",W,[e("div",Y,y(o.score),1),t[0]||(t[0]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Score",-1))]),e("div",H,[e("div",J,y(o.level),1),t[1]||(t[1]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Level",-1))]),e("div",X,[e("div",Z,y(Math.floor(o.score/2)),1),t[2]||(t[2]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Points",-1))])]))}},te={class:"mt-6"},ae={class:"grid grid-cols-5 gap-3"},se=["onClick"],re={__name:"LevelSelector",emits:["select-level"],setup(o){return(n,t)=>(r(),l("div",te,[t[0]||(t[0]=e("h2",{class:"text-xl font-semibold mb-4 text-center text-gray-900 dark:text-white"},"Select Difficulty Level:",-1)),e("div",ae,[(r(),l(w,null,z(5,i=>e("button",{key:i,onClick:d=>n.$emit("select-level",i),class:"px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-medium shadow-lg hover:shadow-blue-500/30 transition-all transform hover:scale-105"}," Level "+y(i),9,se)),64))]),t[1]||(t[1]=e("div",{class:"mt-4 text-sm text-gray-500 dark:text-gray-400 text-center"}," Higher levels are faster and more challenging! ",-1))]))}},oe={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},le={class:"bg-white dark:bg-gray-800 px-8 py-6 rounded-xl shadow-lg text-center max-w-md mx-4"},ne={class:"mb-6 text-gray-600 dark:text-gray-400"},ie={class:"mb-6 text-sm text-green-600 dark:text-green-400 font-medium"},de={class:"flex justify-center space-x-3"},ue={__name:"CongratulationsModal",props:["level"],emits:["next-level","quit-game"],setup(o){return(n,t)=>(r(),l("div",oe,[e("div",le,[t[2]||(t[2]=e("div",{class:"text-6xl mb-4"},"ðŸŽ‰",-1)),t[3]||(t[3]=e("h2",{class:"text-2xl font-bold mb-4 text-gray-900 dark:text-white"},"Congratulations!",-1)),e("p",ne,"You've completed level "+y(o.level)+"!",1),e("p",ie,"+"+y(o.level*20)+" Points Earned!",1),e("div",de,[o.level<5?(r(),l("button",{key:0,onClick:t[0]||(t[0]=i=>n.$emit("next-level")),class:"px-6 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-xl font-medium shadow-lg hover:shadow-green-500/30 transition-all"}," Next Level ")):_("",!0),e("button",{onClick:t[1]||(t[1]=i=>n.$emit("quit-game")),class:"px-6 py-2.5 bg-gray-600 hover:bg-gray-700 text-white rounded-xl font-medium shadow-lg hover:shadow-gray-500/30 transition-all"}," Quit Game ")])])]))}},ce={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ve={class:"bg-white dark:bg-gray-800 px-8 py-6 rounded-xl shadow-lg text-center max-w-md mx-4"},me={class:"mb-6 text-gray-600 dark:text-gray-400"},xe={class:"font-bold text-gray-900 dark:text-white"},ge={class:"flex justify-center space-x-3"},ye={__name:"GameOverModal",props:["score"],emits:["restart","quit"],setup(o){return(n,t)=>(r(),l("div",ce,[e("div",ve,[t[3]||(t[3]=e("div",{class:"text-6xl mb-4"},"ðŸ’€",-1)),t[4]||(t[4]=e("h2",{class:"text-2xl font-bold mb-4 text-gray-900 dark:text-white"},"Game Over!",-1)),e("p",me,[t[2]||(t[2]=D("Your final score: ",-1)),e("span",xe,y(o.score),1)]),e("div",ge,[e("button",{onClick:t[0]||(t[0]=i=>n.$emit("restart")),class:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium shadow-lg hover:shadow-blue-500/30 transition-all"}," Restart "),e("button",{onClick:t[1]||(t[1]=i=>n.$emit("quit")),class:"px-6 py-2.5 bg-gray-600 hover:bg-gray-700 text-white rounded-xl font-medium shadow-lg hover:shadow-gray-500/30 transition-all"}," Quit ")])])]))}},fe={class:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900 p-4"},be={class:"max-w-4xl mx-auto w-full"},he={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-6 mb-6"},ke={class:"flex-col items-center justify-center"},pe={key:0,class:"flex justify-center max-w-full items-center mb-4"},we={class:"flex w-[400px] justify-between items-center"},_e={key:2,class:"flex items-center justify-center mb-4"},b=20,$e={__name:"SnakeGameComponent",setup(o){const t=V().public.apiBase,i=E(),d=g([{x:10,y:10}]),c=g({x:5,y:5}),s=g("right"),v=g(!1),f=g(0),u=g(1),h=g(!1),k=g(!1);let x;const $={1:300,2:200,3:150,4:120,5:90},B=async(a,m)=>{if(i.isAuthenticated)try{await $fetch(`${t}/api/points/earn`,{method:"POST",body:{source_type:"game_snake",amount:a,description:m,metadata:{game_level:u.value,game_score:f.value}},headers:{Authorization:`Bearer ${i.token}`}})}catch(R){console.error("Failed to earn points:",R)}},q=a=>{u.value=a,h.value=!0,p(),x=L(S,$[u.value])},p=()=>{d.value=[{x:10,y:10}],c.value=O(),s.value="right",v.value=!1,f.value=0},A=()=>{clearInterval(x),p(),x=L(S,$[u.value])},M=()=>{h.value=!1,k.value=!1,p(),clearInterval(x)},S=()=>{if(v.value){clearInterval(x);return}const a={...d.value[0]};switch(s.value){case"up":a.y--;break;case"down":a.y++;break;case"left":a.x--;break;case"right":a.x++;break}if(I(a)){v.value=!0;return}d.value.unshift(a),a.x===c.value.x&&a.y===c.value.y?(f.value+=10,B(5,`Snake Game - Ate food at level ${u.value}`),c.value=O(),f.value>=u.value*100&&(k.value=!0,clearInterval(x))):d.value.pop()},I=a=>a.x<0||a.x>=b||a.y<0||a.y>=b||d.value.some(m=>m.x===a.x&&m.y===a.y),O=()=>({x:Math.floor(Math.random()*b),y:Math.floor(Math.random()*b)}),C=a=>{switch(a.key){case"ArrowUp":s.value!=="down"&&(s.value="up");break;case"ArrowDown":s.value!=="up"&&(s.value="down");break;case"ArrowLeft":s.value!=="right"&&(s.value="left");break;case"ArrowRight":s.value!=="left"&&(s.value="right");break}},N=()=>{u.value<5&&(u.value++,B(u.value*20,`Snake Game - Completed level ${u.value-1}`),k.value=!1,p(),x=L(S,$[u.value]))};return Q(()=>{window.addEventListener("keydown",C)}),T(()=>{window.removeEventListener("keydown",C),clearInterval(x)}),(a,m)=>(r(),l("div",fe,[e("div",be,[e("div",he,[m[1]||(m[1]=e("h1",{class:"text-3xl font-bold mb-4 text-center text-gray-900 dark:text-white"},"ðŸ Snake Game",-1)),m[2]||(m[2]=e("p",{class:"text-center text-gray-600 dark:text-gray-400 mb-4"},"Play the classic snake game and earn points!",-1)),e("div",ke,[h.value?(r(),l("div",pe,[e("div",we,[j(ee,{score:f.value,level:u.value},null,8,["score","level"]),e("button",{onClick:A,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition duration-300"}," Restart Game ")])])):_("",!0),h.value?(r(),G(K,{key:1,snake:d.value,food:c.value,gameOver:v.value,gridSize:b,onKeydown:C},null,8,["snake","food","gameOver"])):(r(),l("div",_e,[e("div",null,[m[0]||(m[0]=e("p",{class:"text-xl mb-4"},"Welcome to Snake Game!",-1)),j(re,{onSelectLevel:q})])]))]),k.value?(r(),G(ue,{key:0,level:u.value,onNextLevel:N,onQuitGame:M},null,8,["level"])):_("",!0),v.value?(r(),G(ye,{key:1,score:f.value,onRestart:A,onQuit:M},null,8,["score"])):_("",!0)])])]))}},Se={class:"w-full h-full flex flex-col items-center justify-center min-h-[calc(100vh-100px)]"},Ce={class:"w-full max-w-4xl"},ze={__name:"snake-game",setup(o){return(n,t)=>(r(),l("div",Se,[e("div",Ce,[j($e)])]))}};export{ze as default};
