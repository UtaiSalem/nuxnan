import{a as m}from"./B9ygI19o.js";import{L as f,u as M,H as D}from"./DUwVLjCh.js";import k from"./Dtfmjnau.js";import{c,o as u,a as d,b as l,w as r,e as y,u as g,a7 as H,t as p,r as i,F as T,k as L}from"./cTealXVQ.js";import{S as h}from"./BQxta0Da.js";import"./ChBnuzYQ.js";import"./DJsVOgax.js";import"./Cpj98o6Y.js";import"./CYLt1a9j.js";import"./srasqk13.js";import"./BZ03tRGr.js";const P={class:"bg-white shadow p-4"},N={class:"flex justify-between items-center"},A={class:"flex space-x-4"},R={__name:"Navbar",setup(n){return(a,s)=>(u(),c("nav",P,[d("div",N,[s[1]||(s[1]=d("div",{class:"font-bold"},"Plearnd",-1)),d("div",A,[l(g(f),{href:"/"},{default:r(()=>[...s[0]||(s[0]=[y("Home",-1)])]),_:1})])])]))}},F={class:"relative bg-white shadow rounded-lg overflow-hidden mb-4"},j={class:"absolute bottom-4 left-4 flex items-end"},B=["src"],U={class:"ml-4 mb-2"},O={class:"text-3xl font-bold text-white shadow-black drop-shadow-md"},V={class:"text-white drop-shadow-md"},q={__name:"ProfileCover",props:{coverImage:String,logoImage:String,coverHeader:String,coverSubheader:String,model:String,modelTable:String,modelableId:Number,modelableType:String,modelableRoute:String,modelData:Object,subModelData:Array,subModelNameTh:String},setup(n){return(a,s)=>(u(),c("div",F,[d("div",{class:"h-64 bg-gray-300 w-full bg-cover bg-center",style:H({backgroundImage:`url(${n.coverImage})`})},null,4),d("div",j,[d("img",{src:n.logoImage,class:"w-32 h-32 rounded-full border-4 border-white shadow-lg bg-white"},null,8,B),d("div",U,[d("h1",O,p(n.coverHeader),1),d("p",V,p(n.coverSubheader),1)])])]))}},W={class:"bg-white rounded-lg"},te={__name:"Academy",props:{academy:Object,courses:Object,imagePath:String},setup(n){const a=n,s=i(!1),w=i(a.imagePath+"storage/images/"+a.academy.data.logo||a.imagePath+"storage/images/default_logo.png"),S=i(a.imagePath+"storage/images/"+a.academy.data.cover||a.imagePath+"storage/images/default_cover.png"),b=i(a.academy.data.name),v=i(a.academy.data.slogan);M({name:"",slogan:"",address:"",cover:null,logo:null});async function _(o){const e=new FormData;e.append("cover",o),e.append("_method","patch"),await m.post(`/academies/${a.academy.data.id}/update`,e)}async function C(o){const e=new FormData;e.append("logo",o),e.append("_method","patch"),await m.post(`/academies/${a.academy.data.id}/update`,e)}async function I(o){await m.patch(`/academies/${a.academy.data.id}/update`,{name:o})}async function $(o){await m.patch(`/academies/${a.academy.data.id}/update`,{slogan:o})}async function x(){try{let o=await m.post(`/academies/${a.academy.data.id}/members`);o.data.success&&(a.academy.data.isMember=o.data.isMember,a.academy.data.total_students=o.data.totalStudents,o.data.isMember?h.fire("เสร็จสิ้น","ขอเป็นสมาชิกเรียบร้อยแล้ว","success"):h.fire("เสร็จสิ้น","ออกจากการเป็นสมาชิกเรียบร้อยแล้ว","success"))}catch{}}return(o,e)=>(u(),c("div",null,[l(k,null,{header:r(()=>[l(g(D),{title:"Academy"})]),navbar:r(()=>[l(R,{isDarkMode:s.value,onToggleDarkMode:e[0]||(e[0]=t=>s.value=!s.value)},null,8,["isDarkMode"])]),coverProfileCard:r(()=>[l(q,{coverImage:S.value,logoImage:w.value,coverHeader:b.value,"onUpdate:coverHeader":e[1]||(e[1]=t=>b.value=t),coverSubheader:v.value,"onUpdate:coverSubheader":e[2]||(e[2]=t=>v.value=t),model:"Academy",modelTable:"academies",modelableId:a.academy.data.id,modelableType:"app/models/Academy",modelableRoute:`/academies/${a.academy.data.id}`,modelData:a.academy.data,subModelData:a.courses.data,subModelNameTh:"รายวิชา",onCoverImageChange:e[3]||(e[3]=t=>{_(t)}),onLogoImageChange:e[4]||(e[4]=t=>{C(t)}),onHeaderChange:e[5]||(e[5]=t=>{I(t)}),onSubheaderChange:e[6]||(e[6]=t=>{$(t)}),onRequestTobeMember:e[7]||(e[7]=t=>x())},null,8,["coverImage","logoImage","coverHeader","coverSubheader","modelableId","modelableRoute","modelData","subModelData"])]),leftSideWidget:r(()=>[...e[8]||(e[8]=[d("div",null,null,-1)])]),mainContent:r(()=>[d("div",W,[(u(!0),c(T,null,L(a.courses.data,t=>(u(),c("div",{key:t.id,class:"my-2"},[l(g(f),{href:`/courses/${t.id}`},{default:r(()=>[y(p(t.name),1)]),_:2},1032,["href"])]))),128))])]),rightSideWidget:r(()=>[...e[9]||(e[9]=[d("div",null,null,-1)])]),_:1})]))}};export{te as default};
