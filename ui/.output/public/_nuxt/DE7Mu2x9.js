import{_ as S}from"./BP2gnDQ3.js";import{q,a9 as A,l as N,o as i,c as m,a as e,b as d,u as s,I as r,t as c,e as R,g,w as T,d as x,j,r as b,n as D,K as V,p as $,_ as I}from"./Brb_7992.js";import{S as h}from"./BQxta0Da.js";const E={class:"bg-gradient-to-br from-white to-indigo-50 dark:from-gray-800 dark:to-gray-700 border border-indigo-200 dark:border-gray-600 rounded-2xl hover:shadow-2xl hover:shadow-indigo-300 dark:hover:shadow-gray-900 transform hover:scale-105 transition-all duration-300 overflow-hidden group h-full flex flex-col"},F={class:"flex flex-col justify-between flex-1 p-5 pb-20 rounded-b-2xl"},L={class:"flex items-center p-3 mb-3 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-xl shadow-sm"},K={class:"flex-shrink-0 relative"},M=["src","alt"],z={class:"absolute -bottom-1 -right-1 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full p-1 animate-pulse-slow"},G={class:"w-full ps-4"},H={class:"flex flex-col mb-2 text-sm"},J={class:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400"},O={class:"font-semibold text-gray-600 dark:text-gray-400 flex items-center gap-1"},P={class:"flex flex-wrap gap-2"},Q=["disabled"],U={key:2,class:"inline-flex items-center gap-1 px-3 py-1.5 text-sm font-semibold text-white bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg"},W={class:"mt-4 p-4 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl border border-yellow-200"},X={class:"text-center text-sm font-semibold text-gray-600 mb-2 flex items-center justify-center gap-1"},Y={class:"flex items-center justify-center gap-2 flex-wrap"},Z={class:"flex items-baseline gap-1"},ee={class:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-yellow-500 to-orange-500"},te={class:"flex flex-col items-start"},oe={class:"text-lg font-bold text-green-600"},ne=q({__name:"DonorCard",props:{donate:{}},emits:["friendRequestSent"],setup(o,{emit:p}){const w=A(),u=N(),v=$(),a=o,y=p,l=b(!1),f=b(!1),_=D(()=>{const n=a.donate.donor?.avatar;return!n||n.includes("/storages/")?`${v.public.apiBase}/storage/images/plearnd-logo.png`:n}),k=async()=>{if(a.donate.donor){if(!u.isAuthenticated){h.fire({icon:"warning",title:"กรุณาเข้าสู่ระบบ",text:"คุณต้องเข้าสู่ระบบก่อนจึงจะสามารถเพิ่มเพื่อนได้",confirmButtonText:"เข้าสู่ระบบ",confirmButtonColor:"#3085d6",showCancelButton:!0,cancelButtonText:"ยกเลิก"}).then(n=>{n.isConfirmed&&V("/auth")});return}l.value=!0;try{await w.post(`/api/friends/${a.donate.donor.id}`,{}),f.value=!0,y("friendRequestSent",a.donate.donor.id),h.fire({icon:"success",title:"ส่งคำขอเพิ่มเพื่อนแล้ว",text:`ส่งคำขอเพิ่มเพื่อนไปยัง ${a.donate.donor_name} แล้ว`,showConfirmButton:!1,timer:1500})}catch(n){console.error("Error sending friend request:",n),h.fire({icon:"error",title:"ไม่สำเร็จ",text:n?.data?.message||"ไม่สามารถส่งคำขอเพิ่มเพื่อนได้",confirmButtonText:"ตกลง"})}finally{l.value=!1}}},B=()=>a.donate.donor?u.isAuthenticated?u.user?.id!==a.donate.donor.id:!0:!1;return(n,t)=>{const C=S;return i(),m("div",E,[t[7]||(t[7]=e("div",{class:"h-2 bg-gradient-to-r from-sky-400 via-blue-500 to-indigo-600 shrink-0"},null,-1)),e("div",F,[e("figure",L,[e("div",K,[e("img",{class:"w-20 h-20 rounded-full border-4 border-white shadow-lg transform hover:scale-110 transition-transform duration-300",src:_.value,alt:o.donate.donor?o.donate.donor.username+" photo":"donor-image"},null,8,M),e("div",z,[d(s(r),{icon:"mdi:check-decagram",class:"w-5 h-5 text-white"})])]),e("div",G,[e("div",H,[e("span",J,c(o.donate.donor?o.donate.donor_name:"ไม่ระบุนาม"),1),e("span",O,[d(s(r),{icon:"mdi:identifier",class:"w-3 h-3"}),R(" "+c(o.donate.donor?o.donate.donor.personal_code:""),1)])]),e("div",P,[o.donate.donor&&o.donate.donor.reference_code?(i(),g(C,{key:0,to:`/auth?tab=register&ref=${o.donate.donor.reference_code}`,class:"inline-flex items-center gap-1 px-3 py-1.5 text-sm font-semibold text-white bg-gradient-to-r from-teal-400 to-emerald-500 rounded-lg hover:from-teal-500 hover:to-emerald-600 transform hover:scale-105 transition-all duration-300 shadow-md hover:shadow-lg"},{default:T(()=>[d(s(r),{icon:"mdi:account-star",class:"w-4 h-4"}),t[0]||(t[0]=e("span",null,"สมัครต่อ",-1))]),_:1},8,["to"])):x("",!0),B()&&!f.value?(i(),m("button",{key:1,onClick:j(k,["stop"]),disabled:l.value,class:"inline-flex items-center gap-1 px-3 py-1.5 text-sm font-semibold text-white bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg hover:from-blue-600 hover:to-indigo-700 transform hover:scale-105 transition-all duration-300 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"},[l.value?(i(),g(s(r),{key:0,icon:"mdi:loading",class:"w-4 h-4 animate-spin"})):(i(),g(s(r),{key:1,icon:"mdi:account-plus",class:"w-4 h-4"})),t[1]||(t[1]=e("span",null,"เพิ่มเพื่อน",-1))],8,Q)):x("",!0),f.value?(i(),m("span",U,[d(s(r),{icon:"mdi:check",class:"w-4 h-4"}),t[2]||(t[2]=e("span",null,"ส่งคำขอแล้ว",-1))])):x("",!0)])])]),e("div",W,[e("p",X,[d(s(r),{icon:"mdi:gift",class:"w-4 h-4 text-pink-500 animate-bounce-slow"}),t[3]||(t[3]=e("span",null,"ให้การสนับสนุน",-1))]),e("div",Y,[e("div",Z,[d(s(r),{icon:"mdi:star-circle",class:"w-6 h-6 text-yellow-500 animate-pulse-slow"}),e("span",ee,c(o.donate.total_points.toLocaleString()),1)]),t[5]||(t[5]=e("span",{class:"text-gray-400 font-bold"},"/",-1)),e("div",te,[t[4]||(t[4]=e("span",{class:"text-xs text-blue-600 font-medium"},"คงเหลือ",-1)),e("span",oe,c(o.donate.remaining_points),1)]),t[6]||(t[6]=e("span",{class:"text-sm text-gray-600 font-medium"},"แต้ม",-1))])])])])}}}),ie=I(ne,[["__scopeId","data-v-0f36fc22"]]);export{ie as D};
