import{a8 as Qe,r as c,y as je,l as me,n as z,c as i,o as n,a as t,u as o,b as u,I as d,_ as qe,a3 as Ge,g as te,w as He,d as m,j as Se,t as x,$ as O,F as B,k as M,T as S,e as ce,ai as Je,a7 as ke,aj as We,aa as K,a0 as Te,ab as Xe,a1 as Ye,a4 as Ze}from"./DvtEeXFW.js";import{u as Fe}from"./D4UTVVq6.js";import{u as et}from"./CaSR6SuD.js";const tt=Qe("feed",()=>{const b=c([]),T=c([]);function y(_){b.value=_}function j(_){b.value.unshift(_)}function F(_,f){const A=b.value.findIndex(X=>X.target_resource&&X.target_resource.id===_?!0:X.id===_);A!==-1&&(b.value[A].target_resource?b.value[A].target_resource={...b.value[A].target_resource,...f}:b.value[A]={...b.value[A],...f})}function P(_){b.value=b.value.filter(f=>f.target_resource&&f.target_resource.id===_?!1:f.id!==_)}function C(_){T.value=_}return{posts:b,trendingTopics:T,setPosts:y,addPost:j,updatePost:F,removePost:P,setTrending:C}}),at=()=>{const b=tt(),{$apiFetch:T}=je(),y=me(),j=c([]),F=c([]),P=c([]),C=c(!1);return{feelings:j,activityTypes:F,backgrounds:P,isLoadingOptions:C,fetchPosts:async()=>{try{const g=await T("/api/newsfeed/activities");g&&g.data&&b.setPosts(g.data)}catch(g){console.error("Error fetching posts:",g),b.setPosts([])}},fetchFeelings:async()=>{if(j.value.length>0)return j.value;try{const g=await T("/api/posts-feelings");if(g.success){const s=g.data||g.feelings||[];return j.value=s,s}return[]}catch(g){return console.error("Error fetching feelings:",g),[]}},fetchActivityTypes:async()=>{if(F.value.length>0)return F.value;try{const g=await T("/api/posts-activity-types");if(g.success){const s=g.data||g.activity_types||[];return F.value=s,s}return[]}catch(g){return console.error("Error fetching activity types:",g),[]}},fetchBackgrounds:async()=>{if(P.value.length>0)return P.value;try{const g=await T("/api/posts-backgrounds");if(g.success){const s=g.data||[];return P.value=s,s}return[]}catch(g){return console.error("Error fetching backgrounds:",g),[]}},fetchPostOptions:async()=>{if(!C.value){C.value=!0;try{const g=await T("/api/posts-options");g.success&&g.data&&(j.value=g.data.feelings||[],F.value=g.data.activity_types||[],P.value=g.data.backgrounds||[])}catch(g){console.error("Error fetching post options:",g)}finally{C.value=!1}}},createPost:async(g,s={})=>{try{const l=new FormData;l.append("content",g),l.append("privacy_settings",String(s.privacy_settings??3)),l.append("point","1"),s.images&&s.images.length>0&&s.images.forEach((k,h)=>{l.append(`images[${h}]`,k)}),s.location_name&&l.append("location_name",s.location_name),s.location&&(l.append("location[name]",s.location.name),s.location.address&&l.append("location[address]",s.location.address),s.location.city&&l.append("location[city]",s.location.city),s.location.state&&l.append("location[state]",s.location.state),s.location.country&&l.append("location[country]",s.location.country),s.location.latitude&&l.append("location[latitude]",String(s.location.latitude)),s.location.longitude&&l.append("location[longitude]",String(s.location.longitude)),s.location.place_id&&l.append("location[place_id]",s.location.place_id)),s.feeling&&l.append("feeling",s.feeling),s.feeling_icon&&l.append("feeling_icon",s.feeling_icon),s.activity_type&&l.append("activity_type",s.activity_type),s.activity_text&&l.append("activity_text",s.activity_text),s.background_color&&l.append("background_color",s.background_color),s.background_gradient&&l.append("background_gradient",s.background_gradient),s.text_color&&l.append("text_color",s.text_color),s.tagged_users&&s.tagged_users.length>0&&s.tagged_users.forEach((k,h)=>{l.append(`tagged_users[${h}]`,String(k))}),s.scheduled_at&&l.append("scheduled_at",s.scheduled_at),s.comments_disabled!==void 0&&l.append("comments_disabled",s.comments_disabled?"1":"0"),s.is_poll&&(l.append("is_poll","1"),s.poll_title&&l.append("poll_title",s.poll_title),s.poll_duration&&l.append("poll_duration",String(s.poll_duration)),s.poll_options&&s.poll_options.length>0&&s.poll_options.forEach((k,h)=>{l.append(`poll_options[${h}]`,k)}));const v=await T("/api/posts",{method:"POST",body:l});return v.success&&v.activity&&(b.addPost(v.activity),y.user&&(y.user.pp-=180)),v}catch(l){throw console.error("Error creating post:",l),l}},updatePost:async(g,s,l={})=>{try{const v=new FormData;v.append("_method","PUT"),v.append("content",s),l.privacy_settings!==void 0&&v.append("privacy_settings",String(l.privacy_settings)),l.images&&l.images.length>0&&l.images.forEach((h,L)=>{v.append(`images[${L}]`,h)}),l.delete_images&&l.delete_images.length>0&&l.delete_images.forEach((h,L)=>{v.append(`delete_images[${L}]`,String(h))}),l.image_order&&l.image_order.length>0&&l.image_order.forEach((h,L)=>{v.append(`image_order[${L}]`,String(h))}),l.remove_feeling&&v.append("remove_feeling","1"),l.remove_background&&v.append("remove_background","1"),l.location_name&&v.append("location_name",l.location_name),l.remove_feeling||(l.feeling&&v.append("feeling",l.feeling),l.feeling_icon&&v.append("feeling_icon",l.feeling_icon),l.activity_type&&v.append("activity_type",l.activity_type),l.activity_text&&v.append("activity_text",l.activity_text)),l.remove_background||(l.background_color&&v.append("background_color",l.background_color),l.background_gradient&&v.append("background_gradient",l.background_gradient),l.text_color&&v.append("text_color",l.text_color)),l.tagged_users&&l.tagged_users.length>0&&l.tagged_users.forEach((h,L)=>{v.append(`tagged_users[${L}]`,String(h))}),l.comments_disabled!==void 0&&v.append("comments_disabled",l.comments_disabled?"1":"0");const k=await T(`/api/posts/${g}`,{method:"POST",body:v});return k.success&&k.post&&b.updatePost(g,k.post),k}catch(v){throw console.error("Error updating post:",v),v}}}},rt={class:"bg-white dark:bg-vikinger-dark-100 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-vikinger-dark-50/20"},lt={class:"flex items-center gap-3 mb-3"},st=["src"],nt={class:"flex items-center justify-around pt-2 border-t border-gray-100 dark:border-vikinger-dark-50/20"},ot={__name:"CreatePostTrigger",emits:["open-modal"],setup(b,{emit:T}){const y=me(),{getAvatarUrl:j}=Fe(),F=T,P=z(()=>j(y.user)),C=(_="status")=>{F("open-modal",_)};return(_,f)=>(n(),i("div",rt,[t("div",lt,[t("img",{src:o(P),alt:"Avatar",class:"w-10 h-10 rounded-full object-cover ring-2 ring-vikinger-purple/20"},null,8,st),t("button",{onClick:f[0]||(f[0]=A=>C()),class:"flex-1 text-left px-4 py-2.5 bg-gray-100 dark:bg-vikinger-dark-200/50 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-vikinger-dark-200 transition-colors text-sm"}," คุณกำลังคิดอะไรอยู่? ")]),t("div",nt,[t("button",{onClick:f[1]||(f[1]=A=>C()),class:"flex items-center gap-2 px-3 py-1.5 hover:bg-gray-50 dark:hover:bg-vikinger-dark-200/50 rounded-lg transition-colors"},[u(o(d),{icon:"fluent:image-24-regular",class:"w-5 h-5 text-green-500"}),f[3]||(f[3]=t("span",{class:"text-xs font-medium text-gray-600 dark:text-gray-400"},"รูปภาพ",-1))]),t("button",{onClick:f[2]||(f[2]=A=>C("poll")),class:"flex items-center gap-2 px-3 py-1.5 hover:bg-gray-50 dark:hover:bg-vikinger-dark-200/50 rounded-lg transition-colors"},[u(o(d),{icon:"fluent:poll-24-regular",class:"w-5 h-5 text-amber-500"}),f[4]||(f[4]=t("span",{class:"text-xs font-medium text-gray-600 dark:text-gray-400"},"โพล",-1))])])]))}},it={class:"w-full max-w-2xl mx-4 mb-10 modal-content"},dt={class:"bg-white dark:bg-vikinger-dark-300 rounded-xl shadow-2xl"},ut={class:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-vikinger-dark-50/30"},ct={class:"flex items-center gap-2"},gt={class:"text-xl font-bold text-gray-800 dark:text-white"},vt={class:"p-4 max-h-[75vh] overflow-y-auto"},pt={class:"flex items-center gap-3 mb-4"},bt=["src"],kt={class:"flex-1"},mt={class:"font-bold text-gray-800 dark:text-white leading-tight"},ft={class:"flex items-center gap-1.5 mt-0.5"},xt={key:0,class:"text-gray-300 dark:text-gray-700 font-light text-xs"},yt={key:1,class:"flex items-center gap-1 text-[11px] font-bold text-vikinger-cyan uppercase tracking-wider"},ht={class:"truncate max-w-[150px]"},_t={class:"flex border-b border-gray-200 dark:border-vikinger-dark-50/30 mb-4"},wt=["onClick"],Ct={key:0,class:"mb-4 p-3 bg-gray-50 dark:bg-vikinger-dark-200 rounded-lg"},$t={class:"space-y-2"},Pt=["onClick"],St={class:"text-sm text-gray-700 dark:text-gray-300"},Tt={class:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-200 dark:border-vikinger-dark-50/30 cursor-pointer"},jt={key:1,class:"mb-3 flex flex-wrap gap-2"},Ft={key:0,class:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 rounded-full text-sm"},Et={key:1,class:"inline-flex items-center gap-1 px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-full text-sm"},It=["onClick"],Ut=["rows","onKeydown","disabled"],At={key:2,class:"mb-4"},Vt={class:"flex flex-wrap gap-2"},Dt=["src"],Ot=["onClick"],Nt={class:"text-xs text-gray-500 mt-1"},Bt={key:3,class:"mb-4 p-3 bg-gray-50 dark:bg-vikinger-dark-200 rounded-lg"},Mt={class:"flex items-center justify-between mb-3"},Lt={class:"flex flex-wrap gap-2"},zt=["onClick"],Rt={key:4,class:"mb-4 p-3 bg-gray-50 dark:bg-vikinger-dark-200 rounded-lg max-h-48 overflow-y-auto"},Kt={class:"flex items-center justify-between mb-3"},Qt={class:"text-xs text-gray-500 uppercase mb-2"},qt={class:"grid grid-cols-5 gap-2"},Gt=["onClick"],Ht={class:"text-xl"},Jt={class:"text-xs text-gray-600 dark:text-gray-400 truncate w-full text-center"},Wt={key:5,class:"mb-4 p-3 bg-gray-50 dark:bg-vikinger-dark-200 rounded-lg max-h-48 overflow-y-auto"},Xt={class:"flex items-center justify-between mb-3"},Yt={class:"text-xs text-gray-500 uppercase mb-2"},Zt={class:"grid grid-cols-3 gap-2"},ea=["onClick"],ta={class:"text-lg"},aa={class:"text-xs text-gray-600 dark:text-gray-400 truncate"},ra={key:0,class:"mt-3"},la=["placeholder"],sa={key:6,class:"mb-4 p-3 bg-gray-50 dark:bg-vikinger-dark-200 rounded-lg"},na={class:"flex items-center justify-between mb-3"},oa={class:"flex items-center gap-2"},ia={key:7,class:"mb-4 p-3 bg-gray-50 dark:bg-vikinger-dark-200 rounded-lg"},da={class:"flex items-center justify-between mb-3"},ua={key:0,class:"flex flex-wrap gap-2 mb-3"},ca=["src"],ga={class:"text-xs text-blue-700 dark:text-blue-300"},va=["onClick"],pa={class:"relative"},ba={key:0,class:"absolute right-2 top-1/2 -translate-y-1/2"},ka={class:"mt-4"},ma={key:0,class:"mb-2 p-4 text-center"},fa={key:1,class:"mb-2 space-y-1 max-h-40 overflow-y-auto border border-gray-200 dark:border-vikinger-dark-50/30 rounded-lg bg-white dark:bg-vikinger-dark-100"},xa=["onClick","disabled"],ya=["src"],ha={class:"flex-1 text-left"},_a={class:"text-sm text-gray-800 dark:text-white block"},wa={key:0,class:"text-xs text-gray-500"},Ca={key:2,class:"mb-2 p-3 text-center text-sm text-gray-500 dark:text-gray-400 bg-white dark:bg-vikinger-dark-100 rounded-lg border border-gray-200 dark:border-vikinger-dark-50/30"},$a={key:8,class:"mb-4 p-3 bg-gray-50 dark:bg-vikinger-dark-200 rounded-lg"},Pa={class:"flex items-center justify-between mb-3"},Sa={class:"flex flex-wrap gap-2 border-t border-gray-200 dark:border-vikinger-dark-50/30 pt-4"},Ta=["disabled"],ja=["disabled"],Fa=["disabled"],Ea=["disabled"],Ia=["disabled"],Ua=["disabled"],Aa=["disabled"],Va={class:"mb-4"},Da={class:"p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-700/30"},Oa={class:"flex items-center justify-between mb-3"},Na={class:"flex items-center gap-2"},Ba={class:"space-y-3 mb-4"},Ma={class:"w-7 h-7 rounded-full bg-vikinger-purple text-white flex items-center justify-center text-xs font-bold flex-shrink-0"},La=["onUpdate:modelValue","placeholder"],za=["onClick"],Ra={class:"mt-3 pt-3 border-t border-amber-200 dark:border-amber-700/30"},Ka={class:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400"},Qa={class:"grid grid-cols-2 gap-4 mt-6"},qa={class:"relative flex items-center"},Ga={class:"absolute left-3 text-vikinger-cyan"},Ha={class:"relative flex items-center"},Ja={class:"absolute left-3 text-vikinger-orange"},Wa={class:"mt-4 p-4 bg-vikinger-cyan/5 dark:bg-vikinger-cyan/10 border border-vikinger-cyan/20 rounded-xl"},Xa={class:"flex items-start gap-3"},Ya={class:"text-sm dark:text-gray-200 w-full"},Za={class:"space-y-1.5"},er={class:"flex justify-between items-center text-gray-600 dark:text-gray-400"},tr={class:"font-semibold"},ar={class:"flex justify-between items-center pt-2 border-t border-vikinger-cyan/20 font-bold text-gray-800 dark:text-white mt-1"},rr={class:"mt-3 flex items-center gap-2 text-xs text-green-600 dark:text-green-400 font-medium"},lr={key:0,class:"text-xs text-red-500 font-bold mt-2"},sr={class:"p-4 border-t border-gray-200 dark:border-vikinger-dark-50/30"},nr=["disabled"],or={__name:"CreatePostModal",props:{show:{type:Boolean,default:!1},initialTab:{type:String,default:"status"},context:{type:String,default:"newsfeed",validator:b=>["newsfeed","academy","course"].includes(b)},contextId:{type:Number,default:null},contextName:{type:String,default:""}},emits:["close","post-created"],setup(b,{emit:T}){const y=b,j=T,{$apiFetch:F}=je(),P=me(),C=et(),{getAvatarUrl:_}=Fe(),{feelings:f,activityTypes:A,backgrounds:X,fetchPostOptions:fe,createPost:xe}=at(),ye=z(()=>y.context==="academy"&&y.contextName?`โพสต์ใน ${y.contextName}`:y.context==="course"&&y.contextName?`โพสต์ในรายวิชา ${y.contextName}`:"สร้างโพสต์"),g=async(r,e)=>{const a=new FormData;return a.append("content",r),e.images&&e.images.length>0&&e.images.forEach((p,w)=>{a.append(`images[${w}]`,p)}),e.privacy_settings!==void 0&&a.append("privacy_settings",String(e.privacy_settings)),await F(`/api/academies/${y.contextId}/posts`,{method:"POST",body:a})},s=async(r,e)=>{const a=new FormData;return a.append("content",r),e.images&&e.images.length>0&&e.images.forEach((p,w)=>{a.append(`images[${w}]`,p)}),await F(`/api/courses/${y.contextId}/posts`,{method:"POST",body:a})},l=z(()=>_(P.user)),v=c(""),k=c(!1),h=c([]),L=c(null),q=z(()=>typeof window>"u"?[]:h.value.map(r=>({file:r,url:URL.createObjectURL(r)}))),ie=c(3),V=c(""),D=c(null),E=c(null),Q=c(""),$=c(null),I=c([]),R=c(""),de=c(!1),G=c(!1),H=c(!1),ae=c(!1),Y=c(!1),re=c(!1),le=c(!1),se=c(!1),J=c(""),Z=c([]),ne=c(!1),ge=c(!1),U=c("status"),Ee=[{id:"status",label:"สถานะ",icon:"mdi:card-text-outline"},{id:"poll",label:"โพล",icon:"mdi:poll"}],ee=c(""),N=c(["",""]),oe=c(24),W=c(12e3),ue=c(100);z(()=>{const r=new Date;return r.setDate(r.getDate()+parseInt(oe.value)),r.toISOString()});const Ie=()=>{N.value.length<10&&N.value.push("")},Ue=r=>{N.value.length>2&&N.value.splice(r,1)};Ge(()=>y.show,r=>{r?(U.value=y.initialTab||"status",fe()):Ce()});const ve=[{value:3,label:"สาธารณะ",icon:"mdi:earth",color:"text-blue-500"},{value:2,label:"เพื่อน",icon:"mdi:account-group",color:"text-green-500"},{value:1,label:"เฉพาะฉัน",icon:"mdi:lock",color:"text-gray-500"}],he=z(()=>ve.find(r=>r.value===ie.value)||ve[0]),Ae=z(()=>{if(!$.value)return{};const r=$.value,e={};return r.background_gradient?e.background=r.background_gradient:r.background_color&&(e.backgroundColor=r.background_color),r.text_color&&(e.color=r.text_color),e}),_e=z(()=>{const r=[];if(D.value&&r.push(`${D.value.icon} รู้สึก${D.value.name_th||D.value.name}`),E.value){let e=`${E.value.icon} กำลัง${E.value.name_th||E.value.name}`;Q.value&&(e+=` ${Q.value}`),r.push(e)}return r.join(" — ")}),Ve=z(()=>{const r={};return f.value.forEach(e=>{r[e.category]||(r[e.category]=[]),r[e.category].push(e)}),r}),De=z(()=>{const r={};return A.value.forEach(e=>{r[e.category]||(r[e.category]=[]),r[e.category].push(e)}),r}),pe=()=>{j("close")},we=async()=>{if(!(U.value==="status"&&!v.value.trim()&&h.value.length===0)&&!k.value){if(y.context==="newsfeed"&&P.user&&P.user.pp<180){C.warning("คุณมีแต้มสะสมไม่พอสำหรับการโพสต์ กรุณาสะสมแต้มสะสมอย่างน้อย 180 แต้ม","แต้มไม่พอ");return}k.value=!0;try{const r={images:h.value,privacy_settings:ie.value,comments_disabled:de.value};if(U.value==="poll"){if(!ee.value.trim()){C.warning("กรุณาระบุคำถามสำหรับโพล"),k.value=!1;return}if(N.value.some(a=>!a.trim())){C.warning("กรุณาระบุตัวเลือกให้ครบถ้วน"),k.value=!1;return}r.is_poll=!0,r.poll_title=ee.value,r.poll_options=N.value.filter(a=>a.trim()),r.poll_duration=oe.value,r.poll_points_pool=W.value,r.poll_max_votes=ue.value}V.value&&(r.location_name=V.value),D.value&&(r.feeling=D.value.name,r.feeling_icon=D.value.icon),E.value&&(r.activity_type=E.value.name,Q.value&&(r.activity_text=Q.value)),$.value&&h.value.length===0&&(r.background_color=$.value.background_color,r.background_gradient=$.value.background_gradient,r.text_color=$.value.text_color),I.value.length>0&&(r.tagged_users=I.value.map(a=>a.id)),R.value&&(r.scheduled_at=R.value);let e;y.context==="academy"&&y.contextId?e=await g(v.value,r):y.context==="course"&&y.contextId?e=await s(v.value,r):e=await xe(v.value,r),e.success?(j("post-created",e.activity||e.post),Ce(),C.toast("สร้างโพสต์สำเร็จ!","success")):C.error(e.message||"ไม่สามารถสร้างโพสต์ได้")}catch(r){console.error("Error creating post:",r);let e="เกิดข้อผิดพลาด กรุณาลองใหม่อีกครั้ง";r?.data?.message&&(e=r.data.message),C.error(e)}finally{k.value=!1}}},Ce=()=>{v.value="",h.value=[],V.value="",D.value=null,E.value=null,Q.value="",$.value=null,I.value=[],R.value="",de.value=!1,G.value=!1,H.value=!1,ae.value=!1,Y.value=!1,re.value=!1,le.value=!1,se.value=!1,U.value="status",ee.value="",N.value=["",""],oe.value=24,W.value=12e3,ue.value=100,pe()},Oe=r=>{const e=Array.from(r.target.files);h.value=[...h.value,...e].slice(0,20),e.length>0&&($.value=null),r.target.value=""},Ne=r=>{h.value.splice(r,1)},$e=()=>{L.value?.click()},Be=r=>{D.value=r,G.value=!1},Me=r=>{E.value=r,H.value=!1},Le=r=>{$.value?.id===r.id?$.value=null:($.value=r,h.value=[])};let be=null;const ze=async()=>{if(!J.value.trim()){Z.value=[],ge.value=!1;return}be&&clearTimeout(be),be=setTimeout(async()=>{ne.value=!0;try{const r=await F(`/api/friends/search?q=${encodeURIComponent(J.value)}`);r.success&&(Z.value=r.data||[])}catch(r){console.error("Error searching friends:",r),Z.value=[]}finally{ne.value=!1,ge.value=!0}},300)},Re=r=>{I.value.find(e=>e.id===r.id)||I.value.push(r),J.value="",Z.value=[]},Pe=r=>{I.value=I.value.filter(e=>e.id!==r)};return(r,e)=>(n(),te(Ze,{to:"body"},[u(Ye,{name:"modal"},{default:He(()=>[b.show?(n(),i("div",{key:0,class:"fixed inset-0 bg-black/50 z-50 flex items-start justify-center pt-10 md:pt-16 overflow-y-auto backdrop-blur-sm",onClick:Se(pe,["self"])},[t("div",it,[t("div",dt,[t("div",ut,[t("div",ct,[u(o(d),{icon:b.context==="academy"?"fluent:building-24-regular":b.context==="course"?"fluent:book-24-regular":"fluent:calendar-ltr-24-regular",class:"w-5 h-5 text-vikinger-purple"},null,8,["icon"]),t("h2",gt,x(ye.value),1)]),t("button",{onClick:pe,class:"p-2 hover:bg-gray-100 dark:hover:bg-vikinger-dark-200 rounded-full"},[u(o(d),{icon:"fluent:dismiss-24-regular",class:"w-6 h-6 text-gray-500"})])]),t("div",vt,[t("div",pt,[t("img",{src:l.value,class:"w-10 h-10 rounded-full object-cover ring-2 ring-vikinger-purple/20"},null,8,bt),t("div",kt,[t("div",mt,x(o(P).user?.name),1),t("div",ft,[t("button",{onClick:e[0]||(e[0]=a=>se.value=!se.value),class:"flex items-center gap-1 text-[11px] font-bold text-gray-500 dark:text-gray-400 hover:text-vikinger-purple uppercase tracking-wider transition-colors"},[u(o(d),{icon:he.value.icon,class:"w-2.5 h-2.5"},null,8,["icon"]),t("span",null,x(he.value.label),1),u(o(d),{icon:"mdi:chevron-down",class:"w-3 h-3"})]),V.value?(n(),i("span",xt,"|")):m("",!0),V.value?(n(),i("div",yt,[u(o(d),{icon:"mdi:map-marker",class:"w-2.5 h-2.5"}),t("span",ht,x(V.value),1)])):m("",!0)])])]),t("div",_t,[(n(),i(B,null,M(Ee,a=>t("button",{key:a.id,onClick:p=>U.value=a.id,class:S(["flex-1 pb-3 text-sm font-bold uppercase tracking-wider transition-all relative flex items-center justify-center gap-2",U.value===a.id?a.id==="status"?"text-blue-600":"text-amber-600":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"])},[u(o(d),{icon:a.id==="status"?"fluent:edit-24-regular":"fluent:poll-24-regular",class:"w-5 h-5"},null,8,["icon"]),ce(" "+x(a.label)+" ",1),U.value===a.id?(n(),i("div",{key:0,class:S(["absolute bottom-0 left-0 w-full h-1 rounded-full",a.id==="status"?"bg-blue-600":"bg-amber-600"])},null,2)):m("",!0)],10,wt)),64))]),O(t("div",null,[t("input",{type:"file",ref_key:"imageInput",ref:L,class:"hidden",accept:"image/*",multiple:"",onChange:Oe},null,544),se.value?(n(),i("div",Ct,[t("div",$t,[(n(),i(B,null,M(ve,a=>t("button",{key:a.value,onClick:p=>{ie.value=a.value,se.value=!1},class:S(["w-full flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white dark:hover:bg-vikinger-dark-100",{"bg-white dark:bg-vikinger-dark-100":ie.value===a.value}])},[u(o(d),{icon:a.icon,class:S(["w-5 h-5",a.color])},null,8,["icon","class"]),t("span",St,x(a.label),1)],10,Pt)),64))]),t("label",Tt,[O(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=a=>de.value=a),class:"rounded text-vikinger-purple"},null,512),[[Je,de.value]]),e[26]||(e[26]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"ปิดการแสดงความคิดเห็น",-1))])])):m("",!0),D.value||E.value||V.value||I.value.length>0?(n(),i("div",jt,[_e.value?(n(),i("span",Ft,[ce(x(_e.value)+" ",1),t("button",{onClick:e[2]||(e[2]=a=>{D.value=null,E.value=null,Q.value=""}),class:"hover:text-red-500"},[u(o(d),{icon:"mdi:close",class:"w-3 h-3"})])])):m("",!0),V.value?(n(),i("span",Et,[u(o(d),{icon:"mdi:map-marker",class:"w-3 h-3"}),ce(" "+x(V.value)+" ",1),t("button",{onClick:e[3]||(e[3]=a=>{V.value="",Y.value=!1}),class:"hover:text-red-500"},[u(o(d),{icon:"mdi:close",class:"w-3 h-3"})])])):m("",!0),(n(!0),i(B,null,M(I.value,a=>(n(),i("span",{key:a.id,class:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm"},[ce(x(a.name)+" ",1),t("button",{onClick:p=>Pe(a.id),class:"hover:text-red-500"},[u(o(d),{icon:"mdi:close",class:"w-3 h-3"})],8,It)]))),128))])):m("",!0),t("div",{class:S(["rounded-lg mb-4 min-h-[120px] p-4 transition-all",$.value?"":"bg-gray-50 dark:bg-vikinger-dark-200"]),style:ke(Ae.value)},[O(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>v.value=a),placeholder:"คุณกำลังคิดอะไรอยู่?",rows:$.value?5:3,class:S(["w-full bg-transparent border-none outline-none resize-none placeholder-gray-400",$.value?"text-center text-lg font-medium":"text-gray-800 dark:text-white"]),style:ke($.value?{color:$.value.text_color}:{}),onKeydown:We(Se(we,["ctrl"]),["enter"]),disabled:k.value},null,46,Ut),[[K,v.value]])],6),q.value.length>0?(n(),i("div",At,[t("div",Vt,[(n(!0),i(B,null,M(q.value,(a,p)=>(n(),i("div",{key:p,class:"relative group"},[t("img",{src:a.url,class:"w-32 h-32 object-cover rounded-lg border border-gray-200 dark:border-vikinger-dark-50/30"},null,8,Dt),t("button",{onClick:w=>Ne(p),class:"absolute -top-1 -right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center shadow-sm md:opacity-0 md:group-hover:opacity-100 transition-opacity"},[u(o(d),{icon:"mdi:close",class:"w-4 h-4"})],8,Ot)]))),128)),q.value.length<20?(n(),i("button",{key:0,onClick:$e,class:"w-32 h-32 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg flex items-center justify-center hover:border-vikinger-purple hover:bg-vikinger-purple/5 transition-all"},[u(o(d),{icon:"mdi:plus",class:"w-8 h-8 text-gray-400"})])):m("",!0)]),t("p",Nt,x(q.value.length)+"/20 รูป",1)])):m("",!0),ae.value&&q.value.length===0?(n(),i("div",Bt,[t("div",Mt,[e[27]||(e[27]=t("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"เลือกพื้นหลัง",-1)),t("button",{onClick:e[5]||(e[5]=a=>ae.value=!1)},[u(o(d),{icon:"mdi:close",class:"w-5 h-5 text-gray-500"})])]),t("div",Lt,[t("button",{onClick:e[6]||(e[6]=a=>$.value=null),class:S(["w-10 h-10 rounded-lg border-2 flex items-center justify-center",$.value?"border-gray-300":"border-vikinger-purple"])},[u(o(d),{icon:"mdi:format-clear",class:"w-5 h-5 text-gray-500"})],2),(n(!0),i(B,null,M(o(X),a=>(n(),i("button",{key:a.id,onClick:p=>Le(a),class:S(["w-10 h-10 rounded-lg border-2 transition-all",$.value?.id===a.id?"border-vikinger-purple scale-110":"border-transparent"]),style:ke({background:a.background_gradient||a.background_color})},null,14,zt))),128))])])):m("",!0),G.value?(n(),i("div",Rt,[t("div",Kt,[e[28]||(e[28]=t("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"คุณรู้สึกอย่างไร?",-1)),t("button",{onClick:e[7]||(e[7]=a=>G.value=!1)},[u(o(d),{icon:"mdi:close",class:"w-5 h-5 text-gray-500"})])]),(n(!0),i(B,null,M(Ve.value,(a,p)=>(n(),i("div",{key:p,class:"mb-3"},[t("div",Qt,x(p),1),t("div",qt,[(n(!0),i(B,null,M(a,w=>(n(),i("button",{key:w.id,onClick:Ke=>Be(w),class:S(["flex flex-col items-center p-2 rounded-lg hover:bg-white dark:hover:bg-vikinger-dark-100",{"bg-vikinger-purple/10 ring-1 ring-vikinger-purple":D.value?.id===w.id}])},[t("span",Ht,x(w.icon),1),t("span",Jt,x(w.name_th||w.name),1)],10,Gt))),128))])]))),128))])):m("",!0),H.value?(n(),i("div",Wt,[t("div",Xt,[e[29]||(e[29]=t("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"คุณกำลังทำอะไร?",-1)),t("button",{onClick:e[8]||(e[8]=a=>H.value=!1)},[u(o(d),{icon:"mdi:close",class:"w-5 h-5 text-gray-500"})])]),(n(!0),i(B,null,M(De.value,(a,p)=>(n(),i("div",{key:p,class:"mb-3"},[t("div",Yt,x(p),1),t("div",Zt,[(n(!0),i(B,null,M(a,w=>(n(),i("button",{key:w.id,onClick:Ke=>Me(w),class:S(["flex items-center gap-2 p-2 rounded-lg hover:bg-white dark:hover:bg-vikinger-dark-100 text-left",{"bg-vikinger-purple/10 ring-1 ring-vikinger-purple":E.value?.id===w.id}])},[t("span",ta,x(w.icon),1),t("span",aa,x(w.name_th||w.name),1)],10,ea))),128))])]))),128)),E.value?(n(),i("div",ra,[O(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>Q.value=a),type:"text",placeholder:`${E.value.name_th||E.value.name}...`,class:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-vikinger-dark-50/30 bg-white dark:bg-vikinger-dark-100 text-gray-800 dark:text-white text-sm"},null,8,la),[[K,Q.value]])])):m("",!0)])):m("",!0),Y.value?(n(),i("div",sa,[t("div",na,[e[30]||(e[30]=t("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"เพิ่มสถานที่",-1)),t("button",{onClick:e[10]||(e[10]=a=>Y.value=!1)},[u(o(d),{icon:"mdi:close",class:"w-5 h-5 text-gray-500"})])]),t("div",oa,[u(o(d),{icon:"mdi:map-marker",class:"w-5 h-5 text-red-500"}),O(t("input",{"onUpdate:modelValue":e[11]||(e[11]=a=>V.value=a),type:"text",placeholder:"ค้นหาหรือพิมพ์สถานที่...",class:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-vikinger-dark-50/30 bg-white dark:bg-vikinger-dark-100 text-gray-800 dark:text-white text-sm"},null,512),[[K,V.value]])])])):m("",!0),re.value?(n(),i("div",ia,[t("div",da,[e[31]||(e[31]=t("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"แท็กเพื่อน",-1)),t("button",{onClick:e[12]||(e[12]=a=>re.value=!1)},[u(o(d),{icon:"mdi:close",class:"w-5 h-5 text-gray-500"})])]),I.value.length>0?(n(),i("div",ua,[(n(!0),i(B,null,M(I.value,a=>(n(),i("div",{key:a.id,class:"flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 rounded-full"},[t("img",{src:o(_)(a),class:"w-5 h-5 rounded-full"},null,8,ca),t("span",ga,x(a.name),1),t("button",{onClick:p=>Pe(a.id),class:"ml-1 text-blue-500 hover:text-red-500"},[u(o(d),{icon:"mdi:close",class:"w-3 h-3"})],8,va)]))),128))])):m("",!0),t("div",pa,[u(o(d),{icon:"mdi:magnify",class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),O(t("input",{"onUpdate:modelValue":e[13]||(e[13]=a=>J.value=a),onInput:ze,type:"text",placeholder:"พิมพ์ชื่อเพื่อนเพื่อค้นหา...",class:"w-full pl-9 pr-10 py-2 rounded-lg border border-gray-200 dark:border-vikinger-dark-50/30 bg-white dark:bg-vikinger-dark-100 text-gray-800 dark:text-white text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 transition-all"},null,544),[[K,J.value]]),ne.value?(n(),i("div",ba,[...e[32]||(e[32]=[t("div",{class:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"},null,-1)])])):m("",!0)])])):m("",!0),t("div",ka,[ne.value?(n(),i("div",ma,[...e[33]||(e[33]=[t("div",{class:"inline-flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400"},[t("div",{class:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),t("span",null,"กำลังค้นหา...")],-1)])])):m("",!0),Z.value.length>0?(n(),i("div",fa,[(n(!0),i(B,null,M(Z.value,a=>(n(),i("button",{key:a.id,onClick:p=>Re(a),class:S(["w-full flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-vikinger-dark-200 transition-colors",{"opacity-50 cursor-not-allowed":I.value.find(p=>p.id===a.id)}]),disabled:!!I.value.find(p=>p.id===a.id)},[t("img",{src:o(_)(a),class:"w-8 h-8 rounded-full"},null,8,ya),t("div",ha,[t("span",_a,x(a.name),1),a.username?(n(),i("span",wa,"@"+x(a.username),1)):m("",!0)]),I.value.find(p=>p.id===a.id)?(n(),te(o(d),{key:0,icon:"mdi:check",class:"w-5 h-5 text-green-500"})):(n(),te(o(d),{key:1,icon:"mdi:plus",class:"w-5 h-5 text-blue-500"}))],10,xa))),128))])):ge.value&&J.value&&!ne.value?(n(),i("div",Ca,[u(o(d),{icon:"mdi:account-search",class:"w-8 h-8 mx-auto mb-1 text-gray-400"}),t("p",null,'ไม่พบเพื่อนที่ชื่อ "'+x(J.value)+'"',1)])):m("",!0)]),le.value?(n(),i("div",$a,[t("div",Pa,[e[34]||(e[34]=t("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"ตั้งเวลาโพสต์",-1)),t("button",{onClick:e[14]||(e[14]=a=>{le.value=!1,R.value=""})},[u(o(d),{icon:"mdi:close",class:"w-5 h-5 text-gray-500"})])]),O(t("input",{"onUpdate:modelValue":e[15]||(e[15]=a=>R.value=a),type:"datetime-local",class:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-vikinger-dark-50/30 bg-white dark:bg-vikinger-dark-100 text-gray-800 dark:text-white text-sm"},null,512),[[K,R.value]])])):m("",!0),t("div",Sa,[t("button",{onClick:$e,class:"flex items-center gap-2 px-3 py-2 rounded-lg bg-white dark:bg-vikinger-dark-200 border border-gray-200 dark:border-vikinger-dark-50/30 hover:border-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 transition-all",disabled:k.value},[u(o(d),{icon:"mdi:image-multiple",class:"w-5 h-5 text-green-500"}),e[35]||(e[35]=t("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"รูปภาพ",-1))],8,Ta),t("button",{onClick:e[16]||(e[16]=a=>{G.value=!G.value,H.value=!1}),class:S(["flex items-center gap-2 px-3 py-2 rounded-lg bg-white dark:bg-vikinger-dark-200 border border-gray-200 dark:border-vikinger-dark-50/30 hover:border-yellow-400 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-all",{"border-yellow-400 bg-yellow-50 dark:bg-yellow-900/20":D.value}]),disabled:k.value},[u(o(d),{icon:"mdi:emoticon-happy",class:"w-5 h-5 text-yellow-500"}),e[36]||(e[36]=t("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"ความรู้สึก",-1))],10,ja),t("button",{onClick:e[17]||(e[17]=a=>{H.value=!H.value,G.value=!1}),class:S(["flex items-center gap-2 px-3 py-2 rounded-lg bg-white dark:bg-vikinger-dark-200 border border-gray-200 dark:border-vikinger-dark-50/30 hover:border-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-all",{"border-orange-400 bg-orange-50 dark:bg-orange-900/20":E.value}]),disabled:k.value},[u(o(d),{icon:"mdi:run",class:"w-5 h-5 text-orange-500"}),e[37]||(e[37]=t("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"กิจกรรม",-1))],10,Fa),t("button",{onClick:e[18]||(e[18]=a=>Y.value=!Y.value),class:S(["flex items-center gap-2 px-3 py-2 rounded-lg bg-white dark:bg-vikinger-dark-200 border border-gray-200 dark:border-vikinger-dark-50/30 hover:border-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",{"border-red-400 bg-red-50 dark:bg-red-900/20":V.value}]),disabled:k.value},[u(o(d),{icon:"mdi:map-marker",class:"w-5 h-5 text-red-500"}),e[38]||(e[38]=t("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"สถานที่",-1))],10,Ea),t("button",{onClick:e[19]||(e[19]=a=>re.value=!re.value),class:S(["flex items-center gap-2 px-3 py-2 rounded-lg bg-white dark:bg-vikinger-dark-200 border border-gray-200 dark:border-vikinger-dark-50/30 hover:border-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all",{"border-blue-400 bg-blue-50 dark:bg-blue-900/20":I.value.length>0}]),disabled:k.value},[u(o(d),{icon:"mdi:account-multiple-plus",class:"w-5 h-5 text-blue-500"}),e[39]||(e[39]=t("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"แท็กเพื่อน",-1))],10,Ia),q.value.length===0?(n(),i("button",{key:0,onClick:e[20]||(e[20]=a=>ae.value=!ae.value),class:S(["flex items-center gap-2 px-3 py-2 rounded-lg bg-white dark:bg-vikinger-dark-200 border border-gray-200 dark:border-vikinger-dark-50/30 hover:border-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-all",{"border-purple-400 bg-purple-50 dark:bg-purple-900/20":$.value}]),disabled:k.value},[u(o(d),{icon:"mdi:palette",class:"w-5 h-5 text-purple-500"}),e[40]||(e[40]=t("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"พื้นหลัง",-1))],10,Ua)):m("",!0),t("button",{onClick:e[21]||(e[21]=a=>le.value=!le.value),class:S(["flex items-center gap-2 px-3 py-2 rounded-lg bg-white dark:bg-vikinger-dark-200 border border-gray-200 dark:border-vikinger-dark-50/30 hover:border-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all",{"border-indigo-400 bg-indigo-50 dark:bg-indigo-900/20":R.value}]),disabled:k.value},[u(o(d),{icon:"mdi:clock-outline",class:"w-5 h-5 text-indigo-500"}),e[41]||(e[41]=t("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"ตั้งเวลา",-1))],10,Aa)])],512),[[Te,U.value==="status"]]),O(t("div",Va,[t("div",Da,[t("div",Oa,[t("div",Na,[u(o(d),{icon:"fluent:poll-24-regular",class:"w-5 h-5 text-amber-600"}),e[42]||(e[42]=t("span",{class:"font-medium text-amber-700 dark:text-amber-300"},"รายละเอียดโพล",-1))])]),O(t("input",{"onUpdate:modelValue":e[22]||(e[22]=a=>ee.value=a),type:"text",placeholder:"คำถามโพล...",class:"w-full px-3 py-2 mb-3 rounded-lg border border-amber-200 dark:border-amber-700/50 bg-white dark:bg-vikinger-dark-200 text-gray-800 dark:text-white"},null,512),[[K,ee.value]]),t("div",Ba,[(n(!0),i(B,null,M(N.value,(a,p)=>(n(),i("div",{key:p,class:"flex items-center gap-3 p-3 bg-white dark:bg-vikinger-dark-100 rounded-xl border border-gray-200 dark:border-vikinger-dark-50/30"},[t("div",Ma,x(p+1),1),O(t("input",{"onUpdate:modelValue":w=>N.value[p]=w,type:"text",placeholder:`ตัวเลือกที่ ${p+1}`,class:"flex-1 bg-transparent border-none outline-none text-gray-800 dark:text-white text-sm"},null,8,La),[[K,N.value[p]]]),N.value.length>2?(n(),i("button",{key:0,onClick:w=>Ue(p),class:"p-1 text-gray-400 hover:text-red-500 transition-colors"},[u(o(d),{icon:"fluent:dismiss-24-regular",class:"w-5 h-5"})],8,za)):m("",!0)]))),128))]),N.value.length<10?(n(),i("button",{key:0,onClick:Ie,class:"w-full h-11 border-2 border-dashed border-gray-200 dark:border-vikinger-dark-50/20 rounded-xl flex items-center justify-center gap-2 text-sm text-gray-500 hover:border-vikinger-cyan hover:text-vikinger-cyan transition-all mb-4"},[u(o(d),{icon:"fluent:add-24-regular",class:"w-5 h-5"}),e[43]||(e[43]=t("span",null,"เพิ่มตัวเลือก (สูงสุด 10 ตัวเลือก)",-1))])):m("",!0),t("div",Ra,[t("label",Ka,[u(o(d),{icon:"fluent:clock-24-regular",class:"w-4 h-4"}),e[45]||(e[45]=t("span",null,"ระยะเวลาโพล:",-1)),O(t("select",{"onUpdate:modelValue":e[23]||(e[23]=a=>oe.value=a),class:"px-2 py-1 rounded border border-gray-200 dark:border-vikinger-dark-50/30 bg-white dark:bg-vikinger-dark-100 text-sm"},[...e[44]||(e[44]=[t("option",{value:1},"1 ชั่วโมง",-1),t("option",{value:6},"6 ชั่วโมง",-1),t("option",{value:12},"12 ชั่วโมง",-1),t("option",{value:24},"1 วัน",-1),t("option",{value:72},"3 วัน",-1),t("option",{value:168},"1 สัปดาห์",-1)])],512),[[Xe,oe.value]])])])]),t("div",Qa,[t("div",null,[e[46]||(e[46]=t("label",{class:"block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider"}," แต้มรางวัลรวม ",-1)),t("div",qa,[t("div",Ga,[u(o(d),{icon:"mdi:piggy-bank",class:"w-4 h-4"})]),O(t("input",{"onUpdate:modelValue":e[24]||(e[24]=a=>W.value=a),type:"number",min:"0",step:"100",class:"w-full pl-9 pr-3 py-2.5 bg-gray-50 dark:bg-vikinger-dark-200 border border-gray-200 dark:border-vikinger-dark-50/10 rounded-xl text-sm focus:ring-1 focus:ring-vikinger-cyan outline-none",placeholder:"0"},null,512),[[K,W.value,void 0,{number:!0}]])])]),t("div",null,[e[47]||(e[47]=t("label",{class:"block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider"}," จำนวนคนโหวตสูงสุด ",-1)),t("div",Ha,[t("div",Ja,[u(o(d),{icon:"mdi:account-group",class:"w-4 h-4"})]),O(t("input",{"onUpdate:modelValue":e[25]||(e[25]=a=>ue.value=a),type:"number",min:"1",class:"w-full pl-9 pr-3 py-2.5 bg-gray-50 dark:bg-vikinger-dark-200 border border-gray-200 dark:border-vikinger-dark-50/10 rounded-xl text-sm focus:ring-1 focus:ring-vikinger-cyan outline-none",placeholder:"100"},null,512),[[K,ue.value,void 0,{number:!0}]])])])]),t("div",Wa,[t("div",Xa,[u(o(d),{icon:"fluent:info-24-regular",class:"w-6 h-6 text-vikinger-cyan flex-shrink-0 mt-0.5"}),t("div",Ya,[e[52]||(e[52]=t("p",{class:"font-bold text-vikinger-cyan mb-2"},"สรุปแต้มที่ต้องใช้:",-1)),t("ul",Za,[e[50]||(e[50]=t("li",{class:"flex justify-between items-center text-gray-600 dark:text-gray-400"},[t("span",null,"ค่าธรรมเนียมสร้างโพล"),t("span",{class:"font-semibold"},"180 แต้ม")],-1)),t("li",er,[e[48]||(e[48]=t("span",null,"แต้มรางวัลสำหรับคนโหวต",-1)),t("span",tr,x(W.value)+" แต้ม",1)]),t("li",ar,[e[49]||(e[49]=t("span",null,"รวมทั้งหมด",-1)),t("span",null,x(180+W.value)+" แต้ม",1)])]),t("div",rr,[u(o(d),{icon:"fluent:gift-24-regular",class:"w-4 h-4"}),e[51]||(e[51]=t("span",null,"ผู้ร่วมโหวตจะได้รับแต้มรางวัลโดยอัตโนมัติ!",-1))]),o(P).user&&o(P).user.pp<180+W.value?(n(),i("p",lr," ! คุณมีแต้มไม่เพียงพอ (ปัจจุบัน "+x(o(P).user.pp)+" แต้ม) ",1)):m("",!0)])])])],512),[[Te,U.value==="poll"]]),t("div",sr,[t("button",{onClick:we,disabled:k.value||U.value==="status"&&!v.value.trim()&&q.value.length===0||U.value==="poll"&&!ee.value.trim(),class:"w-full py-3 px-4 bg-gradient-vikinger text-white font-semibold rounded-lg hover:shadow-vikinger transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[k.value?(n(),te(o(d),{key:0,icon:"mdi:loading",class:"w-5 h-5 animate-spin"})):U.value==="poll"?(n(),te(o(d),{key:1,icon:"mdi:poll",class:"w-5 h-5"})):R.value?(n(),te(o(d),{key:2,icon:"mdi:clock-outline",class:"w-5 h-5"})):m("",!0),t("span",null,x(k.value?U.value==="poll"?"กำลังสร้างโพล...":"กำลังโพสต์...":U.value==="poll"?"สร้างโพล":R.value?"ตั้งเวลาโพสต์":"โพสต์"),1)],8,nr)])])])])])):m("",!0)]),_:1})]))}},ir=qe(or,[["__scopeId","data-v-b7df1785"]]),dr={class:"contents"},vr={__name:"CreatePostBox",props:{context:{type:String,default:"newsfeed",validator:b=>["newsfeed","academy","course"].includes(b)},contextId:{type:Number,default:null},contextName:{type:String,default:""}},emits:["post-created"],setup(b,{emit:T}){const y=T,j=c(!1),F=c("status"),P=(f="status")=>{F.value=f,j.value=!0},C=()=>{j.value=!1},_=f=>{y("post-created",f),C()};return(f,A)=>(n(),i("div",dr,[u(ot,{onOpenModal:P}),u(ir,{show:j.value,"initial-tab":F.value,context:b.context,"context-id":b.contextId,"context-name":b.contextName,onClose:C,onPostCreated:_},null,8,["show","initial-tab","context","context-id","context-name"])]))}};export{vr as _,at as u};
