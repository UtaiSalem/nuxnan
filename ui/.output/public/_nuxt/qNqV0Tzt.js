import{_ as de,l as ie,p as ue,v as ge,r as l,n as z,z as ce,g as E,w as X,f as be,o,a as e,$ as y,e as k,aa as U,c as i,T as F,j as m,b as n,u,I as c,d as O,F as N,k as q,t as b,ab as G,aG as H,K as pe}from"./CHs-R6Sv.js";import me from"./BLVhfM2G.js";import{S as w}from"./BQxta0Da.js";import{_ as ve}from"./D2-a79uF.js";import"./DROJGjoa.js";import"./DJsVOgax.js";import"./Cpj98o6Y.js";import"./C6kxWCFL.js";import"./3QJUtkDr.js";import"./o5TVmNQv.js";const xe={class:"relative rounded-2xl overflow-hidden shadow-lg mb-8 bg-gradient-to-r from-blue-600 to-indigo-700 h-48 flex items-center px-8"},fe={class:"relative z-10 flex items-center gap-6"},ye={class:"p-4 bg-white/10 backdrop-blur-sm rounded-2xl border border-white/20"},ke={class:"max-w-7xl mx-auto pb-20"},we={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start"},he={class:"lg:col-span-2 space-y-8"},_e={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-6 md:p-8"},Se={class:"space-y-6"},Me={class:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform"},Ce={key:1,class:"relative rounded-2xl overflow-hidden shadow-md group"},De={key:0,class:"aspect-video bg-black flex items-center justify-center"},Ve=["src"],je=["src"],$e={class:"relative"},Ie={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-500"},Be={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-6 md:p-8"},Ue={class:"grid md:grid-cols-2 gap-6"},Fe=["value"],Te=["value"],Le=["value"],Pe={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-6 md:p-8"},Xe={class:"flex p-1 bg-gray-100 dark:bg-gray-900 rounded-xl mb-6"},Ae={key:0,class:"space-y-6"},We={class:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-xl border border-gray-200 dark:border-gray-600 flex items-start gap-4"},Re={class:"grid md:grid-cols-2 gap-6"},ze={key:1,class:"relative rounded-xl overflow-hidden shadow-sm border border-gray-200 inline-block group"},Ee=["src"],Oe={class:"absolute bottom-0 inset-x-0 bg-black/50 text-white text-[10px] px-2 py-0.5 truncate"},Ne={key:1,class:"bg-teal-50 dark:bg-teal-900/20 p-4 rounded-xl border border-teal-200 dark:border-teal-700 text-center"},qe={class:"lg:col-span-1"},Ge={class:"sticky top-24 space-y-6"},He={class:"bg-gray-100 dark:bg-gray-800/50 rounded-2xl p-4 border border-dashed border-gray-300 dark:border-gray-600"},Ke={class:"transform scale-90 sm:scale-100 origin-top bg-white rounded-xl shadow-lg pointer-events-none"},Je={class:"mt-2 text-center"},Ye={class:"text-sm font-bold text-gray-800 dark:text-white truncate px-2"},Qe={class:"text-xs text-gray-500 dark:text-gray-400 truncate px-4"},Ze={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden"},et={class:"p-6"},tt={class:"space-y-3 text-sm"},at={class:"flex justify-between text-gray-600 dark:text-gray-300"},rt={class:"font-medium"},lt={class:"flex justify-between text-gray-600 dark:text-gray-300"},st={class:"font-medium"},ot={class:"flex justify-between items-end"},nt={class:"text-right"},dt={class:"text-3xl font-bold text-blue-600"},it={class:"p-4 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-100 dark:border-gray-700"},ut=["disabled"],gt={key:1},ct={__name:"create",setup(bt){const h=ie(),K=ue().public.apiBase,J=ge(),C=l(!1),D=l(""),_=l(""),V=l(""),d=l(null),A=l(null),j=l(!1),s=l(1e3),S=l(5),M=l(new Date),v=l({hours:new Date().getHours(),minutes:new Date().getMinutes()}),x=l(!1),W=l(null),p=l(null),$=l(!1),I=l(0),T=[100,500,1e3,2e3,5e3,1e4],Y=[1,3,5,10,15,30],Q=z(()=>({advertiser:h.user,media_image:d.value?.url||"https://via.placeholder.com/300?text=Ad+Image+Preview",media_type:d.value?.type,total_views:s.value,remaining_views:s.value})),R=z(()=>h.user?.wallet||0);function B(){s.value<0&&(s.value=0),I.value=s.value*S.value*64/684}const Z=()=>A.value.click(),ee=r=>{r.target.files&&r.target.files[0]&&(d.value={file:r.target.files[0],url:URL.createObjectURL(r.target.files[0]),type:r.target.files[0].type})},te=r=>{j.value=!1;let t=[...r.dataTransfer.items].filter(g=>g.kind==="file").map(g=>g.getAsFile());t.length>0&&(d.value={file:t[0],url:H(t[0]),type:t[0].type})},ae=()=>d.value=null,re=()=>W.value.click(),le=r=>{r.target.files&&r.target.files[0]&&(p.value={file:r.target.files[0],url:URL.createObjectURL(r.target.files[0])})},se=r=>{$.value=!1;let t=[...r.dataTransfer.items].filter(g=>g.kind==="file").map(g=>g.getAsFile());t.length>0&&(p.value={file:t[0],url:H(t[0])})},oe=()=>p.value=null;async function ne(){if(!h.isAuthenticated){w.fire("Error","Please login first","error");return}if(!d.value){w.fire("แจ้งเตือน","กรุณาอัปโหลดรูปภาพโฆษณา","warning");return}if(!x.value&&!p.value){w.fire("แจ้งเตือน","กรุณาอัปโหลดสลิปการโอนเงิน หรือเลือกชำระด้วย Wallet","warning");return}if(x.value&&R.value<I.value){w.fire("แจ้งเตือน","ยอดเงินใน Wallet ไม่เพียงพอ","error");return}C.value=!0;const r=new FormData;r.append("advertiser_id",h.user?.id),r.append("title",D.value),_.value&&r.append("description",_.value),V.value&&r.append("media_link",V.value),r.append("amounts",I.value),r.append("duration",S.value),r.append("total_views",s.value);const t=M.value.getFullYear(),g=String(M.value.getMonth()+1).padStart(2,"0"),a=String(M.value.getDate()).padStart(2,"0");r.append("transfer_date",`${t}-${g}-${a}`);let L=0,P=0;if(v.value)if(typeof v.value=="string"){const f=v.value.split(":");L=f[0],P=f[1]}else L=v.value.hours??0,P=v.value.minutes??0;r.append("transfer_time",`${L}:${P}`),p.value&&r.append("slip",p.value.file),d.value&&r.append("media_image",d.value.file);try{const f=await $fetch(`${K}/api/advertises`,{method:"POST",body:r,headers:{Authorization:`Bearer ${h.token}`}});if(f.success)w.fire({title:"สำเร็จ!",text:"สร้างโฆษณาเรียบร้อยแล้ว",icon:"success",confirmButtonText:"ตกลง",confirmButtonColor:"#10B981"}).then(()=>{pe("/earn/advertise")});else throw new Error(f.message||"Unknown Error")}catch(f){w.fire("เกิดข้อผิดพลาด",f.message||"Error occurred","error")}finally{C.value=!1}}return ce(()=>{B()}),(r,t)=>{const g=be("VueDatePicker");return o(),E(me,null,{hero:X(()=>[e("div",xe,[t[16]||(t[16]=e("div",{class:"absolute inset-0 opacity-20 bg-[url('/storage/images/banner/banner-bg.png')] bg-cover bg-center"},null,-1)),e("div",fe,[e("div",ye,[n(u(c),{icon:"solar:megaphone-bold-duotone",class:"w-12 h-12 text-white"})]),t[15]||(t[15]=e("div",null,[e("h1",{class:"text-3xl md:text-4xl font-bold text-white mb-2"},"ลงโฆษณา"),e("p",{class:"text-blue-100 text-lg"},"โปรโมทสินค้าและบริการของคุณให้ผู้ใช้นับหมื่นเห็นได้ง่ายๆ")],-1))])])]),default:X(()=>[e("div",ke,[e("div",we,[e("div",he,[e("section",_e,[t[23]||(t[23]=e("div",{class:"flex items-center gap-3 mb-6"},[e("span",{class:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold"},"1"),e("h2",{class:"text-xl font-bold text-gray-800 dark:text-white"},"รายละเอียดโฆษณา")],-1)),e("div",Se,[e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[k("หัวข้อโฆษณา / ชื่อสินค้า "),e("span",{class:"text-red-500"},"*")],-1)),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>D.value=a),type:"text",placeholder:"เช่น โปรโมชั่นพิเศษลด 50%...",class:"w-full rounded-xl border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white transition-all shadow-sm",required:""},null,512),[[U,D.value]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"รายละเอียด (ไม่บังคับ)",-1)),y(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=a=>_.value=a),rows:"3",placeholder:"อธิบายจุดเด่นของสินค้าหรือบริการ...",class:"w-full rounded-xl border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white transition-all shadow-sm"},null,512),[[U,_.value]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[k("รูปภาพหรือวิดีโอโฆษณา "),e("span",{class:"text-red-500"},"*")],-1)),d.value?(o(),i("div",Ce,[e("button",{onClick:m(ae,["stop"]),class:"absolute top-3 right-3 bg-red-500 hover:bg-red-600 text-white p-2 rounded-full shadow-lg z-20 transition-transform hover:scale-110"},[n(u(c),{icon:"solar:trash-bin-bold"})]),d.value.type&&d.value.type.startsWith("video/")?(o(),i("div",De,[e("video",{src:d.value.url,controls:"",class:"max-h-[400px] w-full"},null,8,Ve)])):(o(),i("img",{key:1,src:d.value.url,class:"w-full object-contain max-h-[400px] bg-gray-100 dark:bg-gray-900"},null,8,je))])):(o(),i("div",{key:0,onClick:Z,onDragover:t[2]||(t[2]=m(a=>j.value=!0,["prevent"])),onDragleave:t[3]||(t[3]=m(a=>j.value=!1,["prevent"])),onDrop:m(te,["prevent"]),class:F([{"border-blue-500 bg-blue-50":j.value},"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-2xl p-8 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer text-center group"])},[e("div",Me,[n(u(c),{icon:"solar:cloud-upload-bold-duotone",class:"w-8 h-8"})]),t[19]||(t[19]=e("p",{class:"text-gray-900 dark:text-white font-medium mb-1"},"คลิกเพื่ออัปโหลด หรือลากไฟล์มาวางที่นี่",-1)),t[20]||(t[20]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"รองรับ JPG, PNG, MP4, WEBM (Max 20MB)",-1)),e("input",{type:"file",ref_key:"inputMediaImage",ref:A,class:"hidden",accept:"image/*,video/*",onChange:ee},null,544)],34))]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"ลิงก์เว็บไซต์ / สินค้า (ไม่บังคับ)",-1)),e("div",$e,[e("div",Ie,[n(u(c),{icon:"solar:link-circle-bold"})]),y(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>V.value=a),type:"url",placeholder:"https://...",class:"pl-10 w-full rounded-xl border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white shadow-sm"},null,512),[[U,V.value]])])])])]),e("section",Be,[t[26]||(t[26]=e("div",{class:"flex items-center gap-3 mb-6"},[e("span",{class:"w-8 h-8 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center font-bold"},"2"),e("h2",{class:"text-xl font-bold text-gray-800 dark:text-white"},"ตั้งค่าแคมเปญ")],-1)),e("div",Ue,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"จำนวนการแสดงผล (Views)",-1)),y(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>s.value=a),onChange:B,class:"w-full rounded-xl border-gray-300 focus:border-amber-500 focus:ring-amber-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white shadow-sm h-11"},[(o(),i(N,null,q(T,a=>e("option",{key:a,value:a},b(a.toLocaleString())+" ครั้ง",9,Fe)),64)),T.includes(s.value)?O("",!0):(o(),i("option",{key:0,value:s.value},"กำหนดเอง: "+b(s.value),9,Te))],544),[[G,s.value,void 0,{number:!0}]]),T.includes(s.value)?O("",!0):y((o(),i("input",{key:0,type:"number","onUpdate:modelValue":t[6]||(t[6]=a=>s.value=a),onInput:B,class:"mt-2 w-full rounded-xl border-gray-300 text-sm",placeholder:"ระบุจำนวน"},null,544)),[[U,s.value,void 0,{number:!0}]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"ระยะเวลาต่อวิว (วินาที)",-1)),y(e("select",{"onUpdate:modelValue":t[7]||(t[7]=a=>S.value=a),onChange:B,class:"w-full rounded-xl border-gray-300 focus:border-amber-500 focus:ring-amber-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white shadow-sm h-11"},[(o(),i(N,null,q(Y,a=>e("option",{key:a,value:a},b(a)+" วินาที",9,Le)),64))],544),[[G,S.value,void 0,{number:!0}]])])])]),e("section",Pe,[t[35]||(t[35]=e("div",{class:"flex items-center gap-3 mb-6"},[e("span",{class:"w-8 h-8 rounded-full bg-teal-100 text-teal-600 flex items-center justify-center font-bold"},"3"),e("h2",{class:"text-xl font-bold text-gray-800 dark:text-white"},"ชำระเงิน")],-1)),e("div",Xe,[e("button",{onClick:t[8]||(t[8]=a=>x.value=!1),class:F([x.value?"text-gray-500 hover:text-gray-700":"bg-white text-gray-900 shadow-sm","flex-1 py-2.5 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2"])},[n(u(c),{icon:"solar:card-transfer-bold"}),t[27]||(t[27]=k(" โอนเงินธนาคาร ",-1))],2),e("button",{onClick:t[9]||(t[9]=a=>x.value=!0),class:F([x.value?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700","flex-1 py-2.5 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2"])},[n(u(c),{icon:"solar:wallet-money-bold"}),k(" Wallet ("+b(R.value.toFixed(2))+" ฿) ",1)],2)]),x.value?(o(),i("div",Ne,[n(u(c),{icon:"solar:check-circle-bold",class:"w-10 h-10 text-teal-500 mx-auto mb-2"}),t[33]||(t[33]=e("p",{class:"font-medium text-teal-900 dark:text-teal-100"},"ระบบจะตัดเงินจาก Wallet ของคุณทันที",-1)),t[34]||(t[34]=e("p",{class:"text-sm text-teal-600 dark:text-teal-300"},"สะดวกรวดเร็ว ไม่ต้องรอตรวจสอบยอดเงิน",-1))])):(o(),i("div",Ae,[e("div",We,[n(u(c),{icon:"solar:info-circle-bold",class:"w-6 h-6 text-blue-500 flex-shrink-0 mt-0.5"}),t[28]||(t[28]=e("div",{class:"text-sm text-gray-600 dark:text-gray-300"},[e("p",{class:"font-bold text-gray-900 dark:text-white mb-1"},"บัญชีธนาคารสำหรับโอนเงิน"),e("p",null,"ธนาคาร: กสิกรไทย (K-Bank)"),e("p",null,[k("เลขที่บัญชี: "),e("span",{class:"font-mono font-bold select-all"},"XXX-X-XXXXX-X")]),e("p",null,"ชื่อบัญชี: บจก. เพลินด์")],-1))]),e("div",Re,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"วันที่โอน",-1)),n(g,{modelValue:M.value,"onUpdate:modelValue":t[10]||(t[10]=a=>M.value=a),format:"dd/MM/yyyy","enable-time-picker":!1,"auto-apply":"",class:"date-picker-custom"},null,8,["modelValue"])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"เวลาโอน",-1)),n(g,{modelValue:v.value,"onUpdate:modelValue":t[11]||(t[11]=a=>v.value=a),"time-picker":"",format:"HH:mm","auto-apply":""},{"input-icon":X(()=>[n(u(c),{icon:"solar:clock-circle-bold",class:"w-5 h-5 text-gray-400"})]),_:1},8,["modelValue"])])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[k("หลักฐานการโอนเงิน (Slip) "),e("span",{class:"text-red-500"},"*")],-1)),p.value?(o(),i("div",ze,[e("button",{onClick:m(oe,["stop"]),class:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full shadow-md opacity-0 group-hover:opacity-100 transition-opacity"},[n(u(c),{icon:"solar:close-circle-bold"})]),e("img",{src:p.value.url,class:"h-32 w-auto object-contain"},null,8,Ee),e("div",Oe,b(p.value.file.name),1)])):(o(),i("div",{key:0,onClick:re,onDragover:t[12]||(t[12]=m(a=>$.value=!0,["prevent"])),onDragleave:t[13]||(t[13]=m(a=>$.value=!1,["prevent"])),onDrop:m(se,["prevent"]),class:F([{"border-teal-500 bg-teal-50":$.value},"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer text-center group"])},[n(u(c),{icon:"solar:document-add-bold",class:"w-8 h-8 text-gray-400 group-hover:text-teal-500 mx-auto mb-2 transition-colors"}),t[31]||(t[31]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"อัปโหลดสลิป",-1)),e("input",{type:"file",ref_key:"inputSlip",ref:W,class:"hidden",accept:"image/*",onChange:le},null,544)],34))])]))])]),e("div",qe,[e("div",Ge,[e("div",He,[t[36]||(t[36]=e("p",{class:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3 text-center"},"ตัวอย่างโฆษณา",-1)),e("div",Ke,[n(ve,{advert:Q.value},null,8,["advert"])]),e("div",Je,[e("p",Ye,b(D.value||"หัวข้อโฆษณา"),1),e("p",Qe,b(_.value||"รายละเอียด..."),1)])]),e("div",Ze,[e("div",et,[t[42]||(t[42]=e("h3",{class:"font-bold text-gray-900 dark:text-white mb-4"},"สรุปยอดชำระ",-1)),e("div",tt,[e("div",at,[t[37]||(t[37]=e("span",null,"จำนวน Views",-1)),e("span",rt,b(s.value.toLocaleString()),1)]),e("div",lt,[t[38]||(t[38]=e("span",null,"ระยะเวลา/View",-1)),e("span",st,b(S.value)+" วินาที",1)]),t[41]||(t[41]=e("div",{class:"h-px bg-gray-100 dark:bg-gray-700 my-2"},null,-1)),e("div",ot,[t[40]||(t[40]=e("span",{class:"font-bold text-gray-900 dark:text-white"},"รวมเป็นเงิน",-1)),e("div",nt,[e("div",dt,b(I.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1),t[39]||(t[39]=e("div",{class:"text-xs text-gray-400"},"บาท",-1))])])])]),e("div",it,[e("button",{onClick:ne,disabled:C.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3.5 rounded-xl shadow-lg hover:shadow-blue-500/30 transition-all transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[C.value?(o(),E(u(c),{key:0,icon:"svg-spinners:ring-resize"})):(o(),i("span",gt,"ยืนยันและชำระเงิน"))],8,ut),e("button",{onClick:t[14]||(t[14]=a=>u(J).back()),class:"w-full mt-3 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-white text-sm font-medium py-2"}," ยกเลิก ")])])])])])])]),_:1})}}},Mt=de(ct,[["__scopeId","data-v-c73ec6f1"]]);export{Mt as default};
