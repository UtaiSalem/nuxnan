import{q as H,y as U,o as a,c as l,a as e,t as o,T as x,F as D,k as A,d,r as k,_ as X,l as R,a3 as J,e as F,h as P,a7 as q,n as M,i as K,b as v,u as $,w as N,I as S}from"./Brb_7992.js";import{u as V}from"./KqkJvF9s.js";import{_ as T}from"./B56lO0ps.js";const O={class:"achievements-display"},Q={class:"stats-overview"},Y={class:"stat-card"},Z={class:"stat-info"},ee={class:"stat-value"},se={class:"stat-card"},te={class:"stat-info"},ae={class:"stat-value"},le={class:"stat-card"},oe={class:"stat-info"},ne={class:"stat-value"},ie={class:"stat-card"},re={class:"stat-info"},de={class:"stat-value"},ce={class:"tabs"},ue={key:0,class:"achievements-list"},ve={key:0,class:"achievements-grid"},_e={class:"achievement-badge"},pe=["src","alt"],he={class:"achievement-details"},me={class:"achievement-name"},ke={class:"achievement-description"},be={class:"achievement-meta"},ge={class:"achievement-type"},ye={key:0,class:"achievement-points"},fe={key:0,class:"achievement-date"},xe={key:0,class:"empty-state"},$e={key:1,class:"achievements-grid"},we={class:"achievement-badge"},Se=["src","alt"],Le={class:"achievement-details"},Ce={class:"achievement-name"},De={class:"achievement-description"},Ae={class:"achievement-meta"},Fe={class:"achievement-type"},Ie={key:0,class:"achievement-points"},Ne={class:"achievement-criteria"},Te={class:"criteria-list"},je={key:0,class:"empty-state"},ze={key:1,class:"loading-state"},Pe=H({__name:"AchievementsDisplay",setup(B){const{getAchievements:w,getAvailableAchievements:_,getAchievementStats:y}=V(),p=k("unlocked"),c=k(!1),h=k([]),u=k([]),i=k({total_achievements:0,unlocked_achievements:0,locked_achievements:0,completion_percentage:0,total_points_from_achievements:0});U(async()=>{await L(),await C()});const L=async()=>{p.value==="unlocked"?await g():await m()},g=async()=>{try{c.value=!0,h.value=await w()}catch(b){console.error("Failed to load achievements:",b)}finally{c.value=!1}},m=async()=>{try{c.value=!0,u.value=await _()}catch(b){console.error("Failed to load available achievements:",b)}finally{c.value=!1}},C=async()=>{try{i.value=await y()}catch(b){console.error("Failed to load stats:",b)}},f=b=>new Date(b).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"}),I=(b,n)=>{const t={count:"‡∏ó‡∏≥‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",points:"‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°",streak:"Streak",social_type:"‡∏™‡∏±‡∏á‡∏Ñ‡∏°",learning_type:"‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ",action_type:"‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥"};return b==="count"?`${t[b]} ${n} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á`:`${t[b]}: ${n}`};return(b,n)=>(a(),l("div",O,[e("div",Q,[e("div",Y,[n[3]||(n[3]=e("div",{class:"stat-icon"},"üèÜ",-1)),e("div",Z,[e("p",ee,o(i.value.unlocked_achievements)+"/"+o(i.value.total_achievements),1),n[2]||(n[2]=e("p",{class:"stat-label"},"‡∏ö‡∏£‡∏£‡∏•‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°",-1))])]),e("div",se,[n[5]||(n[5]=e("div",{class:"stat-icon"},"üîí",-1)),e("div",te,[e("p",ae,o(i.value.locked_achievements),1),n[4]||(n[4]=e("p",{class:"stat-label"},"‡∏Ñ‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏Å",-1))])]),e("div",le,[n[7]||(n[7]=e("div",{class:"stat-icon"},"üìä",-1)),e("div",oe,[e("p",ne,o(i.value.completion_percentage)+"%",1),n[6]||(n[6]=e("p",{class:"stat-label"},"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",-1))])]),e("div",ie,[n[9]||(n[9]=e("div",{class:"stat-icon"},"‚≠ê",-1)),e("div",re,[e("p",de,o(i.value.total_points_from_achievements),1),n[8]||(n[8]=e("p",{class:"stat-label"},"‡πÅ‡∏ï‡πâ‡∏°‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",-1))])])]),e("div",ce,[e("button",{class:x(["tab-btn",{active:p.value==="unlocked"}]),onClick:n[0]||(n[0]=t=>p.value="unlocked")}," ‡∏ö‡∏£‡∏£‡∏•‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏° ",2),e("button",{class:x(["tab-btn",{active:p.value==="available"}]),onClick:n[1]||(n[1]=t=>p.value="available")}," ‡∏Ñ‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏Å ",2)]),c.value?d("",!0):(a(),l("div",ue,[p.value==="unlocked"?(a(),l("div",ve,[(a(!0),l(D,null,A(h.value,t=>(a(),l("div",{key:t.id,class:"achievement-card unlocked"},[e("div",_e,[e("img",{src:t.icon||"/icons/achievement.png",alt:t.name},null,8,pe)]),e("div",he,[e("h4",me,o(t.name),1),e("p",ke,o(t.description),1),e("div",be,[e("span",ge,o(t.type_label),1),t.points_reward?(a(),l("span",ye,"+"+o(t.points_reward)+" ‡πÅ‡∏ï‡πâ‡∏°",1)):d("",!0)]),t.completed_at?(a(),l("p",fe," ‡∏ö‡∏£‡∏£‡∏•‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠ "+o(f(t.completed_at)),1)):d("",!0)])]))),128)),h.value.length===0?(a(),l("div",xe,[...n[10]||(n[10]=[e("i",{class:"lni lni-empty-file"},null,-1),e("p",null,"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",-1)])])):d("",!0)])):d("",!0),p.value==="available"?(a(),l("div",$e,[(a(!0),l(D,null,A(u.value,t=>(a(),l("div",{key:t.id,class:"achievement-card locked"},[e("div",we,[e("img",{src:t.icon||"/icons/achievement-locked.png",alt:t.name},null,8,Se)]),e("div",Le,[e("h4",Ce,o(t.name),1),e("p",De,o(t.description),1),e("div",Ae,[e("span",Fe,o(t.type_label),1),t.points_reward?(a(),l("span",Ie,"+"+o(t.points_reward)+" ‡πÅ‡∏ï‡πâ‡∏°",1)):d("",!0)]),e("div",Ne,[n[11]||(n[11]=e("p",{class:"criteria-label"},"‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏ö‡∏£‡∏±‡∏ö:",-1)),e("ul",Te,[(a(!0),l(D,null,A(t.criteria,(s,r)=>(a(),l("li",{key:r},o(I(r,s)),1))),128))])])])]))),128)),u.value.length===0?(a(),l("div",je,[...n[12]||(n[12]=[e("i",{class:"lni lni-checkmark-circle"},null,-1),e("p",null,"‡∏ö‡∏£‡∏£‡∏•‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î!",-1)])])):d("",!0)])):d("",!0)])),c.value?(a(),l("div",ze,[...n[13]||(n[13]=[e("i",{class:"lni lni-spinner lni-spin"},null,-1),e("p",null,"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...",-1)])])):d("",!0)]))}}),He=X(Pe,[["__scopeId","data-v-b1592733"]]),Ue={class:"leaderboard-display"},Ve={class:"tabs"},Be=["onClick"],Ge={key:0,class:"leaderboard-content"},Me={key:0,class:"leaderboard-list"},Xe={class:"item-rank"},qe={key:0,class:"rank-badge gold"},Ee={key:1,class:"rank-badge silver"},Re={key:2,class:"rank-badge bronze"},We={key:3,class:"rank-number"},Je={class:"item-user"},Ke=["src","alt"],Oe={class:"user-name"},Qe={class:"item-points"},Ye={class:"item-level"},Ze={class:"level-info"},es={key:0,class:"follower-info"},ss={key:0,class:"empty-state"},ts={key:1,class:"leaderboard-list"},as={class:"item-rank"},ls={key:0,class:"rank-badge gold"},os={key:1,class:"rank-badge silver"},ns={key:2,class:"rank-badge bronze"},is={key:3,class:"rank-number"},rs={class:"item-user"},ds=["src","alt"],cs={class:"user-name"},us={class:"item-streak"},vs={class:"streak-icon"},_s={class:"streak-days"},ps={class:"item-level"},hs={key:0,class:"follower-info"},ms={key:0,class:"empty-state"},ks={key:2,class:"leaderboard-list"},bs={class:"item-rank"},gs={key:0,class:"rank-badge gold"},ys={key:1,class:"rank-badge silver"},fs={key:2,class:"rank-badge bronze"},xs={key:3,class:"rank-number"},$s={class:"item-user"},ws=["src","alt"],Ss={class:"user-name"},Ls={class:"item-achievements"},Cs={class:"item-level"},Ds={class:"level-info"},As={key:0,class:"follower-info"},Fs={key:0,class:"empty-state"},Is={key:3,class:"leaderboard-list"},Ns={class:"item-rank"},Ts={key:0,class:"rank-badge gold"},js={key:1,class:"rank-badge silver"},zs={key:2,class:"rank-badge bronze"},Ps={key:3,class:"rank-number"},Hs={class:"item-user"},Us=["src","alt"],Vs={class:"user-name"},Bs={class:"item-level"},Gs={class:"level-info"},Ms={key:0,class:"follower-info"},Xs={class:"item-points"},qs={key:0,class:"empty-state"},Es={key:1,class:"pagination"},Rs=["disabled"],Ws={class:"page-info"},Js=["disabled"],Ks={key:2,class:"loading-state"},Os=H({__name:"LeaderboardDisplay",setup(B){const{getPointsLeaderboard:w,getStreakLeaderboard:_,getAchievementLeaderboard:y,getLevelLeaderboard:p}=V(),c=R(),h=k("points"),u=k(!1),i=k({leaderboard:[],current_page:1,total_pages:1,total_users:0,per_page:10}),L=M(()=>c.user?.id||0),g=n=>new Intl.NumberFormat("th-TH").format(n),m=(n,t=0)=>{if(n.avatar)return n.avatar;const s=["94a3b8","64748b","78716c","6b7280","71717a","737373","a3a3a3","9ca3af","a1a1aa","a8a29e"],r=s[t%s.length];return`https://ui-avatars.com/api/?name=${encodeURIComponent(n.user_name)}&background=${r}&color=fff`},C=[{id:"points",label:"‡πÅ‡∏ï‡πâ‡∏°",icon:"lni-star"},{id:"streak",label:"Streak",icon:"lni-fire"},{id:"achievements",label:"‡∏Ñ‡∏ß‡∏≤‡∏°",icon:"lni-trophy"},{id:"level",label:"‡πÄ‡∏•‡πÄ‡∏ß‡∏•",icon:"lni-medal"}],f=async()=>{try{switch(u.value=!0,h.value){case"points":i.value=await w({limit:10,page:1});break;case"streak":i.value=await _({limit:10,page:1});break;case"achievements":i.value=await y({limit:10,page:1});break;case"level":i.value=await p({limit:10,page:1});break}}catch(n){console.error("Failed to load leaderboard:",n)}finally{u.value=!1}},I=async n=>{if(!(n<1||n>i.value.total_pages))try{switch(u.value=!0,h.value){case"points":i.value=await w({limit:10,page:n});break;case"streak":i.value=await _({limit:10,page:n});break;case"achievements":i.value=await y({limit:10,page:n});break;case"level":i.value=await p({limit:10,page:n});break}}catch(t){console.error("Failed to load page:",t)}finally{u.value=!1}},{stop:b}=J(h,()=>{f()});return U(()=>{f()}),(n,t)=>(a(),l("div",Ue,[e("div",Ve,[(a(),l(D,null,A(C,s=>e("button",{key:s.id,class:x(["tab-btn",{active:h.value===s.id}]),onClick:r=>h.value=s.id},[e("i",{class:x(s.icon)},null,2),F(" "+o(s.label),1)],10,Be)),64))]),u.value?d("",!0):(a(),l("div",Ge,[h.value==="points"?(a(),l("div",Me,[t[4]||(t[4]=P('<div class="leaderboard-header" data-v-fd78d6e9><span class="header-rank" data-v-fd78d6e9>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</span><span class="header-user" data-v-fd78d6e9>‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</span><span class="header-points" data-v-fd78d6e9>‡πÅ‡∏ï‡πâ‡∏°</span><span class="header-level" data-v-fd78d6e9>‡πÄ‡∏•‡πÄ‡∏ß‡∏•</span></div>',1)),(a(!0),l(D,null,A(i.value.leaderboard,(s,r)=>(a(),l("div",{key:s.user_id,class:x(["leaderboard-item",{"top-3":r<3,"current-user":s.user_id===L.value}])},[e("div",Xe,[r===0?(a(),l("span",qe,"ü•á")):r===1?(a(),l("span",Ee,"ü•à")):r===2?(a(),l("span",Re,"ü•â")):(a(),l("span",We,"#"+o(s.rank),1))]),e("div",Je,[e("img",{src:m(s,r),alt:s.user_name,class:"user-avatar"},null,8,Ke),e("span",Oe,o(s.user_name),1)]),e("div",Qe,o(g(s.total_points))+" ‡πÅ‡∏ï‡πâ‡∏°",1),e("div",Ye,[e("div",Ze,"Lv. "+o(s.level),1),s.followers_count!==void 0?(a(),l("div",es,[t[2]||(t[2]=e("i",{class:"lni lni-users"},null,-1)),F(" "+o(g(s.followers_count)),1)])):d("",!0)])],2))),128)),i.value.leaderboard.length===0?(a(),l("div",ss,[...t[3]||(t[3]=[e("i",{class:"lni lni-empty-file"},null,-1),e("p",null,"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",-1)])])):d("",!0)])):d("",!0),h.value==="streak"?(a(),l("div",ts,[t[7]||(t[7]=P('<div class="leaderboard-header" data-v-fd78d6e9><span class="header-rank" data-v-fd78d6e9>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</span><span class="header-user" data-v-fd78d6e9>‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</span><span class="header-streak" data-v-fd78d6e9>Streak</span><span class="header-level" data-v-fd78d6e9>‡∏£‡∏∞‡∏î‡∏±‡∏ö</span></div>',1)),(a(!0),l(D,null,A(i.value.leaderboard,(s,r)=>(a(),l("div",{key:s.user_id,class:x(["leaderboard-item",{"top-3":r<3,"current-user":s.user_id===L.value}])},[e("div",as,[r===0?(a(),l("span",ls,"ü•á")):r===1?(a(),l("span",os,"ü•à")):r===2?(a(),l("span",ns,"ü•â")):(a(),l("span",is,"#"+o(s.rank),1))]),e("div",rs,[e("img",{src:m(s,r),alt:s.user_name,class:"user-avatar"},null,8,ds),e("span",cs,o(s.user_name),1)]),e("div",us,[e("span",vs,o(s.streak_icon),1),e("span",_s,o(s.current_streak)+" ‡∏ß‡∏±‡∏ô",1)]),e("div",ps,[e("div",{class:"level-info",style:q({color:s.streak_level_color})},o(s.streak_level),5),s.followers_count!==void 0?(a(),l("div",hs,[t[5]||(t[5]=e("i",{class:"lni lni-users"},null,-1)),F(" "+o(g(s.followers_count)),1)])):d("",!0)])],2))),128)),i.value.leaderboard.length===0?(a(),l("div",ms,[...t[6]||(t[6]=[e("i",{class:"lni lni-empty-file"},null,-1),e("p",null,"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",-1)])])):d("",!0)])):d("",!0),h.value==="achievements"?(a(),l("div",ks,[t[10]||(t[10]=P('<div class="leaderboard-header" data-v-fd78d6e9><span class="header-rank" data-v-fd78d6e9>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</span><span class="header-user" data-v-fd78d6e9>‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</span><span class="header-achievements" data-v-fd78d6e9>‡∏Ñ‡∏ß‡∏≤‡∏°</span><span class="header-level" data-v-fd78d6e9>‡πÄ‡∏•‡πÄ‡∏ß‡∏•</span></div>',1)),(a(!0),l(D,null,A(i.value.leaderboard,(s,r)=>(a(),l("div",{key:s.user_id,class:x(["leaderboard-item",{"top-3":r<3,"current-user":s.user_id===L.value}])},[e("div",bs,[r===0?(a(),l("span",gs,"ü•á")):r===1?(a(),l("span",ys,"ü•à")):r===2?(a(),l("span",fs,"ü•â")):(a(),l("span",xs,"#"+o(s.rank),1))]),e("div",$s,[e("img",{src:m(s,r),alt:s.user_name,class:"user-avatar"},null,8,ws),e("span",Ss,o(s.user_name),1)]),e("div",Ls,o(g(s.achievement_count))+" ‡∏Ñ‡∏ß‡∏≤‡∏°",1),e("div",Cs,[e("div",Ds,"Lv. "+o(s.level),1),s.followers_count!==void 0?(a(),l("div",As,[t[8]||(t[8]=e("i",{class:"lni lni-users"},null,-1)),F(" "+o(g(s.followers_count)),1)])):d("",!0)])],2))),128)),i.value.leaderboard.length===0?(a(),l("div",Fs,[...t[9]||(t[9]=[e("i",{class:"lni lni-empty-file"},null,-1),e("p",null,"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",-1)])])):d("",!0)])):d("",!0),h.value==="level"?(a(),l("div",Is,[t[13]||(t[13]=P('<div class="leaderboard-header" data-v-fd78d6e9><span class="header-rank" data-v-fd78d6e9>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</span><span class="header-user" data-v-fd78d6e9>‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</span><span class="header-level" data-v-fd78d6e9>‡πÄ‡∏•‡πÄ‡∏ß‡∏•</span><span class="header-points" data-v-fd78d6e9>‡πÅ‡∏ï‡πâ‡∏°</span></div>',1)),(a(!0),l(D,null,A(i.value.leaderboard,(s,r)=>(a(),l("div",{key:s.user_id,class:x(["leaderboard-item",{"top-3":r<3,"current-user":s.user_id===L.value}])},[e("div",Ns,[r===0?(a(),l("span",Ts,"ü•á")):r===1?(a(),l("span",js,"ü•à")):r===2?(a(),l("span",zs,"ü•â")):(a(),l("span",Ps,"#"+o(s.rank),1))]),e("div",Hs,[e("img",{src:s.avatar||"/images/default-avatar.png",alt:s.user_name,class:"user-avatar"},null,8,Us),e("span",Vs,o(s.user_name),1)]),e("div",Bs,[e("div",Gs,"Lv. "+o(s.level),1),s.followers_count!==void 0?(a(),l("div",Ms,[t[11]||(t[11]=e("i",{class:"lni lni-users"},null,-1)),F(" "+o(g(s.followers_count)),1)])):d("",!0)]),e("div",Xs,o(g(s.total_points))+" ‡πÅ‡∏ï‡πâ‡∏°",1)],2))),128)),i.value.leaderboard.length===0?(a(),l("div",qs,[...t[12]||(t[12]=[e("i",{class:"lni lni-empty-file"},null,-1),e("p",null,"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",-1)])])):d("",!0)])):d("",!0)])),i.value.total_pages>1?(a(),l("div",Es,[e("button",{class:"btn-pagination",onClick:t[0]||(t[0]=s=>I(i.value.current_page-1)),disabled:i.value.current_page<=1},[...t[14]||(t[14]=[e("i",{class:"lni lni-chevron-left"},null,-1)])],8,Rs),e("span",Ws," ‡∏´‡∏ô‡πâ‡∏≤ "+o(i.value.current_page)+" / "+o(i.value.total_pages),1),e("button",{class:"btn-pagination",onClick:t[1]||(t[1]=s=>I(i.value.current_page+1)),disabled:i.value.current_page>=i.value.total_pages},[...t[15]||(t[15]=[e("i",{class:"lni lni-chevron-right"},null,-1)])],8,Js)])):d("",!0),u.value?(a(),l("div",Ks,[...t[16]||(t[16]=[e("i",{class:"lni lni-spinner lni-spin"},null,-1),e("p",null,"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...",-1)])])):d("",!0)]))}}),Qs=X(Os,[["__scopeId","data-v-fd78d6e9"]]),Ys={class:"streak-display"},Zs={class:"streak-card"},et={class:"icon-emoji"},st={class:"streak-info"},tt={class:"streak-count"},at={class:"streak-level"},lt={class:"streak-bonus"},ot={class:"bonus-amount"},nt={class:"bonus-milestone"},it={class:"bonus-days"},rt={key:0,class:"streak-history"},dt={class:"history-item"},ct={class:"history-value"},ut={class:"history-item"},vt={class:"history-value"},_t=H({__name:"StreakDisplay",setup(B){const{getStreakInfo:w}=V(),_=k({current_streak:0,longest_streak:0,bonus_points_earned:0,streak_level:"Newbie",streak_icon:"üî•",streak_level_color:"#9ca3af",is_active_today:!1,next_milestone:5,days_until_next_bonus:5,potential_bonus:0}),y=k(!1);return U(async()=>{try{const p=await w();_.value=p}catch(p){console.error("Failed to load streak info:",p)}}),(p,c)=>(a(),l("div",Ys,[e("div",Zs,[e("div",{class:"streak-icon",style:q({background:_.value.streak_level_color})},[e("span",et,o(_.value.streak_icon),1)],4),e("div",st,[c[1]||(c[1]=e("h3",{class:"streak-title"},"Streak ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô",-1)),e("p",tt,o(_.value.current_streak)+" ‡∏ß‡∏±‡∏ô",1),e("p",at,o(_.value.streak_level)+" Level",1)]),e("div",lt,[c[2]||(c[2]=e("p",{class:"bonus-label"},"‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏ñ‡∏±‡∏î‡πÑ‡∏õ",-1)),e("p",ot,"+"+o(_.value.potential_bonus)+" ‡πÅ‡∏ï‡πâ‡∏°",1),e("p",nt,"‡∏ó‡∏µ‡πà "+o(_.value.next_milestone)+" ‡∏ß‡∏±‡∏ô",1),e("p",it,"("+o(_.value.days_until_next_bonus)+" ‡∏ß‡∏±‡∏ô)",1)])]),y.value?(a(),l("div",rt,[c[5]||(c[5]=e("h4",null,"‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ Streak",-1)),e("div",dt,[c[3]||(c[3]=e("span",{class:"history-label"},"Streak ‡∏¢‡∏≤‡∏ß‡∏ô‡∏≤‡∏¢:",-1)),e("span",ct,o(_.value.longest_streak)+" ‡∏ß‡∏±‡∏ô",1)]),e("div",ut,[c[4]||(c[4]=e("span",{class:"history-label"},"‡πÅ‡∏ï‡πâ‡∏°‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:",-1)),e("span",vt,o(_.value.bonus_points_earned)+" ‡πÅ‡∏ï‡πâ‡∏°",1)])])):d("",!0),e("button",{class:"btn-toggle-history",onClick:c[0]||(c[0]=h=>y.value=!y.value)},o(y.value?"‡∏ã‡πà‡∏≠‡∏ô":"‡πÅ‡∏™‡∏î‡∏á")+" ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ ",1)]))}}),pt=X(_t,[["__scopeId","data-v-798028c4"]]),ht={class:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8 px-4 sm:px-6 lg:px-8"},mt={class:"max-w-6xl mx-auto"},kt={class:"text-center mb-8"},bt={class:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-indigo-400 to-purple-600 rounded-full flex items-center justify-center shadow-lg"},gt={class:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-8"},yt={class:"text-white text-center"},ft={class:"w-12 h-12 mx-auto mb-2 bg-white/20 rounded-full flex items-center justify-center backdrop-blur"},xt={class:"text-2xl font-bold"},$t={class:"text-center"},wt={class:"text-xl font-bold text-gray-900 dark:text-white"},St={class:"text-center"},Lt={class:"text-xl font-bold text-gray-900 dark:text-white"},Ct={class:"text-center"},Dt={class:"text-xl font-bold text-gray-900 dark:text-white"},At={class:"text-center"},Ft={class:"text-xl font-bold text-gray-900 dark:text-white"},It={class:"p-2"},Nt={class:"flex items-center gap-6"},Tt={class:"flex-shrink-0"},jt={class:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white"},zt={class:"text-2xl font-bold"},Pt={class:"flex-grow"},Ht={class:"flex items-center justify-between mb-2"},Ut={class:"text-sm font-medium text-gray-900 dark:text-white"},Vt={class:"text-sm text-gray-500 dark:text-gray-400"},Bt={class:"h-4 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},Gt={class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},Mt={class:"flex-shrink-0"},Xt={class:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center text-gray-400 dark:text-gray-500"},qt={class:"text-2xl font-bold"},Et={class:"flex gap-4 mb-6"},Rt={key:0,class:"py-12 text-center"},Wt={key:1},Jt={key:0},Kt={key:1},Ot={key:2},ea=H({__name:"Gamification",setup(B){K({title:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö - Nuxni"});const w=R(),{getAchievements:_,getLeaderboard:y,getStreakInfo:p,getUserLevel:c,isLoading:h}=V(),u=k("achievements"),i=k([]),L=k([]),g=k(null),m=k(null),C=k({total_achievements:0,unlocked_achievements:0,locked_achievements:0,completion_percentage:0,total_points_from_achievements:0}),f=M(()=>w.user),I=M(()=>w.points||0),b=async()=>{try{const[t,s,r,E]=await Promise.all([_(),y({type:"points",limit:10}),p(),c()]);if(t){i.value=t;const G=t.filter(j=>j.completed).length,z=t.length;C.value={total_achievements:z,unlocked_achievements:G,locked_achievements:z-G,completion_percentage:z>0?Math.round(G/z*100):0,total_points_from_achievements:t.filter(j=>j.completed).reduce((j,W)=>j+(W.points_reward||0),0)}}s&&(L.value=s.leaderboard||s),r&&(g.value=r),E&&(m.value=E)}catch(t){console.error("Failed to load gamification data:",t)}},n=t=>new Intl.NumberFormat("th-TH").format(t);return U(b),(t,s)=>(a(),l("div",ht,[e("div",mt,[e("div",kt,[e("div",bt,[v($(S),{icon:"mdi:trophy",class:"w-10 h-10 text-white"})]),s[3]||(s[3]=e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-2"}," ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö ",-1)),s[4]||(s[4]=e("p",{class:"text-gray-600 dark:text-gray-400 max-w-2xl mx-auto"}," ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡∏ö‡∏£‡∏£‡∏•‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÅ‡∏•‡∏∞‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô ",-1))]),e("div",gt,[v(T,{class:"bg-gradient-to-br from-indigo-500 to-purple-600 border-0"},{default:N(()=>[e("div",yt,[e("div",ft,[e("span",xt,o(m.value?.level||f.value?.level||1),1)]),s[5]||(s[5]=e("p",{class:"text-sm font-medium opacity-80"},"‡πÄ‡∏•‡πÄ‡∏ß‡∏•",-1))])]),_:1}),v(T,null,{default:N(()=>[e("div",$t,[v($(S),{icon:"mdi:star-circle",class:"w-8 h-8 text-amber-500 mx-auto mb-2"}),e("p",wt,o(n(I.value)),1),s[6]||(s[6]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"‡πÅ‡∏ï‡πâ‡∏°‡∏™‡∏∞‡∏™‡∏°",-1))])]),_:1}),v(T,null,{default:N(()=>[e("div",St,[v($(S),{icon:"mdi:trophy",class:"w-8 h-8 text-green-500 mx-auto mb-2"}),e("p",Lt,o(C.value.unlocked_achievements)+"/"+o(C.value.total_achievements),1),s[7]||(s[7]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",-1))])]),_:1}),v(T,null,{default:N(()=>[e("div",Ct,[v($(S),{icon:"mdi:fire",class:"w-8 h-8 text-orange-500 mx-auto mb-2"}),e("p",Dt,o(g.value?.current_streak||0),1),s[8]||(s[8]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"‡∏ß‡∏±‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô",-1))])]),_:1}),v(T,null,{default:N(()=>[e("div",At,[v($(S),{icon:"mdi:percent",class:"w-8 h-8 text-blue-500 mx-auto mb-2"}),e("p",Ft,o(C.value.completion_percentage)+"% ",1),s[9]||(s[9]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",-1))])]),_:1})]),v(T,{class:"mb-8"},{default:N(()=>[e("div",It,[s[10]||(s[10]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏•‡πÄ‡∏ß‡∏•",-1)),e("div",Nt,[e("div",Tt,[e("div",jt,[e("span",zt,o(m.value?.level||f.value?.level||1),1)])]),e("div",Pt,[e("div",Ht,[e("span",Ut," ‡πÄ‡∏•‡πÄ‡∏ß‡∏• "+o(m.value?.level||f.value?.level||1),1),e("span",Vt,o(m.value?.current_xp||f.value?.current_xp||0)+" / "+o(m.value?.xp_for_next_level||f.value?.xp_for_next_level||100)+" XP ",1)]),e("div",Bt,[e("div",{class:"h-full bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full transition-all duration-500",style:q({width:`${m.value?.progress_percentage||0}%`})},null,4)]),e("p",Gt," ‡∏≠‡∏µ‡∏Å "+o((m.value?.xp_for_next_level||100)-(m.value?.current_xp||0))+" XP ‡∏à‡∏∞‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏•‡πÄ‡∏ß‡∏•‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ",1)]),e("div",Mt,[e("div",Xt,[e("span",qt,o((m.value?.level||f.value?.level||1)+1),1)])])])])]),_:1}),e("div",Et,[e("button",{class:x(["px-6 py-2 rounded-xl font-medium transition-all flex items-center gap-2",u.value==="achievements"?"bg-primary-500 text-white shadow-md":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"]),onClick:s[0]||(s[0]=r=>u.value="achievements")},[v($(S),{icon:"mdi:trophy",class:"w-5 h-5"}),s[11]||(s[11]=F(" ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ",-1))],2),e("button",{class:x(["px-6 py-2 rounded-xl font-medium transition-all flex items-center gap-2",u.value==="leaderboard"?"bg-primary-500 text-white shadow-md":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"]),onClick:s[1]||(s[1]=r=>u.value="leaderboard")},[v($(S),{icon:"mdi:chart-line",class:"w-5 h-5"}),s[12]||(s[12]=F(" ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö ",-1))],2),e("button",{class:x(["px-6 py-2 rounded-xl font-medium transition-all flex items-center gap-2",u.value==="streak"?"bg-primary-500 text-white shadow-md":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"]),onClick:s[2]||(s[2]=r=>u.value="streak")},[v($(S),{icon:"mdi:fire",class:"w-5 h-5"}),s[13]||(s[13]=F(" ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á ",-1))],2)]),$(h)?(a(),l("div",Rt,[v($(S),{icon:"mdi:loading",class:"w-12 h-12 text-primary-500 animate-spin mx-auto"}),s[14]||(s[14]=e("p",{class:"mt-4 text-gray-500 dark:text-gray-400"},"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...",-1))])):(a(),l("div",Wt,[u.value==="achievements"?(a(),l("div",Jt,[v(He)])):d("",!0),u.value==="leaderboard"?(a(),l("div",Kt,[v(Qs)])):d("",!0),u.value==="streak"?(a(),l("div",Ot,[v(pt)])):d("",!0)]))])]))}});export{ea as default};
