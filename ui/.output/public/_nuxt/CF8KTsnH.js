import{L as l}from"./DX2fB3Es.js";import{c as $,o as g,h as A,r as c,g as I,w as r,a as s,b as d,u as m,T as b,I as i}from"./DvtEeXFW.js";import{S as u}from"./BQxta0Da.js";import j from"./D465NmR9.js";import{_ as N}from"./TRIdXPt2.js";import"./0NabHjdI.js";import"./DJsVOgax.js";import"./Cpj98o6Y.js";import"./BvQ5DSdH.js";import"./BK8d4xn5.js";import"./CR63af46.js";const R={class:"bg-white p-6 shadow rounded-lg"},T={__name:"CreateNewAcademyCourse",props:{academy:Object},setup(p){return(e,n)=>(g(),$("div",R,[...n[0]||(n[0]=[A('<h2 class="text-xl font-bold mb-4">Create New Course</h2><form class="space-y-4"><input type="text" placeholder="Course Name" class="w-full border rounded p-2"><textarea placeholder="Description" class="w-full border rounded p-2"></textarea><button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Create</button></form>',2)])]))}},U={class:""},B={class:"bg-white shadow-xl w-full rounded-lg overflow-hidden mt-4"},D={class:"flex flex-row justify-around"},L={class:"flex flex-col items-center py-2 justify-center text-slate-700"},H={class:"flex flex-col items-center py-2 justify-center text-slate-700"},M={class:"flex flex-col items-center py-2 justify-center text-slate-700"},k={class:"my-4"},Q={__name:"CreateNewAcademyCourse",props:{academy:Object,courses:Object,isAcademyAdmin:Boolean},setup(p){const e=p;c(!1);const n=c(e.academy.data.logo?"/storage/images/academies/logos/"+e.academy.data.logo:"/storage/images/academies/logos/default_logo.png"),v=c(e.academy.data.cover?"/storage/images/academies/covers/"+e.academy.data.cover:"/storage/images/academies/covers/default_cover.png"),y=c(e.academy.data.name),f=c(e.academy.data.slogan);async function h(t){const a=new FormData;a.append("cover",t),a.append("_method","patch"),await axios.post(`/academies/${e.academy.data.id}/update`,a)}async function w(t){const a=new FormData;a.append("logo",t),a.append("_method","patch"),await axios.post(`/academies/${e.academy.data.id}/update`,a)}async function x(t){await axios.patch(`/academies/${e.academy.data.id}/update`,{name:t})}async function C(t){await axios.patch(`/academies/${e.academy.data.id}/update`,{slogan:t})}async function _(){try{let t=await axios.post(`/academies/${e.academy.data.id}/members`);t.data&&t.data.success?(e.academy.data.memberStatus=t.data.memberStatus,e.academy.data.total_students=t.data.totalStudents,t.data&&t.data.success&&(e.academy.data.memberStatus=t.data.memberStatus,u.fire("เสร็จสิ้น","ขอเป็นสมาชิกเรียบร้อยแล้ว","success"))):t.data&&!t.data.success&&u.fire("เกิดข้อผิดพลาด",t.data.msg,"error")}catch{}}async function S(){try{let t=await axios.post(`/academies/${e.academy.data.id}/unmembers`);t.data&&t.data.success&&(e.academy.data.memberStatus==2&&e.academy.data.total_students--,e.academy.data.memberStatus=null,u.fire("เสร็จสิ้น","ออกจากการเป็นสมาชิกเรียบร้อยแล้ว","success"))}catch{}}return(t,a)=>(g(),I(j,{title:"Academy",appUrl:e.app_url},{coverProfileCard:r(()=>[s("div",U,[d(N,{coverImage:v.value,logoImage:n.value,coverHeader:y.value,"onUpdate:coverHeader":a[0]||(a[0]=o=>y.value=o),coverSubheader:f.value,"onUpdate:coverSubheader":a[1]||(a[1]=o=>f.value=o),model:"Academy",modelTable:"academies",modelableId:e.academy.data.id,modelableType:"app/models/Academy",modelableRoute:`/academies/${e.academy.data.id}`,modelData:e.academy.data,subModelData:e.courses.data,subModelNameTh:"รายวิชา",isAcademyAdmin:e.isAcademyAdmin,onCoverImageChange:a[2]||(a[2]=o=>{h(o)}),onLogoImageChange:a[3]||(a[3]=o=>{w(o)}),onHeaderChange:a[4]||(a[4]=o=>{x(o)}),onSubheaderChange:a[5]||(a[5]=o=>{C(o)}),onRequestTobeMember:_,onRequestTobeUnmember:S},null,8,["coverImage","logoImage","coverHeader","coverSubheader","modelableId","modelableRoute","modelData","subModelData","isAcademyAdmin"])]),s("div",B,[s("div",D,[d(m(l),{href:`/academies/${e.academy.data.id}`,class:b(["border-b-4 hover:border-cyan-500 rounded-none w-full text-center flex-row justify-center",{"border-b-4 border-cyan-500":t.$page.url===`/academies/${e.academy.data.id}`}])},{default:r(()=>[s("div",L,[d(m(i),{icon:"bi:view-list",class:"w-8 h-8"}),a[6]||(a[6]=s("span",null,"กระดานข่าว",-1))])]),_:1},8,["href","class"]),d(m(l),{href:`/academies/${e.academy.data.id}/courses`,class:"border-b-4 hover:border-gray-400 rounded-none w-full text-center flex-row justify-center"},{default:r(()=>[s("div",H,[d(m(i),{icon:"lucide:layout-list",class:"w-8 h-8"}),a[7]||(a[7]=s("span",null,"รายวิชา",-1))])]),_:1},8,["href"]),d(m(l),{href:`/academies/${e.academy.data.id}/courses/create`,class:b(["border-b-4 hover:border-gray-400 rounded-none w-full text-center flex-row justify-center",{"border-b-4 border-cyan-500":t.$page.url===`/academies/${e.academy.data.id}/courses/create`}])},{default:r(()=>[s("div",M,[d(m(i),{icon:"lucide:layout-list",class:"w-8 h-8"}),a[8]||(a[8]=s("span",null,"เพิ่มรายวิชาใหม่",-1))])]),_:1},8,["href","class"])])])]),leftSideWidget:r(()=>[...a[9]||(a[9]=[s("div",null,null,-1)])]),mainContent:r(()=>[s("div",k,[d(T,{academy:e.academy},null,8,["academy"])])]),_:1},8,["appUrl"]))}};export{Q as default};
