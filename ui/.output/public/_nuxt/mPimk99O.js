import{_ as K}from"./DROJGjoa.js";import{q as X,V as Y,r as _,n as y,a3 as Z,c as l,o,a as t,S as ee,a7 as z,a9 as te,U as re,z as se,b as S,u as f,I as j,e as C,t as d,$ as F,aa as U,ab as oe,F as E,k as W,d as u,g as le,w as H,T as h}from"./CHs-R6Sv.js";import{_ as ae}from"./CelR1Z2N.js";import{u as de}from"./CaSR6SuD.js";function ne(){return Math.random().toString(16).substring(2)}var q=X({props:{diameter:{type:Number,required:!1,default:200},totalSteps:{type:Number,required:!0,default:10},completedSteps:{type:Number,required:!0,default:0},startColor:{type:String,required:!1,default:"#00C58E"},stopColor:{type:String,required:!1,default:"#00E0A1"},innerStrokeColor:{type:String,required:!1,default:"#2F495E"},strokeWidth:{type:Number,required:!1,default:10},innerStrokeWidth:{type:Number,required:!1,default:10},strokeLinecap:{type:String,required:!1,default:"round"},animateSpeed:{type:Number,required:!1,default:1e3},fps:{type:Number,required:!1,default:60},timingFunc:{type:String,required:!1,default:"linear"},isClockwise:{type:Boolean,required:!1,default:!0}},setup(s){const x=Y({fx:.99,fy:.5,cx:.5,cy:.5,r:.65}),I=`rg-${ne()}`,v=_(0),c=_(0),$=_(null),n=y(()=>s.diameter/2),p=y(()=>s.diameter-s.innerStrokeWidth*2),D=y(()=>Math.PI*p.value),g=y(()=>s.totalSteps===0?0:100/s.totalSteps),O=y(()=>g.value*s.completedSteps),L=y(()=>2*Math.PI/s.totalSteps),G=y(()=>100/s.fps),N=y(()=>s.animateSpeed/G.value),A=y(()=>L.value/N.value),b=y(()=>p.value/2),k=y(()=>({height:`${s.diameter}px`,width:`${s.diameter}px`})),P=y(()=>({height:`${s.diameter}px`,width:`${s.diameter}px`,strokeWidth:`${s.strokeWidth}px`,strokeDashoffset:v.value,transition:`stroke-dashoffset ${s.animateSpeed}ms ${s.timingFunc}`})),T=y(()=>({height:`${s.diameter}px`,width:`${s.diameter}px`,strokeWidth:`${s.innerStrokeWidth}px`})),R=y(()=>({width:`${p.value}px`}));Z(()=>[s.diameter,s.totalSteps,s.completedSteps,s.strokeWidth],B,{immediate:!0});function V(w){const r=.5+.5*Math.cos(w),i=.5+.5*Math.sin(w);return{x:r,y:i}}function Q(){const w=V(c.value);w.x&&w.y&&(x.fx=w.x,x.fy=w.y)}function M(){return s.isClockwise?1:-1}function B(){v.value=(100-O.value)/100*D.value*M(),$.value&&clearInterval($.value);const w=(s.completedSteps-1)*L.value;let a=(c.value-w)/A.value;const r=Math.abs(a-N.value)/N.value,i=a<N.value;$.value=setInterval(()=>{if(i&&a>=N.value||!i&&a<N.value){$.value&&clearInterval($.value);return}c.value=w+A.value*a,Q(),a+=i?r:-r},G.value)}return{gradientAnimation:$,innerCircleRadius:b,radialGradientId:I,strokeDashoffset:v,innerCircleStyle:R,containerStyle:k,circumference:D,progressStyle:P,currentAngle:c,strokeStyle:T,gradient:x,radius:n}}});const ie=["width","height"],ue=["id","fx","fy","cx","cy","r"],ce=["stop-color"],me=["stop-color"],ge=["r","cx","cy","stroke","stroke-dasharray","stroke-linecap"],be=["transform","r","cx","cy","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap"];function xe(s,x,I,v,c,$){return o(),l("div",{class:"vrp__wrapper",style:z(s.containerStyle)},[t("div",{class:"vrp__inner",style:z(s.innerCircleStyle)},[ee(s.$slots,"default")],4),(o(),l("svg",{width:s.diameter,height:s.diameter,version:"1.1",xmlns:"http://www.w3.org/2000/svg"},[t("defs",null,[t("radialGradient",{id:s.radialGradientId,fx:s.gradient.fx,fy:s.gradient.fy,cx:s.gradient.cx,cy:s.gradient.cy,r:s.gradient.r},[t("stop",{offset:"30%","stop-color":s.startColor},null,8,ce),t("stop",{offset:"100%","stop-color":s.stopColor},null,8,me)],8,ue)]),t("circle",{r:s.innerCircleRadius,cx:s.radius,cy:s.radius,fill:"transparent",stroke:s.innerStrokeColor,"stroke-dasharray":s.circumference,"stroke-dashoffset":"0","stroke-linecap":s.strokeLinecap,style:z(s.strokeStyle)},null,12,ge),t("circle",{transform:"rotate(270, "+s.radius+","+s.radius+")",r:s.innerCircleRadius,cx:s.radius,cy:s.radius,fill:"transparent",stroke:`url('#${s.radialGradientId}')`,"stroke-dasharray":s.circumference,"stroke-dashoffset":s.circumference,"stroke-linecap":s.strokeLinecap,style:z(s.progressStyle)},null,12,be)],8,ie))],4)}function ye(s,x){x===void 0&&(x={});var I=x.insertAt;if(!(typeof document>"u")){var v=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",I==="top"&&v.firstChild?v.insertBefore(c,v.firstChild):v.appendChild(c),c.styleSheet?c.styleSheet.cssText=s:c.appendChild(document.createTextNode(s))}}var ve=`
.vrp__wrapper[data-v-6a0cf1f6] {\r
  position: relative;
}
.vrp__inner[data-v-6a0cf1f6] {\r
  position: absolute;\r
  top: 0;\r
  right: 0;\r
  bottom: 0;\r
  left: 0;\r
  border-radius: 50%;\r
  margin: 0 auto;\r
  display: flex;\r
  flex-direction: column;\r
  align-items: center;\r
  justify-content: center;
}\r
`;ye(ve);q.render=xe;q.__scopeId="data-v-6a0cf1f6";var J=(()=>{const s=q;return s.install=x=>{x.component("RadialProgressBar",s)},s})();const fe={class:"space-y-6"},pe={key:0,class:"flex justify-center py-12"},he={key:1,class:"animate-fade-in"},_e={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 mb-6"},ke={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4"},we={class:"text-lg font-bold text-gray-800 dark:text-white flex items-center gap-2"},Se={key:0,class:"px-2 py-0.5 text-[10px] font-bold bg-purple-100 text-purple-700 rounded-full border border-purple-200"},$e={key:1,class:"px-2 py-0.5 text-[10px] font-bold bg-blue-100 text-blue-700 rounded-full border border-blue-200"},Ce={class:"px-4 py-2 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-lg text-sm font-medium"},Ie={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},je=["value"],Ne={class:"mt-6 flex items-center justify-end gap-3"},Ae={key:0,class:"text-green-600 text-sm flex items-center animate-fade-in"},Pe=["disabled"],Me={key:0,class:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-6 text-center mb-8"},Be={key:1,class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8"},Ee={class:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col items-center justify-center"},ze={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},De={class:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col items-center justify-center"},Le={class:"text-center"},Te={class:"text-xl font-bold text-gray-900 dark:text-white"},Ve={class:"text-xs text-gray-400"},We={class:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700"},Fe={class:"text-3xl font-bold text-green-600 dark:text-green-400"},Ge={class:"text-sm text-gray-400 font-normal"},Qe={class:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700"},Ue={class:"text-3xl font-bold text-purple-600 dark:text-purple-400"},Oe={class:"text-sm text-gray-400 font-normal"},Re={class:"flex border-b border-gray-200 dark:border-gray-700 mb-6 overflow-x-auto"},He=["onClick"],qe={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden"},Je={key:0},Ke={class:"p-4 border-b border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 flex justify-between items-center"},Xe={class:"text-sm text-gray-500"},Ye={class:"divide-y divide-gray-100 dark:divide-gray-700"},Ze={key:0,class:"p-8 text-center text-gray-500"},et={class:"flex flex-col gap-3"},tt={class:"flex justify-between items-center"},rt={class:"flex items-center gap-3 flex-1"},st={class:"font-medium text-gray-900 dark:text-white"},ot={key:0,class:"mt-2"},lt={class:"flex items-center justify-between mb-1"},at={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden"},dt={key:1},nt={class:"p-4 border-b border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 flex justify-between items-center"},it={class:"text-sm text-gray-500"},ut={class:"divide-y divide-gray-100 dark:divide-gray-700"},ct={key:0,class:"p-8 text-center text-gray-500"},mt={class:"flex flex-col gap-3"},gt={class:"flex justify-between items-start"},bt={class:"flex-1"},xt={class:"font-medium text-gray-900 dark:text-white"},yt={key:0,class:"text-xs text-gray-400 mt-1"},vt={key:0,class:"text-right flex-shrink-0"},ft={class:"text-xs text-gray-400"},pt={class:"mt-2 text-right"},ht=["onClick"],_t=["onClick"],kt={key:1,class:"text-right flex-shrink-0"},wt={class:"mt-2 text-right"},St=["onClick"],$t={key:0,class:"mt-2"},Ct={class:"flex items-center justify-between mb-1"},It={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden"},jt={key:1,class:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-700"},Nt={key:0},At={key:1},Pt={key:0,class:"flex justify-center py-4"},Mt={key:1},Bt={class:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-xl mb-4 text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap"},Et={key:0,class:"mt-3 flex flex-wrap gap-2"},zt=["src"],Dt={class:"flex items-center gap-3"},Lt=["max"],Tt={class:"text-sm text-gray-500"},Vt=["onClick"],Wt={key:2,class:"text-center py-4 text-gray-500 text-sm"},Ft={key:2},Gt={class:"p-4 border-b border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 flex justify-between items-center"},Qt={class:"text-sm text-gray-500"},Ut={class:"divide-y divide-gray-100 dark:divide-gray-700"},Ot={key:0,class:"p-8 text-center text-gray-500"},Rt={class:"flex flex-col gap-3"},Ht={class:"flex justify-between items-start"},qt={class:"flex-1"},Jt={class:"font-medium text-gray-900 dark:text-white"},Kt={key:0,class:"text-green-600 bg-green-100 px-1.5 py-0.5 rounded text-[10px]"},Xt={key:1,class:"text-red-600 bg-red-100 px-1.5 py-0.5 rounded text-[10px]"},Yt={key:0,class:"text-xs text-gray-400 mt-1"},Zt={class:"text-right flex-shrink-0"},er={class:"text-xs text-gray-400"},tr={key:1,class:"text-xs text-gray-400 italic mb-2"},rr={key:2},sr={key:0,class:"mt-2"},or={class:"flex items-center justify-between mb-1"},lr={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden"},ar={key:2,class:"flex flex-col items-center justify-center py-12 text-gray-500"},cr={__name:"MyProgressDetails",props:{courseId:{type:[String,Number],required:!0},memberId:{type:[String,Number],required:!0}},setup(s){const x=s,I=te(),v=de(),c=re("isCourseAdmin",_(!1)),$=_(!0),n=_(null),p=_(null),D=_(!1),g=_(null),O=async a=>{D.value=!0,g.value=null;try{const r=n.value.user_id||n.value.member?.user_id||n.value.member?.user?.id,i=await I.get(`/api/assignments/${a}/answers`,{params:{user_id:r}});i.data&&i.data.length>0&&(g.value=i.data[0],g.value.newPoints=i.data[0].points)}catch(r){console.error(r),v.toast("ไม่สามารถโหลดคำตอบได้","error")}finally{D.value=!1}},L=a=>{p.value===a.id?(p.value=null,g.value=null):(p.value=a.id,c.value&&(a.submitted||a.graded)&&O(a.id))},G=async a=>{if(g.value)try{await I.post(`/api/assignments/${a}/answers/${g.value.id}/set-points`,{points:g.value.newPoints,course_id:x.courseId}),g.value.points=g.value.newPoints,v.toast("บันทึกคะแนนเรียบร้อย","success"),await A()}catch(r){console.error(r),v.toast("บันทึกคะแนนไม่สำเร็จ","error")}},N=async()=>{v.toast("ส่งงานเรียบร้อยแล้ว","success"),p.value=null,await A()},A=async()=>{$.value=!0;try{const a=await I.get(`/api/courses/${x.courseId}/members/${x.memberId}/progress`);n.value={assignments:[],quizzes:[],lessons:[],...a},n.value.member&&(k.value={member_name:n.value.member.member_name||n.value.member.user?.name||"",member_code:n.value.member.member_code||"",order_number:n.value.member.order_number||"",group_id:n.value.member.group_id||null})}catch(a){console.error(a)}finally{$.value=!1}};se(A);const b=y(()=>{if(!n.value)return{};const a=n.value,r=(a.assignments?.reduce((e,m)=>e+(m.score||0),0)||0)+(a.quizzes?.reduce((e,m)=>e+(m.score||0),0)||0),i=(a.assignments?.reduce((e,m)=>e+(m.max_score||0),0)||0)+(a.quizzes?.reduce((e,m)=>e+(m.max_score||0),0)||0);return{totalScore:r,maxScore:i,grade:a.member?.grade_name||"-",completedLessons:a.lessons?.filter(e=>e.completed).length||0,totalLessons:a.lessons?.length||0,completedAssignments:a.assignments?.filter(e=>e.submitted).length||0,totalAssignments:a.assignments?.length||0,completedQuizzes:a.quizzes?.filter(e=>e.completed).length||0,totalQuizzes:a.quizzes?.length||0,groupName:a.member?.group?.name||"ไม่มีกลุ่ม",scorePercent:i>0?r/i*100:0}}),k=_({member_name:"",member_code:"",order_number:"",group_id:null}),P=_(!1),T=_(!1),R=async()=>{P.value=!0,T.value=!1;try{await I.patch(`/api/courses/${x.courseId}/members/${x.memberId}/update`,k.value),T.value=!0,setTimeout(()=>T.value=!1,3e3),await A()}catch(a){console.error(a),alert("บันทึกข้อมูลไม่สำเร็จ")}finally{P.value=!1}},V=(a,r)=>{if(!r)return"text-gray-500";const i=a/r*100;return i>=80?"text-green-600":i>=50?"text-blue-600":"text-red-600"},Q=(a,r)=>{if(!r)return"bg-gray-400 dark:bg-gray-600";const i=a/r*100;return i>=80?"bg-gradient-to-r from-green-400 to-green-500":i>=50?"bg-gradient-to-r from-blue-400 to-blue-500":"bg-gradient-to-r from-red-400 to-red-500"},M=y(()=>!!(c.value||n.value?.member?.order_number)),B=_("lessons"),w=[{id:"lessons",label:"บทเรียน",icon:"fluent:book-open-24-filled"},{id:"assignments",label:"งานที่มอบหมาย",icon:"fluent:document-text-24-filled"},{id:"quizzes",label:"แบบทดสอบ",icon:"fluent:quiz-new-24-filled"}];return(a,r)=>{const i=K;return o(),l("div",fe,[$.value?(o(),l("div",pe,[S(f(j),{icon:"eos-icons:loading",class:"w-10 h-10 text-blue-600"})])):n.value?(o(),l("div",he,[t("div",_e,[t("div",ke,[t("div",null,[t("h3",we,[S(f(j),{icon:"fluent:person-edit-24-filled",class:"text-blue-500"}),r[6]||(r[6]=C(" ข้อมูลส่วนตัว ",-1)),n.value.member?.role===4?(o(),l("span",Se," ผู้ดูแลระบบ (Admin) ")):(o(),l("span",$e," นักเรียน (Student) "))]),r[7]||(r[7]=t("p",{class:"text-sm text-gray-500"},"แก้ไขข้อมูลพื้นฐานของคุณในรายวิชานี้",-1))]),t("div",Ce," กลุ่มเรียน: "+d(b.value.groupName),1)]),t("div",Ie,[t("div",null,[r[8]||(r[8]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"เลขที่ (Order No.)",-1)),F(t("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>k.value.order_number=e),type:"number",class:"w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"ระบุเลขที่..."},null,512),[[U,k.value.order_number]])]),t("div",null,[r[9]||(r[9]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"รหัสประจำตัว (Student ID)",-1)),F(t("input",{"onUpdate:modelValue":r[1]||(r[1]=e=>k.value.member_code=e),type:"text",class:"w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"ระบุรหัสประจำตัว..."},null,512),[[U,k.value.member_code]])]),t("div",null,[r[10]||(r[10]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"ชื่อ-นามสกุล (Name)",-1)),F(t("input",{"onUpdate:modelValue":r[2]||(r[2]=e=>k.value.member_name=e),type:"text",class:"w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"ระบุชื่อ-นามสกุล..."},null,512),[[U,k.value.member_name]])]),t("div",null,[r[12]||(r[12]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"กลุ่มเรียน (Group)",-1)),F(t("select",{"onUpdate:modelValue":r[3]||(r[3]=e=>k.value.group_id=e),class:"w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-sm focus:ring-blue-500 focus:border-blue-500"},[r[11]||(r[11]=t("option",{value:null},"-- ไม่ระบุกลุ่ม --",-1)),(o(!0),l(E,null,W(n.value.groups,e=>(o(),l("option",{key:e.id,value:e.id},d(e.name),9,je))),128))],512),[[oe,k.value.group_id]])])]),t("div",Ne,[T.value?(o(),l("span",Ae,[S(f(j),{icon:"fluent:checkmark-circle-24-filled",class:"mr-1"}),r[13]||(r[13]=C(" บันทึกเรียบร้อย ",-1))])):u("",!0),t("button",{onClick:R,disabled:P.value,class:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg text-sm font-medium transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed"},[P.value?(o(),le(f(j),{key:0,icon:"eos-icons:loading",class:"mr-2 animate-spin"})):u("",!0),C(" "+d(P.value?"กำลังบันทึก...":"บันทึกการเปลี่ยนแปลง"),1)],8,Pe)])]),M.value?(o(),l("div",Be,[t("div",Ee,[r[16]||(r[16]=t("div",{class:"text-sm text-gray-500 mb-2"},"เกรดปัจจุบัน",-1)),S(f(J),{diameter:100,"completed-steps":100,"total-steps":100,"stroke-width":8,"inner-stroke-width":8,"start-color":"#3B82F6","stop-color":"#2563EB","inner-stroke-color":"#E5E7EB"},{default:H(()=>[t("span",ze,d(b.value.grade),1)]),_:1})]),t("div",De,[r[17]||(r[17]=t("div",{class:"text-sm text-gray-500 mb-2"},"คะแนนรวม",-1)),S(f(J),{diameter:100,"completed-steps":Math.round(b.value.scorePercent),"total-steps":100,"stroke-width":8,"inner-stroke-width":8,"start-color":"#10B981","stop-color":"#059669","inner-stroke-color":"#E5E7EB"},{default:H(()=>[t("div",Le,[t("div",Te,d(b.value.totalScore),1),t("div",Ve,"/ "+d(b.value.maxScore),1)])]),_:1},8,["completed-steps"])]),t("div",We,[r[18]||(r[18]=t("div",{class:"text-sm text-gray-500 mb-1"},"งานที่ส่งแล้ว",-1)),t("div",Fe,[C(d(b.value.completedAssignments)+" ",1),t("span",Ge,"/ "+d(b.value.totalAssignments),1)])]),t("div",Qe,[r[19]||(r[19]=t("div",{class:"text-sm text-gray-500 mb-1"},"ทดสอบแล้ว",-1)),t("div",Ue,[C(d(b.value.completedQuizzes)+" ",1),t("span",Oe,"/ "+d(b.value.totalQuizzes),1)])])])):(o(),l("div",Me,[S(f(j),{icon:"fluent:warning-24-filled",class:"w-12 h-12 text-yellow-500 mx-auto mb-2"}),r[14]||(r[14]=t("h3",{class:"text-lg font-bold text-yellow-800 dark:text-yellow-200"},"ยังไม่มีเลขที่ (Order Number)",-1)),r[15]||(r[15]=t("p",{class:"text-yellow-700 dark:text-yellow-300 mt-1"},[C(" กรุณาระบุเลขที่ของคุณ หรือติดต่อผู้สอนเพื่อตรวจสอบข้อมูล "),t("br"),C(" (ระบบแสดงคะแนนสำหรับนักเรียนที่มีเลขที่แล้วเท่านั้น) ")],-1))])),t("div",Re,[(o(),l(E,null,W(w,e=>t("button",{key:e.id,onClick:m=>B.value=e.id,class:h(["px-4 py-3 text-sm font-medium flex items-center gap-2 whitespace-nowrap transition-colors border-b-2",B.value===e.id?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"])},[S(f(j),{icon:e.icon,class:"w-5 h-5"},null,8,["icon"]),C(" "+d(e.label),1)],10,He)),64))]),t("div",qe,[B.value==="lessons"?(o(),l("div",Je,[t("div",Ke,[r[20]||(r[20]=t("h3",{class:"font-semibold text-gray-800 dark:text-white"},"รายการบทเรียน",-1)),t("span",Xe,d(b.value.completedLessons)+"/"+d(b.value.totalLessons),1)]),t("div",Ye,[n.value.lessons&&n.value.lessons.length===0?(o(),l("div",Ze," ไม่มีบทเรียนในรายวิชานี้ ")):u("",!0),(o(!0),l(E,null,W(n.value.lessons,e=>(o(),l("div",{key:e.id,class:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors"},[t("div",et,[t("div",tt,[t("div",rt,[t("div",{class:h(["flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center",e.completed?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"])},[S(f(j),{icon:e.completed?"fluent:checkmark-24-filled":"fluent:circle-24-regular",class:"w-5 h-5"},null,8,["icon"])],2),t("div",st,d(e.title),1)]),t("span",{class:h(["text-xs px-2 py-1 rounded-full flex-shrink-0",e.completed?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"])},d(e.completed?"เรียนแล้ว":"ยังไม่เรียน"),3)]),n.value.lessons.length>0?(o(),l("div",ot,[t("div",lt,[r[21]||(r[21]=t("span",{class:"text-xs text-gray-500"},"ความคืบหน้า",-1)),t("span",{class:h(["text-xs font-medium",e.completed?"text-green-600":"text-gray-400"])},d(e.completed?"100%":"0%"),3)]),t("div",at,[t("div",{class:h(["h-full rounded-full transition-all duration-500 ease-out",e.completed?"bg-gradient-to-r from-green-400 to-green-500":"bg-gray-400 dark:bg-gray-600"]),style:z({width:e.completed?"100%":"0%"})},null,6)])])):u("",!0)])]))),128))])])):u("",!0),B.value==="assignments"?(o(),l("div",dt,[t("div",nt,[r[22]||(r[22]=t("h3",{class:"font-semibold text-gray-800 dark:text-white"},"รายการงานที่มอบหมาย",-1)),t("span",it,d(b.value.completedAssignments)+"/"+d(b.value.totalAssignments),1)]),t("div",ut,[n.value.assignments&&n.value.assignments.length===0?(o(),l("div",ct," ไม่มีงานที่มอบหมายในรายวิชานี้ ")):u("",!0),(o(!0),l(E,null,W(n.value.assignments,e=>(o(),l("div",{key:e.id,class:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors"},[t("div",mt,[t("div",gt,[t("div",bt,[t("div",xt,d(e.title),1),t("div",{class:h(["text-xs mt-1",{"text-green-600":e.submitted,"text-yellow-600":!e.submitted}])},d(e.submitted?e.graded?"ตรวจแล้ว":"ส่งแล้ว":"ยังไม่ส่ง"),3),e.submitted_at?(o(),l("div",yt," ส่งเมื่อ: "+d(new Date(e.submitted_at).toLocaleDateString("th-TH")),1)):u("",!0)]),M.value?(o(),l("div",vt,[t("div",{class:h(["font-bold text-lg",V(e.score,e.max_score)])},d(e.score!==null?e.score:"-"),3),t("div",ft,"เต็ม "+d(e.max_score),1),t("div",pt,[!f(c)&&!e.submitted?(o(),l("button",{key:0,onClick:m=>L(e),class:"text-xs px-3 py-1.5 rounded-lg transition-colors bg-blue-600 text-white hover:bg-blue-700"},d(p.value===e.id?"ปิด":"ส่งงาน"),9,ht)):u("",!0),f(c)&&(e.submitted||e.graded)?(o(),l("button",{key:1,onClick:m=>L(e),class:h(["text-xs px-3 py-1.5 rounded-lg transition-colors border",p.value===e.id?"bg-orange-50 text-orange-600 border-orange-200":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},d(p.value===e.id?"ปิดการตรวจ":e.graded?"แก้ไขคะแนน":"ตรวจให้คะแนน"),11,_t)):u("",!0)])])):(o(),l("div",kt,[r[23]||(r[23]=t("div",{class:"text-xs text-gray-400 italic"},"ซ่อนคะแนน",-1)),t("div",wt,[!f(c)&&!e.submitted?(o(),l("button",{key:0,onClick:m=>L(e),class:"text-xs px-3 py-1.5 rounded-lg transition-colors bg-blue-600 text-white hover:bg-blue-700"},d(p.value===e.id?"ปิด":"ส่งงาน"),9,St)):u("",!0)])]))]),e.max_score>0&&M.value?(o(),l("div",$t,[t("div",Ct,[r[24]||(r[24]=t("span",{class:"text-xs text-gray-500"},"ความคืบหน้า",-1)),t("span",{class:h(["text-xs font-medium",V(e.score,e.max_score)])},d(e.score!==null?Math.round(e.score/e.max_score*100)+"%":"0%"),3)]),t("div",It,[t("div",{class:h(["h-full rounded-full transition-all duration-500 ease-out",e.score!==null&&e.max_score>0?Q(e.score,e.max_score):"bg-gray-400 dark:bg-gray-600"]),style:z({width:e.score!==null&&e.max_score>0?`${Math.min(e.score/e.max_score*100,100)}%`:"0%"})},null,6)])])):u("",!0),p.value===e.id?(o(),l("div",jt,[f(c)?(o(),l("div",At,[D.value?(o(),l("div",Pt,[S(f(j),{icon:"eos-icons:loading",class:"w-6 h-6 text-orange-500"})])):g.value?(o(),l("div",Mt,[t("div",Bt,[C(d(g.value.content)+" ",1),g.value.images?.length?(o(),l("div",Et,[(o(!0),l(E,null,W(g.value.images,m=>(o(),l("img",{key:m.id,src:m.full_url||m.image_url,class:"w-20 h-20 object-cover rounded-lg border cursor-pointer"},null,8,zt))),128))])):u("",!0)]),t("div",Dt,[r[25]||(r[25]=t("div",{class:"font-bold text-sm"},"คะแนน:",-1)),F(t("input",{type:"number","onUpdate:modelValue":r[5]||(r[5]=m=>g.value.newPoints=m),max:e.max_score,min:"0",class:"w-20 px-2 py-1.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-orange-500 outline-none text-center font-bold"},null,8,Lt),[[U,g.value.newPoints,void 0,{number:!0}]]),t("span",Tt,"/ "+d(e.max_score),1),t("button",{onClick:m=>G(e.id),class:"ml-auto px-4 py-1.5 bg-orange-500 text-white rounded-lg text-sm font-bold hover:bg-orange-600 shadow-sm"}," บันทึก ",8,Vt)])])):(o(),l("div",Wt," ไม่พบคำตอบ หรือ ยังไม่ได้ส่งงาน "))])):(o(),l("div",Nt,[S(ae,{assignment:e,courseId:s.courseId,onSubmitted:N,onCancel:r[4]||(r[4]=m=>p.value=null)},null,8,["assignment","courseId"])]))])):u("",!0)])]))),128))])])):u("",!0),B.value==="quizzes"?(o(),l("div",Ft,[t("div",Gt,[r[26]||(r[26]=t("h3",{class:"font-semibold text-gray-800 dark:text-white"},"รายการแบบทดสอบ",-1)),t("span",Qt,d(b.value.completedQuizzes)+"/"+d(b.value.totalQuizzes),1)]),t("div",Ut,[n.value.quizzes&&n.value.quizzes.length===0?(o(),l("div",Ot," ไม่มีแบบทดสอบในรายวิชานี้ ")):u("",!0),(o(!0),l(E,null,W(n.value.quizzes,e=>(o(),l("div",{key:e.id,class:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors"},[t("div",Rt,[t("div",Ht,[t("div",qt,[t("div",Jt,d(e.title),1),t("div",{class:h(["text-xs mt-1 flex items-center gap-2",{"text-green-600":e.completed,"text-gray-500":!e.completed}])},[t("span",null,d(e.completed?`ทำแล้ว (${e.attempt_count} ครั้ง)`:"ยังไม่ทำ"),1),e.completed&&e.passed?(o(),l("span",Kt,"ผ่าน")):u("",!0),e.completed&&!e.passed?(o(),l("span",Xt,"ไม่ผ่าน")):u("",!0)],2),e.completed_at?(o(),l("div",Yt," ล่าสุด: "+d(new Date(e.completed_at).toLocaleDateString("th-TH")),1)):u("",!0)]),t("div",Zt,[M.value?(o(),l(E,{key:0},[t("div",{class:h(["font-bold text-lg",V(e.score,e.max_score)])},d(e.score!==null?e.score:"-"),3),t("div",er,"เต็ม "+d(e.max_score),1)],64)):(o(),l("div",tr,"ซ่อนคะแนน")),e.passed?u("",!0):(o(),l("div",rr,[S(i,{to:`/courses/${s.courseId}/quizzes/${e.id}`,class:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700 transition-colors"},{default:H(()=>[...r[27]||(r[27]=[C(" ทำแบบทดสอบ ",-1)])]),_:1},8,["to"])]))])]),e.completed&&e.max_score>0&&M.value?(o(),l("div",sr,[t("div",or,[r[28]||(r[28]=t("span",{class:"text-xs text-gray-500"},"ความคืบหน้า",-1)),t("span",{class:h(["text-xs font-medium",V(e.score,e.max_score)])},d(Math.round(e.score/e.max_score*100))+"% ",3)]),t("div",lr,[t("div",{class:h(["h-full rounded-full transition-all duration-500 ease-out",Q(e.score,e.max_score)]),style:z({width:`${Math.min(e.score/e.max_score*100,100)}%`})},null,6)])])):u("",!0)])]))),128))])])):u("",!0)])])):(o(),l("div",ar,[S(f(j),{icon:"fluent:error-circle-24-filled",class:"w-12 h-12 text-red-400 mb-2"}),r[29]||(r[29]=t("p",null,"ไม่สามารถโหลดข้อมูลได้",-1)),t("button",{onClick:A,class:"mt-2 text-blue-600 hover:underline"},"ลองใหม่")]))])}}};export{cr as _};
