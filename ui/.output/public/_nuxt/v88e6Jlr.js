import{_ as A}from"./DROJGjoa.js";import{q as S,p as V,r as g,z as B,c as a,a as e,b as r,w as m,$ as v,u as l,aa as E,ab as N,F as u,k as h,d as $,aH as j,o,e as p,I as n,t as i,T as z,a7 as F}from"./CHs-R6Sv.js";const M={class:"space-y-6"},I={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},T={class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700"},D={class:"flex flex-col sm:flex-row gap-4"},H={class:"flex-1 relative"},R=["value"],U={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},W={key:0,class:"col-span-full p-8 text-center"},q={class:"flex items-start justify-between mb-4"},O={class:"flex items-center gap-2"},P={class:"font-mono font-bold text-lg text-indigo-600 dark:text-indigo-400"},Q={class:"text-2xl font-bold text-gray-800 dark:text-white mt-1"},Y={class:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl"},G={class:"space-y-2 text-sm"},J={class:"flex items-center justify-between"},K={class:"text-gray-800 dark:text-white font-medium"},X={class:"flex items-center justify-between"},Z={class:"text-gray-800 dark:text-white font-medium"},ee={class:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 mt-2"},te={class:"flex justify-end gap-2 mt-4 pt-4 border-t border-gray-100 dark:border-gray-700"},se={class:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors"},ae={key:0,class:"col-span-full p-8 text-center"},le=S({__name:"index",setup(re){const k=V().public.apiBase,c=g([]),x=g(!0),y=g(""),b=g("all"),_=[{value:"all",label:"ทั้งหมด"},{value:"active",label:"ใช้งานได้"},{value:"expired",label:"หมดอายุ"},{value:"disabled",label:"ปิดใช้งาน"}],w=async()=>{x.value=!0;try{const d=j("token"),t=await $fetch(`${k}/api/admin/coupons`,{headers:{Authorization:`Bearer ${d.value}`}});t.success&&(c.value=t.data.data||t.data)}catch(d){console.error("Failed to fetch coupons:",d),c.value=[{id:1,code:"WELCOME50",discount:50,type:"percentage",usageLimit:100,usedCount:45,status:"active",expiresAt:"2026-02-28"},{id:2,code:"SAVE100",discount:100,type:"fixed",usageLimit:50,usedCount:50,status:"expired",expiresAt:"2026-01-15"},{id:3,code:"NEWYEAR25",discount:25,type:"percentage",usageLimit:200,usedCount:89,status:"active",expiresAt:"2026-03-31"},{id:4,code:"FLASH20",discount:20,type:"percentage",usageLimit:null,usedCount:234,status:"active",expiresAt:"2026-01-31"},{id:5,code:"VIP500",discount:500,type:"fixed",usageLimit:10,usedCount:8,status:"active",expiresAt:"2026-06-30"}]}finally{x.value=!1}},C=d=>{const t={active:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",expired:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",disabled:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"};return t[d]||t.disabled},L=d=>({active:"ใช้งานได้",expired:"หมดอายุ",disabled:"ปิดใช้งาน"})[d]||"ไม่ทราบ";return B(()=>{w()}),(d,t)=>{const f=A;return o(),a("div",M,[e("div",I,[t[3]||(t[3]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white"},"จัดการคูปอง"),e("p",{class:"text-gray-500 dark:text-gray-400 mt-1"},"สร้างและจัดการโค้ดส่วนลด")],-1)),r(f,{to:"/nuxnan-admin/coupons/create",class:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-white transition-colors"},{default:m(()=>[r(l(n),{icon:"fluent:add-24-regular",class:"w-5 h-5"}),t[2]||(t[2]=p(" สร้างคูปองใหม่ ",-1))]),_:1})]),e("div",T,[e("div",D,[e("div",H,[r(l(n),{icon:"fluent:search-24-regular",class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>y.value=s),type:"text",placeholder:"ค้นหาโค้ดคูปอง...",class:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[E,y.value]])]),v(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>b.value=s),class:"px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"},[(o(),a(u,null,h(_,s=>e("option",{key:s.value,value:s.value},i(s.label),9,R)),64))],512),[[N,b.value]])])]),e("div",U,[x.value?(o(),a("div",W,[r(l(n),{icon:"fluent:spinner-ios-20-regular",class:"w-8 h-8 text-indigo-600 animate-spin mx-auto"}),t[4]||(t[4]=e("p",{class:"text-gray-500 mt-2"},"กำลังโหลดข้อมูล...",-1))])):(o(),a(u,{key:1},[(o(!0),a(u,null,h(c.value,s=>(o(),a("div",{key:s.id,class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow"},[e("div",q,[e("div",null,[e("div",O,[e("span",P,i(s.code),1),e("span",{class:z([C(s.status),"px-2 py-0.5 rounded-full text-xs font-medium"])},i(L(s.status)),3)]),e("p",Q,[s.type==="percentage"?(o(),a(u,{key:0},[p(i(s.discount)+"%",1)],64)):(o(),a(u,{key:1},[p("฿"+i(s.discount),1)],64)),t[5]||(t[5]=e("span",{class:"text-sm font-normal text-gray-500 ml-1"},"ส่วนลด",-1))])]),e("div",Y,[r(l(n),{icon:"fluent:ticket-diagonal-24-regular",class:"w-6 h-6 text-indigo-600"})])]),e("div",G,[e("div",J,[t[6]||(t[6]=e("span",{class:"text-gray-500"},"การใช้งาน",-1)),e("span",K,i(s.usedCount)+" / "+i(s.usageLimit||"∞"),1)]),e("div",X,[t[7]||(t[7]=e("span",{class:"text-gray-500"},"หมดอายุ",-1)),e("span",Z,i(s.expiresAt),1)]),e("div",ee,[e("div",{class:"bg-indigo-600 h-2 rounded-full",style:F({width:s.usageLimit?`${s.usedCount/s.usageLimit*100}%`:"50%"})},null,4)])]),e("div",te,[r(f,{to:`/nuxnan-admin/coupons/${s.id}/edit`,class:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors"},{default:m(()=>[r(l(n),{icon:"fluent:edit-24-regular",class:"w-5 h-5"})]),_:1},8,["to"]),e("button",se,[r(l(n),{icon:"fluent:delete-24-regular",class:"w-5 h-5"})])])]))),128)),c.value.length===0?(o(),a("div",ae,[r(l(n),{icon:"fluent:ticket-diagonal-24-regular",class:"w-12 h-12 text-gray-300 mx-auto"}),t[8]||(t[8]=e("p",{class:"text-gray-500 mt-2"},"ไม่พบคูปอง",-1))])):$("",!0)],64))])])}}});export{le as default};
