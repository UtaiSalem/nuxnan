import{r as j,H as z}from"./BB7BZ0Dd.js";import B from"./DPrFP-Up.js";import $ from"./DjMo2Yo9.js";import H from"./BvLjxVVB.js";import N from"./DkZumruS.js";import D from"./CjSe0VM9.js";import T from"./C02pXPrI.js";import{y as L,W as A,c as i,b as d,u as m,a as t,h as p,t as u,T as F,d as w,F as I,k as O,r as b,n as v,o as r}from"./Brb_7992.js";import"./CKGmmoJI.js";import"./Dnk_-Q5K.js";import"./BQxta0Da.js";import"./DOMrm-Is.js";const q={class:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50"},E={class:"bg-white shadow-lg border-b border-gray-200 sticky top-0 z-50"},P={class:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8"},U={class:"flex justify-between items-center h-14 sm:h-16"},W={class:"flex items-center space-x-2 sm:space-x-4"},G={class:"flex items-center space-x-2"},J={class:"w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center flex-shrink-0"},K={class:"text-white text-xs sm:text-sm font-medium"},Q={class:"hidden sm:block text-right min-w-0"},R={class:"text-xs sm:text-sm font-medium text-gray-900 truncate max-w-24 sm:max-w-32 lg:max-w-none"},X={class:"max-w-7xl mx-auto pb-4 sm:pb-6 lg:py-8 px-3 sm:px-4 lg:px-8"},Y={class:"flex items-center"},Z={key:0,class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},ee={key:1,class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},te={key:2,class:"w-5 h-5 mr-2 animate-spin",fill:"currentColor",viewBox:"0 0 20 20"},se={class:"font-medium"},ne={class:"space-y-4 sm:space-y-6"},oe={key:1,class:"mt-8 sm:mt-12 bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 overflow-hidden"},ae={class:"p-4 sm:p-6"},le={class:"space-y-4"},ie={class:"flex items-center justify-between"},re={class:"font-medium text-gray-900"},de={class:"text-sm text-gray-600"},me={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},ue={key:0,class:"mt-2"},ce={class:"text-sm text-gray-700"},Me={__name:"Profile",props:{student:{type:Object,required:!0,validator:a=>a&&typeof a=="object"},studentCard:{type:Object,default:()=>({})},homeVisits:{type:Array,default:()=>[]}},setup(a){const f=a,l=b(!1),h=b(null),o=b(""),g=v(()=>f.student||{}),c=async(n,e)=>{try{l.value=!0;const y={student:"ข้อมูลนักเรียน",academic:"ข้อมูลการศึกษา",address:"ที่อยู่",contact:"ข้อมูลติดต่อ",health:"ข้อมูลสุขภาพ",guardian:"ข้อมูลผู้ปกครอง"}[n]||n;e.success?(h.value=new Date,o.value=`บันทึก${y}สำเร็จ`,setTimeout(()=>{o.value=""},3e3)):o.value=`เกิดข้อผิดพลาดในการบันทึก${y}: ${e.message||"ไม่ทราบสาเหตุ"}`}catch(s){o.value=`เกิดข้อผิดพลาดที่ไม่คาดคิด: ${s.message}`}finally{l.value=!1}},_=async()=>{try{await j.post(route("homevisit.general.logout"))}catch(n){console.error("Logout error:",n),window.location.href=route("homevisit.login")}},k=v(()=>{const n=g.value.first_name_th||"",e=g.value.last_name_th||"";return`${n} ${e}`.trim()}),C=v(()=>g.value.first_name_th?.charAt(0)||"S"),M=v(()=>f.homeVisits&&f.homeVisits.length>0),S=new Map([["pending","รอดำเนินการ"],["completed","เสร็จสิ้น"],["cancelled","ยกเลิก"]]),V=n=>S.get(n)||n,x=n=>{if(!n)return"";x._formatter||(x._formatter=new Intl.DateTimeFormat("th-TH",{year:"numeric",month:"long",day:"numeric"}));try{return x._formatter.format(new Date(n))}catch(e){return console.warn("Date formatting error:",e),n}};return L(()=>{h.value&&(o.value=`ข้อมูลล่าสุดถูกบันทึกเมื่อ ${x(h.value)}`)}),A(()=>{l.value=!1,o.value=""}),(n,e)=>(r(),i("div",q,[d(m(z),{title:"ข้อมูลส่วนตัว - ระบบเยี่ยมบ้านนักเรียน"}),t("nav",E,[t("div",P,[t("div",U,[e[8]||(e[8]=p('<div class="flex items-center min-w-0 flex-1"><div class="flex items-center"><div class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 sm:w-6 sm:h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2v0a2 2 0 002-2h10"></path></svg></div><div class="ml-2 sm:ml-3 min-w-0 flex-1"><h1 class="text-sm sm:text-base lg:text-xl font-bold text-gray-900 truncate"> ระบบเยี่ยมบ้าน </h1><p class="text-xs sm:text-sm text-gray-500 truncate sm:hidden"> ข้อมูลส่วนตัว </p></div></div></div>',1)),t("div",W,[t("div",G,[t("div",J,[t("span",K,u(C.value),1)]),t("div",Q,[t("p",R,u(k.value),1),e[6]||(e[6]=t("p",{class:"text-xs text-gray-500"},"นักเรียน",-1))])]),t("button",{onClick:_,class:"inline-flex items-center px-2 py-1.5 sm:px-4 sm:py-2 border border-transparent text-xs sm:text-sm font-medium rounded-lg text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200 shadow-md hover:shadow-lg"},[...e[7]||(e[7]=[t("svg",{class:"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),t("span",{class:"hidden sm:inline"},"ออกจากระบบ",-1)])])])])])]),t("div",X,[e[13]||(e[13]=p('<div class="mb-6 sm:mb-8"><div class="bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 overflow-hidden"><div class="bg-gradient-to-r from-blue-600 to-indigo-600 px-4 py-6 sm:px-6 sm:py-8"><div class="flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0"><div class="w-12 h-12 sm:w-16 sm:h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center flex-shrink-0"><svg class="w-6 h-6 sm:w-8 sm:h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div><div class="sm:ml-6"><h1 class="text-xl sm:text-2xl lg:text-3xl font-bold text-white"> ข้อมูลส่วนตัวนักเรียน </h1><p class="text-blue-100 mt-1 text-sm sm:text-base"> จัดการและแก้ไขข้อมูลส่วนตัวของคุณ </p><div class="mt-3 sm:hidden"><nav class="flex" aria-label="Breadcrumb"><ol class="inline-flex items-center space-x-1"><li class="inline-flex items-center"><span class="text-xs font-medium text-blue-200">หน้าหลัก</span></li><li><div class="flex items-center"><svg class="w-3 h-3 text-blue-200" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg><span class="ml-1 text-xs font-medium text-white">ข้อมูลส่วนตัว</span></div></li></ol></nav></div></div></div></div></div></div>',1)),o.value?(r(),i("div",{key:0,class:F(["mb-6 p-4 rounded-lg border-l-4 transition-all duration-300",{"bg-green-50 border-green-400 text-green-700":o.value.includes("สำเร็จ"),"bg-red-50 border-red-400 text-red-700":o.value.includes("ข้อผิดพลาด"),"bg-blue-50 border-blue-400 text-blue-700":o.value.includes("กำลัง")}])},[t("div",Y,[o.value.includes("สำเร็จ")?(r(),i("svg",Z,[...e[9]||(e[9]=[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):o.value.includes("ข้อผิดพลาด")?(r(),i("svg",ee,[...e[10]||(e[10]=[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)])])):(r(),i("svg",te,[...e[11]||(e[11]=[t("path",{d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])),t("span",se,u(o.value),1)])],2)):w("",!0),t("div",ne,[d(m(B),{student:a.student,"student-card":a.studentCard,onSave:e[0]||(e[0]=s=>c("student",s)),"is-loading":l.value},null,8,["student","student-card","is-loading"]),d(m($),{student:a.student,onSave:e[1]||(e[1]=s=>c("academic_info",s)),"is-loading":l.value},null,8,["student","is-loading"]),d(m(H),{student:a.student,onSave:e[2]||(e[2]=s=>c("address",s)),"is-loading":l.value},null,8,["student","is-loading"]),d(m(N),{student:a.student,onSave:e[3]||(e[3]=s=>c("contact",s)),"is-loading":l.value},null,8,["student","is-loading"]),d(m(D),{student:a.student,onSave:e[4]||(e[4]=s=>c("health",s)),"is-loading":l.value},null,8,["student","is-loading"]),d(m(T),{student:a.student,onSave:e[5]||(e[5]=s=>c("guardian",s)),"is-loading":l.value},null,8,["student","is-loading"])]),M.value?(r(),i("div",oe,[e[12]||(e[12]=p('<div class="bg-gradient-to-r from-indigo-500 to-purple-600 px-4 py-3 sm:px-6 sm:py-4"><div class="flex items-center"><div class="w-7 h-7 sm:w-8 sm:h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center flex-shrink-0"><svg class="w-4 h-4 sm:w-5 sm:h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div><div class="ml-2 sm:ml-3 min-w-0 flex-1"><h3 class="text-base sm:text-lg font-semibold text-white truncate"> ประวัติการเยี่ยมบ้าน </h3><p class="text-indigo-100 text-xs sm:text-sm truncate">รายการการเยี่ยมบ้านของนักเรียน</p></div></div></div>',1)),t("div",ae,[t("div",le,[(r(!0),i(I,null,O(a.homeVisits,s=>(r(),i("div",{key:s.id,class:"bg-gray-50 rounded-lg p-4 border border-gray-200"},[t("div",ie,[t("div",null,[t("h4",re,u(x(s.visit_date)),1),t("p",de,u(s.purpose||"เยี่ยมบ้าน"),1)]),t("span",me,u(V(s.status)),1)]),s.notes?(r(),i("div",ue,[t("p",ce,u(s.notes),1)])):w("",!0)]))),128))])])])):w("",!0)])]))}};export{Me as default};
