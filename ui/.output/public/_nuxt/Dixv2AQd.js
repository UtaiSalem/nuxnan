import{c as V,b as a,w as d,o as M,a as e,u as n,j as u,I as c,$ as b,aa as h,ai as j,r}from"./Brb_7992.js";import{L as A,r as I}from"./BB7BZ0Dd.js";import{_ as x}from"./BDzbO1Tk.js";import U from"./Bw_wEDt3.js";import{S as w}from"./BQxta0Da.js";import"./BP2gnDQ3.js";import"./DJsVOgax.js";import"./Cpj98o6Y.js";import"./CZYWTWzM.js";import"./BF4yyfxD.js";import"./KqkJvF9s.js";const S={class:"bg-indigo-500 p-2 rounded-lg shadow-xl"},B={class:"flex items-center justify-between w-full px-4 py-2 rounded-t-lg bg-indigo-500"},q={class:"mt-4 rounded-lg shadow-xl"},R={class:"bg-white rounded-t-lg shadow-xl"},z={class:"relative w-full h-[256px]"},D=["src"],N={class:"absolute top-2 right-2 flex flex-col"},$={class:"relative flex flex-col items-center -mt-44"},H=["src"],O={class:"relative"},W={class:"bg-white rounded-b-lg mt-4"},E={class:"space-y-2 p-4"},G={class:"relative flex flex-wrap items-center ml-4 -mt-2 mb-2"},T=["checked"],J={class:"relative m-4 w-1/2"},K={class:"flex items-center justify-end w-full p-4"},P={class:"flex space-x-4"},Q=["disabled"],ue={__name:"CreateNewAcademy",emits:["close-modal","add-new-academy"],setup(X,{emit:Y}){const f=r(null),m=r(null),v=r(null),g=r(null),p=r(!1),o=r({name:"",slogan:"",address:"",cover:null,logo:null,autoAcceptMember:!0,membershipFees:0}),y=()=>{f.value.click()},k=()=>{m.value.click()};function _(s){o.value.cover=s.target.files[0],v.value=URL.createObjectURL(s.target.files[0])}function C(s){o.value.logo=s.target.files[0],g.value=URL.createObjectURL(s.target.files[0])}async function L(s){s.preventDefault(),p.value=!0;const t={headers:{"content-type":"multipart/form-data"}},l=new FormData;l.append("name",o.value.name),l.append("slogan",o.value.slogan),l.append("address",o.value.address),l.append("autoAcceptMember",o.value.autoAcceptMember),l.append("membershipFees",o.value.membershipFees),o.value.logo&&l.append("logo",o.value.logo),o.value.cover&&l.append("cover",o.value.cover);try{let i=await axios.post("/academies",l,t);i.data&&i.data.success?(w.fire("เสร็จสมบูรณ์","เพิ่มแหล่งเรียนรู้ใหม่เรียบร้อยแล้ว","success"),I.get(`/academies/${i.data.academy}`)):w.fire("เกิดข้อผิดพลาด","แต้มสะสมไม่เพียงพอ ต้องมีแต้มสะสมเกิน 1,000,000 แต้ม","error")}catch{}p.value=!1}function F(){window.location="/academies"}return(s,t)=>(M(),V("div",null,[a(U,{title:"Create new Academy"},{leftSideWidget:d(()=>[...t[5]||(t[5]=[e("div",null,null,-1)])]),mainContent:d(()=>[e("div",S,[e("div",B,[t[7]||(t[7]=e("h3",{class:"text-2xl text-white font-prompt"},"สร้างแหล่งเรียนรู้ใหม่",-1)),a(n(A),{href:"/academies",class:"w-10 p-3 rounded-full cursor-pointer hover:bg-indigo-400"},{default:d(()=>[...t[6]||(t[6]=[e("svg",{version:"1.1",id:"Go_Back_Arrow_Icon",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"20px",height:"18px",viewBox:"0 0 14 10","enable-background":"new 0 0 14 10","xml:space":"preserve"},[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"#FFFFFF",d:`M14,6H3.364l2.644,2.75L4.806,10L1.202,6.25l0,0L0,5L4.806,0\r
                                    l1.201,1.25L3.364,4H14V6z`})],-1)])]),_:1})])]),e("div",q,[e("form",{id:"create-new-academy-form",onSubmit:u(L,["prevent"]),class:"flex flex-col justify-center",enctype:"multipart/form-data"},[e("div",R,[e("div",z,[e("img",{src:v.value||"/storage/images/academies/covers/default_cover.png",class:"w-full h-full rounded-tl-lg rounded-tr-lg"},null,8,D),e("div",N,[e("input",{type:"file",class:"hidden",accept:"image/*",ref_key:"coverInput",ref:f,onChange:_},null,544),e("button",{type:"button",onClick:u(y,["prevent"]),class:"text-white hover:bg-white hover:bg-opacity-50 hover:text-gray-600 transition duration-200 rounded-full p-2"},[a(n(c),{icon:"heroicons:camera",class:"w-6 h-6"})])])]),e("div",$,[e("img",{class:"w-40 h-40 border-4 border-white rounded-full",src:g.value||"/storage/images/badge/level-badge.png",alt:"school logo"},null,8,H),e("div",O,[e("input",{type:"file",class:"hidden",accept:"image/*",ref_key:"logoInput",ref:m,onChange:C},null,544),e("button",{type:"button",onClick:u(k,["prevent"]),class:"absolute bottom-1 -right-4 flex justify-center hover:bg-opacity-80 hover:text-gray-600 transition duration-200"},[a(n(c),{icon:"heroicons:camera",class:"w-[28px] h-[28px] text-white bg-gray-600 rounded-full p-1 bg-opacity-70 hover:bg-opacity-90"})])])])]),e("div",W,[e("div",E,[a(x,{id:"school_name",type:"text",class:"mt-1 block w-full text-center",modelValue:o.value.name,"onUpdate:modelValue":t[0]||(t[0]=l=>o.value.name=l),required:"",autocomplete:"school_name",placeholder:"ชื่อแหล่งเรียนรู้"},null,8,["modelValue"]),a(x,{id:"slogan_name",type:"text",class:"mt-1 block w-full text-center",modelValue:o.value.slogan,"onUpdate:modelValue":t[1]||(t[1]=l=>o.value.slogan=l),required:"",autocomplete:"slogan_name",placeholder:"คำขวัญ, ปณิธาน"},null,8,["modelValue"]),b(e("textarea",{class:"w-full py-3 border border-slate-200 rounded-lg px-3 focus:outline-none focus:border-slate-500 hover:shadow dark:bg-gray-600 dark:text-gray-100",name:"bio",placeholder:"สถานที่ตั้ง","onUpdate:modelValue":t[2]||(t[2]=l=>o.value.address=l)},"                                ",512),[[h,o.value.address]])]),e("div",G,[b(e("input",{class:"w-4 h-4 transition-colors bg-white border-2 rounded appearance-none cursor-pointer focus-visible:outline-none peer border-slate-500 checked:border-violet-500 checked:bg-violet-500 checked:hover:border-violet-600 checked:hover:bg-violet-600 focus:outline-none checked:focus:border-violet-700 checked:focus:bg-violet-700 disabled:cursor-not-allowed disabled:border-slate-100 disabled:bg-slate-50",type:"checkbox",id:"id-c01","onUpdate:modelValue":t[3]||(t[3]=l=>o.value.autoAcceptMember=l),checked:o.value.autoAcceptMember},null,8,T),[[j,o.value.autoAcceptMember]]),t[8]||(t[8]=e("label",{class:"pl-2 cursor-pointer text-slate-500 peer-disabled:cursor-not-allowed peer-disabled:text-slate-400",for:"id-c01"}," ตอบรับคำขอเป็นสมาชิกอัตโนมัติ ",-1))]),e("div",J,[b(e("input",{id:"id-l11",type:"number","onUpdate:modelValue":t[4]||(t[4]=l=>o.value.membershipFees=l),placeholder:"",class:"relative w-full h-12 px-4 pl-12 placeholder-transparent transition-all border rounded outline-none focus-visible:outline-none peer border-slate-200 text-slate-500 autofill:bg-white invalid:border-pink-500 invalid:text-pink-500 focus:border-violet-500 focus:outline-none invalid:focus:border-pink-500 disabled:cursor-not-allowed disabled:bg-slate-50 disabled:text-slate-400"},null,512),[[h,o.value.membershipFees]]),t[9]||(t[9]=e("label",{for:"id-l11",class:"cursor-text peer-focus:cursor-default peer-autofill:-top-2 absolute left-2 -top-2 z-[1] px-2 text-xs text-slate-400 transition-all before:absolute before:top-0 before:left-0 before:z-[-1] before:block before:h-full before:w-full before:bg-white before:transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:left-10 peer-placeholder-shown:text-sm peer-required:after:text-pink-500 peer-required:after:content-['\\00a0*'] peer-invalid:text-pink-500 peer-focus:-top-2 peer-focus:left-2 peer-focus:text-xs peer-focus:text-violet-500 peer-invalid:peer-focus:text-pink-500 peer-disabled:cursor-not-allowed peer-disabled:text-slate-400 peer-disabled:before:bg-transparent"}," ค่าธรรมเนียมสมัครสมาชิก ",-1)),a(n(c),{icon:"noto:coin",class:"absolute w-6 h-6 top-3 left-4 stroke-slate-400 peer-disabled:cursor-not-allowed"}),t[10]||(t[10]=e("small",{class:"absolute flex justify-between w-full px-4 py-1 text-xs transition text-slate-400 peer-invalid:text-pink-500"},[e("span",null,"คะแนนที่ต้องใช้เมื่อผู้อื่นต้องการเข้าร่วมสมาชิก")],-1))]),e("div",K,[e("div",P,[e("button",{type:"submit",disabled:p.value,class:"inline-flex items-center justify-center h-10 gap-2 px-5 text-sm font-medium tracking-wide text-white transition duration-300 rounded-full focus-visible:outline-none whitespace-nowrap bg-violet-500 hover:bg-violet-600 focus:bg-violet-700 disabled:cursor-not-allowed disabled:border-violet-300 disabled:bg-violet-300 disabled:shadow-none"},[t[11]||(t[11]=e("span",null,"บันทึก",-1)),a(n(c),{icon:"heroicons-outline:plus-circle",class:"w-7 h-7"})],8,Q),e("button",{type:"button",onClick:u(F,["prevent"]),class:"px-6 py-2 bg-slate-200 hover:bg-red-300 hover:text-gray-800 border rounded-full"}," ยกเลิก ")])])])],32)])]),rightSideWidget:d(()=>[...t[12]||(t[12]=[e("div",null,null,-1)])]),_:1})]))}};export{ue as default};
