import{_ as K}from"./CWz3pxiP.js";import{_ as M}from"./Bp1sEnmr.js";import{q as G,ay as J,a9 as O,y as P,c as t,g as E,d as a,b as n,u as d,a as s,t as v,e as _,T as Q,F as T,k as j,r as u,K as U,n as k,o as e,I as c}from"./Brb_7992.js";import{_ as W}from"./BkVDiW_O.js";import{_ as X}from"./DbTywl6L.js";import{C as Y}from"./DGSq2Y25.js";import{u as Z}from"./CaSR6SuD.js";import{u as ee}from"./dw-ZgbPA.js";import"./BQxta0Da.js";const te={class:"max-w-5xl mx-auto px-4 py-8"},se={key:2,class:"space-y-8"},re={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700"},ae={class:"flex items-start justify-between mb-4"},oe={class:"flex items-center gap-3"},le={class:"w-12 h-12 rounded-xl bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400"},ne={class:"text-2xl font-bold text-gray-900 dark:text-white"},ie={class:"flex items-center gap-3 text-sm text-gray-500 mt-1"},de={key:0,class:"flex items-center gap-1"},ue={key:1,class:"flex items-center gap-1"},ce={key:0},ge={key:0,class:"mt-6"},me={key:1,class:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4"},be=["src"],ve={key:0,class:"mt-8"},_e={key:1,class:"space-y-6"},xe={key:0,class:"bg-blue-50 dark:bg-blue-900/10 rounded-2xl p-6 border border-blue-100 dark:border-blue-800"},fe={class:"flex justify-between items-start mb-4"},pe={class:"font-bold text-blue-900 dark:text-blue-300 flex items-center gap-2"},ke={class:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-blue-100 dark:border-blue-800/50 shadow-sm text-gray-800 dark:text-gray-200"},ye={key:0,class:"mt-4 grid grid-cols-2 sm:grid-cols-4 gap-3"},he=["src"],we={key:1,class:"mt-4 bg-amber-50 dark:bg-amber-900/20 p-4 rounded-xl border border-amber-100 dark:border-amber-800/50 flex items-center gap-3"},Ce={class:"p-2 bg-amber-100 dark:bg-amber-800/50 rounded-full text-amber-600 dark:text-amber-400"},Ie={class:"text-amber-700 dark:text-amber-400"},Ae={key:1},Se={key:3,class:"text-center py-20 text-gray-500"},Re=G({__name:"[assignmentId]",setup(Ee){const y=J(),B=O(),V=Z();ee();const x=y.params.id,$=y.params.assignmentId,m=u(!0),r=u(null),F=u(null),L=u([]),f=u(!1),h=u(""),w=u([]),C=u([]),I=u([]),b=u(!1),N=()=>{U(`/courses/${x}/assignments`)},A=async()=>{m.value=!0;try{const l=await B.get(`/api/courses/${x}/assignments/${$}`);r.value=l.assignment,F.value=l.course,L.value=l.groups||[],f.value=l.isCourseAdmin}catch(l){console.error("Failed to fetch assignment:",l),V.toast("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ","error")}finally{m.value=!1}},o=k(()=>f.value?null:r.value?.answers?.[0]||null),S=k(()=>o.value?o.value.graded_score!==null?"graded":"submitted":"not_started"),p=k(()=>{const l={not_started:{icon:"fluent:circle-24-regular",text:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏≥",color:"text-gray-700 dark:text-gray-300",bgColor:"bg-gray-50 dark:bg-gray-800 ring-1 ring-inset ring-gray-600/20 dark:ring-gray-500/30"},submitted:{icon:"fluent:checkmark-circle-24-filled",text:"‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß - ‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à",color:"text-blue-700 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/30 ring-1 ring-inset ring-blue-700/10 dark:ring-blue-500/30"},graded:{icon:"fluent:trophy-24-filled",text:"‡∏ï‡∏£‡∏ß‡∏à‡πÅ‡∏•‡πâ‡∏ß",color:"text-amber-700 dark:text-amber-400",bgColor:"bg-amber-50 dark:bg-amber-900/30 ring-1 ring-inset ring-amber-600/20 dark:ring-amber-500/30"}};return l[S.value]||l.not_started}),D=()=>{o.value&&(h.value=o.value.content||"",C.value=[...o.value.images||[]],I.value=[],w.value=[],b.value=!0)},R=()=>{b.value=!1,h.value="",w.value=[],C.value=[],I.value=[]},q=l=>l?new Date(l).toLocaleString("th-TH",{dateStyle:"medium",timeStyle:"short"}):"-";return P(()=>{A()}),(l,i)=>{const z=K,H=M;return e(),t("div",te,[m.value?(e(),E(Y,{key:0})):a("",!0),m.value?a("",!0):(e(),t("button",{key:1,onClick:N,class:"mb-6 flex items-center gap-2 text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors"},[n(d(c),{icon:"fluent:arrow-left-24-regular",class:"w-5 h-5"}),i[0]||(i[0]=s("span",null,"‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏ß‡∏°‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô",-1))])),!m.value&&r.value?(e(),t("div",se,[s("div",re,[s("div",ae,[s("div",oe,[s("div",le,[n(d(c),{icon:"fluent:clipboard-task-24-filled",class:"w-6 h-6"})]),s("div",null,[s("h1",ne,v(r.value.title),1),s("div",ie,[r.value.points?(e(),t("span",de,[n(d(c),{icon:"fluent:star-20-filled",class:"w-4 h-4 text-amber-500"}),_(" "+v(r.value.points)+" ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ",1)])):a("",!0),r.value.due_date?(e(),t("span",ue,[n(d(c),{icon:"fluent:calendar-ltr-20-regular",class:"w-4 h-4"}),_(" ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡πà‡∏á: "+v(q(r.value.due_date)),1)])):a("",!0)])])]),f.value?a("",!0):(e(),t("div",ce,[s("div",{class:Q(["inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold shadow-sm",p.value.bgColor+" "+p.value.color])},[n(d(c),{icon:p.value.icon,class:"w-5 h-5"},null,8,["icon"]),_(" "+v(p.value.text),1)],2)]))]),r.value.description?(e(),t("div",ge,[n(z,{"model-value":r.value.description,disabled:"",class:"!min-h-0"},null,8,["model-value"])])):a("",!0),r.value.images?.length?(e(),t("div",me,[(e(!0),t(T,null,j(r.value.images,g=>(e(),t("img",{key:g.id,src:g.full_url||g.image_url,class:"w-full h-40 object-cover rounded-xl shadow-sm hover:opacity-95 transition-opacity cursor-pointer border border-gray-100 dark:border-gray-700"},null,8,be))),128))])):a("",!0)]),f.value?(e(),t("div",ve,[r.value?(e(),E(W,{key:0,assignment:r.value,courseId:d(x)},null,8,["assignment","courseId"])):a("",!0)])):(e(),t("div",_e,[o.value&&!b.value?(e(),t("div",xe,[s("div",fe,[s("h3",pe,[n(d(c),{icon:"fluent:document-checkmark-24-filled",class:"w-6 h-6"}),i[1]||(i[1]=_(" ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ",-1))]),S.value!=="graded"?(e(),t("button",{key:0,onClick:D,class:"text-sm font-semibold text-blue-600 hover:text-blue-700 flex items-center gap-1"},[n(d(c),{icon:"fluent:edit-16-filled",class:"w-4 h-4"}),i[2]||(i[2]=_(" ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ",-1))])):a("",!0)]),s("div",ke,[n(H,{content:o.value.content},null,8,["content"])]),o.value.images?.length?(e(),t("div",ye,[(e(!0),t(T,null,j(o.value.images,g=>(e(),t("img",{key:g.id,src:g.full_url||g.image_url,class:"w-full h-32 object-cover rounded-lg border border-blue-100 dark:border-blue-800"},null,8,he))),128))])):a("",!0),o.value.graded_score!==null?(e(),t("div",we,[s("div",Ce,[n(d(c),{icon:"fluent:trophy-24-filled",class:"w-6 h-6"})]),s("div",null,[i[3]||(i[3]=s("div",{class:"font-bold text-amber-900 dark:text-amber-300"},"‡πÄ‡∏Ç‡πâ‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡πÅ‡∏•‡πâ‡∏ß",-1)),s("div",Ie,"‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô "+v(o.value.graded_score)+" / "+v(r.value.points),1)])])):a("",!0)])):a("",!0),!o.value||b.value?(e(),t("div",Ae,[n(X,{assignment:r.value,courseId:d(x),existingAnswer:b.value?o.value:null,isEditing:b.value,onSubmitted:A,onCancel:R},null,8,["assignment","courseId","existingAnswer","isEditing"])])):a("",!0)]))])):m.value?a("",!0):(e(),t("div",Se,[...i[4]||(i[4]=[s("div",{class:"text-6xl mb-4"},"üòï",-1),s("h2",{class:"text-xl font-bold"},"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô",-1)])]))])}}});export{Re as default};
