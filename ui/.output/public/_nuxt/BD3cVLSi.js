import{q as _,p as v,r as c,z as k,c as i,a as e,b as o,e as w,u as d,t as r,$ as P,aa as L,F as B,k as T,aH as S,o as l,I as n,T as y}from"./CHs-R6Sv.js";const U={class:"space-y-6"},C={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},I={class:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-white transition-colors"},V={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},$={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700"},z={class:"flex items-center gap-3"},E={class:"p-3 bg-green-100 dark:bg-green-900/30 rounded-xl"},F={class:"text-xl font-bold text-gray-800 dark:text-white"},N={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700"},D={class:"flex items-center gap-3"},M={class:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl"},j={class:"text-xl font-bold text-gray-800 dark:text-white"},q={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700"},A={class:"flex items-center gap-3"},H={class:"p-3 bg-red-100 dark:bg-red-900/30 rounded-xl"},Q={class:"text-xl font-bold text-gray-800 dark:text-white"},R={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700"},G={class:"flex items-center gap-3"},J={class:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-xl"},K={class:"text-xl font-bold text-gray-800 dark:text-white"},O={class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700"},W={class:"relative"},X={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden"},Y={key:0,class:"p-8 text-center"},Z={key:1,class:"overflow-x-auto"},ee={class:"w-full"},te={class:"divide-y divide-gray-100 dark:divide-gray-700"},se={class:"px-6 py-4 font-medium text-gray-800 dark:text-white"},re={class:"px-6 py-4"},ae={class:"px-6 py-4 text-gray-600 dark:text-gray-300"},oe={class:"px-6 py-4 text-right text-gray-500"},le=_({__name:"index",setup(de){const b=v().public.apiBase,p=c([]),u=c(!0),x=c(""),g=c({totalPointsIssued:285e4,totalPointsUsed:125e4,totalPointsExpired:85e3,activeUsers:5680}),h=async()=>{u.value=!0;try{const a=S("token"),t=await $fetch(`${b}/api/admin/points-transactions`,{headers:{Authorization:`Bearer ${a.value}`}});t.success&&(p.value=t.data.data||t.data)}catch(a){console.error("Failed to fetch points transactions:",a),p.value=[{id:1,user:"สมชาย ใจดี",type:"earned",points:100,reason:"ทำแบบทดสอบสำเร็จ",date:"2026-01-18"},{id:2,user:"สุดา สวยงาม",type:"redeemed",points:500,reason:"แลกคูปองส่วนลด",date:"2026-01-18"},{id:3,user:"วิชัย มั่นคง",type:"earned",points:250,reason:"เรียนจบคอร์ส",date:"2026-01-17"},{id:4,user:"พิมพ์ใจ รักเรียน",type:"bonus",points:1e3,reason:"โบนัสสมาชิกใหม่",date:"2026-01-17"},{id:5,user:"ชาติชาย เก่งมาก",type:"expired",points:200,reason:"หมดอายุ",date:"2026-01-16"}]}finally{u.value=!1}},m=a=>({earned:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",redeemed:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",bonus:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",expired:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"})[a]||"bg-gray-100 text-gray-700",f=a=>({earned:"ได้รับ",redeemed:"แลกใช้",bonus:"โบนัส",expired:"หมดอายุ"})[a]||a;return k(()=>{h()}),(a,t)=>(l(),i("div",U,[e("div",C,[t[2]||(t[2]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white"},"จัดการ Points"),e("p",{class:"text-gray-500 dark:text-gray-400 mt-1"},"จัดการระบบคะแนนและธุรกรรม Points")],-1)),e("button",I,[o(d(n),{icon:"fluent:add-24-regular",class:"w-5 h-5"}),t[1]||(t[1]=w(" มอบ Points ",-1))])]),e("div",V,[e("div",$,[e("div",z,[e("div",E,[o(d(n),{icon:"fluent:coin-stack-24-regular",class:"w-6 h-6 text-green-600"})]),e("div",null,[t[3]||(t[3]=e("p",{class:"text-sm text-gray-500"},"Points ที่ออก",-1)),e("p",F,r(g.value.totalPointsIssued.toLocaleString()),1)])])]),e("div",N,[e("div",D,[e("div",M,[o(d(n),{icon:"fluent:gift-24-regular",class:"w-6 h-6 text-blue-600"})]),e("div",null,[t[4]||(t[4]=e("p",{class:"text-sm text-gray-500"},"Points ที่ใช้แล้ว",-1)),e("p",j,r(g.value.totalPointsUsed.toLocaleString()),1)])])]),e("div",q,[e("div",A,[e("div",H,[o(d(n),{icon:"fluent:calendar-cancel-24-regular",class:"w-6 h-6 text-red-600"})]),e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm text-gray-500"},"Points หมดอายุ",-1)),e("p",Q,r(g.value.totalPointsExpired.toLocaleString()),1)])])]),e("div",R,[e("div",G,[e("div",J,[o(d(n),{icon:"fluent:people-24-regular",class:"w-6 h-6 text-purple-600"})]),e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm text-gray-500"},"ผู้ใช้ที่มี Points",-1)),e("p",K,r(g.value.activeUsers.toLocaleString()),1)])])])]),e("div",O,[e("div",W,[o(d(n),{icon:"fluent:search-24-regular",class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),P(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>x.value=s),type:"text",placeholder:"ค้นหาผู้ใช้...",class:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[L,x.value]])])]),e("div",X,[u.value?(l(),i("div",Y,[o(d(n),{icon:"fluent:spinner-ios-20-regular",class:"w-8 h-8 text-indigo-600 animate-spin mx-auto"}),t[7]||(t[7]=e("p",{class:"text-gray-500 mt-2"},"กำลังโหลดข้อมูล...",-1))])):(l(),i("div",Z,[e("table",ee,[t[8]||(t[8]=e("thead",{class:"bg-gray-50 dark:bg-gray-700/50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase"},"ผู้ใช้"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase"},"ประเภท"),e("th",{class:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase"},"Points"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase"},"เหตุผล"),e("th",{class:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase"},"วันที่")])],-1)),e("tbody",te,[(l(!0),i(B,null,T(p.value,s=>(l(),i("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/30"},[e("td",se,r(s.user),1),e("td",re,[e("span",{class:y([m(s.type),"px-2.5 py-1 rounded-full text-xs font-medium"])},r(f(s.type)),3)]),e("td",{class:y(["px-6 py-4 text-right font-medium",s.type==="redeemed"||s.type==="expired"?"text-red-600":"text-green-600"])},r(s.type==="redeemed"||s.type==="expired"?"-":"+")+r(s.points.toLocaleString()),3),e("td",ae,r(s.reason),1),e("td",oe,r(s.date),1)]))),128))])])]))])]))}});export{le as default};
