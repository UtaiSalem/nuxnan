import{_ as U,r as y,n as $,g as B,o as n,b as u,w as L,c as p,d as x,a as t,u as a,I as c,$ as ne,aa as ae,t as k,a1 as z,F as I,k as Q,T as j,e as R,a4 as Y,a8 as Ce,y as Ee,l as ie,q as W,a7 as Se,S as Oe,a3 as ce,C as Me,j as Z,z as Te,aj as De}from"./DvtEeXFW.js";import{u as ue}from"./D4UTVVq6.js";import{u as de}from"./CaSR6SuD.js";import{u as Ve}from"./BvQ5DSdH.js";const Be={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4"},je={class:"relative w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-white dark:bg-vikinger-dark-100 rounded-2xl shadow-2xl"},Re={class:"sticky top-0 z-10 flex items-center justify-between p-4 border-b border-gray-200 dark:border-vikinger-dark-50/30 bg-white dark:bg-vikinger-dark-100"},Ae={class:"p-4 space-y-4"},Le={class:"space-y-2"},Ne={class:"relative"},qe={class:"flex items-center gap-3"},ze={class:"text-left"},Ie={class:"text-sm font-medium text-gray-800 dark:text-white"},Ue={class:"text-xs text-gray-500 dark:text-gray-400"},Fe={key:0,class:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-vikinger-dark-100 rounded-xl shadow-lg border border-gray-200 dark:border-vikinger-dark-50/30 overflow-hidden z-20"},Ke=["onClick"],Ge={class:"text-left"},He={class:"text-sm font-medium text-gray-800 dark:text-white"},Je={class:"text-xs text-gray-500 dark:text-gray-400"},Qe={class:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-vikinger-dark-200 transition-colors opacity-50 cursor-not-allowed"},We={class:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-vikinger-dark-200 transition-colors opacity-50 cursor-not-allowed"},Xe={class:"border border-gray-200 dark:border-vikinger-dark-50/30 rounded-xl p-3 bg-gray-50 dark:bg-vikinger-dark-200/50"},Ye={class:"flex gap-3"},Ze=["src"],et={class:"flex-1 min-w-0"},tt={class:"font-semibold text-sm text-gray-800 dark:text-white"},st={class:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-3"},lt=["src"],ot={class:"flex items-center gap-2 p-3 bg-gradient-to-r from-vikinger-purple/10 to-vikinger-cyan/10 rounded-xl"},rt={class:"sticky bottom-0 flex items-center gap-3 p-4 border-t border-gray-200 dark:border-vikinger-dark-50/30 bg-white dark:bg-vikinger-dark-100"},nt={class:"flex items-center justify-center gap-2"},at={__name:"ShareModal",props:{show:{type:Boolean,required:!0},post:{type:Object,required:!0}},emits:["close","share"],setup(l,{emit:S}){const{getAvatarUrl:_}=ue(),m=l,E=S,P=y(""),w=y("public"),b=y([]),C=y(""),f=y(!1);y(!1),y(!1);const M=[{value:"public",label:"à¸ªà¸²à¸˜à¸²à¸£à¸“à¸°",icon:"fluent:globe-24-regular",desc:"à¸—à¸¸à¸à¸„à¸™à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸«à¹‡à¸™à¹„à¸”à¹‰"},{value:"friends",label:"à¹€à¸žà¸·à¹ˆà¸­à¸™",icon:"fluent:people-24-regular",desc:"à¹€à¸‰à¸žà¸²à¸°à¹€à¸žà¸·à¹ˆà¸­à¸™à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™"},{value:"private",label:"à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§",icon:"fluent:lock-closed-24-regular",desc:"à¹€à¸‰à¸žà¸²à¸°à¸„à¸¸à¸“à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™"}],V=$(()=>M.find(v=>v.value===w.value)||M[0]),T=()=>{E("share",{share_comment:P.value.trim()||null,privacy:w.value,tagged_friends:b.value,location:C.value||null}),g()},g=()=>{P.value="",w.value="public",b.value=[],C.value="",E("close")},o=$(()=>{const v=m.post.content||m.post.description||"";return v.length>200?v.substring(0,200)+"...":v}),e=$(()=>m.post.imagesResources&&m.post.imagesResources.length?m.post.imagesResources[0].url:m.post.images&&m.post.images.length?m.post.images[0].url||m.post.images[0]:null);return(v,r)=>(n(),B(Y,{to:"body"},[u(z,{name:"modal-fade"},{default:L(()=>[l.show?(n(),p("div",Be,[t("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:g}),t("div",je,[t("div",Re,[r[2]||(r[2]=t("h3",{class:"text-xl font-bold text-gray-800 dark:text-white"},"à¹à¸Šà¸£à¹Œà¹‚à¸žà¸ªà¸•à¹Œ",-1)),t("button",{onClick:g,class:"p-2 hover:bg-gray-100 dark:hover:bg-vikinger-dark-200 rounded-lg transition-colors"},[u(a(c),{icon:"fluent:dismiss-24-regular",class:"w-6 h-6 text-gray-600 dark:text-gray-300"})])]),t("div",Ae,[t("div",null,[r[3]||(r[3]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," à¹€à¸‚à¸µà¸¢à¸™à¸šà¸²à¸‡à¸­à¸¢à¹ˆà¸²à¸‡à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸šà¹‚à¸žà¸ªà¸•à¹Œà¸™à¸µà¹‰... (à¹„à¸¡à¹ˆà¸šà¸±à¸‡à¸„à¸±à¸š) ",-1)),ne(t("textarea",{"onUpdate:modelValue":r[0]||(r[0]=s=>P.value=s),rows:"3",placeholder:"à¸šà¸­à¸à¹€à¸žà¸·à¹ˆà¸­à¸™à¹† à¸§à¹ˆà¸²à¸—à¸³à¹„à¸¡à¸„à¸¸à¸“à¸–à¸¶à¸‡à¹à¸Šà¸£à¹Œà¹‚à¸žà¸ªà¸•à¹Œà¸™à¸µà¹‰...",class:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-vikinger-dark-50/30 bg-white dark:bg-vikinger-dark-200 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-vikinger-purple/30 focus:border-vikinger-purple transition-all resize-none"},null,512),[[ae,P.value]])]),t("div",Le,[t("div",Ne,[t("button",{onClick:r[1]||(r[1]=s=>f.value=!f.value),class:"w-full flex items-center justify-between p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-vikinger-dark-200 transition-colors"},[t("div",qe,[u(a(c),{icon:V.value.icon,class:"w-5 h-5 text-vikinger-purple"},null,8,["icon"]),t("div",ze,[t("p",Ie,k(V.value.label),1),t("p",Ue,k(V.value.desc),1)])]),u(a(c),{icon:"fluent:chevron-down-24-regular",class:"w-5 h-5 text-gray-400"})]),u(z,{name:"dropdown"},{default:L(()=>[f.value?(n(),p("div",Fe,[(n(),p(I,null,Q(M,s=>t("button",{key:s.value,onClick:D=>{w.value=s.value,f.value=!1},class:j(["w-full flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-vikinger-dark-200 transition-colors",{"bg-vikinger-purple/10":w.value===s.value}])},[u(a(c),{icon:s.icon,class:j(["w-5 h-5",w.value===s.value?"text-vikinger-purple":"text-gray-500"])},null,8,["icon","class"]),t("div",Ge,[t("p",He,k(s.label),1),t("p",Je,k(s.desc),1)]),w.value===s.value?(n(),B(a(c),{key:0,icon:"fluent:checkmark-24-filled",class:"w-5 h-5 text-vikinger-purple ml-auto"})):x("",!0)],10,Ke)),64))])):x("",!0)]),_:1})]),t("button",Qe,[u(a(c),{icon:"fluent:people-add-24-regular",class:"w-5 h-5 text-gray-400"}),r[4]||(r[4]=t("div",{class:"text-left"},[t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"à¹à¸—à¹‡à¸à¹€à¸žà¸·à¹ˆà¸­à¸™"),t("p",{class:"text-xs text-gray-500 dark:text-gray-500"},"à¹€à¸£à¹‡à¸§à¹† à¸™à¸µà¹‰")],-1))]),t("button",We,[u(a(c),{icon:"fluent:location-24-regular",class:"w-5 h-5 text-gray-400"}),r[5]||(r[5]=t("div",{class:"text-left"},[t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"à¹€à¸žà¸´à¹ˆà¸¡à¸ªà¸–à¸²à¸™à¸—à¸µà¹ˆ"),t("p",{class:"text-xs text-gray-500 dark:text-gray-500"},"à¹€à¸£à¹‡à¸§à¹† à¸™à¸µà¹‰")],-1))])]),t("div",Xe,[t("div",Ye,[t("img",{src:a(_)(l.post.author||l.post.user),class:"w-10 h-10 rounded-full object-cover flex-shrink-0",alt:""},null,8,Ze),t("div",et,[t("p",tt,k(l.post.author?.username||l.post.user?.username||"à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰"),1),t("p",st,k(o.value),1)]),e.value?(n(),p("img",{key:0,src:e.value,class:"w-20 h-20 rounded-lg object-cover flex-shrink-0",alt:""},null,8,lt)):x("",!0)])]),t("div",ot,[u(a(c),{icon:"fluent:info-24-regular",class:"w-5 h-5 text-vikinger-purple flex-shrink-0"}),r[6]||(r[6]=t("p",{class:"text-sm text-gray-700 dark:text-gray-300"},[R(" à¸à¸²à¸£à¹à¸Šà¸£à¹Œà¸ˆà¸°à¹ƒà¸Šà¹‰ "),t("span",{class:"font-bold text-vikinger-purple"},"36 à¹à¸•à¹‰à¸¡"),R(" à¹à¸¥à¸°à¹€à¸ˆà¹‰à¸²à¸‚à¸­à¸‡à¹‚à¸žà¸ªà¸•à¹Œà¸ˆà¸°à¹„à¸”à¹‰à¸£à¸±à¸š "),t("span",{class:"font-bold text-vikinger-cyan"},"18 à¹à¸•à¹‰à¸¡")],-1))])]),t("div",rt,[t("button",{onClick:g,class:"flex-1 px-6 py-3 rounded-xl border border-gray-300 dark:border-vikinger-dark-50/30 text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-50 dark:hover:bg-vikinger-dark-200 transition-all"}," à¸¢à¸à¹€à¸¥à¸´à¸ "),t("button",{onClick:T,class:"flex-1 px-6 py-3 rounded-xl bg-gradient-to-r from-vikinger-purple to-vikinger-cyan text-white font-medium hover:shadow-lg transition-all duration-300 hover:scale-105"},[t("span",nt,[u(a(c),{icon:"fluent:share-24-filled",class:"w-5 h-5"}),r[7]||(r[7]=R(" à¹à¸Šà¸£à¹Œà¹€à¸¥à¸¢ - 36 à¹à¸•à¹‰à¸¡ ",-1))])])])])])):x("",!0)]),_:1})]))}},Us=U(at,[["__scopeId","data-v-ef2092e2"]]),it=Ce("poll",()=>{const l=y([]),S=y(null),_=y(!1),m=$(()=>g=>l.value.find(o=>o.id===g)),E=$(()=>l.value.filter(g=>!g.is_ended)),P=$(()=>l.value.filter(g=>g.is_ended)),w=g=>{l.value.unshift(g)},b=(g,o)=>{const e=l.value.findIndex(v=>v.id===g);e!==-1&&(l.value[e]={...l.value[e],...o}),S.value?.id===g&&(S.value={...S.value,...o})};return{polls:l,currentPoll:S,isLoading:_,getPollById:m,getActivePolls:E,getEndedPolls:P,addPoll:w,updatePoll:b,removePoll:g=>{l.value=l.value.filter(o=>o.id!==g),S.value?.id===g&&(S.value=null)},setCurrentPoll:g=>{S.value=g},setPolls:g=>{l.value=g},updatePollVote:(g,o)=>{const e=l.value.find(r=>r.id===g);if(!e)return;e.user_voted=!0,e.user_votes=o,e.options=e.options.map(r=>({...r,votes:o.includes(r.id)?r.votes+1:r.votes,is_user_vote:o.includes(r.id)}));const v=e.options.reduce((r,s)=>r+s.votes,0);e.total_votes=v,e.options=e.options.map(r=>({...r,percentage:v>0?Math.round(r.votes/v*100):0}))},closePollState:g=>{b(g,{is_ended:!0})}}}),q=()=>{const{$apiFetch:l}=Ee();return ie(),{createPoll:async o=>{try{const e=new FormData;return e.append("question",o.question),e.append("duration",String(o.duration)),e.append("is_multiple",o.is_multiple?"1":"0"),e.append("privacy_settings",String(o.privacy_settings??3)),o.points_pool!==void 0&&e.append("points_pool",String(o.points_pool)),o.max_votes!==void 0&&e.append("max_votes",String(o.max_votes)),o.options.forEach((r,s)=>{e.append(`options[${s}]`,r)}),o.location_name&&e.append("location_name",o.location_name),o.tagged_users&&o.tagged_users.length>0&&o.tagged_users.forEach((r,s)=>{e.append(`tagged_users[${s}]`,String(r))}),await l("/api/polls",{method:"POST",body:e})}catch(e){throw console.error("Error creating poll:",e),e}},getPoll:async o=>{try{const e=await l(`/api/polls/${o}`);return e.success&&e.data?e.data:null}catch(e){return console.error("Error fetching poll:",e),null}},votePoll:async(o,e)=>{try{return await l("/api/polls/vote",{method:"POST",body:{poll_id:o,option_id:e}})}catch(v){throw console.error("Error voting on poll:",v),v}},updatePoll:async(o,e)=>{try{const v=new FormData;return v.append("_method","PUT"),e.question&&v.append("question",e.question),e.duration!==void 0&&v.append("duration",String(e.duration)),e.is_multiple!==void 0&&v.append("is_multiple",e.is_multiple?"1":"0"),e.options&&e.options.forEach((s,D)=>{v.append(`options[${D}]`,s)}),await l(`/api/polls/${o}`,{method:"POST",body:v})}catch(v){throw console.error("Error updating poll:",v),v}},closePoll:async o=>{try{return await l(`/api/polls/${o}/close`,{method:"POST"})}catch(e){throw console.error("Error closing poll:",e),e}},deletePoll:async o=>{try{return await l(`/api/polls/${o}`,{method:"DELETE"})}catch(e){throw console.error("Error deleting poll:",e),e}},getPollResults:async o=>{try{const e=await l(`/api/polls/${o}/results`);return e.success&&e.data?e.data:null}catch(e){return console.error("Error fetching poll results:",e),null}},calculateTimeRemaining:o=>{const e=new Date,r=new Date(o).getTime()-e.getTime();if(r<=0)return"à¸ªà¸´à¹‰à¸™à¸ªà¸¸à¸”à¹à¸¥à¹‰à¸§";const s=Math.floor(r/(1e3*60*60)),D=Math.floor(s/24);return D>0?`${D} à¸§à¸±à¸™`:s>0?`${s} à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡`:`${Math.floor(r/(1e3*60))} à¸™à¸²à¸—à¸µ`},calculatePercentages:o=>{const e=o.reduce((v,r)=>v+r.votes,0);return o.map(v=>({...v,percentage:e>0?Math.round(v.votes/e*100):0}))},likePoll:async o=>{try{return await l(`/api/polls/${o}/like`,{method:"POST"})}catch(e){throw console.error("Error liking poll:",e),e}},dislikePoll:async o=>{try{return await l(`/api/polls/${o}/dislike`,{method:"POST"})}catch(e){throw console.error("Error disliking poll:",e),e}},commentOnPoll:async(o,e)=>{try{return await l(`/api/polls/${o}/comment`,{method:"POST",body:{content:e}})}catch(v){throw console.error("Error commenting on poll:",v),v}},deletePollComment:async o=>{try{return await l(`/api/poll_comments/${o}`,{method:"DELETE"})}catch(e){throw console.error("Error deleting poll comment:",e),e}}}},ct={class:"poll-progress-bar-container"},ut=["aria-valuenow","aria-label"],dt={class:"poll-progress-content"},vt=W({__name:"PollProgressBar",props:{percentage:{},isVoted:{type:Boolean,default:!1},isLeading:{type:Boolean,default:!1},color:{default:"purple"}},emits:["click"],setup(l,{emit:S}){const _=l,m=S,E=$(()=>({purple:"from-vikinger-purple to-vikinger-cyan",cyan:"from-vikinger-cyan to-vikinger-purple",green:"from-vikinger-green to-vikinger-cyan",orange:"from-vikinger-orange to-vikinger-yellow",pink:"from-vikinger-pink to-vikinger-purple"})[_.color]),P=$(()=>_.isVoted?"opacity-20":"opacity-10"),w=$(()=>_.isLeading?"shadow-cyan-glow":"");return(b,C)=>(n(),p("div",ct,[t("div",{class:j(["poll-progress-background",P.value])},null,2),t("div",{class:j(["poll-progress-fill",[E.value,w.value]]),style:Se({width:`${l.percentage}%`,"--progress-width":`${l.percentage}%`}),role:"progressbar","aria-valuenow":l.percentage,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`${l.percentage}% of votes`,onClick:C[0]||(C[0]=f=>m("click"))},null,14,ut),t("div",dt,[Oe(b.$slots,"default",{},void 0,!0)])]))}}),gt=U(vt,[["__scopeId","data-v-65ab9b50"]]),pt=["aria-checked","aria-label"],mt={class:"poll-option-checkbox"},ft={class:"poll-option-text"},kt={class:"poll-option-results-content"},ht={class:"flex-1"},xt={class:"flex items-center gap-2"},yt={key:0,class:"poll-rank-badge"},bt={class:"poll-option-votes"},_t={class:"poll-option-percentage"},wt=W({__name:"PollOption",props:{option:{},isVotingMode:{type:Boolean},isSelected:{type:Boolean,default:!1},isMultiple:{type:Boolean,default:!1},maxPercentage:{},index:{}},emits:["click"],setup(l,{emit:S}){const _=l,m=S;$(()=>`${_.index+1}.`);const E=$(()=>_.option.percentage===100?"ðŸ†":_.option.percentage>=50?"ðŸ¥ˆ":_.option.percentage>=33?"ðŸ¥‰":null),P=$(()=>_.option.percentage>0&&_.option.percentage===_.maxPercentage),w=()=>{_.isVotingMode&&m("click")};return(b,C)=>l.isVotingMode?(n(),p("button",{key:0,onClick:w,class:j(["poll-option-voting",{selected:l.isSelected}]),role:"radio","aria-checked":l.isSelected,"aria-label":`Vote for option ${l.index+1}: ${l.option.text}`},[t("div",mt,[l.isSelected?(n(),B(a(c),{key:0,icon:"fluent:checkmark-circle-24-filled",class:"w-6 h-6 text-vikinger-cyan"})):(n(),B(a(c),{key:1,icon:"fluent:checkbox-circle-24-regular",class:"w-6 h-6 text-gray-400"}))]),t("span",ft,k(l.option.text),1)],10,pt)):(n(),B(gt,{key:1,percentage:l.option.percentage,"is-voted":l.option.is_user_vote,"is-leading":P.value,color:l.option.is_user_vote?"cyan":"purple",onClick:C[0]||(C[0]=f=>m("click"))},{default:L(()=>[t("div",kt,[t("div",ht,[t("div",xt,[E.value?(n(),p("span",yt,k(E.value),1)):x("",!0),t("span",{class:j(["poll-option-result-text",{voted:l.option.is_user_vote}])},[R(k(l.option.text)+" ",1),l.option.is_user_vote?(n(),B(a(c),{key:0,icon:"fluent:checkmark-24-filled",class:"w-4 h-4 ml-1"})):x("",!0)],2)]),t("div",bt,[u(a(c),{icon:"fluent:thumb-like-24-regular",class:"w-3.5 h-3.5"}),t("span",null,k(l.option.votes)+" à¸„à¸™",1)])]),t("div",_t,k(l.option.percentage)+"% ",1)])]),_:1},8,["percentage","is-voted","is-leading","color"]))}}),re=U(wt,[["__scopeId","data-v-cd2fcf82"]]),$t={key:3,class:"poll-menu-divider"},Pt=["disabled"],Ct={class:"bg-white dark:bg-vikinger-dark-100 rounded-xl shadow-vikinger-lg p-6 max-w-md mx-4"},Et={class:"flex items-center gap-3 mb-4"},St={class:"w-12 h-12 rounded-full bg-vikinger-orange/10 flex items-center justify-center"},Ot={class:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 mb-6 border border-yellow-200 dark:border-yellow-700/30"},Mt={class:"text-sm text-yellow-700 dark:text-yellow-300 space-y-1"},Tt={class:"flex items-start gap-2"},Dt={class:"flex items-start gap-2"},Vt={class:"flex items-start gap-2"},Bt={class:"flex gap-3"},jt=["disabled"],Rt={class:"bg-white dark:bg-vikinger-dark-100 rounded-xl shadow-vikinger-lg p-6 max-w-md mx-4"},At={class:"flex items-center gap-3 mb-4"},Lt={class:"w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center"},Nt={class:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 mb-6 border border-red-200 dark:border-red-700/30"},qt={class:"text-sm text-red-700 dark:text-red-300 mb-3 flex items-center gap-2"},zt={class:"text-sm text-red-700 dark:text-red-300 space-y-1 mt-2"},It={class:"flex items-start gap-2"},Ut={class:"flex items-start gap-2"},Ft={class:"flex items-start gap-2"},Kt={class:"flex gap-3"},Gt=["disabled"],Ht=W({__name:"PollMenu",props:{show:{type:Boolean},pollId:{},isOwner:{type:Boolean},isEnded:{type:Boolean}},emits:["close","edit","closePoll","delete","share"],setup(l,{emit:S}){const _=l,m=S,E=de(),P=y(!1),w=y(!1),b=y(!1),C=y(!1),f=y(null),M=r=>{f.value&&!f.value.contains(r.target)&&(r.target.closest(".poll-menu-trigger")||m("close"))};ce(()=>_.show,r=>{r?setTimeout(()=>{document.addEventListener("click",M)},0):document.removeEventListener("click",M)}),Me(()=>{document.removeEventListener("click",M)});const V=()=>{m("close"),m("edit")},T=()=>{m("close"),w.value=!0},g=async()=>{C.value=!0;try{m("closePoll"),w.value=!1}catch(r){console.error("Error closing poll:",r),E.error("à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸›à¸´à¸”à¹‚à¸žà¸¥à¹„à¸”à¹‰")}finally{C.value=!1}},o=()=>{m("close"),P.value=!0},e=async()=>{if(await E.confirmDelete("à¹‚à¸žà¸¥à¸™à¸µà¹‰","à¸à¸²à¸£à¸¥à¸šà¹‚à¸žà¸¥à¸ˆà¸°à¸¥à¸šà¹‚à¸«à¸§à¸•à¹à¸¥à¸°à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸”à¹‰à¸§à¸¢")){b.value=!0;try{m("delete"),P.value=!1}catch(s){console.error("Error deleting poll:",s),E.error("à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¥à¸šà¹‚à¸žà¸¥à¹„à¸”à¹‰")}finally{b.value=!1}}},v=()=>{m("close"),m("share")};return(r,s)=>(n(),p(I,null,[u(z,{name:"dropdown"},{default:L(()=>[l.show?(n(),p("div",{key:0,ref_key:"menuRef",ref:f,class:"poll-menu"},[l.isOwner?(n(),p("button",{key:0,onClick:V,class:"poll-menu-item"},[u(a(c),{icon:"fluent:edit-24-regular",class:"w-5 h-5 text-vikinger-purple"}),s[5]||(s[5]=t("span",null,"à¹à¸à¹‰à¹„à¸‚à¹‚à¸žà¸¥",-1))])):x("",!0),l.isOwner&&!l.isEnded?(n(),p("button",{key:1,onClick:T,class:"poll-menu-item"},[u(a(c),{icon:"fluent:pause-circle-24-regular",class:"w-5 h-5 text-vikinger-orange"}),s[6]||(s[6]=t("span",null,"à¸›à¸´à¸”à¹‚à¸«à¸§à¸•",-1))])):x("",!0),l.isEnded?x("",!0):(n(),p("button",{key:2,onClick:s[0]||(s[0]=D=>m("close")),class:"poll-menu-item"},[u(a(c),{icon:"fluent:chart-multiple-24-regular",class:"w-5 h-5 text-vikinger-cyan"}),s[7]||(s[7]=t("span",null,"à¸”à¸¹à¸œà¸¥à¸¥à¸±à¸žà¸˜à¹Œ",-1))])),t("button",{onClick:v,class:"poll-menu-item"},[u(a(c),{icon:"fluent:share-24-regular",class:"w-5 h-5 text-vikinger-green"}),s[8]||(s[8]=t("span",null,"à¹à¸Šà¸£à¹Œà¹‚à¸žà¸¥",-1))]),l.isOwner?(n(),p("div",$t)):x("",!0),l.isOwner?(n(),p("button",{key:4,onClick:o,disabled:b.value,class:"poll-menu-item danger"},[u(a(c),{icon:b.value?"fluent:spinner-ios-20-regular":"fluent:delete-24-regular",class:j(["w-5 h-5",{"animate-spin":b.value}])},null,8,["icon","class"]),t("span",null,k(b.value?"à¸à¸³à¸¥à¸±à¸‡à¸¥à¸š...":"à¸¥à¸šà¹‚à¸žà¸¥"),1)],8,Pt)):x("",!0)],512)):x("",!0)]),_:1}),(n(),B(Y,{to:"body"},[u(z,{name:"modal"},{default:L(()=>[w.value?(n(),p("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:s[2]||(s[2]=Z(D=>w.value=!1,["self"]))},[t("div",Ct,[t("div",Et,[t("div",St,[u(a(c),{icon:"fluent:pause-circle-24-regular",class:"w-6 h-6 text-vikinger-orange"})]),s[9]||(s[9]=t("h3",{class:"text-xl font-bold text-gray-800 dark:text-white"},"à¸›à¸´à¸”à¹‚à¸«à¸§à¸•",-1))]),s[14]||(s[14]=t("p",{class:"text-gray-600 dark:text-gray-400 mb-4"}," à¸„à¸¸à¸“à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸›à¸´à¸”à¹‚à¸«à¸§à¸•à¸™à¸µà¹‰à¹ƒà¸Šà¹ˆà¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ? ",-1)),t("div",Ot,[s[13]||(s[13]=t("p",{class:"text-sm text-yellow-700 dark:text-yellow-300 mb-2 font-medium"},"à¹€à¸¡à¸·à¹ˆà¸­à¸›à¸´à¸”à¹‚à¸«à¸§à¸•à¹à¸¥à¹‰à¸§:",-1)),t("ul",Mt,[t("li",Tt,[u(a(c),{icon:"fluent:checkmark-24-regular",class:"w-4 h-4 mt-0.5 flex-shrink-0"}),s[10]||(s[10]=t("span",null,"à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸ˆà¸°à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸§à¸•à¹„à¸”à¹‰à¸­à¸µà¸",-1))]),t("li",Dt,[u(a(c),{icon:"fluent:checkmark-24-regular",class:"w-4 h-4 mt-0.5 flex-shrink-0"}),s[11]||(s[11]=t("span",null,"à¸œà¸¥à¸¥à¸±à¸žà¸˜à¹Œà¸ˆà¸°à¹à¸ªà¸”à¸‡à¸—à¸±à¸™à¸—à¸µ",-1))]),t("li",Vt,[u(a(c),{icon:"fluent:checkmark-24-regular",class:"w-4 h-4 mt-0.5 flex-shrink-0"}),s[12]||(s[12]=t("span",null,"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸›à¸´à¸”à¹‚à¸«à¸§à¸•à¹ƒà¸«à¸¡à¹ˆà¹„à¸”à¹‰",-1))])])]),t("div",Bt,[t("button",{onClick:s[1]||(s[1]=D=>w.value=!1),class:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-vikinger-dark-50/30 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-vikinger-dark-200 transition-colors"}," à¸¢à¸à¹€à¸¥à¸´à¸ "),t("button",{onClick:g,disabled:C.value,class:"flex-1 py-3 px-4 rounded-xl bg-vikinger-orange text-white font-semibold hover:bg-vikinger-orange/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2"},[C.value?(n(),B(a(c),{key:0,icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin"})):x("",!0),t("span",null,k(C.value?"à¸à¸³à¸¥à¸±à¸‡à¸›à¸´à¸”...":"à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸›à¸´à¸”à¹‚à¸«à¸§à¸•"),1)],8,jt)])])])):x("",!0)]),_:1})])),(n(),B(Y,{to:"body"},[u(z,{name:"modal"},{default:L(()=>[P.value?(n(),p("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:s[4]||(s[4]=Z(D=>P.value=!1,["self"]))},[t("div",Rt,[t("div",At,[t("div",Lt,[u(a(c),{icon:"fluent:delete-24-regular",class:"w-6 h-6 text-red-500"})]),s[15]||(s[15]=t("h3",{class:"text-xl font-bold text-gray-800 dark:text-white"},"à¸¥à¸šà¹‚à¸žà¸¥",-1))]),s[21]||(s[21]=t("p",{class:"text-gray-600 dark:text-gray-400 mb-4"}," à¸„à¸¸à¸“à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸¥à¸šà¹‚à¸žà¸¥à¸™à¸µà¹‰à¹ƒà¸Šà¹ˆà¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ? ",-1)),t("div",Nt,[t("p",qt,[u(a(c),{icon:"fluent:warning-24-regular",class:"w-5 h-5"}),s[16]||(s[16]=t("span",{class:"font-medium"},"à¸à¸²à¸£à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£à¸™à¸µà¹‰à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¢à¹‰à¸­à¸™à¸à¸¥à¸±à¸šà¹„à¸”à¹‰",-1))]),s[20]||(s[20]=t("p",{class:"text-sm text-red-700 dark:text-red-300 font-medium"},"à¹€à¸¡à¸·à¹ˆà¸­à¸¥à¸šà¹‚à¸žà¸¥à¹à¸¥à¹‰à¸§:",-1)),t("ul",zt,[t("li",It,[u(a(c),{icon:"fluent:checkmark-24-regular",class:"w-4 h-4 mt-0.5 flex-shrink-0"}),s[17]||(s[17]=t("span",null,"à¹‚à¸«à¸§à¸•à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸ˆà¸°à¸«à¸²à¸¢à¹„à¸›",-1))]),t("li",Ut,[u(a(c),{icon:"fluent:checkmark-24-regular",class:"w-4 h-4 mt-0.5 flex-shrink-0"}),s[18]||(s[18]=t("span",null,"à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸ˆà¸°à¸«à¸²à¸¢à¹„à¸›",-1))]),t("li",Ft,[u(a(c),{icon:"fluent:checkmark-24-regular",class:"w-4 h-4 mt-0.5 flex-shrink-0"}),s[19]||(s[19]=t("span",null,"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸ˆà¸°à¸–à¸¹à¸à¸¥à¸šà¸–à¸²à¸§à¸£",-1))])])]),t("div",Kt,[t("button",{onClick:s[3]||(s[3]=D=>P.value=!1),class:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-vikinger-dark-50/30 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-vikinger-dark-200 transition-colors"}," à¸¢à¸à¹€à¸¥à¸´à¸ "),t("button",{onClick:e,disabled:b.value,class:"flex-1 py-3 px-4 rounded-xl bg-red-500 text-white font-semibold hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2"},[b.value?(n(),B(a(c),{key:0,icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin"})):x("",!0),t("span",null,k(b.value?"à¸à¸³à¸¥à¸±à¸‡à¸¥à¸š...":"à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸¥à¸š"),1)],8,Gt)])])])):x("",!0)]),_:1})]))],64))}}),Jt=U(Ht,[["__scopeId","data-v-cd45284f"]]),Qt={key:0,class:"poll-header"},Wt={key:0,class:"flex items-center gap-3"},Xt=["src"],Yt={class:"flex-1"},Zt={class:"flex items-center gap-2 flex-wrap"},es={class:"poll-author-name"},ts={class:"poll-badge"},ss={class:"poll-meta"},ls={key:1,class:"flex items-center gap-3"},os={class:"poll-badge"},rs={class:"poll-meta !mt-0"},ns={key:2,class:"flex flex-col items-end"},as={class:"flex items-center gap-1.5 px-3 py-1 bg-vikinger-cyan/10 rounded-lg text-vikinger-cyan"},is={class:"text-sm font-bold"},cs={class:"text-[10px] text-gray-500 mt-1"},us={key:3,class:"relative"},ds={class:"poll-question"},vs={key:1,class:"poll-options"},gs={class:"space-y-3"},ps={key:0,class:"flex items-center gap-2 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-700/30"},ms={class:"text-sm text-green-700 dark:text-green-300"},fs=["disabled"],ks={key:2,class:"poll-options"},hs={class:"space-y-3"},xs={key:3,class:"poll-footer"},ys={class:"flex items-center gap-3"},bs={class:"flex items-center gap-4 text-xs text-gray-500"},_s={key:0,class:"text-green-500 flex items-center gap-1"},ws={key:4,class:"poll-comment-section border-t border-gray-100 dark:border-vikinger-dark-50/10"},$s={key:0,class:"poll-comments-list p-4 space-y-4 max-h-[300px] overflow-y-auto"},Ps=["src"],Cs={class:"flex-1"},Es={class:"bg-gray-50 dark:bg-vikinger-dark-100 p-3 rounded-2xl rounded-tl-none relative"},Ss={class:"flex items-center justify-between mb-1"},Os={class:"text-sm font-bold text-vikinger-dark-50 dark:text-white"},Ms={class:"text-[10px] text-gray-500"},Ts={class:"text-sm text-gray-700 dark:text-gray-300"},Ds=["onClick"],Vs={class:"p-4 border-t border-gray-50 dark:border-vikinger-dark-50/5"},Bs={class:"flex gap-3"},js=["src"],Rs={class:"flex-1 relative"},As=["disabled"],Ls=W({__name:"PollCard",props:{poll:{},showActions:{type:Boolean,default:!0},isNested:{type:Boolean,default:!1}},emits:["delete","update"],setup(l,{emit:S}){const _=l,m=S,E=ie(),P=it(),{votePoll:w,calculateTimeRemaining:b}=q(),{getAvatarUrl:C}=ue(),f=de(),M=Ve(),V=y(!1),T=y([]),g=y(!1),o=y(!1),e=y({..._.poll}),{likePoll:v,dislikePoll:r,commentOnPoll:s}=q(),D=y(!1),F=y(!1),K=y(!1),A=y(""),G=y(!1),{deletePollComment:ve}=q(),X=$(()=>E.user?.id===e.value.author.id),N=$(()=>e.value.is_ended),H=$(()=>e.value.user_voted),ge=$(()=>C(E.user)),J=$(()=>!N.value&&!H.value),ee=$(()=>N.value?"à¸ªà¸´à¹‰à¸™à¸ªà¸¸à¸”à¹à¸¥à¹‰à¸§":e.value.time_remaining||b(e.value.ends_at)),pe=$(()=>J.value&&!g.value);$(()=>!J.value||g.value||H.value);const me=$(()=>[...e.value.options].sort((i,d)=>d.votes-i.votes)),te=$(()=>e.value.options.length===0?0:Math.max(...e.value.options.map(i=>i.percentage)));ce(()=>_.poll,i=>{e.value={...i},i.is_ended&&(g.value=!0)},{deep:!0}),Te(()=>{e.value.time_remaining||(e.value.time_remaining=b(e.value.ends_at))});const fe=i=>{if(J.value)if(e.value.is_multiple){const d=T.value.indexOf(i);d===-1?T.value.push(i):T.value.splice(d,1)}else T.value=[i]},ke=async()=>{if(!(!J.value||T.value.length===0)){V.value=!0;try{const i=T.value[0],d=await w(e.value.id,i);if(d.success){e.value.user_voted=!0,e.value.user_votes=[i],e.value.options=e.value.options.map(O=>({...O,votes:O.id===i?O.votes+1:O.votes,is_user_vote:O.id===i}));const h=e.value.options.reduce((O,oe)=>O+oe.votes,0);e.value.total_votes=h,e.value.options=e.value.options.map(O=>({...O,percentage:h>0?Math.round(O.votes/h*100):0})),d.points_earned&&d.points_earned>0?(E.user.pp+=d.points_earned,f.success(`à¹‚à¸«à¸§à¸•à¸ªà¸³à¹€à¸£à¹‡à¸ˆ! à¸„à¸¸à¸“à¹„à¸”à¹‰à¸£à¸±à¸š ${d.points_earned} à¹à¸•à¹‰à¸¡`,"à¹‚à¸«à¸§à¸•à¸ªà¸³à¹€à¸£à¹‡à¸ˆ")):M.success(d.message||"à¹‚à¸«à¸§à¸•à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!"),g.value=!0,T.value=[]}else f.error(d.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸§à¸•à¹„à¸”à¹‰")}catch(i){console.error("Error voting on poll:",i);const d=i?.data?.message||"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸” à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ";f.error(d)}finally{V.value=!1}}},se=()=>{g.value=!0},he=()=>{g.value=!1,T.value=[]},xe=()=>{m("update")},ye=async()=>{try{const{closePoll:i}=q(),d=await i(e.value.id);d.success?(e.value.is_ended=!0,g.value=!0,P.closePollState(e.value.id),M.success("à¸›à¸´à¸”à¹‚à¸«à¸§à¸•à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!")):f.error(d.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸›à¸´à¸”à¹‚à¸žà¸¥à¹„à¸”à¹‰")}catch(i){console.error("Error closing poll:",i),f.error("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸” à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ")}},be=async()=>{try{const{deletePoll:i}=q(),d=await i(e.value.id);d.success?(P.removePoll(e.value.id),m("delete"),M.success("à¸¥à¸šà¹‚à¸žà¸¥à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!")):f.error(d.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¥à¸šà¹‚à¸žà¸¥à¹„à¸”à¹‰")}catch(i){console.error("Error deleting poll:",i),f.error("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸” à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ")}},_e=()=>{M.info("à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¹à¸Šà¸£à¹Œà¸ˆà¸°à¹€à¸‚à¹‰à¸²à¸¡à¸²à¹€à¸£à¹‡à¸§à¹† à¸™à¸µà¹‰!")},we=async()=>{if(!D.value){D.value=!0;try{const i=await v(e.value.id);i.success?(e.value.user_reactions.is_liked=!e.value.user_reactions.is_liked,e.value.user_reactions.is_liked?(e.value.reaction_counts.likes++,e.value.user_reactions.is_disliked&&(e.value.user_reactions.is_disliked=!1,e.value.reaction_counts.dislikes--)):e.value.reaction_counts.likes--):f.error(i.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸–à¸¹à¸à¹ƒà¸ˆà¹„à¸”à¹‰")}catch(i){f.error(i?.data?.message||"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”")}finally{D.value=!1}}},$e=async()=>{if(!F.value){F.value=!0;try{const i=await r(e.value.id);i.success?(e.value.user_reactions.is_disliked=!e.value.user_reactions.is_disliked,e.value.user_reactions.is_disliked?(e.value.reaction_counts.dislikes++,e.value.user_reactions.is_liked&&(e.value.user_reactions.is_liked=!1,e.value.reaction_counts.likes--)):e.value.reaction_counts.dislikes--):f.error(i.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆà¹„à¸”à¹‰")}catch(i){f.error(i?.data?.message||"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”")}finally{F.value=!1}}},le=async()=>{if(!(!A.value.trim()||G.value)){G.value=!0;try{const i=await s(e.value.id,A.value);i.success&&i.comment?(e.value.comments||(e.value.comments=[]),e.value.comments.unshift(i.comment),e.value.reaction_counts.comments++,A.value="",M.success("à¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!")):f.error(i.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¹„à¸”à¹‰")}catch(i){f.error(i?.data?.message||"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”")}finally{G.value=!1}}},Pe=async i=>{if(await f.confirm("à¸„à¸¸à¸“à¹à¸™à¹ˆà¹ƒà¸ˆà¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆà¸§à¹ˆà¸²à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸¥à¸šà¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¸™à¸µà¹‰?","à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸¥à¸š"))try{const h=await ve(i);h.success?(e.value.comments=e.value.comments?.filter(O=>O.id!==i),e.value.reaction_counts.comments--,M.success("à¸¥à¸šà¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!")):f.error(h.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¥à¸šà¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¹„à¸”à¹‰")}catch{f.error("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸¥à¸šà¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™")}};return(i,d)=>(n(),p("div",{class:j(["poll-card",l.isNested?"poll-card-nested":""])},[!l.isNested||e.value.points_pool>0||!N.value?(n(),p("div",Qt,[l.isNested?(n(),p("div",ls,[t("span",os,[u(a(c),{icon:"fluent:poll-24-regular",class:"w-3.5 h-3.5"}),d[5]||(d[5]=t("span",null,"à¹‚à¸žà¸¥",-1))]),t("div",rs,[u(a(c),{icon:"fluent:clock-24-regular",class:"w-3.5 h-3.5"}),t("span",null,k(ee.value),1)])])):(n(),p("div",Wt,[t("img",{src:a(C)(e.value.author),class:"poll-author-avatar"},null,8,Xt),t("div",Yt,[t("div",Zt,[t("span",es,k(e.value.author.name),1),t("span",ts,[u(a(c),{icon:"fluent:poll-24-regular",class:"w-3.5 h-3.5"}),d[4]||(d[4]=t("span",null,"à¹‚à¸žà¸¥",-1))])]),t("div",ss,[u(a(c),{icon:"fluent:clock-24-regular",class:"w-3.5 h-3.5"}),t("span",null,k(ee.value),1)])])])),e.value.points_pool>0?(n(),p("div",ns,[t("div",as,[u(a(c),{icon:"mdi:piggy-bank",class:"w-4 h-4"}),t("span",is,k(e.value.points_pool-e.value.points_distributed)+" à¹à¸•à¹‰à¸¡à¸„à¸‡à¹€à¸«à¸¥à¸·à¸­",1)]),t("span",cs,"à¸£à¸²à¸‡à¸§à¸±à¸¥à¹‚à¸«à¸§à¸•à¸¥à¸° "+k(e.value.points_per_vote)+" à¹à¸•à¹‰à¸¡",1)])):x("",!0),l.showActions&&X.value?(n(),p("div",us,[t("button",{onClick:d[0]||(d[0]=Z(h=>o.value=!o.value,["stop"])),class:"poll-menu-trigger"},[u(a(c),{icon:"fluent:more-horizontal-24-regular",class:"w-5 h-5"})]),u(Jt,{show:o.value,"poll-id":e.value.id,"is-owner":X.value,"is-ended":N.value,onClose:d[1]||(d[1]=h=>o.value=!1),onEdit:xe,onClosePoll:ye,onDelete:be,onShare:_e},null,8,["show","poll-id","is-owner","is-ended"])])):x("",!0)])):x("",!0),t("h3",ds,[u(a(c),{icon:"fluent:chart-multiple-24-regular",class:"w-5 h-5 text-vikinger-cyan"}),R(" "+k(e.value.question),1)]),pe.value?(n(),p("div",vs,[t("div",gs,[(n(!0),p(I,null,Q(e.value.options,(h,O)=>(n(),B(re,{key:h.id,option:h,"is-voting-mode":!0,"is-selected":T.value.includes(h.id),"is-multiple":!!e.value.is_multiple,"max-percentage":te.value,index:O,onClick:oe=>fe(h.id)},null,8,["option","is-selected","is-multiple","max-percentage","index","onClick"]))),128))]),e.value.points_pool>0&&e.value.points_pool-e.value.points_distributed>0?(n(),p("div",ps,[u(a(c),{icon:"fluent:gift-24-filled",class:"w-5 h-5 text-green-500 flex-shrink-0"}),t("span",ms,[d[6]||(d[6]=R(" ðŸŽ à¸£à¹ˆà¸§à¸¡à¹‚à¸«à¸§à¸•à¹€à¸žà¸·à¹ˆà¸­à¸£à¸±à¸š ",-1)),t("strong",null,k(e.value.points_per_vote),1),d[7]||(d[7]=R(" à¹à¸•à¹‰à¸¡à¸£à¸²à¸‡à¸§à¸±à¸¥! ",-1))])])):x("",!0),T.value.length>0?(n(),p("button",{key:1,onClick:ke,disabled:V.value,class:"poll-submit-btn"},[V.value?(n(),B(a(c),{key:0,icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin"})):x("",!0),t("span",null,k(V.value?"à¸à¸³à¸¥à¸±à¸‡à¸ªà¹ˆà¸‡à¹‚à¸«à¸§à¸•...":"à¸ªà¹ˆà¸‡à¹‚à¸«à¸§à¸•"),1)],8,fs)):(n(),p("button",{key:2,onClick:se,class:"poll-view-results-btn"},[u(a(c),{icon:"fluent:chart-multiple-24-regular",class:"w-5 h-5"}),d[8]||(d[8]=t("span",null,"à¸”à¸¹à¸œà¸¥à¸¥à¸±à¸žà¸˜à¹Œ",-1))]))])):(n(),p("div",ks,[t("div",hs,[(n(!0),p(I,null,Q(me.value,(h,O)=>(n(),B(re,{key:h.id,option:h,"is-voting-mode":!1,"is-selected":!1,"is-multiple":!1,"max-percentage":te.value,index:O,onClick:se},null,8,["option","max-percentage","index"]))),128))]),H.value&&!N.value?(n(),p("button",{key:0,onClick:he,class:"poll-change-vote-btn"},[u(a(c),{icon:"fluent:arrow-clockwise-24-regular",class:"w-5 h-5"}),d[9]||(d[9]=t("span",null,"à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹‚à¸«à¸§à¸•",-1))])):x("",!0)])),l.isNested?x("",!0):(n(),p("div",xs,[t("div",ys,[t("button",{onClick:we,class:j(["poll-action-btn",{"active text-vikinger-purple":e.value.user_reactions.is_liked}])},[u(a(c),{icon:e.value.user_reactions.is_liked?"fluent:thumb-like-24-filled":"fluent:thumb-like-24-regular",class:"w-5 h-5"},null,8,["icon"]),t("span",null,k(e.value.reaction_counts.likes),1)],2),t("button",{onClick:$e,class:j(["poll-action-btn",{"active text-red-500":e.value.user_reactions.is_disliked}])},[u(a(c),{icon:e.value.user_reactions.is_disliked?"fluent:thumb-dislike-24-filled":"fluent:thumb-dislike-24-regular",class:"w-5 h-5"},null,8,["icon"]),t("span",null,k(e.value.reaction_counts.dislikes),1)],2),t("button",{onClick:d[2]||(d[2]=h=>K.value=!K.value),class:j(["poll-action-btn",{"active text-vikinger-cyan":K.value}])},[u(a(c),{icon:"fluent:comment-24-regular",class:"w-5 h-5"}),t("span",null,k(e.value.reaction_counts.comments),1)],2)]),t("div",bs,[t("span",null,k(e.value.total_votes)+" à¸„à¸™à¹‚à¸«à¸§à¸•",1),H.value?(n(),p("span",_s,[u(a(c),{icon:"fluent:checkmark-circle-24-filled",class:"w-3.5 h-3.5"}),d[10]||(d[10]=R(" à¹‚à¸«à¸§à¸•à¹à¸¥à¹‰à¸§ ",-1))])):x("",!0)])])),K.value&&!l.isNested?(n(),p("div",ws,[e.value.comments&&e.value.comments.length>0?(n(),p("div",$s,[(n(!0),p(I,null,Q(e.value.comments,h=>(n(),p("div",{key:h.id,class:"flex gap-3 group"},[t("img",{src:a(C)(h.user),class:"w-8 h-8 rounded-full object-cover flex-shrink-0"},null,8,Ps),t("div",Cs,[t("div",Es,[t("div",Ss,[t("span",Os,k(h.user.name),1),t("span",Ms,k(h.diff_humans_created_at),1)]),t("p",Ts,k(h.content),1),h.user.id===a(E).user?.id||X.value?(n(),p("button",{key:0,onClick:O=>Pe(h.id),class:"absolute -right-2 -top-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-sm"},[u(a(c),{icon:"fluent:delete-24-regular",class:"w-3.5 h-3.5"})],8,Ds)):x("",!0)])])]))),128))])):x("",!0),t("div",Vs,[t("div",Bs,[t("img",{src:ge.value,class:"w-8 h-8 rounded-full object-cover"},null,8,js),t("div",Rs,[ne(t("input",{"onUpdate:modelValue":d[3]||(d[3]=h=>A.value=h),onKeydown:De(le,["enter"]),placeholder:"à¹€à¸‚à¸µà¸¢à¸™à¸„à¸§à¸²à¸¡à¹€à¸«à¹‡à¸™...",class:"w-full pl-4 pr-10 py-2 bg-gray-50 dark:bg-vikinger-dark-100 border-none rounded-lg text-sm focus:ring-1 focus:ring-vikinger-purple outline-none"},null,544),[[ae,A.value]]),t("button",{onClick:le,disabled:!A.value.trim()||G.value,class:"absolute right-2 top-1/2 -translate-y-1/2 text-vikinger-purple disabled:opacity-30"},[u(a(c),{icon:"mdi:send",class:"w-5 h-5"})],8,As)])])])])):x("",!0)],2))}}),Fs=U(Ls,[["__scopeId","data-v-f0d0a236"]]);export{Fs as P,Us as S};
