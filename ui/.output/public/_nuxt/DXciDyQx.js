import{q as $,a9 as j,r as y,z,c as u,d as b,a as e,u as r,b as n,e as x,t as g,$ as v,aa as f,T as m,F as D,k as I,a7 as w,g as C,o as i,I as l}from"./DvtEeXFW.js";import{u as S}from"./DT6OiVLv.js";const E={class:"space-y-6"},N={key:0,class:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl"},A={class:"text-sm text-red-600 dark:text-red-400 flex items-center gap-2"},T={class:"space-y-2"},U={class:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"},M={key:0,class:"text-xs text-red-500 flex items-center gap-1"},O={class:"space-y-2"},q={class:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"},L={class:"space-y-2"},H={class:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"},J={class:"grid grid-cols-9 gap-2"},K=["onClick","title"],P={class:"space-y-3"},Q={class:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"},R={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},W={class:"mt-1"},X={key:0,class:"w-2.5 h-2.5 rounded-full bg-teal-500"},Y={class:"mt-1"},Z={key:0,class:"w-2.5 h-2.5 rounded-full bg-teal-500"},ee={class:"space-y-2"},re={class:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"},te={key:0,class:"text-xs text-red-500 flex items-center gap-1"},ae={class:"p-4 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl border-2 border-gray-200 dark:border-gray-700"},se={class:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-1"},oe={class:"flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border-2 border-gray-200 dark:border-gray-700"},le={class:"flex-1"},de={class:"font-bold text-gray-900 dark:text-white"},ne={class:"text-sm text-gray-500 dark:text-gray-400"},ie={class:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},ce=["disabled"],ue=["disabled"],be=$({__name:"GroupForm",props:{courseId:{},group:{default:null}},emits:["saved","cancel"],setup(k,{emit:B}){const d=k,h=B;j();const _=S(),a=y({name:"",description:"",privacy:"public",color:"#3B82F6",max_members:null}),p=y(!1),o=y({}),F=[{name:"น้ำเงิน",value:"#3B82F6"},{name:"ม่วง",value:"#8B5CF6"},{name:"ชมพู",value:"#EC4899"},{name:"แดง",value:"#EF4444"},{name:"ส้ม",value:"#F97316"},{name:"เหลือง",value:"#EAB308"},{name:"เขียว",value:"#10B981"},{name:"ฟ้า",value:"#06B6D4"},{name:"เทา",value:"#6B7280"}];z(()=>{d.group&&(a.value={name:d.group.name||"",description:d.group.description||"",privacy:d.group.privacy||"public",color:d.group.color||"#3B82F6",max_members:d.group.max_members||null})});const G=()=>(o.value={},a.value.name?.trim()||(o.value.name="กรุณากรอกชื่อกลุ่ม"),a.value.max_members&&a.value.max_members<1&&(o.value.max_members="จำนวนสมาชิกต้องมากกว่า 0"),Object.keys(o.value).length===0),V=async()=>{if(G()){p.value=!0;try{let c;d.group?c=await _.updateGroupData(d.courseId,d.group.id,a.value):c=await _.createGroup(d.courseId,a.value),h("saved",c)}catch(c){console.error("Failed to save group:",c),o.value.general=c.data?.message||c.data?.msg||"เกิดข้อผิดพลาดในการบันทึก"}finally{p.value=!1}}};return(c,t)=>(i(),u("div",E,[r(o).general?(i(),u("div",N,[e("p",A,[n(r(l),{icon:"heroicons:exclamation-circle",class:"w-5 h-5"}),x(" "+g(r(o).general),1)])])):b("",!0),e("div",T,[e("label",U,[n(r(l),{icon:"heroicons:user-group-solid",class:"w-5 h-5 text-teal-600 dark:text-teal-400"}),t[6]||(t[6]=e("span",null,"ชื่อกลุ่ม",-1)),t[7]||(t[7]=e("span",{class:"text-red-500"},"*",-1))]),v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r(a).name=s),type:"text",placeholder:"เช่น กลุ่ม A, กลุ่ม 1, เช้า",class:m(["w-full px-4 py-3 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl font-medium text-base focus:outline-none focus:ring-4 focus:ring-teal-500/50 border-2 transition-all",r(o).name?"border-red-500":"border-gray-200 dark:border-gray-700 hover:border-teal-400 dark:hover:border-teal-600"])},null,2),[[f,r(a).name]]),r(o).name?(i(),u("p",M,[n(r(l),{icon:"heroicons:exclamation-circle",class:"w-4 h-4"}),x(" "+g(r(o).name),1)])):b("",!0)]),e("div",O,[e("label",q,[n(r(l),{icon:"heroicons:document-text",class:"w-5 h-5 text-gray-600 dark:text-gray-400"}),t[8]||(t[8]=e("span",null,"คำอธิบาย",-1)),t[9]||(t[9]=e("span",{class:"text-gray-400 text-xs"},"(ไม่บังคับ)",-1))]),v(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>r(a).description=s),rows:"3",placeholder:"รายละเอียดเพิ่มเติมเกี่ยวกับกลุ่ม",class:"w-full px-4 py-3 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl font-medium text-base focus:outline-none focus:ring-4 focus:ring-teal-500/50 border-2 border-gray-200 dark:border-gray-700 hover:border-teal-400 dark:hover:border-teal-600 transition-all resize-none"},null,512),[[f,r(a).description]])]),e("div",L,[e("label",H,[n(r(l),{icon:"heroicons:swatch",class:"w-5 h-5 text-purple-600 dark:text-purple-400"}),t[10]||(t[10]=e("span",null,"สีของกลุ่ม",-1))]),e("div",J,[(i(),u(D,null,I(F,s=>e("button",{key:s.value,type:"button",onClick:ge=>r(a).color=s.value,title:s.name,class:m(["w-10 h-10 rounded-lg transition-all hover:scale-110",r(a).color===s.value?"ring-4 ring-offset-2 ring-gray-400 dark:ring-gray-600 scale-110":""]),style:w({backgroundColor:s.value})},null,14,K)),64))])]),e("div",P,[e("label",Q,[n(r(l),{icon:"heroicons:lock-closed",class:"w-5 h-5 text-gray-600 dark:text-gray-400"}),t[11]||(t[11]=e("span",null,"ความเป็นส่วนตัว",-1))]),e("div",R,[e("div",{onClick:t[2]||(t[2]=s=>r(a).privacy="public"),class:m(["cursor-pointer p-4 rounded-xl border-2 transition-all flex items-start gap-3",r(a).privacy==="public"?"border-teal-500 bg-teal-50 dark:bg-teal-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[e("div",W,[e("div",{class:m(["w-5 h-5 rounded-full border-2 flex items-center justify-center",r(a).privacy==="public"?"border-teal-500":"border-gray-400"])},[r(a).privacy==="public"?(i(),u("div",X)):b("",!0)],2)]),t[12]||(t[12]=e("div",null,[e("h4",{class:"font-bold text-gray-900 dark:text-white mb-1"},"สาธารณะ"),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"ทุกคนสามารถเข้าร่วมกลุ่มได้โดยไม่ต้องรออนุมัติ")],-1))],2),e("div",{onClick:t[3]||(t[3]=s=>r(a).privacy="private"),class:m(["cursor-pointer p-4 rounded-xl border-2 transition-all flex items-start gap-3",r(a).privacy==="private"?"border-teal-500 bg-teal-50 dark:bg-teal-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[e("div",Y,[e("div",{class:m(["w-5 h-5 rounded-full border-2 flex items-center justify-center",r(a).privacy==="private"?"border-teal-500":"border-gray-400"])},[r(a).privacy==="private"?(i(),u("div",Z)):b("",!0)],2)]),t[13]||(t[13]=e("div",null,[e("h4",{class:"font-bold text-gray-900 dark:text-white mb-1"},"ส่วนตัว"),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"ต้องได้รับอนุญาตจากผู้ดูแลกลุ่มก่อนเข้าร่วม")],-1))],2)])]),e("div",ee,[e("label",re,[n(r(l),{icon:"heroicons:users",class:"w-5 h-5 text-blue-600 dark:text-blue-400"}),t[14]||(t[14]=e("span",null,"จำนวนสมาชิกสูงสุด",-1)),t[15]||(t[15]=e("span",{class:"text-gray-400 text-xs"},"(ไม่บังคับ - ไม่จำกัด)",-1))]),v(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>r(a).max_members=s),type:"number",min:"1",placeholder:"ไม่จำกัดจำนวน",class:m(["w-full px-4 py-3 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl font-medium text-base focus:outline-none focus:ring-4 focus:ring-blue-500/50 border-2 transition-all",r(o).max_members?"border-red-500":"border-gray-200 dark:border-gray-700 hover:border-blue-400 dark:hover:border-blue-600"])},null,2),[[f,r(a).max_members,void 0,{number:!0}]]),r(o).max_members?(i(),u("p",te,[n(r(l),{icon:"heroicons:exclamation-circle",class:"w-4 h-4"}),x(" "+g(r(o).max_members),1)])):b("",!0)]),e("div",ae,[e("p",se,[n(r(l),{icon:"heroicons:eye",class:"w-4 h-4"}),t[16]||(t[16]=x(" ตัวอย่างการแสดงผล: ",-1))]),e("div",oe,[e("div",{class:"w-12 h-12 rounded-lg flex items-center justify-center",style:w({backgroundColor:r(a).color})},[n(r(l),{icon:"heroicons:user-group",class:"w-6 h-6 text-white"})],4),e("div",le,[e("h4",de,g(r(a).name||"ชื่อกลุ่ม"),1),e("p",ne,[x(g(r(a).max_members?`สูงสุด ${r(a).max_members} คน`:"ไม่จำกัดจำนวน")+" ",1),t[17]||(t[17]=e("span",{class:"mx-2"},"•",-1)),e("span",null,g(r(a).privacy==="public"?"สาธารณะ":"ส่วนตัว"),1)])])])]),e("div",ie,[e("button",{onClick:t[5]||(t[5]=s=>h("cancel")),disabled:r(p),class:"px-6 py-2.5 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-semibold rounded-xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"}," ยกเลิก ",8,ce),e("button",{onClick:V,disabled:r(p),class:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 text-white font-bold rounded-xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl"},[r(p)?(i(),C(r(l),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(i(),C(r(l),{key:1,icon:"fluent:save-24-filled",class:"w-5 h-5"})),e("span",null,g(r(p)?"กำลังบันทึก...":k.group?"บันทึกการแก้ไข":"สร้างกลุ่ม"),1)],8,ue)])]))}});export{be as _};
