import{_ as D}from"./ChBnuzYQ.js";import{Q as ae,q as O,a9 as H,l as re,n as V,r as g,z as G,a3 as X,c as r,o as s,a as e,g as Y,u as a,w as Q,b as p,I as x,t as f,F as B,k as j,d as q,p as R,e as E,i as le,v as oe,al as ne,aF as I,T as ie,_ as de}from"./cTealXVQ.js";import{u as ue}from"./DZzR-KKF.js";import{_ as ce,a as ge}from"./CfwTDcGs.js";import{C as ve}from"./DkzyO7a-.js";const J=ae("/images/default-avatar.png"),pe={class:"bg-white dark:bg-vikinger-dark-200 rounded-xl p-4 shadow-sm mb-6"},be={class:"flex items-center justify-between mb-4"},me={key:1,class:"group relative"},ye={disabled:"",class:"text-xs font-medium text-gray-400 bg-gray-100 dark:bg-gray-700 dark:text-gray-500 p-1.5 rounded-lg cursor-not-allowed"},he={class:"absolute bottom-full right-0 mb-2 w-48 bg-gray-900 text-white text-xs rounded-lg py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10 text-center"},xe={key:0,class:"space-y-3"},fe={key:1,class:"space-y-4"},ke={key:0,class:"mb-4"},we={class:"space-y-2"},_e={class:"flex items-start gap-3"},$e=["src"],Ce={class:"flex-1 min-w-0"},Be={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},Se={class:"text-xs text-blue-600 dark:text-blue-400"},je={class:"flex gap-2 mt-2"},Le=["onClick"],Pe=["onClick"],Fe={class:"relative shrink-0 w-12 h-12 mt-1"},Ue=["src","alt"],Te={class:"flex-1 min-w-0"},Ae={class:"text-sm font-medium text-gray-900 dark:text-white line-clamp-2 leading-tight group-hover:text-vikinger-purple transition-colors mb-1"},Ne={class:"flex items-center justify-between"},Qe={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},Ie={class:"flex items-center justify-center text-gray-400 group-hover:text-vikinger-purple transition-colors mt-2"},Ye={key:2,class:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm"},Re={class:"space-y-2 pt-2"},ze=["disabled"],Me={key:1},We={key:1},Ee={key:2,class:"group relative"},qe={disabled:"",class:"w-full py-2 text-xs font-medium text-gray-400 bg-gray-100 dark:bg-gray-700 dark:text-gray-500 rounded-lg cursor-not-allowed flex items-center justify-center gap-2"},Oe={class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-max bg-gray-900 text-white text-xs rounded-lg py-1 px-3 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10 text-center whitespace-nowrap"},Ve=O({__name:"MyCoursesWidget",setup(w){const T=H(),{user:y}=ue(),_=re(),L=V(()=>Number(_.points)),$=g(100),h=V(()=>L.value>=Number($.value)),m=g([]),C=g(!0),c=g(1),S=g(1),v=g(!1),l=g([]),d=async()=>{if(y.value)try{const u=await T.get("/api/me/course-invitations");u.success&&(l.value=u.invitations)}catch(u){console.error("Failed to fetch invitations",u)}},z=async(u,n)=>{try{const k=n?"accept":"decline";(await T.post(`/api/courses/${u.course.id}/admins/invitations/${u.id}/${k}`,{})).success&&(l.value=l.value.filter(N=>N.id!==u.id),n&&A())}catch(k){alert(k.response?.data?.message||"ทำรายการไม่สำเร็จ")}},A=async(u=!1)=>{if(y.value){u?v.value=!0:C.value=!0,u||d();try{const n=await T.get(`/api/courses/users/${y.value.id}/my-courses`,{params:{page:c.value,per_page:5}});if(n.success){n.create_course_threshold!==void 0&&($.value=n.create_course_threshold);const k=n.courses.data||n.courses;u?m.value.push(...k):m.value=k,n.pagination&&n.pagination.last_page?S.value=n.pagination.last_page:n.courses.last_page&&(S.value=n.courses.last_page)}}catch(n){console.error("Failed to fetch my courses",n)}finally{C.value=!1,v.value=!1}}},P=()=>{c.value<S.value&&(c.value++,A(!0))},M=u=>u.cover?u.cover.startsWith("http")?u.cover:`${R().public.apiBase}/storage/images/courses/covers/${u.cover}`:`${R().public.apiBase}/storage/images/courses/covers/default_cover.jpg`;G(()=>{y.value&&A()}),X(y,u=>{u&&A()});const W=u=>new Intl.NumberFormat().format(u);return(u,n)=>{const k=D;return s(),r("div",pe,[e("div",be,[n[1]||(n[1]=e("h3",{class:"font-semibold text-gray-900 dark:text-white"},"คอร์สของฉัน",-1)),a(h)?(s(),Y(k,{key:0,to:"/courses/create",class:"text-xs font-medium text-white bg-vikinger-purple hover:bg-vikinger-purple-dark p-1.5 rounded-lg transition-colors shadow-sm shadow-vikinger-purple/50",title:"สร้างคอร์สใหม่"},{default:Q(()=>[p(a(x),{icon:"mdi:plus",class:"w-4 h-4"})]),_:1})):(s(),r("div",me,[e("button",ye,[p(a(x),{icon:"mdi:lock",class:"w-4 h-4"})]),e("div",he," ต้องมีคะแนนสะสม "+f(W($.value))+" คะแนน ",1)]))]),C.value?(s(),r("div",xe,[(s(),r(B,null,j(3,b=>e("div",{key:b,class:"flex gap-3 animate-pulse"},[...n[2]||(n[2]=[e("div",{class:"w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded-lg shrink-0"},null,-1),e("div",{class:"flex-1 space-y-2 py-1"},[e("div",{class:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e("div",{class:"h-2 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})],-1)])])),64))])):(s(),r("div",fe,[l.value.length>0?(s(),r("div",ke,[n[3]||(n[3]=e("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2"},"คำเชิญผู้ดูแล",-1)),e("div",we,[(s(!0),r(B,null,j(l.value,b=>(s(),r("div",{key:b.id,class:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-100 dark:border-blue-900/30"},[e("div",_e,[e("img",{src:M({cover:b.course.cover}),class:"w-10 h-10 object-cover rounded-md flex-shrink-0"},null,8,$e),e("div",Ce,[e("p",Be,f(b.course.name),1),e("p",Se," เชิญเป็น: "+f(b.role_name),1),e("div",je,[e("button",{onClick:N=>z(b,!0),class:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700"},"ตอบรับ",8,Le),e("button",{onClick:N=>z(b,!1),class:"text-xs text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 px-2 py-1 rounded"},"ปฏิเสธ",8,Pe)])])])]))),128))]),n[4]||(n[4]=e("div",{class:"h-px bg-gray-100 dark:bg-gray-700 my-4"},null,-1))])):q("",!0),m.value.length>0?(s(!0),r(B,{key:1},j(m.value,b=>(s(),Y(k,{key:b.id,to:`/courses/${b.id}`,class:"flex items-start gap-3 group hover:bg-gray-50 dark:hover:bg-vikinger-dark-100 p-2 -mx-2 rounded-lg transition-colors"},{default:Q(()=>[e("div",Fe,[e("img",{src:M(b),alt:b.name,class:"w-full h-full object-cover rounded-lg shadow-sm",onError:n[0]||(n[0]=N=>N.target.src=`${("useRuntimeConfig"in u?u.useRuntimeConfig:a(R))().public.apiBase}/storage/images/courses/covers/default_cover.jpg`)},null,40,Ue)]),e("div",Te,[e("h4",Ae,f(b.name),1),e("div",Ne,[e("span",Qe,f(b.user?b.user.name:b.instructor?b.instructor.name:"Unknown"),1)])]),e("div",Ie,[p(a(x),{icon:"fluent:chevron-right-24-regular",class:"w-5 h-5"})])]),_:2},1032,["to"]))),128)):(s(),r("div",Ye,[p(a(x),{icon:"fluent:hat-graduation-24-regular",class:"w-8 h-8 mx-auto mb-2 opacity-50"}),n[5]||(n[5]=e("p",null,"คุณยังไม่ได้สร้างรายวิชา",-1))])),e("div",Re,[c.value<S.value?(s(),r("button",{key:0,onClick:P,disabled:v.value,class:"w-full py-2 text-xs font-medium text-vikinger-purple bg-vikinger-purple/10 hover:bg-vikinger-purple/20 rounded-lg transition-colors flex items-center justify-center gap-2"},[v.value?(s(),Y(a(x),{key:0,icon:"svg-spinners:ring-resize",class:"w-4 h-4"})):(s(),r("span",Me,"โหลดเพิ่ม"))],8,ze)):q("",!0),a(L)>=$.value?(s(),r("div",We,[p(k,{to:"/courses/create",class:"w-full py-2 text-xs font-medium text-white bg-vikinger-purple hover:bg-vikinger-purple-dark rounded-lg transition-colors flex items-center justify-center gap-2 shadow-sm shadow-vikinger-purple/50"},{default:Q(()=>[p(a(x),{icon:"mdi:plus",class:"w-4 h-4"}),n[6]||(n[6]=E(" สร้างคอร์สใหม่ ",-1))]),_:1})])):(s(),r("div",Ee,[e("button",qe,[p(a(x),{icon:"mdi:lock",class:"w-4 h-4"}),n[7]||(n[7]=E(" สร้างคอร์สใหม่ ",-1))]),e("div",Oe," ต้องมีคะแนนสะสม "+f(W($.value))+" คะแนน เพื่อสร้างคอร์สใหม่ ",1)]))])]))])}}}),De={class:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm mb-6"},He={class:"flex items-center justify-between mb-4"},Ge={key:0,class:"space-y-3"},Ke={key:1,class:"space-y-3"},Je={class:"relative shrink-0 w-12 h-12"},Xe=["src","alt"],Ze={class:"flex-1 min-w-0"},et={class:"text-sm font-medium text-gray-900 dark:text-white truncate group-hover:text-blue-500 transition-colors"},tt={class:"flex items-center gap-2 mt-1"},st={class:"text-xs text-gray-500 dark:text-gray-400"},at={class:"flex items-center justify-center text-gray-400 group-hover:text-blue-500 group-hover:translate-x-1 transition-all"},rt={key:2,class:"text-center py-6 text-gray-500 dark:text-gray-400 text-sm"},lt={class:"inline-flex items-center justify-center w-10 h-10 bg-red-50 dark:bg-red-900/10 rounded-full mb-3"},ot=O({__name:"FavoriteCoursesWidget",setup(w){const T=H(),y=R(),_=g([]),L=g(!0),$=async()=>{L.value=!0;try{const h=await T.get("/api/courses/favorites?limit=5");h.data&&(_.value=h.data.slice(0,5))}catch(h){console.error("Failed to fetch favorite courses",h)}finally{L.value=!1}};return G(()=>{$()}),(h,m)=>{const C=D;return s(),r("div",De,[e("div",He,[m[1]||(m[1]=e("h3",{class:"font-semibold text-gray-900 dark:text-white"},"รายการโปรด",-1)),p(C,{to:"/favourite",class:"text-xs text-blue-500 hover:underline"},{default:Q(()=>[...m[0]||(m[0]=[E("ดูทั้งหมด",-1)])]),_:1})]),L.value?(s(),r("div",Ge,[(s(),r(B,null,j(3,c=>e("div",{key:c,class:"flex gap-3 animate-pulse"},[...m[2]||(m[2]=[e("div",{class:"w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded-lg shrink-0"},null,-1),e("div",{class:"flex-1 space-y-2 py-1"},[e("div",{class:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e("div",{class:"h-2 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})],-1)])])),64))])):_.value.length>0?(s(),r("div",Ke,[(s(!0),r(B,null,j(_.value,c=>(s(),Y(C,{key:c.id,to:`/courses/${c.id}`,class:"flex gap-3 group hover:bg-gray-50 dark:hover:bg-gray-700/50 p-2 -mx-2 rounded-lg transition-colors"},{default:Q(()=>[e("div",Je,[e("img",{src:c.cover&&!c.cover.startsWith("http")?`${a(y).public.apiBase}/storage/images/courses/covers/${c.cover}`:c.cover||`${a(y).public.apiBase}/storage/images/courses/covers/default_cover.jpg`,alt:c.name,class:"w-full h-full object-cover rounded-lg shadow-sm"},null,8,Xe)]),e("div",Ze,[e("h4",et,f(c.name),1),e("div",tt,[e("span",st,f(c.category||"General"),1)])]),e("div",at,[p(a(x),{icon:"fluent:chevron-right-20-regular",class:"w-5 h-5"})])]),_:2},1032,["to"]))),128))])):(s(),r("div",rt,[e("div",lt,[p(a(x),{icon:"fluent:heart-24-regular",class:"w-5 h-5 text-red-400"})]),m[3]||(m[3]=e("p",null,"ยังไม่มีคอร์สโปรด",-1))]))])}}}),nt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden"},it={class:"p-4 space-y-4"},dt={class:"relative"},ut=["value"],ct=["value"],gt=["value"],vt=["value"],pt=["value"],bt=["value"],mt=["value"],yt=["value"],ht=["value"],xt=["value"],ft=["value"],kt=O({__name:"CourseSearchFilterWidget",props:{searchQuery:{},selectedCategory:{},selectedLevel:{},selectedSemester:{},selectedYear:{},sortBy:{},categories:{},levels:{},semesters:{},years:{},sortOptions:{}},emits:["update:searchQuery","update:selectedCategory","update:selectedLevel","update:selectedSemester","update:selectedYear","update:sortBy","handleSearch"],setup(w,{emit:T}){const y=T;let _;const L=()=>{clearTimeout(_),_=setTimeout(()=>{y("handleSearch")},300)},$=v=>{const l=v.target;y("update:searchQuery",l.value),L()},h=v=>{const l=v.target;y("update:selectedCategory",l.value)},m=v=>{const l=v.target;y("update:selectedLevel",l.value)},C=v=>{const l=v.target;y("update:selectedSemester",l.value)},c=v=>{const l=v.target;y("update:selectedYear",l.value)},S=v=>{const l=v.target;y("update:sortBy",l.value)};return(v,l)=>(s(),r("div",nt,[l[5]||(l[5]=e("div",{class:"p-4 border-b border-gray-100 dark:border-gray-700"},[e("h3",{class:"font-bold text-gray-800 dark:text-white"},"ค้นหาและกรอง")],-1)),e("div",it,[e("div",dt,[p(a(x),{icon:"fluent:search-24-regular",class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e("input",{value:w.searchQuery,onInput:$,type:"text",placeholder:"ค้นหารายวิชา...",class:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg pl-10 pr-4 py-2.5 text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,40,ut)]),e("div",null,[l[0]||(l[0]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," หมวดหมู่ ",-1)),e("select",{value:w.selectedCategory,onChange:h,class:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2.5 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[(s(!0),r(B,null,j(w.categories,d=>(s(),r("option",{key:d.value,value:d.value},f(d.label),9,gt))),128))],40,ct)]),e("div",null,[l[1]||(l[1]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ระดับ ",-1)),e("select",{value:w.selectedLevel,onChange:m,class:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2.5 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[(s(!0),r(B,null,j(w.levels,d=>(s(),r("option",{key:d.value,value:d.value},f(d.label),9,pt))),128))],40,vt)]),e("div",null,[l[2]||(l[2]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ภาคเรียน ",-1)),e("select",{value:w.selectedSemester,onChange:C,class:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2.5 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[(s(!0),r(B,null,j(w.semesters,d=>(s(),r("option",{key:d.value,value:d.value},f(d.label),9,mt))),128))],40,bt)]),e("div",null,[l[3]||(l[3]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ปีการศึกษา ",-1)),e("select",{value:w.selectedYear,onChange:c,class:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2.5 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[(s(!0),r(B,null,j(w.years,d=>(s(),r("option",{key:d.value,value:d.value},f(d.label),9,ht))),128))],40,yt)]),e("div",null,[l[4]||(l[4]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," จัดเรียง ",-1)),e("select",{value:w.sortBy,onChange:S,class:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2.5 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[(s(!0),r(B,null,j(w.sortOptions,d=>(s(),r("option",{key:d.value,value:d.value},f(d.label),9,ft))),128))],40,xt)])])]))}}),wt={class:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-blue-600 via-blue-500 to-cyan-400"},_t={class:"absolute left-4 top-1/2 -translate-y-1/2 flex items-center gap-2"},$t=["src"],Ct=["src"],Bt={class:"hidden md:flex absolute right-4 top-1/2 -translate-y-1/2 items-center gap-3"},St=["src"],jt=["src"],Lt=["src"],Pt=["src"],Ft={class:"max-w-7xl mx-auto px-4 py-6"},Ut={class:"grid grid-cols-1 xl:grid-cols-4 gap-6"},Tt={class:"col-span-1 order-2 xl:order-1 space-y-6"},At={class:"col-span-1 xl:col-span-2 min-w-0 order-1 xl:order-2"},Nt={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Qt={key:1,class:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center shadow-lg"},It={class:"text-gray-500 mb-4"},Yt={key:2,class:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center shadow-lg"},Rt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},zt={key:0,class:"mt-8 text-center"},Mt=["disabled"],Wt={class:"col-span-1 space-y-6 order-3"},Et={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden"},qt={class:"divide-y divide-gray-100 dark:divide-gray-700"},Ot=["onClick"],Vt=["src","alt"],Dt={class:"flex-1 min-w-0"},Ht={class:"text-sm font-medium text-gray-800 dark:text-white line-clamp-2 mb-1"},Gt={class:"text-xs text-blue-500"},Kt={class:"p-1 text-gray-400 hover:text-blue-500 transition-colors flex-shrink-0"},Jt={key:0,class:"p-4 text-center text-gray-500 text-sm"},Xt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4"},Zt={class:"flex items-start gap-3 mb-4"},es={class:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0"},ts={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden"},ss={class:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between"},as={class:"p-4 space-y-3"},rs={class:"relative h-24 rounded-lg overflow-hidden bg-gradient-to-r from-cyan-500 to-blue-500 p-3 flex items-end cursor-pointer hover:opacity-90 transition-opacity"},ls={class:"relative"},os={class:"relative h-24 rounded-lg overflow-hidden bg-gradient-to-r from-green-500 to-teal-500 p-3 flex items-end cursor-pointer hover:opacity-90 transition-opacity"},ns={class:"relative"},is=O({__name:"index",setup(w){le({title:"Courses - Marketplace"});const T=H(),y=oe(),_=g([]),L=g([]),$=g(!0),h=g(!1),m=g(null),C=g(""),c=g("all"),S=g("all"),v=g("latest"),l=g("all"),d=g("all"),z=g([{value:"all",label:"ทุกภาคเรียน"},{value:"1",label:"ภาคเรียนที่ 1"},{value:"2",label:"ภาคเรียนที่ 2"},{value:"3",label:"ภาคเรียนที่ 3"},{value:"summer",label:"Summer"}]),A=g([{value:"all",label:"ทุกปีการศึกษา"}]),P=g({currentPage:1,lastPage:1,total:0,perPage:8}),M=V(()=>P.value.currentPage<P.value.lastPage),W=g([{value:"all",label:"ทุกหมวดหมู่"}]),u=g([{value:"all",label:"ทุกระดับ"}]),n=[{value:"latest",label:"ล่าสุด"},{value:"popular",label:"ยอดนิยม"},{value:"price-low",label:"ราคาต่ำ-สูง"},{value:"price-high",label:"ราคาสูง-ต่ำ"},{value:"rating",label:"คะแนนสูงสุด"}],k=async(o=1,t=!1)=>{o===1?$.value=!0:h.value=!0,m.value=null;try{const F=new URLSearchParams({page:String(o),per_page:String(P.value.perPage)});C.value&&F.append("search",C.value),c.value!=="all"&&F.append("category",c.value),S.value!=="all"&&F.append("level",S.value),v.value&&F.append("sort",v.value),l.value!=="all"&&F.append("semester",l.value),d.value!=="all"&&F.append("academic_year",d.value);const U=await T.get(`/api/courses?${F.toString()}`);if(U.courses){const i=Array.isArray(U.courses)?U.courses:U.courses.data||[];t?_.value=[..._.value,...i]:(_.value=i,L.value=i.slice(0,3)),U.courses.current_page!==void 0?P.value={currentPage:U.courses.current_page||o,lastPage:U.courses.last_page||1,total:U.courses.total||0,perPage:U.courses.per_page||8}:(P.value.currentPage=o,i.length<P.value.perPage?P.value.lastPage=o:P.value.lastPage=o+1)}}catch(F){console.error("Error fetching courses:",F),m.value="ไม่สามารถโหลดรายวิชาได้ กรุณาลองใหม่อีกครั้ง"}finally{$.value=!1,h.value=!1}},b=async()=>{h.value||!M.value||await k(P.value.currentPage+1,!0)};let N;const Z=()=>{clearTimeout(N),N=setTimeout(()=>{k(1)},300)},ee=o=>o.cover?o.cover.startsWith("http")?o.cover:`${R().public.apiBase}/storage/images/courses/covers/${o.cover}`:`${R().public.apiBase}/storage/images/courses/covers/default_cover.jpg`,te=o=>{y.push(`/courses/${o}`)},se=async()=>{try{const o=await T.get("/api/courses/filters");o.success&&(o.semesters&&o.semesters.length>0&&(z.value=[{value:"all",label:"ทุกภาคเรียน"},...o.semesters.map(t=>({value:t,label:`ภาคเรียนที่ ${t}`}))]),o.years&&o.years.length>0?A.value=[{value:"all",label:"ทุกปีการศึกษา"},...o.years.map(t=>({value:t,label:t}))]:A.value=[{value:"all",label:"ทุกปีการศึกษา"},{value:"2567",label:"2567"},{value:"2568",label:"2568"},{value:"2569",label:"2569"}],o.categories&&o.categories.length>0&&(W.value=[{value:"all",label:"ทุกหมวดหมู่"},...o.categories.map(t=>({value:t,label:t}))]),o.levels&&o.levels.length>0&&(u.value=[{value:"all",label:"ทุกระดับ"},...o.levels.map(t=>({value:t,label:t}))]))}catch(o){console.error("Failed to fetch filter options",o)}};return G(()=>{se(),k()}),X([c,S,v,l,d],()=>{k(1)}),(o,t)=>{const F=D,U=ne;return s(),Y(U,{name:"main"},{hero:Q(()=>[e("div",wt,[t[7]||(t[7]=e("div",{class:"absolute inset-0 opacity-20"},[e("div",{class:"absolute inset-0",style:{"background-image":"url('/images/resources/animate-bg.png')","background-size":"cover"}})],-1)),e("div",_t,[e("img",{src:`${o.$config.public.apiBase}/storage/images/badge/gold-b.png`,alt:"badge",class:"w-16 h-16 md:w-20 md:h-20 drop-shadow-lg animate-bounce",style:{"animation-duration":"2s"}},null,8,$t),e("img",{src:`${o.$config.public.apiBase}/storage/images/badge/scientist-b.png`,alt:"badge",class:"w-12 h-12 md:w-16 md:h-16 drop-shadow-lg animate-bounce hidden sm:block",style:{"animation-duration":"2.5s","animation-delay":"0.3s"}},null,8,Ct)]),t[8]||(t[8]=e("div",{class:"relative z-10 px-6 py-8 md:py-10 ml-24 sm:ml-36 md:ml-44"},[e("h1",{class:"text-2xl md:text-3xl font-bold text-white mb-2"}," รายวิชาทั้งหมด "),e("p",{class:"text-blue-100 text-sm md:text-base"}," ค้นหาและเข้าร่วมเรียนรู้ในรายวิชาที่คุณสนใจ ")],-1)),e("div",Bt,[e("img",{src:`${o.$config.public.apiBase}/storage/images/badge/globet-b.png`,alt:"badge",class:"w-10 h-10 drop-shadow-lg opacity-70 animate-pulse"},null,8,St),e("img",{src:`${o.$config.public.apiBase}/storage/images/badge/collector-b.png`,alt:"badge",class:"w-14 h-14 drop-shadow-lg opacity-80 animate-bounce",style:{"animation-duration":"3s"}},null,8,jt),e("img",{src:`${o.$config.public.apiBase}/storage/images/badge/platinum-b.png`,alt:"badge",class:"w-12 h-12 drop-shadow-lg opacity-70 animate-pulse",style:{"animation-delay":"0.5s"}},null,8,Lt),e("img",{src:`${o.$config.public.apiBase}/storage/images/badge/tycoon.png`,alt:"badge",class:"w-16 h-16 drop-shadow-lg opacity-90 animate-bounce",style:{"animation-duration":"2.8s","animation-delay":"0.2s"}},null,8,Pt)]),t[9]||(t[9]=e("div",{class:"absolute top-4 left-1/3 w-2 h-2 bg-white rounded-full animate-ping opacity-75"},null,-1)),t[10]||(t[10]=e("div",{class:"absolute bottom-6 left-1/2 w-1.5 h-1.5 bg-yellow-200 rounded-full animate-ping opacity-60",style:{"animation-delay":"0.5s"}},null,-1)),t[11]||(t[11]=e("div",{class:"absolute top-6 right-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-50",style:{"animation-delay":"1s"}},null,-1))])]),default:Q(()=>[e("div",Ft,[e("div",Ut,[e("div",Tt,[p(kt,{searchQuery:a(C),"onUpdate:searchQuery":t[0]||(t[0]=i=>I(C)?C.value=i:null),selectedCategory:a(c),"onUpdate:selectedCategory":t[1]||(t[1]=i=>I(c)?c.value=i:null),selectedLevel:a(S),"onUpdate:selectedLevel":t[2]||(t[2]=i=>I(S)?S.value=i:null),selectedSemester:a(l),"onUpdate:selectedSemester":t[3]||(t[3]=i=>I(l)?l.value=i:null),selectedYear:a(d),"onUpdate:selectedYear":t[4]||(t[4]=i=>I(d)?d.value=i:null),sortBy:a(v),"onUpdate:sortBy":t[5]||(t[5]=i=>I(v)?v.value=i:null),categories:a(W),levels:a(u),semesters:a(z),years:a(A),sortOptions:n,onHandleSearch:Z},null,8,["searchQuery","selectedCategory","selectedLevel","selectedSemester","selectedYear","sortBy","categories","levels","semesters","years"]),p(ce),p(ot)]),e("div",At,[a($)?(s(),r("div",Nt,[(s(),r(B,null,j(6,i=>e("div",{key:i,class:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden animate-pulse shadow-lg"},[...t[12]||(t[12]=[e("div",{class:"h-44 bg-gray-200 dark:bg-gray-700"},null,-1),e("div",{class:"p-4 space-y-3"},[e("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e("div",{class:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),e("div",{class:"h-8 bg-gray-200 dark:bg-gray-700 rounded"})],-1)])])),64))])):a(m)?(s(),r("div",Qt,[p(a(x),{icon:"fluent:error-circle-24-regular",class:"w-20 h-20 text-red-500 mx-auto mb-4"}),t[13]||(t[13]=e("h3",{class:"text-xl font-bold text-gray-800 dark:text-white mb-2"},"เกิดข้อผิดพลาด",-1)),e("p",It,f(a(m)),1),e("button",{onClick:t[6]||(t[6]=i=>k(1)),class:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"}," ลองใหม่ ")])):a(_).length===0?(s(),r("div",Yt,[p(a(x),{icon:"fluent:book-24-regular",class:"w-20 h-20 text-gray-400 mx-auto mb-4"}),t[14]||(t[14]=e("h3",{class:"text-xl font-bold text-gray-800 dark:text-white mb-2"},"ไม่พบรายวิชา",-1)),t[15]||(t[15]=e("p",{class:"text-gray-500"},"ลองค้นหาด้วยคำค้นอื่น หรือเปลี่ยนตัวกรอง",-1))])):(s(),r(B,{key:3},[e("div",Rt,[(s(!0),r(B,null,j(a(_),(i,K)=>(s(),Y(ve,{key:i.id,course:i,index:K},null,8,["course","index"]))),128))]),a(M)?(s(),r("div",zt,[e("button",{onClick:b,disabled:a(h),class:"px-8 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 flex items-center gap-2 mx-auto font-medium"},[p(a(x),{icon:a(h)?"fluent:spinner-ios-20-regular":"fluent:arrow-down-24-regular",class:ie(["w-5 h-5",{"animate-spin":a(h)}])},null,8,["icon","class"]),E(" "+f(a(h)?"กำลังโหลด...":"โหลดเพิ่มเติม"),1)],8,Mt)])):q("",!0)],64))]),e("div",Wt,[p(ge),p(Ve),e("div",Et,[t[16]||(t[16]=e("div",{class:"p-4 border-b border-gray-100 dark:border-gray-700"},[e("h3",{class:"font-bold text-gray-800 dark:text-white"},"Popular Courses")],-1)),e("div",qt,[(s(!0),r(B,null,j(a(L),i=>(s(),r("div",{key:i.id,class:"p-4 flex items-start gap-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",onClick:K=>te(i.id)},[e("img",{src:ee(i),alt:i.name,class:"w-16 h-16 rounded-lg object-cover flex-shrink-0"},null,8,Vt),e("div",Dt,[e("h4",Ht,f(i.name),1),e("p",Gt,f(i.user?.name||"Unknown"),1)]),e("button",Kt,[p(a(x),{icon:"fluent:bookmark-24-regular",class:"w-5 h-5"})])],8,Ot))),128)),a(L).length===0&&!a($)?(s(),r("div",Jt," ไม่มีข้อมูล ")):q("",!0)])]),e("div",Xt,[t[18]||(t[18]=e("h3",{class:"font-bold text-gray-800 dark:text-white mb-3"},"Ask Research Question?",-1)),e("div",Zt,[e("div",es,[p(a(x),{icon:"fluent:question-circle-24-regular",class:"w-5 h-5 text-blue-500"})]),t[17]||(t[17]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Ask questions in Q&A to get help from experts in your field. ",-1))]),t[19]||(t[19]=e("button",{class:"w-full py-2.5 border-2 border-blue-500 text-blue-500 rounded-lg font-medium hover:bg-blue-500 hover:text-white transition-colors"}," Ask a question ",-1))]),e("div",ts,[e("div",ss,[t[21]||(t[21]=e("h3",{class:"font-bold text-gray-800 dark:text-white"},"Explore Events",-1)),p(F,{to:"/events",class:"text-sm text-blue-500 hover:underline"},{default:Q(()=>[...t[20]||(t[20]=[E("See All",-1)])]),_:1})]),e("div",as,[e("div",rs,[t[23]||(t[23]=e("div",{class:"absolute inset-0 bg-black/20"},null,-1)),e("div",ls,[p(a(x),{icon:"fluent:building-24-regular",class:"w-6 h-6 text-white mb-1"}),t[22]||(t[22]=e("p",{class:"text-white text-sm font-medium line-clamp-2"}," University good night event in columbia ",-1))])]),e("div",os,[t[25]||(t[25]=e("div",{class:"absolute inset-0 bg-black/20"},null,-1)),e("div",ns,[p(a(x),{icon:"fluent:people-audience-24-regular",class:"w-6 h-6 text-white mb-1"}),t[24]||(t[24]=e("p",{class:"text-white text-sm font-medium"},"The 3rd International Conference 2020",-1))])])])]),t[26]||(t[26]=e("div",{class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden"},[e("div",{class:"p-4 border-b border-gray-100 dark:border-gray-700"},[e("h3",{class:"font-bold text-gray-800 dark:text-white"},"Who's Following")]),e("div",{class:"divide-y divide-gray-100 dark:divide-gray-700"},[e("div",{class:"p-4 flex items-center justify-between"},[e("div",{class:"flex items-center gap-3"},[e("div",{class:"relative"},[e("img",{src:J,alt:"User",class:"w-10 h-10 rounded-full object-cover"}),e("div",{class:"absolute -bottom-1 -right-1 w-4 h-4 bg-yellow-400 rounded text-[8px] flex items-center justify-center font-bold text-gray-900"}," 5 ")]),e("div",null,[e("p",{class:"text-sm font-medium text-gray-800 dark:text-white"},"Kelly Bill"),e("p",{class:"text-xs text-gray-500"},"Dept colleague")])]),e("button",{class:"text-blue-500 text-sm font-medium hover:underline"},"Follow")]),e("div",{class:"p-4 flex items-center justify-between"},[e("div",{class:"flex items-center gap-3"},[e("div",{class:"relative"},[e("img",{src:J,alt:"User",class:"w-10 h-10 rounded-full object-cover"}),e("div",{class:"absolute -bottom-1 -right-1 w-4 h-4 bg-yellow-400 rounded text-[8px] flex items-center justify-center font-bold text-gray-900"}," 5 ")]),e("div",null,[e("p",{class:"text-sm font-medium text-gray-800 dark:text-white"},"Issabel"),e("p",{class:"text-xs text-gray-500"},"Dept colleague")])]),e("button",{class:"text-blue-500 text-sm font-medium hover:underline"},"Follow")])])],-1))])])])]),_:1})}}}),ps=de(is,[["__scopeId","data-v-45e6725c"]]);export{ps as default};
