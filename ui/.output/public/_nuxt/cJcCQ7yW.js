import{a as z}from"./BWv91NqQ.js";import{n as s,_ as $,c as v,o as x,a as e,av as D,d as k,b,w as B,T as c,u as r,t as n,I as p,a7 as P}from"./CHs-R6Sv.js";function S(h,o){const t=s(()=>{if(!o.value||o.value===0)return 0;const i=h.value?.achieved_score||0;return Math.round(i/o.value*100)}),m=s(()=>{const i=t.value;return i>=80?"excellent":i>=50?"good":"fair"}),g=s(()=>{switch(m.value){case"excellent":return"ยอดเยี่ยม";case"good":return"ดี";default:return"พอใช้"}}),_=s(()=>{switch(m.value){case"excellent":return"fluent:ribbon-star-20-filled";case"good":return"fluent:thumb-like-20-filled";default:return"fluent:battery-3-20-filled"}}),f=s(()=>{switch(m.value){case"excellent":return{ring:"ring-green-500",bg:"bg-green-500",text:"text-green-600",gradient:"from-green-400 to-green-600"};case"good":return{ring:"ring-yellow-400",bg:"bg-yellow-400",text:"text-yellow-600",gradient:"from-yellow-300 to-yellow-500"};default:return{ring:"ring-orange-500",bg:"bg-orange-500",text:"text-orange-600",gradient:"from-orange-400 to-orange-600"}}}),w=s(()=>{const i=h.value?.achieved_score||0,d=o.value||0;return Math.max(0,d-i)}),y=s(()=>Math.max(0,100-t.value)),l=s(()=>({width:`${t.value}%`}));return{percentage:t,progressStatus:m,progressColor:f,statusMessage:g,statusIcon:_,remainingScore:w,remainingPercentage:y,progressBarStyle:l}}const A={},U={class:"relative inline-block text-left"};function V(h,o){return x(),v("div",U,[...o[0]||(o[0]=[e("button",{class:"text-gray-500 hover:text-gray-700"}," ... ",-1)])])}const O=$(A,[["render",V]]),R=["aria-label"],T={key:0,class:"absolute top-3 right-3 z-10"},E={class:"flex items-center w-full lg:w-64 lg:flex-shrink-0"},G={class:"relative flex-shrink-0"},F=["src","alt"],H={class:"ml-4 min-w-0 flex-1"},J=["href","title"],K={class:"truncate"},L=["title"],Q={class:"text-xs font-semibold"},W={class:"flex items-center space-x-3 text-sm"},X={class:"font-medium"},Y={class:"flex items-center text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"},Z={class:"font-medium"},ee={class:"flex flex-col items-start lg:items-end w-full flex-1"},te={class:"flex items-center justify-between mb-2 w-full"},re={class:"flex items-center"},se={class:"relative w-full bg-gray-100 dark:bg-gray-700 rounded-full h-7 overflow-hidden shadow-inner"},ae=["aria-valuenow","aria-label"],oe={class:"relative z-10 font-bold"},ne={key:0,class:"absolute inset-0 flex items-center justify-center"},le={class:"flex items-center justify-between w-full mt-2 text-xs"},ie={class:"text-gray-500 dark:text-gray-400"},de={__name:"MemberCard",props:{member:{type:Object,required:!0,default:()=>({})},dataIndex:{type:Number,default:0}},emits:["request-unmember-course"],setup(h,{emit:o}){const t=h,m=o,g=s(()=>z().props),_=s(()=>g.value.course?.data?.total_score||100),f=s(()=>g.value.isCourseAdmin),w=s(()=>g.value.auth?.user?.id);s(()=>t.member?.user?.id===w.value||f.value);const y=D(t,"member"),{percentage:l,progressStatus:i,progressColor:d,statusMessage:C,statusIcon:I}=S(y,_),u=s(()=>t.member?.member_name||t.member?.user?.name||t.member?.student?.name||t.member?.name||"Unknown"),M=s(()=>t.member?.order_number||"#"),N=s(()=>t.member?.group?.name||"-"),j=s(()=>t.member?.avatar||t.member?.user?.avatar||t.member?.user?.profile_photo_url||"/images/default-avatar.png");s(()=>t.member?.member_code||t.member?.user?.email||"");const q=()=>{m("request-unmember-course",{memberId:t.member.id,memberName:u.value})};return(ue,a)=>t.member?.role!==3?(x(),v("li",{key:0,class:"group relative bg-white dark:bg-gray-800 hover:bg-gradient-to-br hover:from-white hover:to-indigo-50 dark:hover:from-gray-800 dark:hover:to-gray-700 shadow-lg hover:shadow-xl p-4 rounded-xl w-full mb-3 transition-all duration-300 border border-gray-100 dark:border-gray-700 hover:border-indigo-200 dark:hover:border-indigo-900","aria-label":`Member card for ${u.value}`,role:"article"},[f.value?(x(),v("div",T,[b(O,{onDeleteModel:q},{deleteModel:B(()=>[...a[0]||(a[0]=[e("span",null,"ลบสมาชิก",-1)])]),_:1})])):k("",!0),e("div",{class:c(["flex flex-col lg:flex-row gap-4 items-start",{"pr-10":f.value}])},[e("div",E,[e("div",G,[e("img",{class:c(["w-16 h-16 rounded-full ring-2 transition-all duration-300",[r(d).ring,`group-hover:${r(d).ring}`]]),src:j.value,alt:`${u.value}'s avatar`,loading:"lazy"},null,10,F),e("div",{class:c(["absolute -bottom-1 -right-1 px-2 py-0.5 rounded-full text-[10px] font-bold text-white shadow-lg",r(d).bg])},n(r(l))+"% ",3)]),e("div",H,[f.value?(x(),v("a",{key:0,href:`/courses/${g.value.course?.data?.id}/members/${t.member.id}/member-settings`,target:"_blank",rel:"noopener noreferrer",title:u.value,class:"text-gray-900 dark:text-white font-bold tracking-wide text-lg hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors duration-300 cursor-pointer inline-flex items-center group/link max-w-full"},[e("span",K,n(u.value),1),b(r(p),{icon:"heroicons:arrow-top-right-on-square",class:"w-4 h-4 ml-1.5 flex-shrink-0 opacity-0 group-hover/link:opacity-100 transition-opacity duration-200"})],8,J)):(x(),v("p",{key:1,title:u.value,class:"text-gray-900 dark:text-white font-bold tracking-wide text-lg truncate"},n(u.value),9,L)),e("div",{class:c(["flex items-center mt-1 mb-2",r(d).text])},[b(r(p),{icon:r(I),class:"w-4 h-4 mr-1.5"},null,8,["icon"]),e("span",Q,n(r(C)),1)],2),e("div",W,[e("span",{class:c(["flex items-center transition-colors",M.value==="#"?"text-orange-500 dark:text-orange-400 font-bold":"text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400"])},[b(r(p),{icon:"fluent:number-symbol-square-20-filled",class:"w-5 h-5 mr-1"}),e("span",X,n(M.value),1)],2),e("span",Y,[b(r(p),{icon:"heroicons:user-group-solid",class:"w-5 h-5 mr-1"}),e("span",Z,n(N.value),1)])])])]),e("div",ee,[e("div",te,[e("div",re,[b(r(p),{icon:"heroicons:academic-cap-solid",class:"w-5 h-5 text-indigo-500 dark:text-indigo-400 mr-2"}),a[1]||(a[1]=e("span",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},"ความคืบหน้า",-1))])]),e("div",se,[e("div",{class:c(["h-full text-xs font-bold text-white flex items-center justify-center rounded-full transition-all duration-500 ease-out relative overflow-hidden bg-gradient-to-r",r(d).gradient]),style:P(`width: ${r(l)}%`),role:"progressbar","aria-valuenow":r(l),"aria-valuemin":"0","aria-valuemax":"100","aria-label":`Progress: ${r(l)}% - ${r(i)}`},[a[2]||(a[2]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer"},null,-1)),e("span",oe,n(r(l))+"%",1)],14,ae),r(l)===0?(x(),v("div",ne,[...a[3]||(a[3]=[e("span",{class:"text-xs font-medium text-gray-500"},"ยังไม่มีคะแนน",-1)])])):k("",!0)]),e("div",le,[e("div",ie,[e("span",{class:c(["font-medium",r(d).text])},n(t.member?.achieved_score||0),3),a[4]||(a[4]=e("span",{class:"mx-1"},"/",-1)),e("span",null,n(_.value),1),a[5]||(a[5]=e("span",{class:"ml-1"},"คะแนน",-1))])])])],2)],8,R)):k("",!0)}},ge=$(de,[["__scopeId","data-v-4ac99d98"]]);export{ge as M};
