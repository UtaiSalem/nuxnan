import{_ as U}from"./0NabHjdI.js";import{q as F,p as $,v as z,r as f,V as q,c as o,a as e,d as p,b as i,w as v,u,t as n,$ as x,e as y,aa as k,T as h,ab as w,F as _,k as V,ai as D,g as C,j as I,o as l,I as g,aH as L}from"./DvtEeXFW.js";const O={class:"space-y-6 max-w-3xl mx-auto"},R={class:"flex items-center gap-4"},A={key:0,class:"p-4 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded-xl"},E={class:"flex items-center gap-2 text-green-700 dark:text-green-400"},H={key:1,class:"p-4 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-xl"},P={class:"flex items-center gap-2 text-red-700 dark:text-red-400"},G={key:0,class:"mt-1 text-sm text-red-500"},J={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},K=["value"],Q=["value"],W={key:0,class:"mt-1 text-sm text-red-500"},X={class:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl"},Y={class:"flex items-center gap-3 cursor-pointer"},Z={class:"flex flex-col sm:flex-row gap-3 pt-4"},ee=["disabled"],le=F({__name:"create",setup(te){const B=$().public.apiBase,T=z(),c=f(!1),a=f({}),b=f(""),s=q({title:"",content:"",type:"article",status:"draft",is_featured:!1}),S=[{value:"article",label:"บทความ"},{value:"announcement",label:"ประกาศ"},{value:"faq",label:"คำถามที่พบบ่อย"},{value:"page",label:"หน้าเพจ"}],j=[{value:"draft",label:"แบบร่าง"},{value:"published",label:"เผยแพร่"},{value:"archived",label:"เก็บถาวร"}],M=()=>(a.value={},s.title||(a.value.title="กรุณากรอกหัวข้อ"),s.content||(a.value.content="กรุณากรอกเนื้อหา"),Object.keys(a.value).length===0),N=async()=>{if(M()){c.value=!0,b.value="";try{const d=L("token");(await $fetch(`${B}/api/admin/content`,{method:"POST",headers:{Authorization:`Bearer ${d.value}`,"Content-Type":"application/json"},body:s})).success&&(b.value="สร้างเนื้อหาสำเร็จ",setTimeout(()=>{T.push("/nuxnan-admin/content")},1500))}catch(d){d.data?.errors?a.value=d.data.errors:a.value.general=d.data?.message||"เกิดข้อผิดพลาด กรุณาลองใหม่อีกครั้ง"}finally{c.value=!1}}};return(d,t)=>{const m=U;return l(),o("div",O,[e("div",R,[i(m,{to:"/nuxnan-admin/content",class:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors"},{default:v(()=>[i(u(g),{icon:"fluent:arrow-left-24-regular",class:"w-5 h-5"})]),_:1}),t[5]||(t[5]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white"},"สร้างเนื้อหาใหม่"),e("p",{class:"text-gray-500 dark:text-gray-400 mt-1"},"สร้างบทความ ประกาศ หรือเนื้อหาอื่นๆ")],-1))]),b.value?(l(),o("div",A,[e("div",E,[i(u(g),{icon:"fluent:checkmark-circle-24-filled",class:"w-5 h-5"}),e("span",null,n(b.value),1)])])):p("",!0),a.value.general?(l(),o("div",H,[e("div",P,[i(u(g),{icon:"fluent:error-circle-24-filled",class:"w-5 h-5"}),e("span",null,n(a.value.general),1)])])):p("",!0),e("form",{onSubmit:I(N,["prevent"]),class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 space-y-6"},[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[y(" หัวข้อ "),e("span",{class:"text-red-500"},"*")],-1)),x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.title=r),type:"text",class:h(["w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",{"border-red-500":a.value.title}]),placeholder:"หัวข้อเนื้อหา"},null,2),[[k,s.title]]),a.value.title?(l(),o("p",G,n(a.value.title),1)):p("",!0)]),e("div",J,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ประเภท ",-1)),x(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.type=r),class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"},[(l(),o(_,null,V(S,r=>e("option",{key:r.value,value:r.value},n(r.label),9,K)),64))],512),[[w,s.type]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," สถานะ ",-1)),x(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>s.status=r),class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"},[(l(),o(_,null,V(j,r=>e("option",{key:r.value,value:r.value},n(r.label),9,Q)),64))],512),[[w,s.status]])])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[y(" เนื้อหา "),e("span",{class:"text-red-500"},"*")],-1)),x(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=r=>s.content=r),rows:"10",class:h(["w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",{"border-red-500":a.value.content}]),placeholder:"เนื้อหา..."},null,2),[[k,s.content]]),a.value.content?(l(),o("p",W,n(a.value.content),1)):p("",!0)]),e("div",X,[e("label",Y,[x(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>s.is_featured=r),type:"checkbox",class:"w-5 h-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[D,s.is_featured]]),t[10]||(t[10]=e("span",{class:"text-gray-700 dark:text-gray-300"},"แสดงในหน้าแรก (Featured)",-1))])]),e("div",Z,[e("button",{type:"submit",disabled:c.value,class:"flex-1 inline-flex justify-center items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 rounded-xl text-white font-medium transition-colors"},[c.value?(l(),C(u(g),{key:0,icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin"})):(l(),C(u(g),{key:1,icon:"fluent:save-24-regular",class:"w-5 h-5"})),y(" "+n(c.value?"กำลังบันทึก...":"สร้างเนื้อหา"),1)],8,ee),i(m,{to:"/nuxnan-admin/content",class:"flex-1 inline-flex justify-center items-center gap-2 px-6 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl text-gray-700 dark:text-gray-300 font-medium transition-colors"},{default:v(()=>[i(u(g),{icon:"fluent:dismiss-24-regular",class:"w-5 h-5"}),t[11]||(t[11]=y(" ยกเลิก ",-1))]),_:1})])],32)])}}});export{le as default};
