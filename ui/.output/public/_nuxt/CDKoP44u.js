import{q as L,p as V,r as n,z as F,c as s,a as t,t as o,$ as N,ab as U,F as h,k as f,b as i,e as k,u as d,d as T,aH as j,o as l,I as g,T as m}from"./cTealXVQ.js";const z={class:"space-y-6"},I={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},H={class:"text-gray-500 dark:text-gray-400 mt-1"},J={class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700"},M={class:"flex flex-col sm:flex-row gap-4"},R=["value"],q={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden"},E={key:0,class:"p-8 text-center"},W={key:1,class:"p-8 text-center"},G={key:2,class:"divide-y divide-gray-100 dark:divide-gray-700"},K={class:"flex items-start gap-4"},O={class:"flex-1 min-w-0"},Q={class:"flex items-center gap-2"},X={class:"font-medium text-gray-800 dark:text-white"},Y={class:"text-gray-600 dark:text-gray-300"},Z={class:"flex items-center gap-4 mt-1 text-sm text-gray-500 dark:text-gray-400"},ee={class:"flex items-center gap-1"},te={key:0,class:"flex items-center gap-1"},ae={class:"flex-shrink-0"},re={key:3,class:"p-4 border-t border-gray-100 dark:border-gray-700"},se={class:"flex justify-center gap-1"},le=["onClick"],de=L({__name:"activities",setup(oe){const S=V().public.apiBase,c=n([]),x=n(!0),u=n(1),v=n(1),B=n(20),b=n(0),p=n("all"),_=[{value:"all",label:"ทั้งหมด"},{value:"login",label:"เข้าสู่ระบบ"},{value:"logout",label:"ออกจากระบบ"},{value:"register",label:"ลงทะเบียน"},{value:"purchase",label:"ซื้อคอร์ส"},{value:"complete",label:"เรียนจบ"},{value:"review",label:"รีวิว"},{value:"profile_update",label:"แก้ไขโปรไฟล์"}],y=async()=>{x.value=!0;try{const r=j("token"),a=new URLSearchParams({page:u.value.toString(),per_page:B.value.toString(),...p.value!=="all"&&{type:p.value}}),e=await $fetch(`${S}/api/admin/activities?${a}`,{headers:{Authorization:`Bearer ${r.value}`}});e.success&&(c.value=e.data.data||e.data,v.value=e.data.last_page||1,b.value=e.data.total||c.value.length)}catch(r){console.error("Failed to fetch activities:",r),c.value=[{id:1,user:{name:"John Doe",avatar:null},type:"login",description:"เข้าสู่ระบบ",ip_address:"192.168.1.1",created_at:"2026-01-21T10:30:00"},{id:2,user:{name:"Jane Smith",avatar:null},type:"purchase",description:"ซื้อคอร์ส Python เบื้องต้น",ip_address:"192.168.1.2",created_at:"2026-01-21T10:25:00"},{id:3,user:{name:"Bob Wilson",avatar:null},type:"register",description:"ลงทะเบียนผู้ใช้ใหม่",ip_address:"192.168.1.3",created_at:"2026-01-21T10:20:00"}],b.value=3}finally{x.value=!1}},P=()=>{u.value=1,y()},$=r=>{u.value=r,y()},A=r=>({login:"fluent:sign-out-24-regular",logout:"fluent:door-arrow-right-24-regular",register:"fluent:person-add-24-regular",purchase:"fluent:cart-24-regular",complete:"fluent:checkmark-circle-24-regular",review:"fluent:star-24-regular",profile_update:"fluent:person-edit-24-regular"})[r]||"fluent:activity-24-regular",w=r=>({login:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",logout:"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400",register:"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400",purchase:"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400",complete:"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400",review:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400",profile_update:"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400"})[r]||"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400",D=r=>new Date(r).toLocaleString("th-TH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return F(()=>{y()}),(r,a)=>(l(),s("div",z,[t("div",I,[t("div",null,[a[1]||(a[1]=t("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white"},"กิจกรรมล่าสุด",-1)),t("p",H," กิจกรรมทั้งหมด "+o(b.value.toLocaleString())+" รายการ ",1)])]),t("div",J,[t("div",M,[N(t("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e),class:"px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",onChange:P},[(l(),s(h,null,f(_,e=>t("option",{key:e.value,value:e.value},o(e.label),9,R)),64))],544),[[U,p.value]]),t("button",{onClick:y,class:"px-4 py-2.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl text-gray-700 dark:text-gray-300 transition-colors inline-flex items-center gap-2"},[i(d(g),{icon:"fluent:arrow-sync-24-regular",class:"w-5 h-5"}),a[2]||(a[2]=k(" รีเฟรช ",-1))])])]),t("div",q,[x.value?(l(),s("div",E,[i(d(g),{icon:"fluent:spinner-ios-20-regular",class:"w-8 h-8 text-indigo-600 animate-spin mx-auto"}),a[3]||(a[3]=t("p",{class:"text-gray-500 mt-2"},"กำลังโหลดข้อมูล...",-1))])):c.value.length===0?(l(),s("div",W,[i(d(g),{icon:"fluent:activity-24-regular",class:"w-12 h-12 text-gray-300 mx-auto"}),a[4]||(a[4]=t("p",{class:"text-gray-500 mt-2"},"ไม่พบกิจกรรม",-1))])):(l(),s("div",G,[(l(!0),s(h,null,f(c.value,e=>(l(),s("div",{key:e.id,class:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},[t("div",K,[t("div",{class:m(["flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center",w(e.type)])},[i(d(g),{icon:A(e.type),class:"w-5 h-5"},null,8,["icon"])],2),t("div",O,[t("div",Q,[t("span",X,o(e.user?.name||"Unknown User"),1),a[5]||(a[5]=t("span",{class:"text-gray-500 dark:text-gray-400"},"-",-1)),t("span",Y,o(e.description),1)]),t("div",Z,[t("span",ee,[i(d(g),{icon:"fluent:clock-24-regular",class:"w-4 h-4"}),k(" "+o(D(e.created_at)),1)]),e.ip_address?(l(),s("span",te,[i(d(g),{icon:"fluent:globe-24-regular",class:"w-4 h-4"}),k(" "+o(e.ip_address),1)])):T("",!0)])]),t("div",ae,[t("span",{class:m(["px-2 py-1 text-xs rounded-lg",w(e.type)])},o(_.find(C=>C.value===e.type)?.label||e.type),3)])])]))),128))])),v.value>1?(l(),s("div",re,[t("div",se,[(l(!0),s(h,null,f(v.value,e=>(l(),s("button",{key:e,onClick:C=>$(e),class:m(["w-10 h-10 rounded-lg text-sm font-medium transition-colors",u.value===e?"bg-indigo-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"])},o(e),11,le))),128))])])):T("",!0)])]))}});export{de as default};
