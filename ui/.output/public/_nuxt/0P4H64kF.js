import{_ as j}from"./0NabHjdI.js";import{q as N,p as S,v as T,r as f,V as D,c as g,a as r,d as m,b as o,w as v,u as n,t as u,$ as b,e as y,aa as k,T as M,ai as $,g as h,j as z,o as l,I as d,aH as F}from"./DvtEeXFW.js";const U={class:"space-y-6 max-w-2xl mx-auto"},A={class:"flex items-center gap-4"},I={key:0,class:"p-4 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded-xl"},O={class:"flex items-center gap-2 text-green-700 dark:text-green-400"},R={key:1,class:"p-4 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-xl"},q={class:"flex items-center gap-2 text-red-700 dark:text-red-400"},E={key:0,class:"mt-1 text-sm text-red-500"},H={class:"flex items-center gap-4"},L={class:"flex-1 flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer hover:border-indigo-500 dark:hover:border-indigo-400 transition-colors"},P={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},G={class:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl"},J={class:"flex items-center gap-3 cursor-pointer"},K={class:"flex flex-col sm:flex-row gap-3 pt-4"},Q=["disabled"],ee=N({__name:"create",setup(W){const _=S().public.apiBase,w=T(),i=f(!1),t=f({}),x=f(""),a=D({name:"",description:"",logo:null,is_active:!0}),C=s=>{const e=s.target;e.files&&e.files[0]&&(a.logo=e.files[0])},B=()=>(t.value={},a.name||(t.value.name="กรุณากรอกชื่อสถาบัน"),Object.keys(t.value).length===0),V=async()=>{if(B()){i.value=!0,x.value="";try{const s=F("token"),e=new FormData;e.append("name",a.name),e.append("description",a.description),e.append("is_active",a.is_active?"1":"0"),a.logo&&e.append("logo",a.logo),(await $fetch(`${_}/api/admin/academies`,{method:"POST",headers:{Authorization:`Bearer ${s.value}`},body:e})).success&&(x.value="สร้างสถาบันสำเร็จ",setTimeout(()=>{w.push("/nuxnan-admin/academies")},1500))}catch(s){s.data?.errors?t.value=s.data.errors:t.value.general=s.data?.message||"เกิดข้อผิดพลาด กรุณาลองใหม่อีกครั้ง"}finally{i.value=!1}}};return(s,e)=>{const p=j;return l(),g("div",U,[r("div",A,[o(p,{to:"/nuxnan-admin/academies",class:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors"},{default:v(()=>[o(n(d),{icon:"fluent:arrow-left-24-regular",class:"w-5 h-5"})]),_:1}),e[3]||(e[3]=r("div",null,[r("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white"},"สร้างสถาบันใหม่"),r("p",{class:"text-gray-500 dark:text-gray-400 mt-1"},"กรอกข้อมูลเพื่อสร้างสถาบัน")],-1))]),x.value?(l(),g("div",I,[r("div",O,[o(n(d),{icon:"fluent:checkmark-circle-24-filled",class:"w-5 h-5"}),r("span",null,u(x.value),1)])])):m("",!0),t.value.general?(l(),g("div",R,[r("div",q,[o(n(d),{icon:"fluent:error-circle-24-filled",class:"w-5 h-5"}),r("span",null,u(t.value.general),1)])])):m("",!0),r("form",{onSubmit:z(V,["prevent"]),class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 space-y-6"},[r("div",null,[e[4]||(e[4]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[y(" ชื่อสถาบัน "),r("span",{class:"text-red-500"},"*")],-1)),b(r("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>a.name=c),type:"text",class:M(["w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",{"border-red-500":t.value.name}]),placeholder:"เช่น สถาบัน ABC"},null,2),[[k,a.name]]),t.value.name?(l(),g("p",E,u(t.value.name),1)):m("",!0)]),r("div",null,[e[5]||(e[5]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," คำอธิบาย ",-1)),b(r("textarea",{"onUpdate:modelValue":e[1]||(e[1]=c=>a.description=c),rows:"4",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",placeholder:"รายละเอียดเกี่ยวกับสถาบัน..."},null,512),[[k,a.description]])]),r("div",null,[e[7]||(e[7]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," โลโก้ ",-1)),r("div",H,[r("label",L,[o(n(d),{icon:"fluent:image-add-24-regular",class:"w-8 h-8 text-gray-400"}),e[6]||(e[6]=r("span",{class:"mt-2 text-sm text-gray-500"},"คลิกเพื่ออัพโหลด",-1)),r("input",{type:"file",accept:"image/*",class:"hidden",onChange:C},null,32)]),a.logo?(l(),g("div",P,u(a.logo.name),1)):m("",!0)])]),r("div",G,[r("label",J,[b(r("input",{"onUpdate:modelValue":e[2]||(e[2]=c=>a.is_active=c),type:"checkbox",class:"w-5 h-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[$,a.is_active]]),e[8]||(e[8]=r("span",{class:"text-gray-700 dark:text-gray-300"},"เปิดใช้งานทันที",-1))])]),r("div",K,[r("button",{type:"submit",disabled:i.value,class:"flex-1 inline-flex justify-center items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 rounded-xl text-white font-medium transition-colors"},[i.value?(l(),h(n(d),{key:0,icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin"})):(l(),h(n(d),{key:1,icon:"fluent:save-24-regular",class:"w-5 h-5"})),y(" "+u(i.value?"กำลังบันทึก...":"สร้างสถาบัน"),1)],8,Q),o(p,{to:"/nuxnan-admin/academies",class:"flex-1 inline-flex justify-center items-center gap-2 px-6 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl text-gray-700 dark:text-gray-300 font-medium transition-colors"},{default:v(()=>[o(n(d),{icon:"fluent:dismiss-24-regular",class:"w-5 h-5"}),e[9]||(e[9]=y(" ยกเลิก ",-1))]),_:1})])],32)])}}});export{ee as default};
