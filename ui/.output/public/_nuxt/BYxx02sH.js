import{q as T,v as $,a9 as F,r as m,a3 as I,o as c,c as u,a as e,T as x,t as a,d as y,u as o,b as l,I as n,e as v,a7 as N,p as S,_ as V}from"./Brb_7992.js";const A={class:"relative h-44 overflow-hidden bg-gray-100 dark:bg-gray-700"},z=["src","alt"],R=["title"],D={class:"absolute bottom-3 left-3 px-2 py-1 bg-yellow-500 text-gray-900 rounded text-xs font-bold flex items-center gap-1"},H={class:"p-4"},L={class:"flex items-center justify-between mb-3"},M={key:0,class:"flex items-center gap-2"},P=["src","alt"],q={class:"min-w-0"},E={class:"text-xs text-gray-500 dark:text-gray-400"},G={class:"text-xs text-blue-500 truncate"},U={class:"flex items-center gap-1 text-gray-700 dark:text-gray-300 font-bold"},W={class:"text-gray-800 dark:text-white font-bold mb-3 line-clamp-2 group-hover:text-blue-500 transition-colors"},J={class:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 pt-3 border-t border-gray-100 dark:border-gray-700"},K={class:"flex items-center gap-1"},O={class:"flex items-center gap-1"},Q={key:0,class:"mt-3"},X={key:0,class:"flex items-center justify-center gap-2 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg text-sm font-bold"},Y={key:1,class:"space-y-2"},Z={class:"flex items-center justify-between text-xs font-medium"},ee={class:"text-green-600 dark:text-green-400 flex items-center gap-1"},te={class:"text-gray-500"},se={class:"h-1.5 w-full bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden"},re={key:1,class:"mt-3 w-full py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors flex items-center justify-center gap-2 group-hover:bg-blue-700"},oe=T({__name:"CourseCard",props:{course:{},index:{}},setup(t){const d=t,w=$(),b=S(),k=F(),i=m(d.course.is_favorited),f=m(!1);I(()=>d.course.is_favorited,s=>{i.value=s});const p=async s=>{if(s.stopPropagation(),f.value)return;const r=i.value;i.value=!r,f.value=!0;try{const g=await k.post(`/api/courses/${d.course.id}/favorite`);g.is_favorited!==void 0&&(i.value=g.is_favorited,d.course.is_favorited=g.is_favorited)}catch(g){i.value=r,console.error("Failed to toggle favorite",g)}finally{f.value=!1}},_=s=>s.cover?s.cover.startsWith("http")?s.cover:`${b.public.apiBase}/storage/images/courses/covers/${s.cover}`:`${b.public.apiBase}/storage/images/courses/covers/default_cover.jpg`,C=s=>s.user?.avatar||"/images/default-avatar.png",j=s=>new Intl.NumberFormat("th-TH").format(s||0),h=(s,r)=>r===void 0?null:s.enrolled_students>50?"bestseller":r<3?"trending":null,B=()=>{w.push(`/courses/${d.course.id}`)};return(s,r)=>(c(),u("div",{class:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all cursor-pointer group",onClick:B},[e("div",A,[e("img",{src:_(t.course),alt:t.course.name,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,z),h(t.course,t.index??0)?(c(),u("div",{key:0,class:x(["absolute top-3 left-3 px-3 py-1 text-white text-xs font-bold rounded shadow-lg",h(t.course,t.index??0)==="bestseller"?"bg-blue-500":"bg-orange-500"])},a(h(t.course,t.index??0)==="bestseller"?"Best Seller":"Trending"),3)):y("",!0),e("button",{class:"absolute top-3 right-3 p-2 rounded-full bg-white/80 dark:bg-black/50 hover:bg-white dark:hover:bg-black/70 transition-all text-red-500 z-10 shadow-sm backdrop-blur-sm",onClick:p,title:o(i)?"Remove from favorites":"Add to favorites"},[l(o(n),{icon:o(i)?"fluent:heart-24-filled":"fluent:heart-24-regular",class:x(["w-5 h-5 transition-transform active:scale-95",{"animate-pulse":o(f)}])},null,8,["icon","class"])],8,R),e("div",D,[l(o(n),{icon:"fluent:star-16-filled",class:"w-3 h-3"}),e("span",null,a(t.course.rating||"4.5"),1)])]),e("div",H,[e("div",L,[t.course.user?(c(),u("div",M,[e("img",{src:C(t.course),alt:t.course.user.name,class:"w-8 h-8 rounded-full object-cover border-2 border-gray-200 dark:border-gray-600"},null,8,P),e("div",q,[e("p",E," By: "+a(t.course.user.name),1),e("p",G,a(t.course.category||"General"),1)])])):y("",!0),e("div",U,[l(o(n),{icon:"ri:bit-coin-line",class:"w-5 h-5 text-yellow-500"}),e("span",null,a(j(t.course.price)),1)])]),e("h3",W,a(t.course.name),1),e("div",J,[e("div",K,[l(o(n),{icon:"fluent:book-open-16-regular",class:"w-4 h-4"}),e("span",null,a(t.course.lessons_count||20)+" Lectures",1)]),e("div",O,[l(o(n),{icon:"fluent:clock-16-regular",class:"w-4 h-4"}),e("span",null,a(t.course.hours||20)+"Hrs",1)])]),t.course.isMember?(c(),u("div",Q,[t.course.auth_role==4?(c(),u("div",X,[l(o(n),{icon:"fluent:shield-person-20-filled",class:"w-5 h-5"}),r[0]||(r[0]=v(" Admin ",-1))])):(c(),u("div",Y,[e("div",Z,[e("span",ee,[l(o(n),{icon:"fluent:hat-graduation-16-filled"}),r[1]||(r[1]=v(" Student ",-1))]),e("span",te,a(Math.round(t.course.auth_progress||0))+"%",1)]),e("div",se,[e("div",{class:"h-full bg-green-500 rounded-full transition-all duration-500",style:N({width:`${t.course.auth_progress||0}%`})},null,4)])]))])):(c(),u("button",re,[r[2]||(r[2]=v(" View Details ",-1)),l(o(n),{icon:"fluent:arrow-right-16-regular",class:"w-4 h-4"})]))])]))}}),le=V(oe,[["__scopeId","data-v-cea28b1c"]]);export{le as C};
