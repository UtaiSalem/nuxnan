const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./GB-kqNDI.js","./DvtEeXFW.js","./entry.BC3MrJn9.css","./BQxta0Da.js","./InviteMemberModal.S7ZNxyhp.css"])))=>i.map(i=>d[i]);
import{q as he,ay as ke,a9 as be,a6 as _e,l as we,r as v,n as j,z as Ae,c as o,d as c,g as p,a as e,b as d,u as n,t as u,w as z,a7 as Ce,T as b,e as g,F as w,k as A,j as $e,$ as Q,aa as X,a4 as Se,az as je,aA as Ie,p as Ne,o as l,I as i}from"./DvtEeXFW.js";import{_ as Be}from"./0NabHjdI.js";import{_ as Je}from"./Dtrz6Q_S.js";import{S as m}from"./BQxta0Da.js";import"./D4UTVVq6.js";import"./CaSR6SuD.js";const Me=je(()=>Ie(()=>import("./GB-kqNDI.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url).then(L=>L.default||L)),Oe={class:"min-h-screen bg-gray-200 dark:bg-vikinger-dark-300"},Te={key:0,class:"flex items-center justify-center min-h-screen"},ze={class:"text-center"},Le={key:1,class:"flex items-center justify-center min-h-screen"},Re={class:"text-center p-8 max-w-md"},Fe={class:"text-gray-600 dark:text-gray-400 mb-6"},Pe={key:2,class:"max-w-7xl mx-auto px-4 py-6"},Ve={class:"relative bg-white dark:bg-vikinger-dark-200 rounded-xl shadow-lg overflow-hidden mb-6"},De={class:"relative px-4 md:px-8 pb-6"},Ge={class:"absolute -top-16 left-4 md:left-8"},Ue={class:"w-28 h-28 md:w-36 md:h-36 rounded-xl border-4 border-white dark:border-vikinger-dark-200 shadow-lg overflow-hidden bg-white"},Ee=["src","alt"],We={class:"flex flex-col md:flex-row md:items-end md:justify-between pt-16 md:pt-6 md:pl-44"},He={class:"mb-4 md:mb-0"},Ke={class:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-2"},Qe={key:0,class:"text-gray-600 dark:text-gray-400 mb-3"},Xe={class:"flex flex-wrap items-center gap-4 text-sm text-gray-600 dark:text-gray-400"},Ye={class:"flex items-center gap-1.5"},Ze={class:"flex items-center gap-1.5"},qe={class:"flex items-center gap-1.5"},et={class:"flex items-center gap-3"},tt={key:1,class:"px-3 py-1.5 rounded-full text-sm font-medium bg-vikinger-purple text-white flex items-center gap-1.5"},st=["disabled"],rt=["disabled"],at={class:"border-t border-gray-200 dark:border-gray-700"},lt={class:"flex overflow-x-auto"},ot=["onClick"],nt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},it={class:"lg:col-span-2"},dt={key:0,class:"bg-white dark:bg-vikinger-dark-200 rounded-xl p-8 text-center"},ut={key:1,class:"space-y-4"},ct={key:1,class:"bg-white dark:bg-vikinger-dark-200 rounded-xl p-8 text-center"},gt={class:"p-4 flex items-start gap-3"},vt={class:"w-10 h-10 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 flex-shrink-0"},pt=["src","alt"],mt={class:"flex-1"},xt={class:"flex items-center justify-between"},ft={class:"font-medium text-gray-900 dark:text-white"},yt={class:"text-xs text-gray-500 dark:text-gray-400"},ht={key:0,class:"text-xs px-2 py-1 rounded-full bg-vikinger-purple/10 text-vikinger-purple"},kt={class:"mt-3"},bt={class:"text-gray-800 dark:text-gray-200 whitespace-pre-wrap"},_t=["src"],wt={class:"px-4 py-3 border-t border-gray-100 dark:border-gray-700/50 flex items-center gap-4"},At={class:"flex items-center gap-1.5 text-gray-500 dark:text-gray-400 hover:text-vikinger-purple transition-colors"},Ct={class:"text-sm"},$t={class:"flex items-center gap-1.5 text-gray-500 dark:text-gray-400 hover:text-vikinger-purple transition-colors"},St={class:"text-sm"},jt={class:"flex items-center gap-1.5 text-gray-500 dark:text-gray-400 hover:text-vikinger-purple transition-colors ml-auto"},It={key:2,class:"space-y-4"},Nt={key:0,class:"flex justify-end"},Bt={key:1,class:"bg-white dark:bg-vikinger-dark-200 rounded-xl p-8 text-center"},Jt={key:0,class:"text-sm text-gray-400 dark:text-gray-500 mt-2"},Mt={key:2,class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ot={class:"h-32 bg-gradient-to-br from-vikinger-purple to-vikinger-cyan relative"},Tt=["src"],zt={class:"p-4"},Lt={class:"font-semibold text-gray-900 dark:text-white mb-1 line-clamp-1 group-hover:text-vikinger-purple transition-colors"},Rt={class:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-3"},Ft={class:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400"},Pt={class:"flex items-center gap-3"},Vt={class:"flex items-center gap-1"},Dt={class:"flex items-center gap-1"},Gt={key:3,class:"space-y-4"},Ut={key:0,class:"flex items-center justify-between"},Et={class:"flex items-center gap-2"},Wt={key:0,class:"px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 rounded-full text-sm font-medium"},Ht={key:1,class:"bg-yellow-50 dark:bg-yellow-900/20 rounded-xl p-4 border border-yellow-200 dark:border-yellow-800"},Kt={class:"flex items-center gap-2 mb-4"},Qt={class:"space-y-3"},Xt={class:"flex items-center gap-3"},Yt={class:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden"},Zt=["src","alt"],qt={class:"font-medium text-gray-900 dark:text-white"},es={class:"text-sm text-gray-500"},ts={class:"flex items-center gap-2"},ss=["onClick"],rs=["onClick"],as={class:"bg-white dark:bg-vikinger-dark-200 rounded-xl p-4 shadow-sm"},ls={class:"relative"},os={key:2,class:"bg-white dark:bg-vikinger-dark-200 rounded-xl p-8 text-center"},ns={key:0,class:"text-sm text-gray-400 dark:text-gray-500 mt-2"},is={class:"bg-white dark:bg-vikinger-dark-200 rounded-xl shadow-sm overflow-hidden"},ds={class:"divide-y divide-gray-100 dark:divide-gray-700"},us={class:"flex items-center justify-between gap-4"},cs={class:"flex items-center gap-3"},gs={class:"w-12 h-12 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden ring-2 ring-white dark:ring-vikinger-dark-200"},vs=["src","alt"],ps={class:"font-medium text-gray-900 dark:text-white"},ms={class:"flex items-center gap-2 text-sm"},xs={key:0,class:"text-gray-400"},fs={class:"flex items-center gap-2"},ys={key:0,class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-gray-500 hover:text-vikinger-purple",title:"จัดการสมาชิก"},hs={key:3,class:"text-center"},ks={key:4,class:"space-y-4"},bs={key:0,class:"flex justify-end"},_s={key:1,class:"bg-white dark:bg-vikinger-dark-200 rounded-xl p-8 text-center"},ws={key:0,class:"text-sm text-gray-400 dark:text-gray-500 mt-2"},As={key:2,class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Cs={class:"p-4"},$s={class:"flex items-start gap-3"},Ss={class:"flex-1 pt-0"},js={class:"flex items-center gap-2"},Is={class:"font-semibold text-gray-900 dark:text-white"},Ns={class:"text-xs px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"},Bs={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-2"},Js={class:"mt-4 flex items-center justify-between text-sm"},Ms={class:"flex items-center gap-3 text-gray-500 dark:text-gray-400"},Os={class:"flex items-center gap-1"},Ts={class:"space-y-6"},zs={class:"bg-white dark:bg-vikinger-dark-200 rounded-xl p-5 shadow-sm"},Ls={class:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},Rs={class:"space-y-3 text-sm"},Fs={key:0,class:"flex items-start gap-3"},Ps={class:"text-gray-600 dark:text-gray-400"},Vs={key:1,class:"flex items-center gap-3"},Ds=["href"],Gs={key:2,class:"flex items-center gap-3"},Us=["href"],Es={key:3,class:"flex items-center gap-3"},Ws={class:"text-gray-600 dark:text-gray-400"},Hs={key:0,class:"bg-white dark:bg-vikinger-dark-200 rounded-xl p-5 shadow-sm"},Ks={class:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},Qs={class:"flex items-center gap-3"},Xs={class:"w-12 h-12 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden"},Ys=["src","alt"],Zs={class:"font-medium text-gray-900 dark:text-white"},qs={class:"bg-white dark:bg-vikinger-dark-200 rounded-xl p-5 shadow-sm"},er={class:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},tr={class:"grid grid-cols-2 gap-4"},sr={class:"text-center p-3 bg-gray-50 dark:bg-vikinger-dark-100 rounded-lg"},rr={class:"text-2xl font-bold text-vikinger-purple"},ar={class:"text-center p-3 bg-gray-50 dark:bg-vikinger-dark-100 rounded-lg"},lr={class:"text-2xl font-bold text-vikinger-cyan"},or={class:"text-center p-3 bg-gray-50 dark:bg-vikinger-dark-100 rounded-lg"},nr={class:"text-2xl font-bold text-green-500"},ir={class:"text-center p-3 bg-gray-50 dark:bg-vikinger-dark-100 rounded-lg"},dr={class:"text-2xl font-bold text-orange-500"},ur={class:"relative bg-white dark:bg-vikinger-dark-200 rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in-95"},cr={class:"px-6 py-4 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between"},gr={class:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2"},vr={class:"p-6 space-y-4"},pr={class:"grid grid-cols-3 gap-3"},mr=["onClick"],xr={class:"text-xs font-medium"},fr={class:"px-6 py-4 border-t border-gray-100 dark:border-gray-700 flex items-center justify-end gap-3"},yr=["disabled"],Cr=he({__name:"[name]",setup(L){const Y=ke(),f=be(),G=Ne(),{user:U}=_e(we()),r=v(null),O=v([]),I=v([]),C=v([]),N=v([]),R=v(!0),k=v(!1),B=v(null),$=v("feed"),Z=v(!1),y=v(!1),S=v(!1),x=v({name:"",description:"",type:"classroom"}),J=v(!1),F=v(!1),h=v([]),E=v(!1),q=j(()=>Y.params.name),ee=j(()=>r.value?.logo?(r.value.logo.startsWith("http"),r.value.logo):`${G.public.apiBase}/storage/images/academies/logos/default_logo.png`),te=j(()=>r.value?.cover?(r.value.cover.startsWith("http"),r.value.cover):`${G.public.apiBase}/storage/images/academies/covers/default_cover.png`),P=j(()=>{if(!r.value)return null;const a=r.value.memberStatus;return a==null?null:a===0||a==="pending"?{text:"รอการอนุมัติ",color:"bg-yellow-500"}:a===1||a==="approved"?{text:"รอการอนุมัติ",color:"bg-yellow-500"}:a===2||a==="member"?{text:"สมาชิก",color:"bg-green-500"}:null}),se=j(()=>r.value&&!r.value.memberStatus&&!r.value.authIsAcademyAdmin),re=j(()=>r.value&&r.value.memberStatus&&!r.value.authIsAcademyAdmin),ae=[{id:"feed",label:"ฟีด",icon:"fluent:feed-24-regular"},{id:"courses",label:"รายวิชา",icon:"fluent:book-24-regular"},{id:"members",label:"สมาชิก",icon:"fluent:people-24-regular"},{id:"groups",label:"กลุ่ม",icon:"fluent:people-community-24-regular"}],le=async()=>{if(U.value){R.value=!0,B.value=null;try{const a=await f.get(`/api/academies/${encodeURIComponent(q.value)}`);a.success?(r.value=JSON.parse(JSON.stringify(a.academy)),Z.value=a.isAcademyAdmin||!1):B.value=a.message||"ไม่พบข้อมูลโรงเรียน"}catch(a){console.error("Failed to fetch academy:",a),B.value=a?.data?.message||"เกิดข้อผิดพลาดในการโหลดข้อมูล"}finally{R.value=!1}}},oe=async()=>{if(r.value){k.value=!0;try{const a=await f.get(`/api/academies/${r.value.id}/courses`);a.success&&(O.value=JSON.parse(JSON.stringify(a.courses||[])))}catch(a){console.error("Failed to fetch courses:",a)}finally{k.value=!1}}},W=async()=>{if(r.value){k.value=!0;try{const a=await f.get(`/api/academies/${r.value.id}/members`);a.success&&(I.value=JSON.parse(JSON.stringify(a.members||[])))}catch(a){console.error("Failed to fetch members:",a)}finally{k.value=!1}}},ne=async()=>{if(r.value){k.value=!0;try{const a=await f.get(`/api/academies/${r.value.id}/groups`);a.success&&(C.value=JSON.parse(JSON.stringify(a.groups||[])))}catch(a){console.error("Failed to fetch groups:",a)}finally{k.value=!1}}},H=async()=>{if(r.value){k.value=!0;try{const a=await f.get(`/api/academies/${r.value.id}/activities`);a.success&&(N.value=JSON.parse(JSON.stringify(a.activities||[])))}catch(a){console.error("Failed to fetch activities:",a)}finally{k.value=!1}}},ie=async a=>{switch($.value=a,a){case"feed":N.value.length===0&&await H();break;case"courses":O.value.length===0&&await oe();break;case"members":I.value.length===0&&await W(),r.value?.authIsAcademyAdmin&&h.value.length===0&&await de();break;case"groups":C.value.length===0&&await ne();break}},de=async()=>{if(!(!r.value||!r.value.authIsAcademyAdmin)){E.value=!0;try{const a=await f.get(`/api/academies/${r.value.id}/pending-requests`);a.success&&(h.value=JSON.parse(JSON.stringify(a.pendingRequests||[])))}catch(a){console.error("Failed to fetch pending requests:",a)}finally{E.value=!1}}},ue=async a=>{try{(await f.post(`/api/academies/${r.value.id}/members/${a.id}/accept`)).success&&(h.value=h.value.filter(_=>_.id!==a.id),await W(),m.fire({icon:"success",title:"อนุมัติสำเร็จ",text:`${a.user?.name} เป็นสมาชิกแล้ว`,timer:2e3,showConfirmButton:!1}))}catch{m.fire({icon:"error",title:"เกิดข้อผิดพลาด",text:"ไม่สามารถอนุมัติได้"})}},ce=async a=>{if((await m.fire({title:"ยืนยันการปฏิเสธ?",text:`ต้องการปฏิเสธคำขอจาก ${a.user?.name} หรือไม่?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"ปฏิเสธ",cancelButtonText:"ยกเลิก"})).isConfirmed)try{(await f.post(`/api/academies/${r.value.id}/members/${a.id}/reject`)).success&&(h.value=h.value.filter(D=>D.id!==a.id),m.fire({icon:"success",title:"ปฏิเสธเรียบร้อย",timer:2e3,showConfirmButton:!1}))}catch{m.fire({icon:"error",title:"เกิดข้อผิดพลาด",text:"ไม่สามารถปฏิเสธได้"})}},ge=()=>{},ve=async a=>{a?N.value.unshift(JSON.parse(JSON.stringify(a))):await H()},pe=async()=>{if(!(!r.value||y.value)){y.value=!0;try{const a=await f.post(`/api/academies/${r.value.id}/members`);a.success?(r.value.memberStatus=a.memberStatus,r.value.total_students=a.totalStudents,m.fire({icon:"success",title:"สำเร็จ",text:"ขอเป็นสมาชิกเรียบร้อยแล้ว"})):m.fire({icon:"error",title:"เกิดข้อผิดพลาด",text:a.msg||"ไม่สามารถขอเป็นสมาชิกได้"})}catch(a){m.fire({icon:"error",title:"เกิดข้อผิดพลาด",text:a?.data?.message||"ไม่สามารถขอเป็นสมาชิกได้"})}finally{y.value=!1}}},me=async()=>{if(!(!r.value||y.value||!(await m.fire({title:"ยืนยันการออกจากโรงเรียน?",text:"คุณต้องการออกจากการเป็นสมาชิกหรือไม่?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"ออกจากการเป็นสมาชิก",cancelButtonText:"ยกเลิก"})).isConfirmed)){y.value=!0;try{(await f.post(`/api/academies/${r.value.id}/unmembers`)).success&&(r.value.memberStatus===2&&r.value.total_students--,r.value.memberStatus=null,m.fire({icon:"success",title:"สำเร็จ",text:"ออกจากการเป็นสมาชิกเรียบร้อยแล้ว"}))}catch{m.fire({icon:"error",title:"เกิดข้อผิดพลาด",text:"ไม่สามารถออกจากการเป็นสมาชิกได้"})}finally{y.value=!1}}},V=a=>({public:{label:"รัฐบาล",icon:"fluent:building-government-24-regular",color:"text-blue-500"},private:{label:"เอกชน",icon:"fluent:building-bank-24-regular",color:"text-purple-500"},foundation:{label:"มูลนิธิ",icon:"fluent:heart-24-regular",color:"text-pink-500"},international:{label:"นานาชาติ",icon:"fluent:globe-24-regular",color:"text-green-500"}})[a||""]||{label:"ทั่วไป",icon:"fluent:building-24-regular",color:"text-gray-500"},xe=async()=>{if(!(!r.value||!x.value.name.trim()||J.value)){J.value=!0;try{const a=await f.post(`/api/academies/${r.value.id}/groups`,{name:x.value.name,description:x.value.description,type:x.value.type});a.success&&(C.value.push(JSON.parse(JSON.stringify(a.group))),S.value=!1,x.value={name:"",description:"",type:"classroom"},m.fire({icon:"success",title:"สร้างกลุ่มสำเร็จ",timer:2e3,showConfirmButton:!1}))}catch(a){m.fire({icon:"error",title:"เกิดข้อผิดพลาด",text:a?.data?.message||"ไม่สามารถสร้างกลุ่มได้"})}finally{J.value=!1}}},T=a=>{const t={department:{label:"แผนก",icon:"fluent:building-24-regular",color:"from-blue-400 to-blue-600"},classroom:{label:"ห้องเรียน",icon:"fluent:board-24-regular",color:"from-green-400 to-green-600"},club:{label:"ชมรม",icon:"fluent:star-24-regular",color:"from-orange-400 to-orange-600"}};return t[a]||t.classroom},K=a=>a?new Date(a).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";return Ae(()=>{U.value&&le()}),(a,t)=>{const _=Be,D=Je,fe=Me;return l(),o("div",Oe,[R.value?(l(),o("div",Te,[e("div",ze,[d(n(i),{icon:"svg-spinners:ring-resize",class:"w-12 h-12 text-vikinger-purple mx-auto mb-4"}),t[8]||(t[8]=e("p",{class:"text-gray-600 dark:text-gray-400"},"กำลังโหลดข้อมูลโรงเรียน...",-1))])])):B.value?(l(),o("div",Le,[e("div",Re,[d(n(i),{icon:"fluent:warning-24-regular",class:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),t[10]||(t[10]=e("h2",{class:"text-xl font-bold text-gray-800 dark:text-white mb-2"},"ไม่พบข้อมูลโรงเรียน",-1)),e("p",Fe,u(B.value),1),d(_,{to:"/newsfeed",class:"inline-flex items-center gap-2 px-6 py-3 bg-vikinger-purple text-white rounded-lg hover:bg-vikinger-purple/90 transition-colors"},{default:z(()=>[d(n(i),{icon:"fluent:arrow-left-24-regular",class:"w-5 h-5"}),t[9]||(t[9]=g(" กลับหน้าหลัก ",-1))]),_:1})])])):r.value?(l(),o("div",Pe,[e("div",Ve,[e("div",{class:"h-48 md:h-64 bg-gray-300 dark:bg-gray-700 bg-cover bg-center relative",style:Ce({backgroundImage:`url(${te.value})`})},[...t[11]||(t[11]=[e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"},null,-1)])],4),e("div",De,[e("div",Ge,[e("div",Ue,[e("img",{src:ee.value,alt:r.value.name,class:"w-full h-full object-cover"},null,8,Ee)])]),e("div",We,[e("div",He,[e("h1",Ke,u(r.value.name),1),r.value.slogan?(l(),o("p",Qe,u(r.value.slogan),1)):c("",!0),e("div",Xe,[e("div",Ye,[d(n(i),{icon:V(r.value.type).icon,class:b(["w-4 h-4",V(r.value.type).color])},null,8,["icon","class"]),e("span",null,u(V(r.value.type).label),1)]),e("div",Ze,[d(n(i),{icon:"fluent:people-24-regular",class:"w-4 h-4"}),e("span",null,u(r.value.total_students||0)+" สมาชิก",1)]),e("div",qe,[d(n(i),{icon:"fluent:book-24-regular",class:"w-4 h-4"}),e("span",null,u(r.value.courses_offered||0)+" รายวิชา",1)])])]),e("div",et,[P.value?(l(),o("span",{key:0,class:b(["px-3 py-1.5 rounded-full text-sm font-medium text-white",P.value.color])},u(P.value.text),3)):c("",!0),r.value.authIsAcademyAdmin?(l(),o("span",tt,[d(n(i),{icon:"fluent:shield-checkmark-24-regular",class:"w-4 h-4"}),t[12]||(t[12]=g(" ผู้ดูแล ",-1))])):c("",!0),se.value?(l(),o("button",{key:2,onClick:pe,disabled:y.value,class:"px-5 py-2.5 bg-vikinger-purple text-white rounded-lg font-medium hover:bg-vikinger-purple/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[y.value?(l(),p(n(i),{key:0,icon:"svg-spinners:ring-resize",class:"w-4 h-4"})):(l(),p(n(i),{key:1,icon:"fluent:person-add-24-regular",class:"w-4 h-4"})),t[13]||(t[13]=g(" เข้าร่วมโรงเรียน ",-1))],8,st)):c("",!0),re.value?(l(),o("button",{key:3,onClick:me,disabled:y.value,class:"px-5 py-2.5 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[y.value?(l(),p(n(i),{key:0,icon:"svg-spinners:ring-resize",class:"w-4 h-4"})):(l(),p(n(i),{key:1,icon:"fluent:person-subtract-24-regular",class:"w-4 h-4"})),t[14]||(t[14]=g(" ออกจากโรงเรียน ",-1))],8,rt)):c("",!0)])])]),e("div",at,[e("div",lt,[(l(),o(w,null,A(ae,s=>e("button",{key:s.id,onClick:M=>ie(s.id),class:b(["flex items-center gap-2 px-6 py-4 text-sm font-medium transition-colors whitespace-nowrap",$.value===s.id?"text-vikinger-purple border-b-2 border-vikinger-purple":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])},[d(n(i),{icon:s.icon,class:"w-5 h-5"},null,8,["icon"]),g(" "+u(s.label),1)],10,ot)),64))])])]),e("div",nt,[e("div",it,[k.value?(l(),o("div",dt,[d(n(i),{icon:"svg-spinners:ring-resize",class:"w-8 h-8 text-vikinger-purple mx-auto"})])):$.value==="feed"?(l(),o("div",ut,[r.value.memberStatus===2||r.value.authIsAcademyAdmin?(l(),p(D,{key:0,context:"academy","context-id":r.value.id,"context-name":r.value.name,onPostCreated:ve},null,8,["context-id","context-name"])):c("",!0),N.value.length===0?(l(),o("div",ct,[d(n(i),{icon:"fluent:feed-24-regular",class:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),t[15]||(t[15]=e("p",{class:"text-gray-500 dark:text-gray-400"},"ยังไม่มีกิจกรรม",-1))])):c("",!0),(l(!0),o(w,null,A(N.value,s=>(l(),o("div",{key:s.id,class:"bg-white dark:bg-vikinger-dark-200 rounded-xl shadow-sm overflow-hidden"},[e("div",gt,[e("div",vt,[s.user?.avatar?(l(),o("img",{key:0,src:s.user.avatar,alt:s.user?.name,class:"w-full h-full object-cover"},null,8,pt)):(l(),p(n(i),{key:1,icon:"fluent:person-24-regular",class:"w-full h-full p-2 text-gray-400"}))]),e("div",mt,[e("div",xt,[e("div",null,[e("h4",ft,u(s.user?.name||"ผู้ใช้"),1),e("p",yt,u(K(s.created_at)),1)]),s.type?(l(),o("span",ht,u(s.type),1)):c("",!0)]),e("div",kt,[e("p",bt,u(s.description||s.content),1)]),s.images?.length?(l(),o("div",{key:0,class:b(["mt-3 grid gap-2",s.images.length===1?"grid-cols-1":"grid-cols-2"])},[(l(!0),o(w,null,A(s.images.slice(0,4),(M,ye)=>(l(),o("img",{key:ye,src:M,class:"rounded-lg w-full h-48 object-cover"},null,8,_t))),128))],2)):c("",!0)])]),e("div",wt,[e("button",At,[d(n(i),{icon:"fluent:heart-24-regular",class:"w-5 h-5"}),e("span",Ct,u(s.likes_count||0),1)]),e("button",$t,[d(n(i),{icon:"fluent:comment-24-regular",class:"w-5 h-5"}),e("span",St,u(s.comments_count||0),1)]),e("button",jt,[d(n(i),{icon:"fluent:share-24-regular",class:"w-5 h-5"})])])]))),128))])):$.value==="courses"?(l(),o("div",It,[r.value.authIsAcademyAdmin?(l(),o("div",Nt,[d(_,{to:"/courses/create",class:"px-4 py-2 bg-vikinger-purple text-white rounded-lg font-medium text-sm hover:bg-vikinger-purple/90 transition-colors flex items-center gap-2"},{default:z(()=>[d(n(i),{icon:"fluent:add-24-regular",class:"w-5 h-5"}),t[16]||(t[16]=g(" สร้างรายวิชาใหม่ ",-1))]),_:1})])):c("",!0),O.value.length===0?(l(),o("div",Bt,[d(n(i),{icon:"fluent:book-24-regular",class:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),t[17]||(t[17]=e("p",{class:"text-gray-500 dark:text-gray-400"},"ยังไม่มีรายวิชา",-1)),r.value.authIsAcademyAdmin?(l(),o("p",Jt,'คลิก "สร้างรายวิชาใหม่" เพื่อเริ่มต้น')):c("",!0)])):(l(),o("div",Mt,[(l(!0),o(w,null,A(O.value,s=>(l(),p(_,{key:s.id,to:`/courses/${s.id}`,class:"block bg-white dark:bg-vikinger-dark-200 rounded-xl shadow-sm hover:shadow-md transition-all overflow-hidden group"},{default:z(()=>[e("div",Ot,[s.cover?(l(),o("img",{key:0,src:s.cover,class:"w-full h-full object-cover"},null,8,Tt)):c("",!0),t[18]||(t[18]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))]),e("div",zt,[e("h3",Lt,u(s.name),1),e("p",Rt,u(s.description),1),e("div",Ft,[e("div",Pt,[e("span",Vt,[d(n(i),{icon:"fluent:people-24-regular",class:"w-4 h-4"}),g(" "+u(s.students_count||0),1)]),e("span",Dt,[d(n(i),{icon:"fluent:book-open-24-regular",class:"w-4 h-4"}),g(" "+u(s.lessons_count||0)+" บท ",1)])]),e("span",{class:b(["px-2 py-0.5 rounded-full text-xs",s.status==="published"?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":s.status==="draft"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"])},u(s.status==="published"?"เผยแพร่":s.status==="draft"?"แบบร่าง":s.status),3)])])]),_:2},1032,["to"]))),128))]))])):$.value==="members"?(l(),o("div",Gt,[r.value.authIsAcademyAdmin?(l(),o("div",Ut,[e("div",Et,[h.value.length>0?(l(),o("span",Wt,u(h.value.length)+" คำขอรอดำเนินการ ",1)):c("",!0)]),e("button",{onClick:t[0]||(t[0]=s=>F.value=!0),class:"px-4 py-2 bg-vikinger-purple text-white rounded-lg font-medium text-sm hover:bg-vikinger-purple/90 transition-colors flex items-center gap-2"},[d(n(i),{icon:"fluent:person-add-24-regular",class:"w-5 h-5"}),t[19]||(t[19]=g(" เชิญสมาชิก ",-1))])])):c("",!0),r.value.authIsAcademyAdmin&&h.value.length>0?(l(),o("div",Ht,[e("div",Kt,[d(n(i),{icon:"fluent:clock-24-regular",class:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),t[20]||(t[20]=e("h3",{class:"font-semibold text-yellow-800 dark:text-yellow-200"},"คำขอเข้าร่วมที่รอดำเนินการ",-1))]),e("div",Qt,[(l(!0),o(w,null,A(h.value,s=>(l(),o("div",{key:s.id,class:"flex items-center justify-between p-3 bg-white dark:bg-vikinger-dark-200 rounded-lg"},[e("div",Xt,[e("div",Yt,[s.user?.profile_photo_url?(l(),o("img",{key:0,src:s.user.profile_photo_url,alt:s.user?.name,class:"w-full h-full object-cover"},null,8,Zt)):(l(),p(n(i),{key:1,icon:"fluent:person-24-regular",class:"w-full h-full p-2 text-gray-400"}))]),e("div",null,[e("h4",qt,u(s.user?.name),1),e("p",es,"@"+u(s.user?.reference_code),1)])]),e("div",ts,[e("button",{onClick:M=>ue(s),class:"px-3 py-1.5 bg-green-500 text-white rounded-lg text-sm font-medium hover:bg-green-600 transition-colors flex items-center gap-1"},[d(n(i),{icon:"fluent:checkmark-24-regular",class:"w-4 h-4"}),t[21]||(t[21]=g(" อนุมัติ ",-1))],8,ss),e("button",{onClick:M=>ce(s),class:"px-3 py-1.5 bg-red-500 text-white rounded-lg text-sm font-medium hover:bg-red-600 transition-colors flex items-center gap-1"},[d(n(i),{icon:"fluent:dismiss-24-regular",class:"w-4 h-4"}),t[22]||(t[22]=g(" ปฏิเสธ ",-1))],8,rs)])]))),128))])])):c("",!0),e("div",as,[e("div",ls,[d(n(i),{icon:"fluent:search-24-regular",class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),t[23]||(t[23]=e("input",{type:"text",placeholder:"ค้นหาสมาชิก...",class:"w-full pl-10 pr-4 py-2.5 rounded-lg bg-gray-50 dark:bg-vikinger-dark-100 text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-vikinger-purple/50"},null,-1))])]),I.value.length===0?(l(),o("div",os,[d(n(i),{icon:"fluent:people-24-regular",class:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),t[24]||(t[24]=e("p",{class:"text-gray-500 dark:text-gray-400"},"ยังไม่มีสมาชิก",-1)),r.value.authIsAcademyAdmin?(l(),o("p",ns,'คลิก "เชิญสมาชิก" เพื่อเชิญผู้ใช้เข้าร่วม')):c("",!0)])):c("",!0),e("div",is,[e("div",ds,[(l(!0),o(w,null,A(I.value,s=>(l(),o("div",{key:s.id,class:"p-4 hover:bg-gray-50 dark:hover:bg-vikinger-dark-100 transition-colors"},[e("div",us,[e("div",cs,[e("div",gs,[s.user?.avatar||s.avatar?(l(),o("img",{key:0,src:s.user?.avatar||s.avatar,alt:s.user?.name||s.name,class:"w-full h-full object-cover"},null,8,vs)):(l(),p(n(i),{key:1,icon:"fluent:person-24-regular",class:"w-full h-full p-2 text-gray-400"}))]),e("div",null,[e("h4",ps,u(s.user?.name||s.name),1),e("div",ms,[e("span",{class:b(["px-2 py-0.5 rounded-full text-xs font-medium",s.role==="admin"?"bg-vikinger-purple/10 text-vikinger-purple":s.role==="teacher"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"])},u(s.role==="admin"?"ผู้ดูแล":s.role==="teacher"?"ครูผู้สอน":"นักเรียน"),3),s.joined_at?(l(),o("span",xs,"เข้าร่วมเมื่อ "+u(K(s.joined_at)),1)):c("",!0)])])]),e("div",fs,[d(_,{to:`/profile/${s.user?.id||s.id}`,class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-gray-500 hover:text-vikinger-purple",title:"ดูโปรไฟล์"},{default:z(()=>[d(n(i),{icon:"fluent:person-24-regular",class:"w-5 h-5"})]),_:1},8,["to"]),r.value.authIsAcademyAdmin&&s.role!=="admin"?(l(),o("button",ys,[d(n(i),{icon:"fluent:settings-24-regular",class:"w-5 h-5"})])):c("",!0)])])]))),128))])]),I.value.length>=10?(l(),o("div",hs,[...t[25]||(t[25]=[e("button",{class:"text-vikinger-purple hover:text-vikinger-purple/80 font-medium text-sm"}," โหลดเพิ่มเติม ",-1)])])):c("",!0)])):$.value==="groups"?(l(),o("div",ks,[r.value.authIsAcademyAdmin?(l(),o("div",bs,[e("button",{onClick:t[1]||(t[1]=s=>S.value=!0),class:"px-4 py-2 bg-vikinger-purple text-white rounded-lg font-medium text-sm hover:bg-vikinger-purple/90 transition-colors flex items-center gap-2"},[d(n(i),{icon:"fluent:add-24-regular",class:"w-5 h-5"}),t[26]||(t[26]=g(" สร้างกลุ่มใหม่ ",-1))])])):c("",!0),C.value.length===0?(l(),o("div",_s,[d(n(i),{icon:"fluent:people-community-24-regular",class:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),t[27]||(t[27]=e("p",{class:"text-gray-500 dark:text-gray-400"},"ยังไม่มีกลุ่ม",-1)),r.value.authIsAcademyAdmin?(l(),o("p",ws,'คลิก "สร้างกลุ่มใหม่" เพื่อเริ่มต้น')):c("",!0)])):(l(),o("div",As,[(l(!0),o(w,null,A(C.value,s=>(l(),o("div",{key:s.id,class:"bg-white dark:bg-vikinger-dark-200 rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-shadow cursor-pointer"},[e("div",{class:b(["h-16 bg-gradient-to-br",T(s.type).color])},null,2),e("div",Cs,[e("div",$s,[e("div",{class:b(["w-12 h-12 -mt-8 rounded-lg bg-gradient-to-br flex items-center justify-center border-2 border-white dark:border-vikinger-dark-200 shadow-md",T(s.type).color])},[d(n(i),{icon:T(s.type).icon,class:"w-6 h-6 text-white"},null,8,["icon"])],2),e("div",Ss,[e("div",js,[e("h4",Is,u(s.name),1),e("span",Ns,u(T(s.type).label),1)]),s.description?(l(),o("p",Bs,u(s.description),1)):c("",!0)])]),e("div",Js,[e("div",Ms,[e("span",Os,[d(n(i),{icon:"fluent:people-24-regular",class:"w-4 h-4"}),g(" "+u(s.members_count||0)+" สมาชิก ",1)])]),t[28]||(t[28]=e("button",{class:"text-vikinger-purple hover:text-vikinger-purple/80 font-medium"}," ดูรายละเอียด ",-1))])])]))),128))]))])):c("",!0)]),e("div",Ts,[e("div",zs,[e("h3",Ls,[d(n(i),{icon:"fluent:info-24-regular",class:"w-5 h-5 text-vikinger-purple"}),t[29]||(t[29]=g(" เกี่ยวกับโรงเรียน ",-1))]),e("div",Rs,[r.value.address?(l(),o("div",Fs,[d(n(i),{icon:"fluent:location-24-regular",class:"w-5 h-5 text-gray-400 flex-shrink-0 mt-0.5"}),e("span",Ps,u(r.value.address),1)])):c("",!0),r.value.email?(l(),o("div",Vs,[d(n(i),{icon:"fluent:mail-24-regular",class:"w-5 h-5 text-gray-400"}),e("a",{href:`mailto:${r.value.email}`,class:"text-vikinger-purple hover:underline"},u(r.value.email),9,Ds)])):c("",!0),r.value.phone?(l(),o("div",Gs,[d(n(i),{icon:"fluent:call-24-regular",class:"w-5 h-5 text-gray-400"}),e("a",{href:`tel:${r.value.phone}`,class:"text-vikinger-purple hover:underline"},u(r.value.phone),9,Us)])):c("",!0),r.value.established_year?(l(),o("div",Es,[d(n(i),{icon:"fluent:calendar-24-regular",class:"w-5 h-5 text-gray-400"}),e("span",Ws,"ก่อตั้งเมื่อ "+u(r.value.established_year),1)])):c("",!0)])]),r.value.director?(l(),o("div",Hs,[e("h3",Ks,[d(n(i),{icon:"fluent:person-star-24-regular",class:"w-5 h-5 text-vikinger-purple"}),t[30]||(t[30]=g(" ผู้อำนวยการ ",-1))]),e("div",Qs,[e("div",Xs,[r.value.director.avatar?(l(),o("img",{key:0,src:r.value.director.avatar,alt:r.value.director.name,class:"w-full h-full object-cover"},null,8,Ys)):(l(),p(n(i),{key:1,icon:"fluent:person-24-regular",class:"w-full h-full p-2 text-gray-400"}))]),e("div",null,[e("h4",Zs,u(r.value.director.name),1),t[31]||(t[31]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"ผู้อำนวยการ",-1))])])])):c("",!0),e("div",qs,[e("h3",er,[d(n(i),{icon:"fluent:data-bar-horizontal-24-regular",class:"w-5 h-5 text-vikinger-purple"}),t[32]||(t[32]=g(" สถิติ ",-1))]),e("div",tr,[e("div",sr,[e("div",rr,u(r.value.total_students||0),1),t[33]||(t[33]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"นักเรียน",-1))]),e("div",ar,[e("div",lr,u(r.value.total_teachers||0),1),t[34]||(t[34]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"ครู",-1))]),e("div",or,[e("div",nr,u(r.value.courses_offered||0),1),t[35]||(t[35]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"รายวิชา",-1))]),e("div",ir,[e("div",dr,u(C.value.length||0),1),t[36]||(t[36]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"กลุ่ม",-1))])])])])])])):c("",!0),(l(),p(Se,{to:"body"},[S.value?(l(),o("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:t[6]||(t[6]=$e(s=>S.value=!1,["self"]))},[t[42]||(t[42]=e("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm"},null,-1)),e("div",ur,[e("div",cr,[e("h3",gr,[d(n(i),{icon:"fluent:people-community-add-24-regular",class:"w-6 h-6 text-vikinger-purple"}),t[37]||(t[37]=g(" สร้างกลุ่มใหม่ ",-1))]),e("button",{onClick:t[2]||(t[2]=s=>S.value=!1),class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[d(n(i),{icon:"fluent:dismiss-24-regular",class:"w-5 h-5 text-gray-500"})])]),e("div",vr,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[g(" ชื่อกลุ่ม "),e("span",{class:"text-red-500"},"*")],-1)),Q(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>x.value.name=s),type:"text",placeholder:"เช่น ห้อง ม.1/1, แผนกวิทยาศาสตร์, ชมรมดนตรี",class:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-vikinger-dark-100 text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-vikinger-purple/50"},null,512),[[X,x.value.name]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ประเภทกลุ่ม ",-1)),e("div",pr,[(l(),o(w,null,A([{value:"department",label:"แผนก",icon:"fluent:building-24-regular"},{value:"classroom",label:"ห้องเรียน",icon:"fluent:board-24-regular"},{value:"club",label:"ชมรม",icon:"fluent:star-24-regular"}],s=>e("button",{key:s.value,onClick:M=>x.value.type=s.value,class:b(["p-3 rounded-lg border-2 flex flex-col items-center gap-2 transition-all",x.value.type===s.value?"border-vikinger-purple bg-vikinger-purple/10 text-vikinger-purple":"border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:border-vikinger-purple/50"])},[d(n(i),{icon:s.icon,class:"w-6 h-6"},null,8,["icon"]),e("span",xr,u(s.label),1)],10,mr)),64))])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," รายละเอียด (ไม่บังคับ) ",-1)),Q(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>x.value.description=s),rows:"3",placeholder:"อธิบายเกี่ยวกับกลุ่มนี้...",class:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-vikinger-dark-100 text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-vikinger-purple/50 resize-none"},null,512),[[X,x.value.description]])])]),e("div",fr,[e("button",{onClick:t[5]||(t[5]=s=>S.value=!1),class:"px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"}," ยกเลิก "),e("button",{onClick:xe,disabled:!x.value.name.trim()||J.value,class:"px-4 py-2 bg-vikinger-purple text-white rounded-lg font-medium hover:bg-vikinger-purple/90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[J.value?(l(),p(n(i),{key:0,icon:"svg-spinners:ring-resize",class:"w-4 h-4"})):(l(),p(n(i),{key:1,icon:"fluent:add-24-regular",class:"w-4 h-4"})),t[41]||(t[41]=g(" สร้างกลุ่ม ",-1))],8,yr)])])])):c("",!0)])),r.value?(l(),p(fe,{key:3,"is-open":F.value,"academy-id":r.value.id,onClose:t[7]||(t[7]=s=>F.value=!1),onInvited:ge},null,8,["is-open","academy-id"])):c("",!0)])}}});export{Cr as default};
