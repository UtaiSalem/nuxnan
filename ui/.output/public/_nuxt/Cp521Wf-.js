import{_ as ye,a9 as de,aF as he,n as _,r as f,p as Se,z as pe,W as Te,c as d,o,a as e,b as l,a7 as Ee,d as g,j,g as c,u as t,I as a,t as p,e as xe,T as i,F as G,k as ie,w as k,$ as fe,aa as ve,q as we,ay as ke,a3 as _e,K as te,al as Ne,aE as Fe,X as W,i as De}from"./CHs-R6Sv.js";import{S as K}from"./BQxta0Da.js";import{u as Ce}from"./CWbKy_m_.js";import{_ as $e}from"./DROJGjoa.js";import{_ as Ge}from"./CNJKLhSn.js";import{u as Ve}from"./Bk_v_Y9k.js";import"./CqN4doyA.js";const Pe={class:"relative w-full bg-white dark:bg-gray-900 rounded-2xl overflow-hidden shadow-2xl border border-gray-100 dark:border-gray-800 transition-all duration-300"},We={key:0,class:"absolute top-4 left-4 z-10"},He=["disabled"],Ke={key:1,class:"absolute top-4 right-4 z-10 animate-pulse"},Xe={class:"relative group"},Je={class:"relative flex items-center px-4 py-2.5 space-x-2 font-bold text-white rounded-xl bg-gradient-to-r from-yellow-400 to-orange-500 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 border border-yellow-300/50"},Qe={class:"text-lg"},Ye={class:"flex flex-col sm:flex-row items-center justify-between w-full px-4 sm:px-6 -mt-[70px] sm:-mt-[80px] md:-mt-[90px] transition-all duration-300"},Ze={class:"flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto"},et={class:"relative flex-shrink-0 group"},tt={class:"relative w-24 h-24 sm:w-28 sm:h-28 md:w-32 md:h-32 lg:w-36 lg:h-36 rounded-full border-4 border-white dark:border-gray-800 overflow-hidden bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 shadow-2xl transition-all duration-300 group-hover:scale-105 group-hover:shadow-3xl z-10"},rt=["src"],ot=["disabled"],st={class:"space-y-2 text-center sm:text-left mt-3 sm:mt-6"},at={class:"flex items-center gap-2 flex-wrap justify-center sm:justify-start"},nt={class:"relative group"},lt={class:"relative z-10 px-5 py-3 text-lg sm:text-xl md:text-2xl font-black text-white bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 dark:from-gray-800 dark:via-gray-700 dark:to-gray-800 rounded-2xl shadow-2xl border border-slate-700/50 dark:border-gray-600/50 backdrop-blur-sm transition-all duration-300 group-hover:shadow-3xl group-hover:scale-105"},it={class:"bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent"},dt={class:"flex items-center gap-2 justify-center sm:justify-start"},ut={key:0,class:"group relative px-5 py-2.5 text-sm font-bold text-white bg-gradient-to-r from-cyan-500 via-blue-600 to-purple-600 rounded-full shadow-xl border-2 border-cyan-400/30 transition-all duration-300 hover:shadow-2xl hover:scale-105 cursor-default"},ct={class:"tracking-wider"},mt={key:0,class:"hidden md:block mt-4 sm:mt-0"},bt={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border z-50"},gt=["disabled"],ft=["disabled"],vt=["disabled"],yt={key:0,class:"absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-xl border z-50 max-h-64 overflow-y-auto"},ht={key:0,class:"px-4 py-6 text-center text-gray-500"},pt=["onClick","disabled"],xt={class:"w-8 h-8 rounded-full bg-cyan-100 flex items-center justify-center flex-shrink-0"},wt={class:"flex-1 min-w-0"},kt={class:"font-medium text-gray-900 truncate"},_t={class:"text-xs text-gray-500"},Ct={class:"py-6 px-4 sm:px-6"},$t={class:"flex flex-wrap justify-center gap-4 md:gap-6"},jt={class:"group relative flex items-center gap-3 px-5 py-3 rounded-2xl bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 border-2 border-blue-200 dark:border-blue-700 hover:shadow-xl transition-all duration-300 hover:scale-105 cursor-pointer overflow-hidden"},At={class:"relative flex items-center justify-center w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300"},Mt={class:"relative"},zt={class:"text-2xl font-black text-blue-600 dark:text-blue-400 leading-none"},Ot={class:"group relative flex items-center gap-3 px-5 py-3 rounded-2xl bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 border-2 border-purple-200 dark:border-purple-700 hover:shadow-xl transition-all duration-300 hover:scale-105 cursor-pointer overflow-hidden"},It={class:"relative flex items-center justify-center w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300"},Rt={class:"relative"},Lt={class:"text-2xl font-black text-purple-600 dark:text-purple-400 leading-none"},Ut={class:"group relative flex items-center gap-3 px-5 py-3 rounded-2xl bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 border-2 border-green-200 dark:border-green-700 hover:shadow-xl transition-all duration-300 hover:scale-105 cursor-pointer overflow-hidden"},qt={class:"relative flex items-center justify-center w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300"},Bt={class:"relative"},St={class:"text-2xl font-black text-green-600 dark:text-green-400 leading-none"},Tt={key:0,class:"group relative flex items-center gap-3 px-5 py-3 rounded-2xl bg-gradient-to-br from-yellow-50 to-amber-100 dark:from-yellow-900/30 dark:to-amber-800/30 border-2 border-yellow-200 dark:border-yellow-700 hover:shadow-xl transition-all duration-300 hover:scale-105 cursor-pointer overflow-hidden"},Et={class:"relative flex items-center justify-center w-12 h-12 bg-gradient-to-br from-yellow-400 to-amber-500 rounded-xl shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300"},Nt={class:"relative"},Ft={class:"flex items-center gap-1"},Dt={class:"text-2xl font-black text-yellow-600 dark:text-yellow-400 leading-none"},Gt={class:"flex items-center"},Vt={class:"text-xs font-semibold text-yellow-700/70 dark:text-yellow-300/70 mt-0.5"},Pt={class:"relative flex items-center justify-center w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl shadow-lg overflow-hidden group-hover:shadow-xl group-hover:scale-110 transition-all duration-300"},Wt=["src"],Ht={class:"relative text-left"},Kt={class:"text-sm font-black text-orange-700 dark:text-orange-400 truncate max-w-[140px] leading-tight"},Xt={key:0,class:"flex justify-center mt-4 md:hidden"},Jt={key:0,class:"relative w-56"},Qt={class:"flex items-center gap-2"},Yt={key:0,class:"absolute left-0 right-0 mt-2 bg-white rounded-lg shadow-xl border z-50"},Zt=["disabled"],er=["disabled"],tr={key:2,class:"relative w-56"},rr=["disabled"],or={class:"flex items-center gap-2"},sr={key:0,class:"absolute left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border z-50 max-h-64 overflow-y-auto"},ar={key:0,class:"px-4 py-6 text-center text-gray-500"},nr=["onClick","disabled"],lr={class:"w-8 h-8 rounded-full bg-cyan-100 flex items-center justify-center flex-shrink-0"},ir={class:"flex-1 min-w-0"},dr={class:"font-medium text-gray-900 truncate"},ur={class:"text-xs text-gray-500"},cr={class:"flex items-center gap-3"},mr={class:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl"},br={class:"space-y-6"},gr={class:"space-y-2"},fr={class:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"},vr={class:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1"},yr={class:"space-y-2"},hr={class:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"},pr={class:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1"},xr={class:"p-4 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-xl border-2 border-blue-200 dark:border-blue-800"},wr={class:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-1"},kr={class:"flex items-center gap-2 flex-wrap"},_r={class:"px-4 py-2 bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 dark:from-gray-800 dark:via-gray-700 dark:to-gray-800 rounded-xl shadow-lg border border-slate-700/50"},Cr={class:"text-sm font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent"},$r={key:0,class:"px-3 py-1.5 bg-gradient-to-r from-cyan-500 via-blue-600 to-purple-600 rounded-full shadow-lg"},jr={class:"text-xs font-bold text-white tracking-wider"},Ar={class:"flex items-center justify-end gap-3"},Mr=["disabled"],zr=["disabled"],Or={__name:"CourseProfileCover",props:{courseMemberOfAuth:{type:Object,default:null}},emits:["request-member","request-unmember","refresh"],setup(m,{emit:z}){const U=m,x=z,q=de(),s=Se(),h=he(),n=_(()=>h.currentCourse),C=_(()=>h.academy),u=_(()=>h.isCourseAdmin),A=_(()=>n.value?.groups||[]),O=_(()=>n.value?.id),$=_(()=>n.value?.name||""),I=_(()=>n.value?.code||""),X=_(()=>n.value?.tuition_fees),re=_(()=>n.value?.lessons_count??0),oe=_(()=>n.value?.enrolled_students??0),se=_(()=>n.value?.groups??0),y=_(()=>U.courseMemberOfAuth?.status||n.value?.member_status),b=_(()=>(n.value?.groups?.length??0)>0),H=f(null),E=f(null),J=f(null),ae=f(null),B=f(!1),S=f(!1),ne=f(!1),T=f(""),N=f(""),Q=f(!1),Y=f(!1),F=f(!1),je=f(!1),R=f(!1),L=f(!1),V=f(null),P=f(null),Ae=_(()=>V.value?V.value:n.value?.cover?n.value.cover.startsWith("http")?n.value.cover:`${s.public.apiBase}/storage/images/courses/covers/${n.value.cover}`:`${s.public.apiBase}/storage/images/courses/covers/default_cover.jpg`),Me=_(()=>P.value?P.value:n.value?.logo?n.value.logo.startsWith("http")?n.value.logo:`${s.public.apiBase}/storage/images/courses/logos/${n.value.logo}`:n.value?.user?.avatar?n.value.user.avatar:"/images/default-avatar.png"),ze=()=>E.value?.click(),Oe=()=>H.value?.click();function ue(){T.value=$.value,N.value=I.value,ne.value=!0}function le(){ne.value=!1,T.value="",N.value="",F.value=!1,je.value=!1}async function Ie(){if(!T.value.trim()){alert("กรุณากรอกชื่อรายวิชา");return}F.value=!0;try{const v={name:T.value.trim(),code:N.value.trim()};await q.put(`/api/courses/${O.value}`,v),h.updateCourse(v),x("refresh"),le()}catch(v){console.error("Failed to update course info:",v),alert("เกิดข้อผิดพลาดในการบันทึก กรุณาลองใหม่อีกครั้ง")}finally{F.value=!1}}async function Re(v){const r=v.target.files?.[0];if(r){V.value=URL.createObjectURL(r),Q.value=!0;try{const M=new FormData;M.append("cover",r);const D=await q.post(`/api/courses/${O.value}/cover`,M);D.cover&&h.updateCourse({cover:D.cover}),x("refresh")}catch(M){console.error("Failed to update cover:",M),V.value=null}finally{Q.value=!1}}}async function Le(v){const r=v.target.files?.[0];if(r){P.value=URL.createObjectURL(r),Y.value=!0;try{const M=new FormData;M.append("logo",r);const D=await q.post(`/api/courses/${O.value}/logo`,M);D.logo&&h.updateCourse({logo:D.logo}),x("refresh")}catch(M){console.error("Failed to update logo:",M),P.value=null}finally{Y.value=!1}}}function Ue(){ue()}function qe(){ue()}async function Z(v=null){if(!R.value){R.value=!0;try{const r=v?{group_id:v}:{},M=await q.post(`/api/courses/${O.value}/members`,r);h.updateCourse({isMember:!0,member_status:M.memberStatus||"pending"}),B.value=!1,x("request-member",v),x("refresh")}catch(r){console.error("Failed to request membership:",r)}finally{R.value=!1}}}async function ee(){if(U.courseMemberOfAuth?.id&&!L.value&&!((y.value==="1"||y.value==="active")&&!confirm("คุณต้องการออกจากรายวิชานี้ใช่หรือไม่?"))){L.value=!0;try{await q.delete(`/api/courses/${O.value}/members/${U.courseMemberOfAuth.id}`),h.updateCourse({isMember:!1,member_status:null}),S.value=!1,x("request-unmember",U.courseMemberOfAuth.id),x("refresh")}catch(v){console.error("Failed to cancel membership:",v)}finally{L.value=!1}}}function ce(){B.value=!B.value,S.value=!1}function me(){S.value=!S.value,B.value=!1}function be(v){J.value&&!J.value.contains(v.target)&&(B.value=!1),ae.value&&!ae.value.contains(v.target)&&(S.value=!1)}function ge(v){v.key==="Escape"&&(B.value=!1,S.value=!1)}return pe(()=>{document.addEventListener("click",be),document.addEventListener("keydown",ge)}),Te(()=>{document.removeEventListener("click",be),document.removeEventListener("keydown",ge),V.value&&URL.revokeObjectURL(V.value),P.value&&URL.revokeObjectURL(P.value)}),(v,r)=>{const M=$e,D=Ge;return o(),d(G,null,[e("div",Pe,[e("div",{class:"relative h-48 sm:h-64 md:h-72 lg:h-80 bg-cover bg-center bg-no-repeat transition-all duration-500",style:Ee({backgroundImage:`url(${Ae.value})`})},[r[7]||(r[7]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-blue-600/20 via-purple-600/10 to-pink-600/20 dark:from-blue-900/30 dark:via-purple-900/20 dark:to-pink-900/30"},null,-1)),r[8]||(r[8]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"},null,-1)),r[9]||(r[9]=e("div",{class:"absolute inset-0 opacity-10 dark:opacity-5",style:{"background-image":"radial-gradient(circle at 1px 1px, white 1px, transparent 0)","background-size":"40px 40px"}},null,-1)),u.value?(o(),d("div",We,[e("input",{type:"file",class:"hidden",ref_key:"coverInput",ref:E,accept:"image/*",onChange:Re},null,544),e("button",{type:"button",onClick:j(ze,["prevent"]),disabled:Q.value,class:"group relative p-3 text-gray-700 dark:text-gray-200 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-xl hover:bg-white dark:hover:bg-gray-700 transition-all duration-300 disabled:opacity-50 shadow-lg hover:shadow-xl hover:scale-110 border border-white/20"},[Q.value?(o(),c(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(o(),c(t(a),{key:1,icon:"fluent:camera-edit-20-filled",class:"w-5 h-5 group-hover:scale-110 transition-transform"})),r[4]||(r[4]=e("div",{class:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap"}," แก้ไขปก ",-1))],8,He)])):g("",!0),X.value?(o(),d("div",Ke,[e("div",Xe,[r[6]||(r[6]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl blur-md opacity-75 group-hover:opacity-100 transition-opacity"},null,-1)),e("div",Je,[l(t(a),{icon:"ri:bit-coin-fill",class:"w-6 h-6 animate-spin-slow"}),e("span",Qe,p(X.value),1),r[5]||(r[5]=e("span",{class:"text-sm opacity-90"},"บาท",-1))])])])):g("",!0)],4),e("div",Ye,[e("div",Ze,[e("div",et,[r[11]||(r[11]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full blur-xl opacity-0 group-hover:opacity-60 transition-opacity duration-500 animate-pulse pointer-events-none -z-10"},null,-1)),e("div",tt,[e("img",{src:Me.value,alt:"Course Logo",class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"},null,8,rt),r[10]||(r[10]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1))]),u.value?(o(),d("input",{key:0,type:"file",class:"hidden",ref_key:"logoInput",ref:H,accept:"image/*",onChange:Le},null,544)):g("",!0),u.value?(o(),d("button",{key:1,type:"button",onClick:j(Oe,["prevent"]),disabled:Y.value,class:"absolute bottom-2 right-2 p-2.5 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full hover:from-blue-600 hover:to-purple-700 transition-all duration-300 disabled:opacity-50 shadow-lg hover:shadow-xl hover:scale-110 border-2 border-white dark:border-gray-800 z-10"},[Y.value?(o(),c(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-4 h-4"})):(o(),c(t(a),{key:1,icon:"fluent:camera-edit-20-filled",class:"w-4 h-4"}))],8,ot)):g("",!0)]),e("div",st,[e("div",at,[e("div",nt,[r[12]||(r[12]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-2xl blur-xl opacity-0 group-hover:opacity-30 transition-opacity duration-500 pointer-events-none -z-10"},null,-1)),e("h1",lt,[e("span",it,p($.value||"ไม่มีชื่อรายวิชา"),1)])]),u.value?(o(),d("button",{key:0,onClick:Ue,class:"group relative z-20 p-2.5 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl border border-gray-200 dark:border-gray-600 hover:scale-110"},[l(t(a),{icon:"fluent:edit-24-filled",class:"w-5 h-5 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform"}),r[13]||(r[13]=e("div",{class:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50"}," แก้ไขข้อมูล ",-1))])):g("",!0)]),e("div",dt,[I.value?(o(),d("span",ut,[l(t(a),{icon:"fluent:number-symbol-square-24-filled",class:"w-4 h-4 inline-block mr-1.5"}),e("span",ct,p(I.value),1),r[14]||(r[14]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent transform -skew-x-12 translate-x-full group-hover:translate-x-[-200%] transition-transform duration-1000"},null,-1))])):u.value?(o(),d("span",{key:1,onClick:qe,class:"px-4 py-2 text-sm font-medium text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-gray-800 rounded-full border-2 border-dashed border-gray-300 dark:border-gray-600 hover:border-cyan-400 dark:hover:border-cyan-600 transition-colors cursor-pointer"},[l(t(a),{icon:"fluent:add-circle-24-regular",class:"w-4 h-4 inline-block mr-1"}),r[15]||(r[15]=xe(" เพิ่มรหัสวิชา ",-1))])):g("",!0)])])]),u.value?g("",!0):(o(),d("div",mt,[m.courseMemberOfAuth&&(y.value==="0"||y.value==="pending")?(o(),d("div",{key:0,ref_key:"membershipDropdownRef",ref:ae,class:"relative"},[e("button",{onClick:j(me,["prevent"]),class:"flex items-center gap-2 px-5 py-2.5 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold rounded-lg transition-colors shadow-md"},[l(t(a),{icon:"heroicons:clock",class:"w-5 h-5"}),r[16]||(r[16]=e("span",null,"รอการตอบรับ",-1)),l(t(a),{icon:"heroicons:chevron-down",class:i(["w-4 h-4 transition-transform",{"rotate-180":S.value}])},null,8,["class"])]),S.value?(o(),d("div",bt,[e("button",{onClick:j(ee,["prevent"]),disabled:L.value,class:"w-full px-4 py-3 text-red-600 hover:bg-red-50 rounded-lg font-medium flex items-center gap-2 disabled:opacity-50"},[L.value?(o(),c(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(o(),c(t(a),{key:1,icon:"heroicons:x-circle",class:"w-5 h-5"})),r[17]||(r[17]=e("span",null,"ยกเลิกคำขอ",-1))],8,gt)])):g("",!0)],512)):m.courseMemberOfAuth&&(y.value==="1"||y.value==="active")?(o(),d("button",{key:1,onClick:j(ee,["prevent"]),disabled:L.value,class:"flex items-center gap-2 px-5 py-2.5 bg-emerald-500 hover:bg-red-500 text-white font-semibold rounded-lg transition-colors shadow-md disabled:opacity-50"},[L.value?(o(),c(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(o(),c(t(a),{key:1,icon:"fluent:checkmark-circle-24-filled",class:"w-5 h-5"})),r[18]||(r[18]=e("span",null,"เป็นสมาชิก",-1))],8,ft)):m.courseMemberOfAuth?g("",!0):(o(),d("div",{key:2,ref_key:"dropdownRef",ref:J,class:"relative"},[b.value?(o(),d(G,{key:1},[e("button",{onClick:j(ce,["prevent"]),class:"flex items-center gap-2 px-5 py-2.5 bg-cyan-500 hover:bg-cyan-600 text-white font-semibold rounded-lg transition-colors shadow-md"},[R.value?(o(),c(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(o(),c(t(a),{key:1,icon:"heroicons:user-plus",class:"w-5 h-5"})),r[20]||(r[20]=e("span",null,"สมัครเรียน",-1)),l(t(a),{icon:"heroicons:chevron-down",class:i(["w-4 h-4 transition-transform",{"rotate-180":B.value}])},null,8,["class"])]),B.value?(o(),d("div",yt,[r[22]||(r[22]=e("div",{class:"sticky top-0 bg-gray-50 px-4 py-2 border-b"},[e("p",{class:"text-xs font-medium text-gray-600"},"เลือกกลุ่มที่ต้องการเข้าร่วม")],-1)),!A.value||A.value.length===0?(o(),d("div",ht,[l(t(a),{icon:"heroicons:user-group",class:"w-12 h-12 mx-auto mb-2 opacity-30"}),r[21]||(r[21]=e("p",{class:"text-sm"},"ไม่มีกลุ่มในรายวิชานี้",-1))])):g("",!0),(o(!0),d(G,null,ie(A.value,w=>(o(),d("button",{key:w.id,onClick:j(Be=>Z(w.id),["prevent"]),disabled:R.value,class:"w-full px-4 py-3 text-left hover:bg-cyan-50 flex items-center gap-3 disabled:opacity-50"},[e("div",xt,[l(t(a),{icon:"heroicons:user-group",class:"w-4 h-4 text-cyan-600"})]),e("div",wt,[e("p",kt,p(w.name),1),e("p",_t,p(w.members_count||0)+" สมาชิก",1)])],8,pt))),128))])):g("",!0)],64)):(o(),d("button",{key:0,onClick:r[0]||(r[0]=j(w=>Z(null),["prevent"])),disabled:R.value,class:"flex items-center gap-2 px-5 py-2.5 bg-cyan-500 hover:bg-cyan-600 text-white font-semibold rounded-lg transition-colors shadow-md disabled:opacity-50"},[R.value?(o(),c(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(o(),c(t(a),{key:1,icon:"heroicons:user-plus",class:"w-5 h-5"})),r[19]||(r[19]=e("span",null,"สมัครเรียน",-1))],8,vt))],512))]))]),e("div",Ct,[e("div",$t,[e("div",jt,[r[24]||(r[24]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500/0 via-blue-500/10 to-blue-500/0 transform translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"},null,-1)),e("div",At,[l(t(a),{icon:"heroicons:book-open-solid",class:"w-6 h-6 text-white"})]),e("div",Mt,[e("div",zt,p(re.value),1),r[23]||(r[23]=e("div",{class:"text-xs font-semibold text-blue-700/70 dark:text-blue-300/70 mt-0.5"},"บทเรียน",-1))])]),e("div",Ot,[r[26]||(r[26]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-purple-500/0 via-purple-500/10 to-purple-500/0 transform translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"},null,-1)),e("div",It,[l(t(a),{icon:"heroicons:users-solid",class:"w-6 h-6 text-white"})]),e("div",Rt,[e("div",Lt,p(oe.value||0),1),r[25]||(r[25]=e("div",{class:"text-xs font-semibold text-purple-700/70 dark:text-purple-300/70 mt-0.5"},"ผู้เรียน",-1))])]),e("div",Ut,[r[28]||(r[28]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-green-500/0 via-green-500/10 to-green-500/0 transform translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"},null,-1)),e("div",qt,[l(t(a),{icon:"heroicons:user-group-solid",class:"w-6 h-6 text-white"})]),e("div",Bt,[e("div",St,p(se.value||0),1),r[27]||(r[27]=e("div",{class:"text-xs font-semibold text-green-700/70 dark:text-green-300/70 mt-0.5"},"กลุ่ม",-1))])]),n.value?.rating?(o(),d("div",Tt,[r[29]||(r[29]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-yellow-500/0 via-yellow-500/10 to-yellow-500/0 transform translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"},null,-1)),e("div",Et,[l(t(a),{icon:"fluent:star-24-filled",class:"w-6 h-6 text-white"})]),e("div",Nt,[e("div",Ft,[e("span",Dt,p(typeof n.value.rating=="number"?n.value.rating.toFixed(1):n.value.rating),1),e("div",Gt,[(o(),d(G,null,ie(5,w=>l(t(a),{key:w,icon:w<=Math.round(n.value.rating)?"fluent:star-12-filled":"fluent:star-12-regular",class:"w-3 h-3 text-yellow-500"},null,8,["icon"])),64))])]),e("div",Vt,p(n.value.reviews_count||0)+" รีวิว ",1)])])):g("",!0),C.value?(o(),c(M,{key:1,to:`/academies/${C.value.id}`,class:"group relative flex items-center gap-3 px-5 py-3 rounded-2xl bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 border-2 border-orange-200 dark:border-orange-700 hover:shadow-xl transition-all duration-300 hover:scale-105 overflow-hidden"},{default:k(()=>[r[31]||(r[31]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-orange-500/0 via-orange-500/10 to-orange-500/0 transform translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"},null,-1)),e("div",Pt,[C.value.logo?(o(),d("img",{key:0,src:`${v.$config.public.apiBase}/storage/images/academies/logos/${C.value.logo}`,class:"w-full h-full object-cover"},null,8,Wt)):(o(),c(t(a),{key:1,icon:"heroicons:academic-cap-solid",class:"w-6 h-6 text-white"}))]),e("div",Ht,[e("div",Kt,p(C.value.name),1),r[30]||(r[30]=e("div",{class:"text-xs font-semibold text-orange-600/70 dark:text-orange-300/70"},"สถาบัน",-1))])]),_:1},8,["to"])):g("",!0)]),u.value?g("",!0):(o(),d("div",Xt,[m.courseMemberOfAuth&&(y.value==="0"||y.value==="pending")?(o(),d("div",Jt,[e("button",{onClick:j(me,["prevent"]),class:"w-full flex items-center justify-between gap-2 px-5 py-2.5 bg-yellow-500 active:bg-yellow-600 text-white font-semibold rounded-lg transition-colors shadow-md"},[e("span",Qt,[l(t(a),{icon:"heroicons:clock",class:"w-5 h-5"}),r[32]||(r[32]=e("span",null,"รอการตอบรับ",-1))]),l(t(a),{icon:"heroicons:chevron-down",class:i(["w-4 h-4 transition-transform",{"rotate-180":S.value}])},null,8,["class"])]),S.value?(o(),d("div",Yt,[e("button",{onClick:j(ee,["prevent"]),disabled:L.value,class:"w-full px-4 py-3 text-red-600 active:bg-red-50 rounded-lg font-medium flex items-center justify-center gap-2 disabled:opacity-50"},[L.value?(o(),c(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(o(),c(t(a),{key:1,icon:"heroicons:x-circle",class:"w-5 h-5"})),r[33]||(r[33]=e("span",null,"ยกเลิกคำขอ",-1))],8,Zt)])):g("",!0)])):m.courseMemberOfAuth&&(y.value==="1"||y.value==="active")?(o(),d("button",{key:1,onClick:j(ee,["prevent"]),disabled:L.value,class:"w-56 flex items-center justify-center gap-2 px-5 py-2.5 bg-yellow-300 active:bg-red-500 active:text-white text-gray-700 font-semibold rounded-lg transition-all shadow-md disabled:opacity-50"},[L.value?(o(),c(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(o(),c(t(a),{key:1,icon:"majesticons:door-exit-line",class:"w-5 h-5"})),r[34]||(r[34]=e("span",null,"ออกจากสมาชิก",-1))],8,er)):m.courseMemberOfAuth?g("",!0):(o(),d("div",tr,[b.value?(o(),d(G,{key:1},[e("button",{onClick:j(ce,["prevent"]),class:"w-full flex items-center justify-between gap-2 px-5 py-2.5 bg-cyan-500 active:bg-cyan-600 text-white font-semibold rounded-lg transition-colors shadow-md"},[e("span",or,[R.value?(o(),c(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(o(),c(t(a),{key:1,icon:"heroicons:user-plus",class:"w-5 h-5"})),r[36]||(r[36]=e("span",null,"สมัครเรียน",-1))]),l(t(a),{icon:"heroicons:chevron-down",class:i(["w-4 h-4 transition-transform",{"rotate-180":B.value}])},null,8,["class"])]),B.value?(o(),d("div",sr,[r[38]||(r[38]=e("div",{class:"sticky top-0 bg-gray-50 px-4 py-2 border-b"},[e("p",{class:"text-xs font-medium text-gray-600"},"เลือกกลุ่มที่ต้องการเข้าร่วม")],-1)),!A.value||A.value.length===0?(o(),d("div",ar,[l(t(a),{icon:"heroicons:user-group",class:"w-12 h-12 mx-auto mb-2 opacity-30"}),r[37]||(r[37]=e("p",{class:"text-sm"},"ไม่มีกลุ่มในรายวิชานี้",-1))])):g("",!0),(o(!0),d(G,null,ie(A.value,w=>(o(),d("button",{key:w.id,onClick:j(Be=>Z(w.id),["prevent"]),disabled:R.value,class:"w-full px-4 py-3 text-left active:bg-cyan-50 flex items-center gap-3 border-b last:border-b-0 disabled:opacity-50"},[e("div",lr,[l(t(a),{icon:"heroicons:user-group",class:"w-4 h-4 text-cyan-600"})]),e("div",ir,[e("p",dr,p(w.name),1),e("p",ur,p(w.members_count||0)+" สมาชิก",1)])],8,nr))),128))])):g("",!0)],64)):(o(),d("button",{key:0,onClick:r[1]||(r[1]=j(w=>Z(null),["prevent"])),disabled:R.value,class:"w-full flex items-center justify-center gap-2 px-5 py-2.5 bg-cyan-500 active:bg-cyan-600 text-white font-semibold rounded-lg transition-colors shadow-md disabled:opacity-50"},[R.value?(o(),c(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(o(),c(t(a),{key:1,icon:"heroicons:user-plus",class:"w-5 h-5"})),r[35]||(r[35]=e("span",null,"สมัครเรียน",-1))],8,rr))]))]))])]),l(D,{show:ne.value,onClose:le,"max-width":"2xl"},{title:k(()=>[e("div",cr,[e("div",mr,[l(t(a),{icon:"fluent:edit-24-filled",class:"w-6 h-6 text-white"})]),r[39]||(r[39]=e("div",null,[e("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"},"แก้ไขข้อมูลรายวิชา"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"อัพเดทชื่อและรหัสวิชา")],-1))])]),content:k(()=>[e("div",br,[e("div",gr,[e("label",fr,[l(t(a),{icon:"heroicons:book-open-solid",class:"w-5 h-5 text-blue-600 dark:text-blue-400"}),r[40]||(r[40]=e("span",null,"ชื่อรายวิชา",-1)),r[41]||(r[41]=e("span",{class:"text-red-500"},"*",-1))]),fe(e("textarea",{"onUpdate:modelValue":r[2]||(r[2]=w=>T.value=w),rows:"3",placeholder:"กรอกชื่อรายวิชา (สามารถใส่ชื่อยาวได้)",class:i(["w-full px-4 py-3 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl font-medium text-base focus:outline-none focus:ring-4 focus:ring-blue-500/50 border-2 border-gray-200 dark:border-gray-700 hover:border-blue-400 dark:hover:border-blue-600 transition-all resize-none",{"border-red-500 focus:ring-red-500/50":!T.value.trim()}])},null,2),[[ve,T.value]]),e("p",vr,[l(t(a),{icon:"heroicons:information-circle",class:"w-4 h-4"}),e("span",null,"ตัวอักษร: "+p(T.value.length)+" / 500",1)])]),e("div",yr,[e("label",hr,[l(t(a),{icon:"fluent:number-symbol-square-24-filled",class:"w-5 h-5 text-cyan-600 dark:text-cyan-400"}),r[42]||(r[42]=e("span",null,"รหัสวิชา",-1)),r[43]||(r[43]=e("span",{class:"text-gray-400 text-xs"},"(ไม่บังคับ)",-1))]),fe(e("input",{"onUpdate:modelValue":r[3]||(r[3]=w=>N.value=w),type:"text",placeholder:"เช่น CS101, MATH201",maxlength:"50",class:"w-full px-4 py-3 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl font-medium text-base focus:outline-none focus:ring-4 focus:ring-cyan-500/50 border-2 border-gray-200 dark:border-gray-700 hover:border-cyan-400 dark:hover:border-cyan-600 transition-all"},null,512),[[ve,N.value]]),e("p",pr,[l(t(a),{icon:"heroicons:light-bulb",class:"w-4 h-4"}),r[44]||(r[44]=e("span",null,"รหัสวิชาจะแสดงเป็น badge ที่สวยงาม",-1))])]),e("div",xr,[e("p",wr,[l(t(a),{icon:"heroicons:eye",class:"w-4 h-4"}),r[45]||(r[45]=e("span",null,"ตัวอย่างการแสดงผล:",-1))]),e("div",kr,[e("div",_r,[e("span",Cr,p(T.value||"ชื่อรายวิชา"),1)]),N.value.trim()?(o(),d("div",$r,[e("span",jr,p(N.value),1)])):g("",!0)])])])]),footer:k(()=>[e("div",Ar,[e("button",{onClick:le,disabled:F.value,class:"px-6 py-2.5 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-semibold rounded-xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"}," ยกเลิก ",8,Mr),e("button",{onClick:Ie,disabled:!T.value.trim()||F.value,class:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-bold rounded-xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl"},[F.value?(o(),c(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(o(),c(t(a),{key:1,icon:"fluent:save-24-filled",class:"w-5 h-5"})),e("span",null,p(F.value?"กำลังบันทึก...":"บันทึกการแก้ไข"),1)],8,zr)])]),_:1},8,["show"])],64)}}},Ir=ye(Or,[["__scopeId","data-v-f64f411c"]]),Rr={class:"w-full mt-4 overflow-hidden bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700"},Lr={class:"flex flex-row justify-around relative"},Ur={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},qr={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Br={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Sr={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Tr={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Er={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Nr={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Fr={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Dr={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Gr={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Vr={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Pr={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Wr=we({__name:"CourseNavbarTab",props:{courseId:{},isCourseAdmin:{type:Boolean,default:!1},courseMemberOfAuth:{default:null}},setup(m){const z=m,U=ke(),x=de(),q=Ce(),s=_(()=>{const n=U.path;return n.includes("/basic-info")?12:n.includes("/feeds")?11:n.includes("/attendances")?7:n.includes("/lessons")?1:n.includes("/assignments")?2:n.includes("/quizzes")?3:n.includes("/play/groups")?5:n.includes("/members")?4:n.includes("/settings")?8:n.includes("/member-settings")||n.includes("/my-progress")?9:n.includes("/progress")?10:n.includes("/admin")?13:(n.endsWith(`/courses/${z.courseId}`)||n.endsWith(`/courses/${z.courseId}/`),12)});let h=!1;return _e(s,async(n,C)=>{if(!(!z.courseMemberOfAuth?.id||n===C||h)){h=!0;try{await x.post(`/api/courses/${z.courseId}/members/${z.courseMemberOfAuth.id}/set-active-tab`,{tab:n}),q.member&&(q.member.last_accessed_tab=n)}catch(u){console.error("Error saving last accessed tab:",u)}finally{h=!1}}}),(n,C)=>{const u=$e;return o(),d("div",Rr,[e("div",Lr,[l(u,{to:`/courses/${m.courseId}`,class:i(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(s)===12,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(s)!==12}])},{default:k(()=>[e("div",Ur,[l(t(a),{icon:"heroicons:information-circle",class:i(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(s)===12,"hover:text-cyan-400":t(s)!==12}])},null,8,["class"]),e("span",{class:i(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(s)===12}])},"ข้อมูลทั่วไป",2)])]),_:1},8,["to","class"]),l(u,{to:`/courses/${m.courseId}/feeds`,class:i(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(s)===11,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(s)!==11}])},{default:k(()=>[e("div",qr,[l(t(a),{icon:"codicon:feedback",class:i(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(s)===11,"hover:text-cyan-400":t(s)!==11}])},null,8,["class"]),e("span",{class:i(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(s)===11}])},"กระดาน",2)])]),_:1},8,["to","class"]),m.isCourseAdmin||m.courseMemberOfAuth?(o(),c(u,{key:0,to:`/courses/${m.courseId}/attendances`,class:i(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(s)===7,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(s)!==7}])},{default:k(()=>[e("div",Br,[l(t(a),{icon:"tabler:calendar-user",class:i(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(s)===7,"hover:text-cyan-400":t(s)!==7}])},null,8,["class"]),e("span",{class:i(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(s)===7}])},"การเข้าเรียน",2)])]),_:1},8,["to","class"])):g("",!0),l(u,{to:`/courses/${m.courseId}/lessons`,class:i(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(s)===1,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(s)!==1}])},{default:k(()=>[e("div",Sr,[l(t(a),{icon:"icon-park-outline:view-grid-detail",class:i(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(s)===1,"hover:text-cyan-400":t(s)!==1}])},null,8,["class"]),e("span",{class:i(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(s)===1}])},"บทเรียน",2)])]),_:1},8,["to","class"]),l(u,{to:`/courses/${m.courseId}/assignments`,class:i(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(s)===2,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(s)!==2}])},{default:k(()=>[e("div",Tr,[l(t(a),{icon:"material-symbols:assignment-add-outline",class:i(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(s)===2,"hover:text-cyan-400":t(s)!==2}])},null,8,["class"]),e("span",{class:i(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(s)===2}])},"ภาระงาน",2)])]),_:1},8,["to","class"]),m.courseMemberOfAuth||m.isCourseAdmin?(o(),c(u,{key:1,to:`/courses/${m.courseId}/quizzes`,class:i(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(s)===3,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(s)!==3}])},{default:k(()=>[e("div",Er,[l(t(a),{icon:"healthicons:i-exam-qualification-outline",class:i(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(s)===3,"hover:text-cyan-400":t(s)!==3}])},null,8,["class"]),e("span",{class:i(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(s)===3}])},"ทดสอบ",2)])]),_:1},8,["to","class"])):g("",!0),l(u,{to:`/courses/${m.courseId}/groups`,class:i(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(s)===5,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(s)!==5}])},{default:k(()=>[e("div",Nr,[l(t(a),{icon:"heroicons-outline:user-group",class:i(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(s)===5,"hover:text-cyan-400":t(s)!==5}])},null,8,["class"]),e("span",{class:i(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(s)===5}])},"กลุ่ม",2)])]),_:1},8,["to","class"]),m.courseMemberOfAuth!==null?(o(),c(u,{key:2,to:`/courses/${m.courseId}/members`,class:i(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(s)===4,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(s)!==4}])},{default:k(()=>[e("div",Fr,[l(t(a),{icon:"ph:users-four",class:i(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(s)===4,"hover:text-cyan-400":t(s)!==4}])},null,8,["class"]),e("span",{class:i(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(s)===4}])},"สมาชิก",2)])]),_:1},8,["to","class"])):g("",!0),m.isCourseAdmin?(o(),c(u,{key:3,to:`/courses/${m.courseId}/settings`,class:i(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(s)===8,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(s)!==8}])},{default:k(()=>[e("div",Dr,[l(t(a),{icon:"mdi-light:settings",class:i(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(s)===8,"hover:text-cyan-400":t(s)!==8}])},null,8,["class"]),e("span",{class:i(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(s)===8}])},"ตั้งค่า",2)])]),_:1},8,["to","class"])):g("",!0),!m.isCourseAdmin&&m.courseMemberOfAuth?(o(),c(u,{key:4,to:`/courses/${m.courseId}/my-progress`,class:i(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(s)===9,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(s)!==9}])},{default:k(()=>[e("div",Gr,[l(t(a),{icon:"mdi:graph-box-plus-outline",class:i(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(s)===9,"hover:text-cyan-400":t(s)!==9}])},null,8,["class"]),e("span",{class:i(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(s)===9}])},"ผลการเรียน",2)])]),_:1},8,["to","class"])):g("",!0),m.isCourseAdmin?(o(),c(u,{key:5,to:`/courses/${m.courseId}/progress`,class:i(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(s)===10,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(s)!==10}])},{default:k(()=>[e("div",Vr,[l(t(a),{icon:"mdi:graph-box-plus-outline",class:i(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(s)===10,"hover:text-cyan-400":t(s)!==10}])},null,8,["class"]),e("span",{class:i(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(s)===10}])},"ผลการเรียน",2)])]),_:1},8,["to","class"])):g("",!0),m.isCourseAdmin?(o(),c(u,{key:6,to:`/courses/${m.courseId}/admin`,class:i(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(s)===13,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(s)!==13}])},{default:k(()=>[e("div",Pr,[l(t(a),{icon:"eos-icons:admin-outlined",class:i(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(s)===13,"hover:text-cyan-400":t(s)!==13}])},null,8,["class"]),e("span",{class:i(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(s)===13}])},"ผู้ดูแล",2)])]),_:1},8,["to","class"])):g("",!0)])])}}}),Hr=ye(Wr,[["__scopeId","data-v-4fd2103f"]]),Kr={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden animate-pulse"},Xr={key:1,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-12 text-center"},Jr={class:"text-gray-500 dark:text-gray-400 mb-4"},Qr={key:0,class:"mb-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4 flex flex-col md:flex-row items-center justify-between shadow-lg mx-4 mt-4 gap-4"},Yr={class:"flex items-center gap-3"},Zr={class:"text-sm text-yellow-700 dark:text-yellow-300"},eo={class:"font-semibold"},io=we({__name:"[id]",setup(m){const z=ke(),U=de(),x=he(),q=Ve(),s=Ce(),h=f(null),n=f(null),C=f(!1),u=f(null),A=f(!0),O=f(null),$=_(()=>z.params.id),I=async(y=!1)=>{if(!y&&x.isCacheValid&&x.currentCourse?.id==$.value){h.value=x.currentCourse,n.value=x.academy,C.value=x.isCourseAdmin,s.member&&(u.value=s.member),A.value=!1;return}A.value=!0,O.value=null;try{const b=await U.get(`/api/courses/${$.value}/feeds`);b.success&&(h.value=b.course,n.value=b.academy,C.value=b.isCourseAdmin,u.value=b.courseMemberOfAuth,x.setCourse(b.course),x.setAcademy(b.academy),x.setIsCourseAdmin(b.isCourseAdmin),q.setGroups(b.courseGroups||[],$.value),s.setMember(b.courseMemberOfAuth))}catch{O.value="ไม่สามารถโหลดข้อมูลรายวิชาได้"}finally{A.value=!1}},X=y=>{I(!0)},re=()=>{I(!0)};W("course",h),W("academy",n),W("isCourseAdmin",C),W("courseMemberOfAuth",u),W("isLoading",A),W("refreshCourse",I),_e(h,y=>{y?.name&&De({title:`${y.name} - รายวิชา`})}),pe(()=>{I().then(()=>{if((z.path===`/courses/${$.value}`||z.path===`/courses/${$.value}/`)&&u.value){const b=u.value.last_accessed_tab||11,E={1:"lessons",2:"assignments",3:"quizzes",4:"members",5:"groups",7:"attendances",8:"settings",9:"my-progress",10:"progress",11:"feeds",12:"",13:"admin"}[b];[8,10,13].includes(b)&&!C.value?te(`/courses/${$.value}/feeds`):E===""||(E?te(`/courses/${$.value}/${E}`):te(`/courses/${$.value}/feeds`))}})});const oe=async()=>{try{(await U.post(`/api/courses/${$.value}/admins/invitations/${u.value.id}/accept`)).success&&(K.fire({title:"สำเร็จ",text:"คุณได้เข้าร่วมรายวิชาแล้ว",icon:"success"}),I(!0))}catch{K.fire({title:"ผิดพลาด",text:"ไม่สามารถตอบรับได้",icon:"error"})}},se=async()=>{if((await K.fire({title:"ยืนยันการปฏิเสธ?",text:"คุณต้องการปฏิเสธคำเชิญนี้ใช่หรือไม่?",icon:"warning",showCancelButton:!0,confirmButtonText:"ใช่, ปฏิเสธ",cancelButtonText:"ยกเลิก",confirmButtonColor:"#d33"})).isConfirmed)try{(await U.post(`/api/courses/${$.value}/admins/invitations/${u.value.id}/decline`)).success&&(K.fire({title:"ปฏิเสธแล้ว",text:"คุณได้ปฏิเสธคำเชิญเรียบร้อยแล้ว",icon:"success"}),te("/dashboard"))}catch{K.fire({title:"ผิดพลาด",text:"ไม่สามารถปฏิเสธได้",icon:"error"})}};return(y,b)=>{const H=Fe,E=Ne;return o(),c(E,{name:"main"},{hero:k(()=>[t(A)?(o(),d("div",Kr,[...b[1]||(b[1]=[e("div",{class:"h-48 bg-gray-200 dark:bg-gray-700"},null,-1),e("div",{class:"p-6 space-y-4"},[e("div",{class:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-2/3"}),e("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/3"})],-1)])])):t(O)?(o(),d("div",Xr,[l(t(a),{icon:"fluent:error-circle-24-regular",class:"w-20 h-20 text-red-500 mx-auto mb-4"}),b[2]||(b[2]=e("h3",{class:"text-xl font-bold text-gray-900 dark:text-white mb-2"},"เกิดข้อผิดพลาด",-1)),e("p",Jr,p(t(O)),1),e("button",{onClick:b[0]||(b[0]=()=>I(!0)),class:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"}," ลองใหม่ ")])):t(h)?(o(),d(G,{key:2},[l(Ir,{"course-member-of-auth":t(u),onRequestMember:X,onRequestUnmember:re,onRefresh:I},null,8,["course-member-of-auth"]),t(u)&&t(u).status===2?(o(),d("div",Qr,[e("div",Yr,[l(t(a),{icon:"mdi:email-alert",class:"w-8 h-8 text-yellow-600 dark:text-yellow-500"}),e("div",null,[b[4]||(b[4]=e("h3",{class:"font-bold text-yellow-800 dark:text-yellow-200 text-lg"},"คุณได้รับเชิญเข้าร่วมรายวิชานี้",-1)),e("p",Zr,[b[3]||(b[3]=xe("ในฐานะ ",-1)),e("span",eo,p(t(u).role===4?"ผู้ดูแลระบบ (Admin)":"ผู้ช่วยสอน (TA)"),1)])])]),e("div",{class:"flex gap-2 w-full md:w-auto"},[e("button",{onClick:oe,class:"flex-1 md:flex-none px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-bold shadow-sm transition-colors"}," ตอบรับ "),e("button",{onClick:se,class:"flex-1 md:flex-none px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-bold shadow-sm transition-colors"}," ปฏิเสธ ")])])):g("",!0),l(Hr,{"course-id":t($),"is-course-admin":t(C),"course-member-of-auth":t(u)},null,8,["course-id","is-course-admin","course-member-of-auth"])],64)):g("",!0)]),default:k(()=>[t(h)&&!t(A)&&!t(O)?(o(),c(H,{key:0})):g("",!0)]),_:1})}}});export{io as default};
