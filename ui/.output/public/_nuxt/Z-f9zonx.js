import{_ as cs}from"./BP2gnDQ3.js";import{_ as Mt,x as vs,l as Ot,a3 as ft,o as l,g as S,b as v,w as ne,c as r,j as ut,a as e,u as i,I as n,t as k,F as j,k as O,T as P,$ as ue,ai as gs,d as h,e as F,a7 as pt,aj as nt,aa as De,a1 as kt,a4 as ps,r as x,n as C,p as le,a9 as ks,f as fs,aR as hs,ae as ys}from"./Brb_7992.js";import{P as Ft,S as xs}from"./BxjnrTC5.js";import{u as bs}from"./I9g1nx1X.js";import{u as Rt}from"./CaSR6SuD.js";import{I as ms}from"./D1e3wYap.js";import{u as _s}from"./CZYWTWzM.js";import{u as ws}from"./dw-ZgbPA.js";const $s={class:"w-full max-w-2xl mx-4 mb-10 modal-content"},Cs={class:"bg-white dark:bg-vikinger-dark-300 rounded-xl shadow-2xl"},Ps={class:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-vikinger-dark-50/30"},As={class:"p-4 max-h-[70vh] overflow-y-auto"},Bs={class:"flex items-center gap-3 mb-4"},Ss=["src"],Ls={class:"flex-1"},Ds={class:"font-medium text-gray-800 dark:text-white"},js={key:0,class:"mb-4 p-3 bg-gray-50 dark:bg-vikinger-dark-200 rounded-lg"},Ts={class:"space-y-2"},Es=["onClick"],Is={class:"text-sm text-gray-700 dark:text-gray-300"},Ns={class:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-200 dark:border-vikinger-dark-50/30 cursor-pointer"},Fs={key:1,class:"mb-3 flex flex-wrap gap-2"},Us={key:0,class:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 rounded-full text-sm"},Ms={key:1,class:"inline-flex items-center gap-1 px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-full text-sm"},Os=["onClick"],Rs=["rows","onKeydown","disabled"],zs={key:2,class:"mb-4"},Vs={class:"flex flex-wrap gap-2"},qs=["src"],Ks={key:0,class:"absolute top-1 left-1 px-1.5 py-0.5 bg-green-500 text-white text-xs rounded"},Gs=["onClick"],Ws={class:"text-xs text-gray-500 mt-1"},Qs={key:3,class:"mb-4 p-3 bg-gray-50 dark:bg-vikinger-dark-200 rounded-lg"},Ys={class:"flex items-center justify-between mb-3"},Hs={class:"flex flex-wrap gap-2"},Js=["onClick"],Xs={key:4,class:"mb-4 p-3 bg-gray-50 dark:bg-vikinger-dark-200 rounded-lg max-h-48 overflow-y-auto"},Zs={class:"flex items-center justify-between mb-3"},el={class:"text-xs text-gray-500 uppercase mb-2"},tl={class:"grid grid-cols-5 gap-2"},sl=["onClick"],ll={class:"text-xl"},al={class:"text-xs text-gray-600 dark:text-gray-400 truncate w-full text-center"},rl={key:5,class:"mb-4 p-3 bg-gray-50 dark:bg-vikinger-dark-200 rounded-lg max-h-48 overflow-y-auto"},il={class:"flex items-center justify-between mb-3"},ol={class:"text-xs text-gray-500 uppercase mb-2"},nl={class:"grid grid-cols-3 gap-2"},ul=["onClick"],dl={class:"text-lg"},cl={class:"text-xs text-gray-600 dark:text-gray-400 truncate"},vl={key:0,class:"mt-3"},gl=["placeholder"],pl={key:6,class:"mb-4 p-3 bg-gray-50 dark:bg-vikinger-dark-200 rounded-lg"},kl={class:"flex items-center justify-between mb-3"},fl={class:"flex items-center gap-2"},hl={key:7,class:"mb-4 p-3 bg-gray-50 dark:bg-vikinger-dark-200 rounded-lg"},yl={class:"flex items-center justify-between mb-3"},xl={key:0,class:"flex flex-wrap gap-2 mb-3"},bl=["src"],ml={class:"text-xs text-blue-700 dark:text-blue-300"},_l=["onClick"],wl={class:"relative"},$l={key:0,class:"absolute right-2 top-1/2 -translate-y-1/2"},Cl={key:1,class:"mt-2 p-4 text-center"},Pl={key:2,class:"mt-2 space-y-1 max-h-40 overflow-y-auto border border-gray-200 dark:border-vikinger-dark-50/30 rounded-lg bg-white dark:bg-vikinger-dark-100"},Al=["onClick","disabled"],Bl=["src"],Sl={class:"flex-1 text-left"},Ll={class:"text-sm text-gray-800 dark:text-white block"},Dl={key:0,class:"text-xs text-gray-500"},jl={key:3,class:"mt-2 p-3 text-center text-sm text-gray-500 dark:text-gray-400 bg-white dark:bg-vikinger-dark-100 rounded-lg border border-gray-200 dark:border-vikinger-dark-50/30"},Tl={key:4,class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},El={class:"flex flex-wrap gap-2 border-t border-gray-200 dark:border-vikinger-dark-50/30 pt-4"},Il=["disabled"],Nl=["disabled"],Fl=["disabled"],Ul=["disabled"],Ml=["disabled"],Ol=["disabled"],Rl={class:"p-4 border-t border-gray-200 dark:border-vikinger-dark-50/30"},zl=["disabled"],Vl={__name:"EditPostModal",props:{show:{type:Boolean,default:!1},post:{type:Object,default:null}},emits:["close","post-updated"],setup($,{emit:He}){const f=$,ee=He,{$apiFetch:q}=vs(),b=Ot(),Y=Rt(),{feelings:A,activityTypes:H,backgrounds:je,fetchPostOptions:p,updatePost:ke}=bs(),_=x(""),D=x(!1),N=x([]),be=x([]),me=x([]),Je=x(null),E=C(()=>typeof window>"u"?[]:N.value.map(u=>({file:u,url:URL.createObjectURL(u),isNew:!0}))),m=C(()=>[...be.value.map(o=>({id:o.id,url:o.url||o.full_url,isNew:!1})),...E.value]),B=x(3),G=x(""),z=x(null),U=x(null),W=x(""),I=x(null),R=x([]),_e=x(!1),de=x(!1),ce=x(!1),we=x(!1),ve=x(!1),J=x(!1),ge=x(!1),te=x(""),pe=x([]),$e=x(!1),Te=x(!1);ft(()=>f.show,u=>{u&&f.post&&(p(),Xe())}),ft(()=>f.post,u=>{f.show&&u&&Xe()},{deep:!0});const Xe=()=>{const u=f.post;if(!u)return;_.value=u.content||"",B.value=u.privacy_settings??3,G.value=u.location_name||"",_e.value=u.comments_disabled||!1;const o=u.postImages||u.post_images||u.images||[];be.value=o.map(g=>{let L=g.url||g.full_url||g.thumbnail||"";return L&&!L.startsWith("http")&&(L=`${le().public.apiBase}/storage/${L}`),{id:g.id,url:L}}).filter(g=>g.url),me.value=[],N.value=[],u.feeling?z.value={name:u.feeling,icon:u.feeling_icon||"ðŸ˜Š",name_th:u.feeling}:z.value=null,u.activity_type?(U.value={name:u.activity_type,icon:"ðŸŽ¯",name_th:u.activity_type},W.value=u.activity_text||""):(U.value=null,W.value=""),u.background_color||u.background_gradient?I.value={background_color:u.background_color,background_gradient:u.background_gradient,text_color:u.text_color||"#ffffff"}:I.value=null,R.value=u.tagged_users||[],de.value=!1,ce.value=!1,we.value=!1,ve.value=!!G.value,J.value=!1,ge.value=!1},Ee=[{value:3,label:"à¸ªà¸²à¸˜à¸²à¸£à¸“à¸°",icon:"mdi:earth",color:"text-blue-500"},{value:2,label:"à¹€à¸žà¸·à¹ˆà¸­à¸™",icon:"mdi:account-group",color:"text-green-500"},{value:1,label:"à¹€à¸‰à¸žà¸²à¸°à¸‰à¸±à¸™",icon:"mdi:lock",color:"text-gray-500"}],Ie=C(()=>Ee.find(u=>u.value===B.value)||Ee[0]),Ne=C(()=>{if(!I.value)return{};const u=I.value,o={};return u.background_gradient?o.background=u.background_gradient:u.background_color&&(o.backgroundColor=u.background_color),u.text_color&&(o.color=u.text_color),o}),Ze=C(()=>{const u=[];if(z.value&&u.push(`${z.value.icon} à¸£à¸¹à¹‰à¸ªà¸¶à¸${z.value.name_th||z.value.name}`),U.value){let o=`${U.value.icon} à¸à¸³à¸¥à¸±à¸‡${U.value.name_th||U.value.name}`;W.value&&(o+=` ${W.value}`),u.push(o)}return u.join(" â€” ")}),ht=C(()=>{const u={};return A.value.forEach(o=>{u[o.category]||(u[o.category]=[]),u[o.category].push(o)}),u}),Q=C(()=>{const u={};return H.value.forEach(o=>{u[o.category]||(u[o.category]=[]),u[o.category].push(o)}),u}),et=()=>{ee("close")},Fe=async()=>{if(!(!_.value.trim()&&m.value.length===0)&&!D.value){D.value=!0;try{const u={images:N.value,privacy_settings:B.value,comments_disabled:_e.value,delete_images:me.value};G.value&&(u.location_name=G.value);const o=f.post;z.value?(u.feeling=z.value.name,u.feeling_icon=z.value.icon):o?.feeling&&(u.remove_feeling=!0),U.value&&(u.activity_type=U.value.name,W.value&&(u.activity_text=W.value)),I.value&&m.value.length===0?(u.background_color=I.value.background_color,u.background_gradient=I.value.background_gradient,u.text_color=I.value.text_color):(o?.background_color||o?.background_gradient)&&(u.remove_background=!0),R.value.length>0&&(u.tagged_users=R.value.map(L=>L.id));const g=await ke(f.post.id,_.value,u);g.success?(ee("post-updated",g.post),et(),Y.toast("à¹à¸à¹‰à¹„à¸‚à¹‚à¸žà¸ªà¸•à¹Œà¸ªà¸³à¹€à¸£à¹‡à¸ˆ!","success")):Y.error(g.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸à¹‰à¹„à¸‚à¹‚à¸žà¸ªà¸•à¹Œà¹„à¸”à¹‰")}catch(u){console.error("Error updating post:",u);let o="à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸” à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡";u?.data?.message&&(o=u.data.message),Y.error(o)}finally{D.value=!1}}},tt=u=>{const o=Array.from(u.target.files);m.value.length+o.length;const g=20-m.value.length;N.value=[...N.value,...o.slice(0,g)],o.length>0&&(I.value=null),u.target.value=""},fe=u=>{const o=m.value[u];if(o.isNew){const g=N.value.findIndex(L=>URL.createObjectURL(L)===o.url);g!==-1&&N.value.splice(g,1)}else me.value.push(o.id),be.value=be.value.filter(g=>g.id!==o.id)},Ce=()=>{Je.value?.click()},Ue=u=>{z.value=u,de.value=!1},ae=u=>{U.value=u,ce.value=!1},Pe=u=>{I.value?.id===u.id?I.value=null:(I.value=u,N.value=[],be.value=[],me.value=f.post?.postImages?.map(o=>o.id)||[])};let se=null;const re=async()=>{if(!te.value.trim()){pe.value=[],Te.value=!1;return}se&&clearTimeout(se),se=setTimeout(async()=>{$e.value=!0;try{const u=await q(`/api/friends/search?q=${encodeURIComponent(te.value)}`);u.success&&(pe.value=u.data||[])}catch(u){console.error("Error searching friends:",u),pe.value=[]}finally{$e.value=!1,Te.value=!0}},300)},Me=u=>{R.value.find(o=>o.id===u.id)||R.value.push(u),te.value="",pe.value=[]},Oe=u=>{R.value=R.value.filter(o=>o.id!==u)};return(u,o)=>(l(),S(ps,{to:"body"},[v(kt,{name:"modal"},{default:ne(()=>[$.show?(l(),r("div",{key:0,class:"fixed inset-0 bg-black/50 z-50 flex items-start justify-center pt-10 md:pt-16 overflow-y-auto backdrop-blur-sm",onClick:ut(et,["self"])},[e("div",$s,[e("div",Cs,[e("div",Ps,[o[19]||(o[19]=e("h2",{class:"text-xl font-bold text-gray-800 dark:text-white"},"à¹à¸à¹‰à¹„à¸‚à¹‚à¸žà¸ªà¸•à¹Œ",-1)),e("button",{onClick:et,class:"p-2 hover:bg-gray-100 dark:hover:bg-vikinger-dark-200 rounded-full"},[v(i(n),{icon:"mdi:close",class:"w-6 h-6 text-gray-500"})])]),e("div",As,[e("input",{type:"file",ref_key:"imageInput",ref:Je,class:"hidden",accept:"image/*",multiple:"",onChange:tt},null,544),e("div",Bs,[e("img",{src:i(b).user?.avatar||"https://i.pravatar.cc/40",class:"w-10 h-10 rounded-full object-cover"},null,8,Ss),e("div",Ls,[e("div",Ds,k(i(b).user?.name),1),e("button",{onClick:o[0]||(o[0]=g=>ge.value=!ge.value),class:"flex items-center gap-1 text-xs text-gray-500 hover:text-gray-700"},[v(i(n),{icon:Ie.value.icon,class:"w-3 h-3"},null,8,["icon"]),e("span",null,k(Ie.value.label),1),v(i(n),{icon:"mdi:chevron-down",class:"w-3 h-3"})])])]),ge.value?(l(),r("div",js,[e("div",Ts,[(l(),r(j,null,O(Ee,g=>e("button",{key:g.value,onClick:L=>{B.value=g.value,ge.value=!1},class:P(["w-full flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white dark:hover:bg-vikinger-dark-100",{"bg-white dark:bg-vikinger-dark-100":B.value===g.value}])},[v(i(n),{icon:g.icon,class:P(["w-5 h-5",g.color])},null,8,["icon","class"]),e("span",Is,k(g.label),1)],10,Es)),64))]),e("label",Ns,[ue(e("input",{type:"checkbox","onUpdate:modelValue":o[1]||(o[1]=g=>_e.value=g),class:"rounded text-vikinger-purple"},null,512),[[gs,_e.value]]),o[20]||(o[20]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"à¸›à¸´à¸”à¸à¸²à¸£à¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™",-1))])])):h("",!0),z.value||U.value||G.value||R.value.length>0?(l(),r("div",Fs,[Ze.value?(l(),r("span",Us,[F(k(Ze.value)+" ",1),e("button",{onClick:o[2]||(o[2]=g=>{z.value=null,U.value=null,W.value=""}),class:"hover:text-red-500"},[v(i(n),{icon:"mdi:close",class:"w-3 h-3"})])])):h("",!0),G.value?(l(),r("span",Ms,[v(i(n),{icon:"mdi:map-marker",class:"w-3 h-3"}),F(" "+k(G.value)+" ",1),e("button",{onClick:o[3]||(o[3]=g=>{G.value="",ve.value=!1}),class:"hover:text-red-500"},[v(i(n),{icon:"mdi:close",class:"w-3 h-3"})])])):h("",!0),(l(!0),r(j,null,O(R.value,g=>(l(),r("span",{key:g.id,class:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm"},[F(k(g.name)+" ",1),e("button",{onClick:L=>Oe(g.id),class:"hover:text-red-500"},[v(i(n),{icon:"mdi:close",class:"w-3 h-3"})],8,Os)]))),128))])):h("",!0),e("div",{class:P(["rounded-lg mb-4 min-h-[120px] p-4 transition-all",I.value?"":"bg-gray-50 dark:bg-vikinger-dark-200"]),style:pt(Ne.value)},[ue(e("textarea",{"onUpdate:modelValue":o[4]||(o[4]=g=>_.value=g),placeholder:"à¸„à¸¸à¸“à¸à¸³à¸¥à¸±à¸‡à¸„à¸´à¸”à¸­à¸°à¹„à¸£à¸­à¸¢à¸¹à¹ˆ?",rows:I.value?5:3,class:P(["w-full bg-transparent border-none outline-none resize-none placeholder-gray-400",I.value?"text-center text-lg font-medium":"text-gray-800 dark:text-white"]),style:pt(I.value?{color:I.value.text_color}:{}),onKeydown:nt(ut(Fe,["ctrl"]),["enter"]),disabled:D.value},null,46,Rs),[[De,_.value]])],6),m.value.length>0?(l(),r("div",zs,[e("div",Vs,[(l(!0),r(j,null,O(m.value,(g,L)=>(l(),r("div",{key:g.id||g.url,class:"relative group"},[e("img",{src:g.url,class:"w-32 h-32 object-cover rounded-lg border border-gray-200 dark:border-vikinger-dark-50/30"},null,8,qs),g.isNew?(l(),r("div",Ks,"à¹ƒà¸«à¸¡à¹ˆ")):h("",!0),e("button",{onClick:M=>fe(L),class:"absolute -top-1 -right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center shadow-sm md:opacity-0 md:group-hover:opacity-100 transition-opacity"},[v(i(n),{icon:"mdi:close",class:"w-4 h-4"})],8,Gs)]))),128)),m.value.length<20?(l(),r("button",{key:0,onClick:Ce,class:"w-32 h-32 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg flex items-center justify-center hover:border-vikinger-purple hover:bg-vikinger-purple/5 transition-all"},[v(i(n),{icon:"mdi:plus",class:"w-8 h-8 text-gray-400"})])):h("",!0)]),e("p",Ws,k(m.value.length)+"/20 à¸£à¸¹à¸›",1)])):h("",!0),we.value&&m.value.length===0?(l(),r("div",Qs,[e("div",Ys,[o[21]||(o[21]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"à¹€à¸¥à¸·à¸­à¸à¸žà¸·à¹‰à¸™à¸«à¸¥à¸±à¸‡",-1)),e("button",{onClick:o[5]||(o[5]=g=>we.value=!1)},[v(i(n),{icon:"mdi:close",class:"w-5 h-5 text-gray-500"})])]),e("div",Hs,[e("button",{onClick:o[6]||(o[6]=g=>I.value=null),class:P(["w-10 h-10 rounded-lg border-2 flex items-center justify-center",I.value?"border-gray-300":"border-vikinger-purple"])},[v(i(n),{icon:"mdi:format-clear",class:"w-5 h-5 text-gray-500"})],2),(l(!0),r(j,null,O(i(je),g=>(l(),r("button",{key:g.id,onClick:L=>Pe(g),class:P(["w-10 h-10 rounded-lg border-2 transition-all",I.value?.id===g.id?"border-vikinger-purple scale-110":"border-transparent"]),style:pt({background:g.background_gradient||g.background_color})},null,14,Js))),128))])])):h("",!0),de.value?(l(),r("div",Xs,[e("div",Zs,[o[22]||(o[22]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"à¸„à¸¸à¸“à¸£à¸¹à¹‰à¸ªà¸¶à¸à¸­à¸¢à¹ˆà¸²à¸‡à¹„à¸£?",-1)),e("button",{onClick:o[7]||(o[7]=g=>de.value=!1)},[v(i(n),{icon:"mdi:close",class:"w-5 h-5 text-gray-500"})])]),(l(!0),r(j,null,O(ht.value,(g,L)=>(l(),r("div",{key:L,class:"mb-3"},[e("div",el,k(L),1),e("div",tl,[(l(!0),r(j,null,O(g,M=>(l(),r("button",{key:M.id,onClick:st=>Ue(M),class:P(["flex flex-col items-center p-2 rounded-lg hover:bg-white dark:hover:bg-vikinger-dark-100",{"bg-vikinger-purple/10 ring-1 ring-vikinger-purple":z.value?.id===M.id}])},[e("span",ll,k(M.icon),1),e("span",al,k(M.name_th||M.name),1)],10,sl))),128))])]))),128))])):h("",!0),ce.value?(l(),r("div",rl,[e("div",il,[o[23]||(o[23]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"à¸„à¸¸à¸“à¸à¸³à¸¥à¸±à¸‡à¸—à¸³à¸­à¸°à¹„à¸£?",-1)),e("button",{onClick:o[8]||(o[8]=g=>ce.value=!1)},[v(i(n),{icon:"mdi:close",class:"w-5 h-5 text-gray-500"})])]),(l(!0),r(j,null,O(Q.value,(g,L)=>(l(),r("div",{key:L,class:"mb-3"},[e("div",ol,k(L),1),e("div",nl,[(l(!0),r(j,null,O(g,M=>(l(),r("button",{key:M.id,onClick:st=>ae(M),class:P(["flex items-center gap-2 p-2 rounded-lg hover:bg-white dark:hover:bg-vikinger-dark-100 text-left",{"bg-vikinger-purple/10 ring-1 ring-vikinger-purple":U.value?.id===M.id}])},[e("span",dl,k(M.icon),1),e("span",cl,k(M.name_th||M.name),1)],10,ul))),128))])]))),128)),U.value?(l(),r("div",vl,[ue(e("input",{"onUpdate:modelValue":o[9]||(o[9]=g=>W.value=g),type:"text",placeholder:`${U.value.name_th||U.value.name}...`,class:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-vikinger-dark-50/30 bg-white dark:bg-vikinger-dark-100 text-gray-800 dark:text-white text-sm"},null,8,gl),[[De,W.value]])])):h("",!0)])):h("",!0),ve.value?(l(),r("div",pl,[e("div",kl,[o[24]||(o[24]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"à¹€à¸žà¸´à¹ˆà¸¡à¸ªà¸–à¸²à¸™à¸—à¸µà¹ˆ",-1)),e("button",{onClick:o[10]||(o[10]=g=>ve.value=!1)},[v(i(n),{icon:"mdi:close",class:"w-5 h-5 text-gray-500"})])]),e("div",fl,[v(i(n),{icon:"mdi:map-marker",class:"w-5 h-5 text-red-500"}),ue(e("input",{"onUpdate:modelValue":o[11]||(o[11]=g=>G.value=g),type:"text",placeholder:"à¸„à¹‰à¸™à¸«à¸²à¸«à¸£à¸·à¸­à¸žà¸´à¸¡à¸žà¹Œà¸ªà¸–à¸²à¸™à¸—à¸µà¹ˆ...",class:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-vikinger-dark-50/30 bg-white dark:bg-vikinger-dark-100 text-gray-800 dark:text-white text-sm"},null,512),[[De,G.value]])])])):h("",!0),J.value?(l(),r("div",hl,[e("div",yl,[o[25]||(o[25]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"à¹à¸—à¹‡à¸à¹€à¸žà¸·à¹ˆà¸­à¸™",-1)),e("button",{onClick:o[12]||(o[12]=g=>J.value=!1)},[v(i(n),{icon:"mdi:close",class:"w-5 h-5 text-gray-500"})])]),R.value.length>0?(l(),r("div",xl,[(l(!0),r(j,null,O(R.value,g=>(l(),r("div",{key:g.id,class:"flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 rounded-full"},[e("img",{src:g.avatar||"https://i.pravatar.cc/40",class:"w-5 h-5 rounded-full"},null,8,bl),e("span",ml,k(g.name),1),e("button",{onClick:L=>Oe(g.id),class:"ml-1 text-blue-500 hover:text-red-500"},[v(i(n),{icon:"mdi:close",class:"w-3 h-3"})],8,_l)]))),128))])):h("",!0),e("div",wl,[v(i(n),{icon:"mdi:magnify",class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),ue(e("input",{"onUpdate:modelValue":o[13]||(o[13]=g=>te.value=g),onInput:re,type:"text",placeholder:"à¸žà¸´à¸¡à¸žà¹Œà¸Šà¸·à¹ˆà¸­à¹€à¸žà¸·à¹ˆà¸­à¸™à¹€à¸žà¸·à¹ˆà¸­à¸„à¹‰à¸™à¸«à¸²...",class:"w-full pl-9 pr-10 py-2 rounded-lg border border-gray-200 dark:border-vikinger-dark-50/30 bg-white dark:bg-vikinger-dark-100 text-gray-800 dark:text-white text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 transition-all"},null,544),[[De,te.value]]),$e.value?(l(),r("div",$l,[...o[26]||(o[26]=[e("div",{class:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"},null,-1)])])):h("",!0)]),$e.value?(l(),r("div",Cl,[...o[27]||(o[27]=[e("div",{class:"inline-flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400"},[e("div",{class:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),e("span",null,"à¸à¸³à¸¥à¸±à¸‡à¸„à¹‰à¸™à¸«à¸²...")],-1)])])):h("",!0),pe.value.length>0?(l(),r("div",Pl,[(l(!0),r(j,null,O(pe.value,g=>(l(),r("button",{key:g.id,onClick:L=>Me(g),class:P(["w-full flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-vikinger-dark-200 transition-colors",{"opacity-50 cursor-not-allowed":R.value.find(L=>L.id===g.id)}]),disabled:!!R.value.find(L=>L.id===g.id)},[e("img",{src:g.avatar||"https://i.pravatar.cc/40",class:"w-8 h-8 rounded-full"},null,8,Bl),e("div",Sl,[e("span",Ll,k(g.name),1),g.username?(l(),r("span",Dl,"@"+k(g.username),1)):h("",!0)]),R.value.find(L=>L.id===g.id)?(l(),S(i(n),{key:0,icon:"mdi:check",class:"w-5 h-5 text-green-500"})):(l(),S(i(n),{key:1,icon:"mdi:plus",class:"w-5 h-5 text-blue-500"}))],10,Al))),128))])):Te.value&&te.value&&!$e.value?(l(),r("div",jl,[v(i(n),{icon:"mdi:account-search",class:"w-8 h-8 mx-auto mb-1 text-gray-400"}),e("p",null,'à¹„à¸¡à¹ˆà¸žà¸šà¹€à¸žà¸·à¹ˆà¸­à¸™à¸—à¸µà¹ˆà¸Šà¸·à¹ˆà¸­ "'+k(te.value)+'"',1)])):h("",!0),te.value?h("",!0):(l(),r("p",Tl,"à¸žà¸´à¸¡à¸žà¹Œà¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 1 à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£à¹€à¸žà¸·à¹ˆà¸­à¸„à¹‰à¸™à¸«à¸²"))])):h("",!0),e("div",El,[e("button",{onClick:Ce,class:"flex items-center gap-2 px-3 py-2 rounded-lg bg-white dark:bg-vikinger-dark-200 border border-gray-200 dark:border-vikinger-dark-50/30 hover:border-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 transition-all",disabled:D.value},[v(i(n),{icon:"mdi:image-multiple",class:"w-5 h-5 text-green-500"}),o[28]||(o[28]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"à¸£à¸¹à¸›à¸ à¸²à¸ž",-1))],8,Il),e("button",{onClick:o[14]||(o[14]=g=>{de.value=!de.value,ce.value=!1}),class:P(["flex items-center gap-2 px-3 py-2 rounded-lg bg-white dark:bg-vikinger-dark-200 border border-gray-200 dark:border-vikinger-dark-50/30 hover:border-yellow-400 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-all",{"border-yellow-400 bg-yellow-50 dark:bg-yellow-900/20":z.value}]),disabled:D.value},[v(i(n),{icon:"mdi:emoticon-happy",class:"w-5 h-5 text-yellow-500"}),o[29]||(o[29]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"à¸„à¸§à¸²à¸¡à¸£à¸¹à¹‰à¸ªà¸¶à¸",-1))],10,Nl),e("button",{onClick:o[15]||(o[15]=g=>{ce.value=!ce.value,de.value=!1}),class:P(["flex items-center gap-2 px-3 py-2 rounded-lg bg-white dark:bg-vikinger-dark-200 border border-gray-200 dark:border-vikinger-dark-50/30 hover:border-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-all",{"border-orange-400 bg-orange-50 dark:bg-orange-900/20":U.value}]),disabled:D.value},[v(i(n),{icon:"mdi:run",class:"w-5 h-5 text-orange-500"}),o[30]||(o[30]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"à¸à¸´à¸ˆà¸à¸£à¸£à¸¡",-1))],10,Fl),e("button",{onClick:o[16]||(o[16]=g=>ve.value=!ve.value),class:P(["flex items-center gap-2 px-3 py-2 rounded-lg bg-white dark:bg-vikinger-dark-200 border border-gray-200 dark:border-vikinger-dark-50/30 hover:border-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",{"border-red-400 bg-red-50 dark:bg-red-900/20":G.value}]),disabled:D.value},[v(i(n),{icon:"mdi:map-marker",class:"w-5 h-5 text-red-500"}),o[31]||(o[31]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"à¸ªà¸–à¸²à¸™à¸—à¸µà¹ˆ",-1))],10,Ul),e("button",{onClick:o[17]||(o[17]=g=>J.value=!J.value),class:P(["flex items-center gap-2 px-3 py-2 rounded-lg bg-white dark:bg-vikinger-dark-200 border border-gray-200 dark:border-vikinger-dark-50/30 hover:border-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all",{"border-blue-400 bg-blue-50 dark:bg-blue-900/20":R.value.length>0}]),disabled:D.value},[v(i(n),{icon:"mdi:account-multiple-plus",class:"w-5 h-5 text-blue-500"}),o[32]||(o[32]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"à¹à¸—à¹‡à¸à¹€à¸žà¸·à¹ˆà¸­à¸™",-1))],10,Ml),m.value.length===0?(l(),r("button",{key:0,onClick:o[18]||(o[18]=g=>we.value=!we.value),class:P(["flex items-center gap-2 px-3 py-2 rounded-lg bg-white dark:bg-vikinger-dark-200 border border-gray-200 dark:border-vikinger-dark-50/30 hover:border-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-all",{"border-purple-400 bg-purple-50 dark:bg-purple-900/20":I.value}]),disabled:D.value},[v(i(n),{icon:"mdi:palette",class:"w-5 h-5 text-purple-500"}),o[33]||(o[33]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"à¸žà¸·à¹‰à¸™à¸«à¸¥à¸±à¸‡",-1))],10,Ol)):h("",!0)])]),e("div",Rl,[e("button",{onClick:Fe,disabled:D.value||!_.value.trim()&&m.value.length===0,class:"w-full py-3 px-4 bg-gradient-vikinger text-white font-semibold rounded-lg hover:shadow-vikinger transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[D.value?(l(),S(i(n),{key:0,icon:"mdi:loading",class:"w-5 h-5 animate-spin"})):h("",!0),e("span",null,k(D.value?"à¸à¸³à¸¥à¸±à¸‡à¸šà¸±à¸™à¸—à¸¶à¸...":"à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚"),1)],8,zl)])])])])):h("",!0)]),_:1})]))}},ql=Mt(Vl,[["__scopeId","data-v-d29e5bb2"]]),Kl={class:"flex items-center gap-3 mb-4"},Gl=["src","alt"],Wl={class:"flex-1"},Ql={class:"flex items-center gap-2 flex-wrap"},Yl={class:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400"},Hl={class:"relative"},Jl={key:0,class:"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-vikinger-dark-100 rounded-xl shadow-lg border border-gray-200 dark:border-vikinger-dark-50/30 overflow-hidden z-50"},Xl=["disabled"],Zl={class:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-vikinger-dark-200 transition-colors text-left"},ea={key:0,class:"text-gray-700 dark:text-gray-300 mb-4 whitespace-pre-wrap"},ta={key:2,class:"p-4 bg-gray-100 dark:bg-vikinger-dark-100 rounded-lg text-gray-500"},sa={class:"mt-4 pt-3 border-t border-gray-200 dark:border-vikinger-dark-50/30"},la={class:"flex items-center gap-4 mb-3 text-sm text-gray-600 dark:text-gray-400"},aa={key:0,class:"flex items-center gap-1"},ra={key:1,class:"flex items-center gap-1"},ia={key:2,class:"flex items-center gap-1"},oa={class:"flex items-center gap-4"},na=["disabled"],ua={class:"text-sm"},da=["disabled"],ca={class:"text-sm"},va={key:0,class:"mt-4 space-y-3"},ga={class:"flex gap-2"},pa=["src"],ka={class:"flex-1 relative"},fa=["onKeydown"],ha=["disabled"],ya={key:0,class:"space-y-3"},xa=["src","alt"],ba={class:"flex-1"},ma={class:"bg-gray-100 dark:bg-vikinger-dark-200 rounded-2xl p-3"},_a={class:"font-semibold text-sm text-gray-800 dark:text-white"},wa={class:"text-sm text-gray-700 dark:text-gray-300 mt-1 whitespace-pre-wrap"},$a={key:0,class:"flex items-center gap-3 mt-1 px-2 text-[11px] text-gray-500 dark:text-gray-400"},Ca={key:0,class:"flex items-center gap-1"},Pa={class:"font-medium"},Aa={key:1,class:"flex items-center gap-1"},Ba={class:"font-medium"},Sa={class:"flex items-center gap-3 mt-1 text-xs text-gray-500 dark:text-gray-400 px-2"},La=["onClick","disabled"],Da=["onClick","disabled"],ja=["onClick"],Ta={key:1,class:"text-center py-4 text-gray-500 dark:text-gray-400"},Ea={key:3,class:"flex justify-center py-3"},Ia={class:"flex items-center justify-between mb-4"},Na={class:"flex items-center gap-3"},Fa={class:"relative flex-shrink-0"},Ua=["src","alt"],Ma={class:"flex items-center gap-2 flex-wrap"},Oa={key:1,class:"text-gray-600 dark:text-gray-400 text-sm"},Ra={class:"text-gray-500 dark:text-gray-400"},za={key:0,class:"text-vikinger-cyan font-medium"},Va={key:3,class:"flex items-center gap-1 px-2 py-0.5 rounded-full bg-gray-100 dark:bg-vikinger-dark-200 text-xs"},qa={key:1,class:"text-gray-600 dark:text-gray-300"},Ka={key:1,class:"text-gray-400"},Ga={class:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400"},Wa={class:"flex items-center gap-1"},Qa={key:0,class:"flex items-center gap-1 text-vikinger-cyan"},Ya={key:0,class:"relative"},Ha={key:0,class:"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-vikinger-dark-100 rounded-xl shadow-lg border border-gray-200 dark:border-vikinger-dark-50/30 overflow-hidden z-50"},Ja={class:"w-full flex items-center gap-3 px-4 py-3 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors text-left text-blue-600"},Xa={class:"w-full flex items-center gap-3 px-4 py-3 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors text-left text-yellow-600"},Za=["disabled"],er=["disabled"],tr={class:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-vikinger-dark-200 transition-colors text-left"},sr={key:0,class:"mb-4 p-4 bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20 rounded-xl"},lr={class:"flex items-center justify-between"},ar={class:"flex items-center gap-3"},rr={class:"w-12 h-12 rounded-full bg-gradient-to-r from-pink-500 to-purple-500 flex items-center justify-center"},ir={class:"text-sm text-gray-600 dark:text-gray-400"},or={class:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500"},nr={key:0,class:"text-lg font-bold mb-2 text-gray-800 dark:text-white"},ur={class:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed"},dr={key:2,class:"flex flex-wrap gap-2 mt-3"},cr=["src"],vr={key:1,class:"grid grid-cols-2 gap-1"},gr=["src","onClick"],pr={key:2,class:"grid grid-cols-2 gap-1 relative"},kr=["src","onClick"],fr={key:0,class:"absolute bottom-2 right-2 bg-black/60 text-white px-3 py-1 rounded-full text-sm font-medium"},hr={key:4,class:"mt-4 rounded-xl overflow-hidden"},yr={key:0,controls:"",class:"w-full rounded-xl"},xr=["src"],br={key:1,controls:"",class:"w-full"},mr=["src"],_r={key:5,class:"mt-4"},wr={class:"flex items-center gap-4"},$r={key:0,class:"flex items-center gap-1.5 hover:text-vikinger-purple cursor-pointer transition-colors"},Cr={class:"font-medium"},Pr={class:"font-medium"},Ar={class:"font-medium"},Br={class:"font-medium"},Sr={key:1,class:"flex items-center gap-1.5 hover:text-vikinger-green cursor-pointer transition-colors"},Lr={class:"font-medium"},Dr=["disabled"],jr={class:"text-sm font-medium"},Tr=["disabled"],Er={class:"text-sm font-medium"},Ir={class:"flex-1 relative"},Nr=["disabled"],Fr={key:0,class:"absolute bottom-full left-0 right-0 mb-2 bg-white dark:bg-vikinger-dark-100 rounded-xl shadow-lg border border-gray-200 dark:border-vikinger-dark-50/30 overflow-hidden z-20"},Ur={key:2,class:"flex items-center gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-vikinger-dark-50/30"},Mr={class:"flex -space-x-1"},Or={class:"text-sm text-gray-500 dark:text-gray-400 font-medium"},Rr={key:3,class:"mt-4 pt-4 border-t border-gray-200 dark:border-vikinger-dark-50/30 space-y-4"},zr={class:"flex gap-3"},Vr=["src"],qr={class:"flex-1 flex gap-2"},Kr=["disabled"],Gr=["disabled"],Wr={key:0,class:"space-y-3"},Qr=["src","alt"],Yr={class:"flex-1"},Hr={class:"bg-gray-100 dark:bg-vikinger-dark-200 rounded-2xl p-3"},Jr={class:"font-semibold text-sm text-gray-800 dark:text-white"},Xr={class:"text-sm text-gray-700 dark:text-gray-300 mt-1"},Zr={key:0,class:"flex items-center gap-3 mt-1 px-2 text-[11px] text-gray-500 dark:text-gray-400"},ei={key:0,class:"flex items-center gap-1"},ti={class:"font-medium"},si={key:1,class:"flex items-center gap-1"},li={class:"font-medium"},ai={class:"flex flex-wrap items-center gap-x-2 gap-y-1 mt-1.5 text-xs text-gray-500 dark:text-gray-400 px-2"},ri={class:"text-[11px]"},ii=["onClick","disabled"],oi={class:"hidden sm:inline"},ni=["onClick","disabled"],ui={class:"hidden sm:inline"},di=["onClick"],ci=["onClick"],vi={class:"hidden xs:inline"},gi={key:1,class:"mt-2 ml-2 flex gap-2"},pi=["src"],ki={class:"flex-1 flex gap-2"},fi=["id","placeholder","onKeydown"],hi=["onClick","disabled"],yi={key:2,class:"mt-3 ml-4 pl-4 border-l-2 border-gray-200 dark:border-vikinger-dark-300 space-y-3"},xi={key:0,class:"flex items-center gap-2 py-2"},bi=["src","alt"],mi={class:"flex-1"},_i={class:"bg-gray-100 dark:bg-vikinger-dark-300 rounded-xl p-2.5"},wi={class:"font-semibold text-xs text-gray-800 dark:text-white"},$i={class:"text-xs text-gray-700 dark:text-gray-300 mt-0.5"},Ci={key:0,class:"flex items-center gap-2 mt-1 px-2 text-[10px] text-gray-500"},Pi={key:0,class:"flex items-center gap-0.5"},Ai={key:1,class:"flex items-center gap-0.5"},Bi={class:"flex flex-wrap items-center gap-x-2 gap-y-0.5 mt-1 text-[10px] text-gray-500 px-2"},Si=["onClick","disabled"],Li={class:"hidden sm:inline"},Di=["onClick","disabled"],ji={class:"hidden sm:inline"},Ti=["onClick"],Ei={key:1,class:"text-center py-4 text-gray-500 dark:text-gray-400"},Ii={key:3,class:"flex justify-center py-3"},Ut=300,Ni={__name:"FeedPost",props:{post:{type:Object,required:!0},isNested:{type:Boolean,default:!1}},emits:["delete-success","post-updated"],setup($,{emit:He}){const f=Ot(),ee=_s(),q=ks(),b=Rt(),{getAvatarUrl:Y}=ws(),A=$,H=He,je=C(()=>!!A.post.target_resource),p=C(()=>A.post.target_resource?A.post.target_resource:A.post),ke=C(()=>A.post.action||null),_=C(()=>A.post.action_to||null),D=C(()=>{if(N.value&&A.post.target_resource?.share_comment)return A.post.target_resource.share_comment;if(A.post.share_comment)return A.post.share_comment;if(A.post.activity_details)try{return(typeof A.post.activity_details=="string"?JSON.parse(A.post.activity_details):A.post.activity_details).share_comment||null}catch(t){return console.error("Failed to parse activity_details:",t),null}return null}),N=C(()=>["share_post","share","repost"].includes(ke.value)),be=C(()=>{if(!je.value)return!0;const t=A.post.action_by?.id,s=m.value?.id;return N.value?!1:!t||!s?!0:t===s}),me=C(()=>ke.value&&{create_post:"à¹‚à¸žà¸ªà¸•à¹Œ",share_post:"à¹à¸Šà¸£à¹Œ",share:"à¹à¸Šà¸£à¹Œ",comment:"à¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™",like:"à¸–à¸¹à¸à¹ƒà¸ˆ",donate:"à¸šà¸£à¸´à¸ˆà¸²à¸„",receive_donation:"à¹„à¸”à¹‰à¸£à¸±à¸šà¸à¸²à¸£à¸ªà¸™à¸±à¸šà¸ªà¸™à¸¸à¸™",create:"à¸ªà¸£à¹‰à¸²à¸‡",update:"à¸­à¸±à¸›à¹€à¸”à¸•",join:"à¹€à¸‚à¹‰à¸²à¸£à¹ˆà¸§à¸¡",enroll:"à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™",complete:"à¹€à¸£à¸µà¸¢à¸™à¸ˆà¸š"}[ke.value]||null),Je=C(()=>_.value?{Post:"",CoursePost:"à¹ƒà¸™à¸£à¸²à¸¢à¸§à¸´à¸Šà¸²",AcademyPost:"à¹ƒà¸™à¸ªà¸–à¸²à¸šà¸±à¸™",Donate:"",DonateRecipient:"",Poll:"à¹‚à¸žà¸¥",Support:"à¸à¸²à¸£à¸ªà¸™à¸±à¸šà¸ªà¸™à¸¸à¸™",SupportViewer:"",Course:"à¸£à¸²à¸¢à¸§à¸´à¸Šà¸²",Academy:"à¸ªà¸–à¸²à¸šà¸±à¸™"}[_.value]||"":null),E=C(()=>{const t=p.value;if(t.course)return{type:"course",icon:"fluent:book-24-regular",name:t.course.name||t.course.title,link:`/courses/${t.course_id||t.course.id}`,academy:t.academy?.name||null,academyLink:t.academy?`/academies/${t.academy.id}`:null,color:"text-blue-500"};if(t.academy&&!t.course)return{type:"academy",icon:"fluent:building-24-regular",name:t.academy.name,link:`/academies/${t.academy.id}`,color:"text-purple-500"};if(_.value==="Donate")return{type:"donate",icon:"fluent:heart-24-regular",name:"à¸šà¸£à¸´à¸ˆà¸²à¸„à¹ƒà¸«à¹‰ "+(t.user?.username||"Nuxni"),link:t.user?.id?`/profile/${t.user.id}`:null,amount:t.amounts,color:"text-pink-500"};if(_.value==="DonateRecipient")return{type:"donate_recipient",icon:"fluent:gift-24-regular",name:"à¹„à¸”à¹‰à¸£à¸±à¸šà¸à¸²à¸£à¸ªà¸™à¸±à¸šà¸ªà¸™à¸¸à¸™à¸ˆà¸²à¸ "+(t.donation?.donor_name||"à¹„à¸¡à¹ˆà¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œà¸­à¸­à¸à¸™à¸²à¸¡"),link:t.donation?.donor?.id?`/profile/${t.donation.donor.id}`:null,points:t.points_received||240,color:"text-green-500"};if(_.value==="Poll"||t.poll){const s=t.poll?.id||t.id;return{type:"poll",icon:"fluent:poll-24-regular",name:t.poll?.title||"à¹‚à¸žà¸¥",link:s?`/polls/${s}`:null,color:"text-yellow-500"}}return null}),m=C(()=>N.value&&A.post.target_resource?.shareable?A.post.target_resource.shareable.author||A.post.target_resource.shareable.user||{}:p.value.author||p.value.user||{}),B=C(()=>A.post.action_by||m.value),G=C(()=>Y(m.value)),z=C(()=>Y(B.value)),U=C(()=>Y(f.user)),W=t=>Y(t?.user||t?.author),I=C(()=>p.value.diff_humans_created_at||A.post.diff_humans_created_at||p.value.createdAt||A.post.createdAt||"à¹€à¸¡à¸·à¹ˆà¸­à¸ªà¸±à¸à¸„à¸£à¸¹à¹ˆ"),R=C(()=>p.value.hashtags||[]),_e=C(()=>p.value.location),de=C(()=>p.value.privacy_settings||p.value.privacy_setting||"public"),ce=C(()=>p.value.post_type||"text"),we=C(()=>p.value.views||0),ve=C(()=>_.value==="Poll"||p.value.poll!==void 0),J=C(()=>_.value==="Poll"?p.value:p.value.poll||null),ge=C(()=>f.user?.id===J.value?.user_id||f.user?.id===m.value?.id),te=C(()=>!!(_.value==="Poll"||p.value.post_type==="poll"&&p.value.poll)),pe=C(()=>p.value.feeling||null),$e=C(()=>p.value.feeling_icon||null),Te=C(()=>p.value.activity_type||null),Xe=C(()=>p.value.activity_text||null),Ee=C(()=>{const t=[];if(pe.value){const s=$e.value||"ðŸ˜Š";t.push(`${s} à¸£à¸¹à¹‰à¸ªà¸¶à¸${pe.value}`)}if(Te.value){const s=Xe.value?` ${Xe.value}`:"";t.push(`à¸à¸³à¸¥à¸±à¸‡${Te.value}${s}`)}return t.length>0?t.join(" â€” "):null}),Ie=C(()=>_.value==="Donate"?p.value.notes?`ðŸ’ ${p.value.notes}`:`ðŸ’ à¸šà¸£à¸´à¸ˆà¸²à¸„ ${p.value.amounts}`:_.value==="DonateRecipient"?p.value.donation?.notes||"":p.value.content||p.value.description||""),Ne=x(!1),Ze=C(()=>Ie.value.length>Ut),ht=C(()=>!Ze.value||Ne.value?Ie.value:Ie.value.substring(0,Ut)+"..."),Q=C(()=>p.value.imagesResources&&p.value.imagesResources.length?p.value.imagesResources:p.value.images&&p.value.images.length?p.value.images:p.value.slip?[{url:p.value.slip}]:[]),et=C(()=>{switch(de.value){case"friends":return"fluent:people-24-regular";case"private":return"fluent:lock-closed-24-regular";default:return"fluent:globe-24-regular"}}),Fe=C(()=>{const t={CoursePost:{icon:"fluent:book-24-regular",color:"bg-blue-500",label:"à¸£à¸²à¸¢à¸§à¸´à¸Šà¸²"},Donate:{icon:"fluent:heart-24-regular",color:"bg-pink-500",label:"à¸šà¸£à¸´à¸ˆà¸²à¸„"},DonateRecipient:{icon:"fluent:gift-24-regular",color:"bg-green-500",label:"à¸£à¸±à¸šà¸šà¸£à¸´à¸ˆà¸²à¸„"},Poll:{icon:"fluent:poll-24-regular",color:"bg-yellow-500",label:"à¹‚à¸žà¸¥"},Post:{icon:"fluent:document-text-24-regular",color:"bg-purple-500",label:"à¹‚à¸žà¸ªà¸•à¹Œ"}};return t[_.value]||t[ce.value]||null}),tt=x(!0),fe=x(""),Ce=x(null),Ue=x(null),ae=x(""),Pe=x(!1),se=x({}),re=x({}),Me=x({}),Oe=x({}),u=x([]),o=x([]),g=x(!1),L=x(1),M=x(!0),st=C(()=>N.value&&T.value?.share_comments?T.value.share_comments:p.value?.post_comments||[]),he=C(()=>[...u.value,...st.value,...o.value]),bt=C(()=>{const t=lt.value,s=he.value.length;return M.value&&t>s}),mt=C(()=>Math.max(0,lt.value-he.value.length)),X=x(p.value?.isLikedByAuth||!1),Z=x(p.value?.isDislikedByAuth||!1),Re=x(p.value?.likes||0),ze=x(p.value?.dislikes||0),lt=x(p.value?.comments_count||0),Ae=x(!1),Ve=x(!1),qe=x(!1),ye=x(!1),yt=x(!1),at=x(!1),rt=x(!1),Ke=x(!1),dt=x(!1),xe=x(p.value?.shares||0),Ge=x(!1),K=C(()=>f.user?.id===m.value?.id),zt=C(()=>N.value?f.user?.id===B.value?.id:!1);ft(()=>p.value,t=>{t&&(X.value=t.isLikedByAuth||!1,Z.value=t.isDislikedByAuth||!1,Re.value=t.likes||0,ze.value=t.dislikes||0,lt.value=t.comments_count||0,xe.value=t.shares||0)},{immediate:!0});const Vt=[{id:"like",icon:"ðŸ‘",label:"Like",color:"hover:bg-blue-100 dark:hover:bg-blue-900/30"},{id:"love",icon:"â¤ï¸",label:"Love",color:"hover:bg-red-100 dark:hover:bg-red-900/30"},{id:"haha",icon:"ðŸ˜„",label:"Haha",color:"hover:bg-yellow-100 dark:hover:bg-yellow-900/30"},{id:"wow",icon:"ðŸ˜®",label:"Wow",color:"hover:bg-orange-100 dark:hover:bg-orange-900/30"},{id:"sad",icon:"ðŸ˜¢",label:"Sad",color:"hover:bg-gray-100 dark:hover:bg-gray-900/30"},{id:"angry",icon:"ðŸ˜ ",label:"Angry",color:"hover:bg-red-100 dark:hover:bg-red-900/30"}],_t=()=>{tt.value=!tt.value},wt=async()=>{if(!(g.value||!M.value||!(N.value&&T.value?.id||p.value?.id))){g.value=!0;try{const s=st.value.length,d=o.value.length,c=Math.floor((s+d)/10)+1,w=le();let a="";N.value&&T.value?.id?a=`${w.public.apiBase}/api/shares/${T.value.id}/comments`:_.value==="CoursePost"&&p.value.course_id?a=`${w.public.apiBase}/api/courses/${p.value.course_id}/posts/${p.value.id}/comments`:a=`${w.public.apiBase}/api/posts/${p.value.id}/comments`;const y=await q.get(`${a}?page=${c}&per_page=10`);if(y.comments){const V=new Set([...st.value.map(Le=>Le.id),...u.value.map(Le=>Le.id),...o.value.map(Le=>Le.id)]),ds=y.comments.filter(Le=>!V.has(Le.id));o.value.push(...ds)}y.pagination&&(M.value=y.pagination.has_more,L.value=y.pagination.current_page)}catch(s){console.error("Failed to load more comments:",s)}finally{g.value=!1}}},$t=async()=>{if(!(!fe.value.trim()||qe.value)){qe.value=!0;try{const t=le();let s="";N.value&&T.value?.id?s=`${t.public.apiBase}/api/shares/${T.value.id}/comments`:_.value==="CoursePost"&&p.value.course_id?s=`${t.public.apiBase}/api/courses/${p.value.course_id}/posts/${p.value.id}/comments`:s=`${t.public.apiBase}/api/posts/${p.value.id}/comments`;const d=await $fetch(s,{method:"POST",headers:{Authorization:`Bearer ${f.token}`,Accept:"application/json"},body:{content:fe.value}});d.success&&(d.comment&&u.value.unshift(d.comment),N.value&&T.value?We.value++:lt.value++,fe.value="")}catch(t){console.error("Failed to add comment:",t);const s=t?.data?.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸žà¸´à¹ˆà¸¡à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¹„à¸”à¹‰";b.error(s)}finally{qe.value=!1}}},Ct=async()=>{if(Ae.value||!p.value?.id)return;if(K.value){b.warning("à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸”à¸–à¸¹à¸à¹ƒà¸ˆà¹‚à¸žà¸ªà¸•à¹Œà¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡à¹„à¸”à¹‰");return}Ae.value=!0;const t=X.value;let s=0,d=0;if(t){if(s=12,d=12,!f.deductPoints(s)){b.warning("à¹à¸•à¹‰à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­à¹ƒà¸™à¸à¸²à¸£à¸¢à¸à¹€à¸¥à¸´à¸ Like (à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ 12 à¹à¸•à¹‰à¸¡)"),Ae.value=!1;return}}else if(s=24,d=12,!f.deductPoints(s)){b.warning("à¹à¸•à¹‰à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­ (à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ 24 à¹à¸•à¹‰à¸¡)"),Ae.value=!1;return}X.value=!t,Re.value+=t?-1:1,!t&&Z.value&&(Z.value=!1,ze.value--),m.value?.points!==void 0&&(t||(m.value.points=(m.value.points||0)+d));try{let c="";_.value==="CoursePost"&&p.value.course_id?c=`/api/courses/${p.value.course_id}/posts/${p.value.id}/like`:c=`/api/posts/${p.value.id}/like`;const w=await q.call(c,{method:"POST"});w.success||(X.value=t,Re.value+=t?1:-1,f.rollback(s),m.value?.points!==void 0&&(t||(m.value.points=(m.value.points||0)-d)),b.error(w.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸”à¸–à¸¹à¸à¹ƒà¸ˆà¹„à¸”à¹‰"))}catch(c){X.value=t,Re.value+=t?1:-1,f.rollback(s),m.value?.points!==void 0&&(t?m.value.points=(m.value.points||0)+d:m.value.points=(m.value.points||0)-d),console.error("Failed to like:",c),b.warning("à¸„à¸¸à¸“à¸¡à¸µà¸žà¸­à¸¢à¸•à¹Œà¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­à¹ƒà¸™à¸à¸²à¸£à¸à¸”à¸–à¸¹à¸à¹ƒà¸ˆ")}finally{Ae.value=!1}},Pt=async()=>{if(Ve.value||!p.value?.id)return;if(K.value){b.warning("à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸”à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆà¹‚à¸žà¸ªà¸•à¹Œà¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡à¹„à¸”à¹‰");return}Ve.value=!0;const t=Z.value;let s=12;if(!f.deductPoints(s)){t?b.warning("à¹à¸•à¹‰à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­à¹ƒà¸™à¸à¸²à¸£à¸¢à¸à¹€à¸¥à¸´à¸ Dislike (à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ 12 à¹à¸•à¹‰à¸¡)"):b.warning("à¹à¸•à¹‰à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­ (à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ 12 à¹à¸•à¹‰à¸¡)"),Ve.value=!1;return}Z.value=!t,ze.value+=t?-1:1,!t&&X.value&&(X.value=!1,Re.value--),m.value?.points!==void 0&&(t||(m.value.points=(m.value.points||0)-s));try{let c="";_.value==="CoursePost"&&p.value.course_id?c=`/api/courses/${p.value.course_id}/posts/${p.value.id}/dislike`:c=`/api/posts/${p.value.id}/dislike`;const w=await q.call(c,{method:"POST"});w.success||(Z.value=t,ze.value+=t?1:-1,f.rollback(s),m.value?.points!==void 0&&!t&&(m.value.points=(m.value.points||0)+s),b.error(w.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸”à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆà¹„à¸”à¹‰"))}catch(c){Z.value=t,ze.value+=t?1:-1,f.rollback(s),m.value?.points!==void 0&&!t&&(m.value.points=(m.value.points||0)+s),console.error("Failed to dislike:",c),b.warning("à¸„à¸¸à¸“à¸¡à¸µà¸žà¸­à¸¢à¸•à¹Œà¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­à¹ƒà¸™à¸à¸²à¸£à¸à¸”à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆ")}finally{Ve.value=!1}},At=async t=>{const s=t.user||t.author;if(f.user?.id===s?.id){b.warning("à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸”à¸–à¸¹à¸à¹ƒà¸ˆà¸„à¸­à¸¡à¹€à¸¡à¸™à¸•à¹Œà¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡à¹„à¸”à¹‰");return}if(t.isLiking)return;t.isLiking=!0;const d=t.isLikedByAuth||!1;let c=0,w=0;if(d?(c=12,w=0):(c=24,w=12),!f.deductPoints(c)){b.warning(`à¹à¸•à¹‰à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­ (à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ ${c} à¹à¸•à¹‰à¸¡)`),t.isLiking=!1;return}t.isLikedByAuth=!d,t.likes=(t.likes||0)+(d?-1:1),!d&&t.isDislikedByAuth&&(t.isDislikedByAuth=!1,t.dislikes=(t.dislikes||0)-1),s?.point!==void 0&&!d&&(s.point=(s.point||0)+w);try{let y="";_.value==="CoursePost"?y=`/api/courses/posts/comments/${t.id}/like`:y=`/api/post_comments/${t.id}/like`;const V=await q.call(y,{method:"POST"});V.success||(t.isLikedByAuth=d,t.likes=(t.likes||0)+(d?1:-1),f.rollback(c),s?.point!==void 0&&!d&&(s.point=(s.point||0)-w),b.error(V.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸”à¸–à¸¹à¸à¹ƒà¸ˆà¹„à¸”à¹‰"))}catch(y){t.isLikedByAuth=d,t.likes=(t.likes||0)+(d?1:-1),f.rollback(c),s?.point!==void 0&&!d&&(s.point=(s.point||0)-w),console.error("Failed to like comment:",y);const V=y?.data?.message||y?.message||"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸à¸”à¸–à¸¹à¸à¹ƒà¸ˆ";b.error(V)}finally{t.isLiking=!1}},Bt=async t=>{const s=t.user||t.author;if(f.user?.id===s?.id){b.warning("à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸”à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆà¸„à¸­à¸¡à¹€à¸¡à¸™à¸•à¹Œà¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡à¹„à¸”à¹‰");return}if(t.isDisliking)return;t.isDisliking=!0;const d=t.isDislikedByAuth||!1,c=12;if(!f.deductPoints(c)){b.warning(`à¹à¸•à¹‰à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­ (à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ ${c} à¹à¸•à¹‰à¸¡)`),t.isDisliking=!1;return}t.isDislikedByAuth=!d,t.dislikes=(t.dislikes||0)+(d?-1:1),!d&&t.isLikedByAuth&&(t.isLikedByAuth=!1,t.likes=(t.likes||0)-1),s?.point!==void 0&&!d&&(s.point=(s.point||0)-c);try{let a="";_.value==="CoursePost"?a=`/api/courses/posts/comments/${t.id}/dislike`:a=`/api/post_comments/${t.id}/dislike`;const y=await q.call(a,{method:"POST"});y.success||(t.isDislikedByAuth=d,t.dislikes=(t.dislikes||0)+(d?1:-1),f.rollback(c),s?.point!==void 0&&!d&&(s.point=(s.point||0)+c),b.error(y.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸”à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆà¹„à¸”à¹‰"))}catch(a){t.isDislikedByAuth=d,t.dislikes=(t.dislikes||0)+(d?1:-1),f.rollback(c),s?.point!==void 0&&!d&&(s.point=(s.point||0)+c),console.error("Failed to dislike comment:",a);const y=a?.data?.message||a?.message||"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸à¸”à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆ";b.error(y)}finally{t.isDisliking=!1}},qt=t=>{Ue.value=t,ae.value="",ys(()=>{const s=document.getElementById(`reply-input-${t.id}`);s&&s.focus()})},St=()=>{Ue.value=null,ae.value=""},Lt=async t=>{if(!ae.value.trim()||Pe.value)return;const s=12;if(!f.deductPoints(s)){b.warning(`à¹à¸•à¹‰à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­à¹ƒà¸™à¸à¸²à¸£à¸•à¸­à¸šà¸à¸¥à¸±à¸š (à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ ${s} à¹à¸•à¹‰à¸¡)`);return}Pe.value=!0;try{const c=await q.call(`/api/post_comments/${t.id}/replies`,{method:"POST",body:{content:ae.value.trim()}});c.success?(re.value[t.id]||(re.value[t.id]=[]),re.value[t.id].push(c.reply),t.replies_count=(t.replies_count||0)+1,se.value[t.id]=!0,ae.value="",Ue.value=null,b.toast("à¸•à¸­à¸šà¸à¸¥à¸±à¸šà¸ªà¸³à¹€à¸£à¹‡à¸ˆ","success")):(f.rollback(s),b.error(c.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸•à¸­à¸šà¸à¸¥à¸±à¸šà¹„à¸”à¹‰"))}catch(c){f.rollback(s),console.error("Failed to submit reply:",c),b.error(c?.data?.message||"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸•à¸­à¸šà¸à¸¥à¸±à¸š")}finally{Pe.value=!1}},Kt=async t=>{const s=t.id;se.value[s]?se.value[s]=!1:(se.value[s]=!0,re.value[s]||await Dt(t))},Dt=async(t,s=1)=>{const d=t.id;if(!Me.value[d]){Me.value[d]=!0;try{const c=await q.call(`/api/post_comments/${d}/replies?page=${s}&per_page=5`);c.success&&(s===1?re.value[d]=c.replies||[]:re.value[d]=[...re.value[d]||[],...c.replies||[]],Oe.value[d]={page:c.pagination?.current_page||s,hasMore:c.pagination?.has_more||!1})}catch(c){console.error("Failed to load replies:",c),b.error("à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸à¸²à¸£à¸•à¸­à¸šà¸à¸¥à¸±à¸šà¹„à¸”à¹‰")}finally{Me.value[d]=!1}}},Gt=async t=>{const s=t.id,d=Oe.value[s]?.page||1;await Dt(t,d+1)},Wt=async t=>{await At(t)},Qt=async t=>{await Bt(t)},xt=t=>{Ce.value=t},Yt=()=>{Ce.value=null},Ht=async()=>{if(ye.value||!p.value?.id)return;if(K.value){ee.warning("à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸Šà¸£à¹Œà¹‚à¸žà¸ªà¸•à¹Œà¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡à¹„à¸”à¹‰");return}const t=36,s=f.points||0;if(!f.deductPoints(t)){b.warning(`à¹à¸•à¹‰à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­à¹ƒà¸™à¸à¸²à¸£à¹à¸Šà¸£à¹Œ

à¸•à¹‰à¸­à¸‡à¸à¸²à¸£: ${t} à¹à¸•à¹‰à¸¡
à¸¡à¸µà¸­à¸¢à¸¹à¹ˆ: ${s} à¹à¸•à¹‰à¸¡
à¸‚à¸²à¸”à¸­à¸µà¸: ${t-s} à¹à¸•à¹‰à¸¡`,"à¹à¸•à¹‰à¸¡à¹„à¸¡à¹ˆà¸žà¸­");return}ye.value=!0,xe.value++,m.value?.points!==void 0&&(m.value.points=(m.value.points||0)+18);try{const c=le();let w="Post";_.value==="CoursePost"?w="CoursePost":_.value==="AcademyPost"&&(w="AcademyPost");const a=`${c.public.apiBase}/api/shares`,y=await $fetch(a,{method:"POST",headers:{Authorization:`Bearer ${f.token}`},body:{shareable_type:w,shareable_id:p.value.id,share_comment:null,privacy:"public"}});y.success?b.toast("à¹à¸Šà¸£à¹Œà¹‚à¸žà¸ªà¸•à¹Œà¸ªà¸³à¹€à¸£à¹‡à¸ˆ! ðŸŽ‰","success"):(xe.value--,f.rollback(t),m.value?.points!==void 0&&(m.value.points=(m.value.points||0)-18),console.error("âŒ Share failed:",y),b.error(y.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸Šà¸£à¹Œà¹„à¸”à¹‰"))}catch(c){xe.value--,f.rollback(t),m.value?.points!==void 0&&(m.value.points=(m.value.points||0)-18),console.error("âŒ Share error:",c),console.error("âŒ Error data:",c?.data),console.error("âŒ Error response:",c?.response);const w=c?.data?.message||c?.message||"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¹à¸Šà¸£à¹Œ";b.error(w)}finally{ye.value=!1,at.value=!1}},Jt=()=>{if(K.value){b.warning("à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸Šà¸£à¹Œà¹‚à¸žà¸ªà¸•à¹Œà¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡à¹„à¸”à¹‰");return}at.value=!1,yt.value=!0},Xt=async t=>{if(ye.value||!p.value?.id)return;const s=36,d=f.points||0;if(!f.deductPoints(s)){b.warning(`à¹à¸•à¹‰à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­à¹ƒà¸™à¸à¸²à¸£à¹à¸Šà¸£à¹Œ

à¸•à¹‰à¸­à¸‡à¸à¸²à¸£: ${s} à¹à¸•à¹‰à¸¡
à¸¡à¸µà¸­à¸¢à¸¹à¹ˆ: ${d} à¹à¸•à¹‰à¸¡
à¸‚à¸²à¸”à¸­à¸µà¸: ${s-d} à¹à¸•à¹‰à¸¡`,"à¹à¸•à¹‰à¸¡à¹„à¸¡à¹ˆà¸žà¸­");return}ye.value=!0,xe.value++,m.value?.points!==void 0&&(m.value.points=(m.value.points||0)+18);try{let w="Post";_.value==="CoursePost"?w="CoursePost":_.value==="AcademyPost"&&(w="AcademyPost");const a=await q.call("/api/shares",{method:"POST",body:{shareable_type:w,shareable_id:p.value.id,...t}});a.success?b.toast("à¹à¸Šà¸£à¹Œà¹‚à¸žà¸ªà¸•à¹Œà¸ªà¸³à¹€à¸£à¹‡à¸ˆ! ðŸŽ‰","success"):(xe.value--,f.rollback(s),m.value?.points!==void 0&&(m.value.points=(m.value.points||0)-18),b.error(a.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸Šà¸£à¹Œà¹„à¸”à¹‰"))}catch(w){xe.value--,f.rollback(s),m.value?.points!==void 0&&(m.value.points=(m.value.points||0)-18),console.error("Failed to share:",w);const a=w?.data?.message||w?.message||"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¹à¸Šà¸£à¹Œ";b.error(a)}finally{ye.value=!1}},T=C(()=>N.value&&A.post.target_resource?A.post.target_resource:null),ie=x(T.value?.isLikedByAuth||!1),oe=x(T.value?.isDislikedByAuth||!1),Be=x(T.value?.likes||0),Se=x(T.value?.dislikes||0),We=x(T.value?.comments||0),it=x(!1),ot=x(!1);ft(()=>T.value,t=>{t&&(ie.value=t.isLikedByAuth||!1,oe.value=t.isDislikedByAuth||!1,Be.value=t.likes||0,Se.value=t.dislikes||0,We.value=t.comments||0)},{immediate:!0});const Zt=async()=>{if(it.value||!T.value?.id)return;if(f.user?.id===B.value?.id){b.warning("à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸”à¸–à¸¹à¸à¹ƒà¸ˆà¸à¸²à¸£à¹à¸Šà¸£à¹Œà¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡à¹„à¸”à¹‰");return}it.value=!0;const t=ie.value;let s=t?12:24,d=12;if(!f.deductPoints(s)){b.warning(`à¹à¸•à¹‰à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­ (à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ ${s} à¹à¸•à¹‰à¸¡)`),it.value=!1;return}ie.value=!t,Be.value+=t?-1:1,!t&&oe.value&&(oe.value=!1,Se.value--),B.value?.points!==void 0&&!t&&(B.value.points=(B.value.points||0)+d);try{const w=await q.call(`/api/shares/${T.value.id}/like`,{method:"POST"});w.success||(ie.value=t,Be.value+=t?1:-1,f.rollback(s),B.value?.points!==void 0&&!t&&(B.value.points=(B.value.points||0)-d),b.error(w.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸”à¸–à¸¹à¸à¹ƒà¸ˆà¹„à¸”à¹‰"))}catch(w){ie.value=t,Be.value+=t?1:-1,f.rollback(s),B.value?.points!==void 0&&!t&&(B.value.points=(B.value.points||0)-d),console.error("Failed to like share:",w);const a=w?.data?.message||w?.message||"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸à¸”à¸–à¸¹à¸à¹ƒà¸ˆ";b.error(a)}finally{it.value=!1}},es=async()=>{if(ot.value||!T.value?.id)return;if(f.user?.id===B.value?.id){b.warning("à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸”à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆà¸à¸²à¸£à¹à¸Šà¸£à¹Œà¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡à¹„à¸”à¹‰");return}ot.value=!0;const t=oe.value;let s=12;if(!f.deductPoints(s)){b.warning("à¹à¸•à¹‰à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­ (à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ 12 à¹à¸•à¹‰à¸¡)"),ot.value=!1;return}oe.value=!t,Se.value+=t?-1:1,!t&&ie.value&&(ie.value=!1,Be.value--),B.value?.points!==void 0&&!t&&(B.value.points=(B.value.points||0)-s);try{const c=await q.call(`/api/shares/${T.value.id}/dislike`,{method:"POST"});c.success||(oe.value=t,Se.value+=t?1:-1,f.rollback(s),B.value?.points!==void 0&&!t&&(B.value.points=(B.value.points||0)+s),b.error(c.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸”à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆà¹„à¸”à¹‰"))}catch(c){oe.value=t,Se.value+=t?1:-1,f.rollback(s),B.value?.points!==void 0&&!t&&(B.value.points=(B.value.points||0)+s),console.error("Failed to dislike share:",c);const w=c?.data?.message||c?.message||"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸à¸”à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆ";b.error(w)}finally{ot.value=!1}},ct=x(!0),Qe=x(""),vt=x(!1),jt=x(!1),Ye=x([]),ts=x({currentPage:1,lastPage:1,perPage:10,total:0}),ss=async()=>{ct.value=!ct.value,ct.value&&Ye.value.length===0&&await ls()},ls=async(t=1)=>{if(T.value?.id){jt.value=!0;try{const d=`${le().public.apiBase}/api/shares/${T.value.id}/comments?page=${t}`,c=await $fetch(d,{headers:{Authorization:`Bearer ${f.token}`}});c.success&&(t===1?Ye.value=c.comments||[]:Ye.value=[...Ye.value,...c.comments||[]],c.pagination&&(ts.value=c.pagination))}catch(s){console.error("Failed to load share comments:",s),ee.error("à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¹„à¸”à¹‰")}finally{jt.value=!1}}},Tt=async()=>{if(!(!Qe.value.trim()||!T.value?.id)){vt.value=!0;try{const s=`${le().public.apiBase}/api/shares/${T.value.id}/comments`,d=await $fetch(s,{method:"POST",headers:{Authorization:`Bearer ${f.token}`},body:{content:Qe.value.trim()}});d.success?(u.value.unshift(d.comment),We.value++,Qe.value="",ee.success("à¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ")):ee.error(d.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¹„à¸”à¹‰")}catch(t){console.error("Failed to submit comment:",t);const s=t?.data?.message||t?.message||"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™";ee.error(s)}finally{vt.value=!1}}},as=async t=>{if(await b.confirmDelete("à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¸™à¸µà¹‰"))try{const c=`${le().public.apiBase}/api/share-comments/${t}`,w=await $fetch(c,{method:"DELETE",headers:{Authorization:`Bearer ${f.token}`}});w.success?(Ye.value=Ye.value.filter(a=>a.id!==t),We.value--,b.toast("à¸¥à¸šà¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ","success")):b.error(w.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¥à¸šà¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¹„à¸”à¹‰")}catch(d){console.error("Failed to delete comment:",d),ee.error("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸¥à¸šà¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™")}},rs=async t=>{const s=t.user;if(f.user?.id===s?.id){b.warning("à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸”à¸–à¸¹à¸à¹ƒà¸ˆà¸„à¸­à¸¡à¹€à¸¡à¸™à¸•à¹Œà¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡à¹„à¸”à¹‰");return}if(t.isLiking)return;t.isLiking=!0;const d=t.is_liked_by_auth||!1;let c=0;if(d?c=12:c=24,!f.deductPoints(c)){b.warning(`à¹à¸•à¹‰à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­ (à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ ${c} à¹à¸•à¹‰à¸¡)`),t.isLiking=!1;return}t.is_liked_by_auth=!d,t.likes=(t.likes||0)+(d?-1:1),!d&&t.is_disliked_by_auth&&(t.is_disliked_by_auth=!1,t.dislikes=(t.dislikes||0)-1);try{const y=`${le().public.apiBase}/api/share-comments/${t.id}/like`,V=await $fetch(y,{method:"POST",headers:{Authorization:`Bearer ${f.token}`}});V.success||(t.is_liked_by_auth=d,t.likes=(t.likes||0)+(d?1:-1),f.rollback(c),b.error(V.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸”à¸–à¸¹à¸à¹ƒà¸ˆà¹„à¸”à¹‰"))}catch(a){t.is_liked_by_auth=d,t.likes=(t.likes||0)+(d?1:-1),f.rollback(c),console.error("Failed to like share comment:",a);const y=a?.data?.message||a?.message||"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸à¸”à¸–à¸¹à¸à¹ƒà¸ˆ";b.error(y)}finally{t.isLiking=!1}},is=async t=>{const s=t.user;if(f.user?.id===s?.id){b.warning("à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸”à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆà¸„à¸­à¸¡à¹€à¸¡à¸™à¸•à¹Œà¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡à¹„à¸”à¹‰");return}if(t.isDisliking)return;t.isDisliking=!0;const d=t.is_disliked_by_auth||!1,c=12;if(!f.deductPoints(c)){b.warning(`à¹à¸•à¹‰à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­ (à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ ${c} à¹à¸•à¹‰à¸¡)`),t.isDisliking=!1;return}t.is_disliked_by_auth=!d,t.dislikes=(t.dislikes||0)+(d?-1:1),!d&&t.is_liked_by_auth&&(t.is_liked_by_auth=!1,t.likes=(t.likes||0)-1);try{const y=`${le().public.apiBase}/api/share-comments/${t.id}/dislike`,V=await $fetch(y,{method:"POST",headers:{Authorization:`Bearer ${f.token}`}});V.success||(t.is_disliked_by_auth=d,t.dislikes=(t.dislikes||0)+(d?1:-1),f.rollback(c),b.error(V.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸”à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆà¹„à¸”à¹‰"))}catch(a){t.is_disliked_by_auth=d,t.dislikes=(t.dislikes||0)+(d?1:-1),f.rollback(c),console.error("Failed to dislike share comment:",a);const y=a?.data?.message||a?.message||"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸à¸”à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆ";b.error(y)}finally{t.isDisliking=!1}},gt=x(!1),os=async()=>{const t=T.value?.id||A.post.activityable_id;if(!t){console.error("âŒ No share ID available"),b.error("à¹„à¸¡à¹ˆà¸žà¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¹à¸Šà¸£à¹Œà¸—à¸µà¹ˆà¸ˆà¸°à¸¥à¸š");return}if(rt.value=!1,!!await b.confirmDelete("à¸à¸²à¸£à¹à¸Šà¸£à¹Œà¸™à¸µà¹‰","à¹‚à¸žà¸ªà¸•à¹Œà¸•à¹‰à¸™à¸‰à¸šà¸±à¸šà¸ˆà¸°à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸¥à¸š")){gt.value=!0;try{const c=`${le().public.apiBase}/api/shares/${t}`,w=await $fetch(c,{method:"DELETE",headers:{Authorization:`Bearer ${f.token}`}});w.success?(H("delete-success",A.post.id),b.toast("à¸¥à¸šà¸à¸²à¸£à¹à¸Šà¸£à¹Œà¸ªà¸³à¹€à¸£à¹‡à¸ˆ","success")):b.error(w.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¥à¸šà¸à¸²à¸£à¹à¸Šà¸£à¹Œà¹„à¸”à¹‰")}catch(d){console.error("âŒ Failed to delete share:",d);const c=d?.data?.message||d?.message||"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸¥à¸šà¸à¸²à¸£à¹à¸Šà¸£à¹Œ";b.error(c)}finally{gt.value=!1}}},Et=async()=>{if(!p.value?.id){b.error("à¹„à¸¡à¹ˆà¸žà¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹‚à¸žà¸ªà¸•à¹Œà¸—à¸µà¹ˆà¸ˆà¸°à¸¥à¸š");return}Ke.value=!1;const t=_.value==="Poll"?"à¹‚à¸žà¸¥à¸™à¸µà¹‰":"à¹‚à¸žà¸ªà¸•à¹Œà¸™à¸µà¹‰",s=_.value==="Poll"?"à¸à¸²à¸£à¸¥à¸šà¹‚à¸žà¸¥à¸ˆà¸°à¸¥à¸šà¹‚à¸«à¸§à¸•à¹à¸¥à¸°à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸”à¹‰à¸§à¸¢":"à¸à¸²à¸£à¸¥à¸šà¹‚à¸žà¸ªà¸•à¹Œà¸ˆà¸°à¸¥à¸šà¸£à¸¹à¸›à¸ à¸²à¸žà¹à¸¥à¸°à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸”à¹‰à¸§à¸¢";if(await b.confirmDelete(t,s)){Ge.value=!0;try{const c=le();let w="";switch(_.value){case"Poll":w=`${c.public.apiBase}/api/polls/${p.value.id}`;break;case"CoursePost":const y=p.value.course_id||p.value.course?.id;if(y)w=`${c.public.apiBase}/api/courses/${y}/posts/${p.value.id}`;else{b.error("à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸£à¸°à¸šà¸¸à¸£à¸²à¸¢à¸§à¸´à¸Šà¸²à¸‚à¸­à¸‡à¹‚à¸žà¸ªà¸•à¹Œà¸™à¸µà¹‰à¹„à¸”à¹‰");return}break;default:w=`${c.public.apiBase}/api/posts/${p.value.id}`}const a=await $fetch(w,{method:"DELETE",headers:{Authorization:`Bearer ${f.token}`}});if(a.success){H("delete-success",A.post.id);const y=_.value==="Poll"?"à¸¥à¸šà¹‚à¸žà¸¥à¸ªà¸³à¹€à¸£à¹‡à¸ˆ":"à¸¥à¸šà¹‚à¸žà¸ªà¸•à¹Œà¸ªà¸³à¹€à¸£à¹‡à¸ˆ";b.toast(y,"success")}else b.error(a.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¥à¸šà¹„à¸”à¹‰")}catch(c){console.error("âŒ Failed to delete:",c);const w=c?.data?.message||c?.message||"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸¥à¸š";b.error(w)}finally{Ge.value=!1}}},ns=()=>{Ke.value=!1,dt.value=!0},us=t=>{dt.value=!1,H("post-updated",t)},It=()=>{H("delete-success",A.post.id)},Nt=t=>{J.value&&Object.assign(J.value,t),H("post-updated",A.post)};return(t,s)=>{const d=cs,c=fs("FeedPost",!0),w=hs("click-outside");return l(),r("div",{class:P([$.isNested?"border border-gray-200 dark:border-vikinger-dark-50/30 rounded-xl p-4 bg-gray-50 dark:bg-vikinger-dark-200/50":te.value?"":"vikinger-card group hover:shadow-lg transition-shadow duration-300"])},[te.value&&!$.isNested?(l(),S(Ft,{key:0,poll:J.value,"show-actions":ge.value,"is-nested":!1,onDelete:It,onUpdate:Nt},null,8,["poll","show-actions"])):N.value&&!$.isNested?(l(),r(j,{key:1},[e("div",Kl,[e("img",{src:z.value,class:"w-10 h-10 rounded-full object-cover ring-2 ring-vikinger-cyan/30",alt:B.value?.username},null,8,Gl),e("div",Wl,[e("div",Ql,[v(d,{to:`/profile/${B.value?.id}`,class:"font-bold text-gray-800 dark:text-white hover:text-vikinger-purple transition-colors"},{default:ne(()=>[F(k(B.value?.username||"à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰"),1)]),_:1},8,["to"]),s[13]||(s[13]=e("span",{class:"text-gray-600 dark:text-gray-400"},"à¹à¸Šà¸£à¹Œà¹‚à¸žà¸ªà¸•à¹Œà¸‚à¸­à¸‡",-1)),v(d,{to:`/profile/${m.value?.id}`,class:"font-semibold text-vikinger-cyan hover:underline"},{default:ne(()=>[F(k(m.value?.username||"à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰"),1)]),_:1},8,["to"])]),e("div",Yl,[v(i(n),{icon:"fluent:share-24-regular",class:"w-3.5 h-3.5"}),e("span",null,k(A.post.diff_humans_created_at||"à¹€à¸¡à¸·à¹ˆà¸­à¸ªà¸±à¸à¸„à¸£à¸¹à¹ˆ"),1)])]),e("div",Hl,[e("button",{onClick:s[0]||(s[0]=ut(a=>rt.value=!rt.value,["stop"])),class:"p-2 hover:bg-gray-100 dark:hover:bg-vikinger-dark-200 rounded-lg transition-colors opacity-0 group-hover:opacity-100"},[v(i(n),{icon:"fluent:more-horizontal-24-regular",class:"w-5 h-5 text-gray-600 dark:text-gray-300"})]),v(kt,{name:"dropdown"},{default:ne(()=>[rt.value?ue((l(),r("div",Jl,[zt.value?(l(),r("button",{key:0,onClick:os,disabled:gt.value,class:"w-full flex items-center gap-3 px-4 py-3 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors text-left text-red-500"},[gt.value?(l(),S(i(n),{key:1,icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin"})):(l(),S(i(n),{key:0,icon:"fluent:delete-24-regular",class:"w-5 h-5"})),s[14]||(s[14]=e("span",{class:"text-sm font-medium"},"à¸¥à¸šà¸à¸²à¸£à¹à¸Šà¸£à¹Œ",-1))],8,Xl)):h("",!0),e("button",Zl,[v(i(n),{icon:"fluent:flag-24-regular",class:"w-5 h-5 text-gray-500"}),s[15]||(s[15]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"à¸£à¸²à¸¢à¸‡à¸²à¸™",-1))])])),[[w,()=>rt.value=!1]]):h("",!0)]),_:1})])]),D.value?(l(),r("p",ea,k(D.value),1)):h("",!0),T.value?.shareable?(l(),S(c,{key:1,post:T.value.shareable,"is-nested":!0},null,8,["post"])):(l(),r("div",ta,[v(i(n),{icon:"fluent:warning-24-regular",class:"w-5 h-5 inline-block mr-2"}),s[16]||(s[16]=F(" à¹„à¸¡à¹ˆà¸žà¸šà¹‚à¸žà¸ªà¸•à¹Œà¸•à¹‰à¸™à¸‰à¸šà¸±à¸š ",-1))])),e("div",sa,[e("div",la,[Be.value>0?(l(),r("span",aa,[v(i(n),{icon:"fluent:thumb-like-24-filled",class:"w-4 h-4 text-vikinger-purple"}),F(" "+k(Be.value),1)])):h("",!0),Se.value>0?(l(),r("span",ra,[v(i(n),{icon:"fluent:thumb-dislike-24-filled",class:"w-4 h-4 text-red-500"}),F(" "+k(Se.value),1)])):h("",!0),We.value>0?(l(),r("span",ia,[v(i(n),{icon:"fluent:comment-24-filled",class:"w-4 h-4 text-vikinger-cyan"}),F(" "+k(We.value),1)])):h("",!0)]),e("div",oa,[e("button",{onClick:Zt,disabled:it.value,class:P(["flex items-center gap-2 transition-colors",ie.value?"text-vikinger-purple dark:text-vikinger-purple":"text-gray-500 dark:text-gray-400 hover:text-vikinger-purple"])},[v(i(n),{icon:ie.value?"fluent:thumb-like-24-filled":"fluent:thumb-like-24-regular",class:"w-5 h-5"},null,8,["icon"]),e("span",ua,k(ie.value?"à¸–à¸¹à¸à¹ƒà¸ˆà¹à¸¥à¹‰à¸§":"à¸–à¸¹à¸à¹ƒà¸ˆ"),1)],10,na),e("button",{onClick:es,disabled:ot.value,class:P(["flex items-center gap-2 transition-colors",oe.value?"text-red-500 dark:text-red-500":"text-gray-500 dark:text-gray-400 hover:text-red-500"])},[v(i(n),{icon:oe.value?"fluent:thumb-dislike-24-filled":"fluent:thumb-dislike-24-regular",class:"w-5 h-5"},null,8,["icon"]),e("span",ca,k(oe.value?"à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆà¹à¸¥à¹‰à¸§":"à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆ"),1)],10,da),e("button",{onClick:ss,class:"flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-vikinger-cyan transition-colors"},[v(i(n),{icon:"fluent:comment-24-regular",class:"w-5 h-5"}),s[17]||(s[17]=e("span",{class:"text-sm"},"à¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™",-1))])]),ct.value?(l(),r("div",va,[e("div",ga,[e("img",{src:U.value,class:"w-8 h-8 rounded-full object-cover flex-shrink-0",alt:"Your avatar"},null,8,pa),e("div",ka,[ue(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=a=>Qe.value=a),onKeydown:nt(ut(Tt,["ctrl"]),["enter"]),placeholder:"à¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™... (Ctrl+Enter à¹€à¸žà¸·à¹ˆà¸­à¸ªà¹ˆà¸‡)",class:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-vikinger-dark-50/30 bg-white dark:bg-vikinger-dark-100 text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-vikinger-purple resize-none",rows:"2"},null,40,fa),[[De,Qe.value]]),e("button",{onClick:Tt,disabled:!Qe.value.trim()||vt.value,class:"absolute bottom-2 right-2 p-1.5 rounded-lg bg-vikinger-purple text-white hover:bg-vikinger-purple/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[vt.value?(l(),S(i(n),{key:1,icon:"fluent:spinner-ios-20-regular",class:"w-4 h-4 animate-spin"})):(l(),S(i(n),{key:0,icon:"fluent:send-24-filled",class:"w-4 h-4"}))],8,ha)])]),he.value.length>0?(l(),r("div",ya,[(l(!0),r(j,null,O(he.value,a=>(l(),r("div",{key:a.id,class:"flex gap-3 group"},[e("img",{src:W(a),class:"w-10 h-10 flex-shrink-0 aspect-square rounded-full object-cover",alt:a.user?.username},null,8,xa),e("div",ba,[e("div",ma,[e("h6",_a,k(a.user?.username||"Unknown"),1),e("p",wa,k(a.content),1)]),a.likes||a.dislikes?(l(),r("div",$a,[a.likes?(l(),r("span",Ca,[v(i(n),{icon:"fluent:thumb-like-16-filled",class:"w-3 h-3 text-vikinger-purple"}),e("span",Pa,k(a.likes),1)])):h("",!0),a.dislikes?(l(),r("span",Aa,[v(i(n),{icon:"fluent:thumb-dislike-16-filled",class:"w-3 h-3 text-red-500"}),e("span",Ba,k(a.dislikes),1)])):h("",!0)])):h("",!0),e("div",Sa,[e("span",null,k(a.diff_humans_created_at||"à¹€à¸¡à¸·à¹ˆà¸­à¸ªà¸±à¸à¸„à¸£à¸¹à¹ˆ"),1),e("button",{onClick:y=>rs(a),disabled:a.isLiking||i(f).user?.id===a.user?.id,class:P(["flex items-center gap-1 font-medium transition-colors",a.is_liked_by_auth?"text-vikinger-purple":"hover:text-vikinger-purple",i(f).user?.id===a.user?.id?"opacity-50 cursor-not-allowed":""])},[v(i(n),{icon:a.is_liked_by_auth?"fluent:thumb-like-20-filled":"fluent:thumb-like-20-regular",class:"w-3.5 h-3.5"},null,8,["icon"]),e("span",null,k(a.is_liked_by_auth?"à¸–à¸¹à¸à¹ƒà¸ˆà¹à¸¥à¹‰à¸§":"à¸–à¸¹à¸à¹ƒà¸ˆ"),1)],10,La),e("button",{onClick:y=>is(a),disabled:a.isDisliking||i(f).user?.id===a.user?.id,class:P(["flex items-center gap-1 font-medium transition-colors",a.is_disliked_by_auth?"text-red-500":"hover:text-red-500",i(f).user?.id===a.user?.id?"opacity-50 cursor-not-allowed":""])},[v(i(n),{icon:a.is_disliked_by_auth?"fluent:thumb-dislike-20-filled":"fluent:thumb-dislike-20-regular",class:"w-3.5 h-3.5"},null,8,["icon"]),e("span",null,k(a.is_disliked_by_auth?"à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆà¹à¸¥à¹‰à¸§":"à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆ"),1)],10,Da),a.user?.id===i(f).user?.id?(l(),r("button",{key:0,onClick:y=>as(a.id),class:"flex items-center gap-1 hover:text-red-500 font-medium transition-colors"},[v(i(n),{icon:"fluent:delete-24-regular",class:"w-3.5 h-3.5"}),s[18]||(s[18]=e("span",null,"à¸¥à¸š",-1))],8,ja)):h("",!0)])])]))),128))])):he.value.length===0?(l(),r("div",Ta," à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™ à¹€à¸›à¹‡à¸™à¸„à¸™à¹à¸£à¸à¸—à¸µà¹ˆà¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™! ")):h("",!0),bt.value&&!g.value?(l(),r("button",{key:2,onClick:wt,class:"w-full py-2 text-sm text-vikinger-purple hover:bg-vikinger-purple/10 rounded-lg transition-colors flex items-center justify-center gap-2"},[v(i(n),{icon:"fluent:arrow-down-24-regular",class:"w-4 h-4"}),F(" à¸”à¸¹à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¸à¹ˆà¸­à¸™à¸«à¸™à¹‰à¸² ("+k(mt.value)+" à¸£à¸²à¸¢à¸à¸²à¸£) ",1)])):h("",!0),g.value?(l(),r("div",Ea,[v(i(n),{icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin text-vikinger-purple"}),s[19]||(s[19]=e("span",{class:"ml-2 text-sm text-gray-500"},"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”...",-1))])):h("",!0)])):h("",!0)])],64)):(l(),r(j,{key:2},[e("div",Ia,[e("div",Na,[e("div",Fa,[e("img",{src:G.value,class:"w-12 h-12 aspect-square rounded-full object-cover ring-2 ring-vikinger-purple/30 group-hover:ring-vikinger-purple transition-all duration-300",alt:m.value?.username},null,8,Ua),Fe.value&&!$.isNested?(l(),r("div",{key:0,class:P([Fe.value.color,"absolute -bottom-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center shadow-sm"])},[v(i(n),{icon:Fe.value.icon,class:"w-3 h-3 text-white"},null,8,["icon"])],2)):h("",!0)]),e("div",null,[e("div",Ma,[v(d,{to:`/profile/${m.value?.id}`,class:"font-bold text-gray-800 dark:text-white hover:text-vikinger-purple cursor-pointer transition-colors"},{default:ne(()=>[F(k(m.value?.username||"Unknown User"),1)]),_:1},8,["to"]),m.value?.verified?(l(),S(i(n),{key:0,icon:"fluent:checkmark-circle-24-filled",class:"w-4 h-4 text-green-500"})):h("",!0),Ee.value?(l(),r("span",Oa," â€” "+k(Ee.value),1)):h("",!0),je.value&&be.value&&me.value?(l(),r(j,{key:2},[e("span",Ra,k(me.value),1),Je.value?(l(),r("span",za,k(Je.value),1)):h("",!0)],64)):h("",!0),E.value?(l(),r("div",Va,[v(i(n),{icon:E.value.icon,class:P(["w-3.5 h-3.5",E.value.color])},null,8,["icon","class"]),E.value.link?(l(),S(d,{key:0,to:E.value.link,class:P(["hover:underline font-medium transition-colors",E.value.color])},{default:ne(()=>[F(k(E.value.name),1)]),_:1},8,["to","class"])):(l(),r("span",qa,k(E.value.name),1)),E.value.academy?(l(),r(j,{key:2},[s[20]||(s[20]=e("span",{class:"text-gray-400"},"â€¢",-1)),E.value.academyLink?(l(),S(d,{key:0,to:E.value.academyLink,class:"text-purple-500 hover:underline font-medium transition-colors"},{default:ne(()=>[F(k(E.value.academy),1)]),_:1},8,["to"])):(l(),r("span",Ka,k(E.value.academy),1))],64)):h("",!0)])):h("",!0)]),e("div",Ga,[e("span",Wa,[v(i(n),{icon:et.value,class:"w-3.5 h-3.5"},null,8,["icon"]),F(" "+k(I.value),1)]),_e.value?(l(),r("span",Qa,[v(i(n),{icon:"fluent:location-24-regular",class:"w-3.5 h-3.5"}),F(" "+k(_e.value),1)])):h("",!0)])])]),$.isNested?h("",!0):(l(),r("div",Ya,[e("button",{onClick:s[2]||(s[2]=ut(a=>Ke.value=!Ke.value,["stop"])),class:"p-2 hover:bg-gray-100 dark:hover:bg-vikinger-dark-200 rounded-lg transition-colors opacity-0 group-hover:opacity-100"},[v(i(n),{icon:"fluent:more-horizontal-24-regular",class:"w-5 h-5 text-gray-600 dark:text-gray-300"})]),v(kt,{name:"dropdown"},{default:ne(()=>[Ke.value?ue((l(),r("div",Ha,[ve.value&&ge.value?(l(),r(j,{key:0},[e("button",Ja,[v(i(n),{icon:"fluent:edit-24-regular",class:"w-5 h-5"}),s[21]||(s[21]=e("span",{class:"text-sm font-medium"},"à¹à¸à¹‰à¹„à¸‚à¹‚à¸žà¸¥",-1))]),e("button",Xa,[v(i(n),{icon:"fluent:checkmark-circle-24-regular",class:"w-5 h-5"}),s[22]||(s[22]=e("span",{class:"text-sm font-medium"},"à¸›à¸´à¸”à¹‚à¸žà¸¥",-1))]),e("button",{onClick:Et,disabled:Ge.value,class:"w-full flex items-center gap-3 px-4 py-3 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors text-left text-red-500"},[Ge.value?(l(),S(i(n),{key:1,icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin"})):(l(),S(i(n),{key:0,icon:"fluent:delete-24-regular",class:"w-5 h-5"})),s[23]||(s[23]=e("span",{class:"text-sm font-medium"},"à¸¥à¸šà¹‚à¸žà¸¥",-1))],8,Za)],64)):(l(),r(j,{key:1},[K.value?(l(),r("button",{key:0,onClick:ns,class:"w-full flex items-center gap-3 px-4 py-3 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors text-left text-blue-600"},[v(i(n),{icon:"fluent:edit-24-regular",class:"w-5 h-5"}),s[24]||(s[24]=e("span",{class:"text-sm font-medium"},"à¹à¸à¹‰à¹„à¸‚à¹‚à¸žà¸ªà¸•à¹Œ",-1))])):h("",!0),K.value?(l(),r("button",{key:1,onClick:Et,disabled:Ge.value,class:"w-full flex items-center gap-3 px-4 py-3 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors text-left text-red-500"},[Ge.value?(l(),S(i(n),{key:1,icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin"})):(l(),S(i(n),{key:0,icon:"fluent:delete-24-regular",class:"w-5 h-5"})),s[25]||(s[25]=e("span",{class:"text-sm font-medium"},"à¸¥à¸šà¹‚à¸žà¸ªà¸•à¹Œ",-1))],8,er)):h("",!0)],64)),e("button",tr,[v(i(n),{icon:"fluent:flag-24-regular",class:"w-5 h-5 text-gray-500"}),s[26]||(s[26]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"à¸£à¸²à¸¢à¸‡à¸²à¸™",-1))])])),[[w,()=>Ke.value=!1]]):h("",!0)]),_:1})]))]),(E.value?.amount||E.value?.points)&&!$.isNested?(l(),r("div",sr,[e("div",lr,[e("div",ar,[e("div",rr,[v(i(n),{icon:E.value.type==="donate_recipient"?"fluent:gift-24-filled":"fluent:heart-24-filled",class:"w-6 h-6 text-white"},null,8,["icon"])]),e("div",null,[e("p",ir,k(E.value.type==="donate"?"à¸ˆà¸³à¸™à¸§à¸™à¸šà¸£à¸´à¸ˆà¸²à¸„":"à¹à¸•à¹‰à¸¡à¸—à¸µà¹ˆà¹„à¸”à¹‰à¸£à¸±à¸š"),1),e("p",or,k(E.value.points?`${E.value.points} à¹à¸•à¹‰à¸¡`:E.value.amount),1)])]),v(i(n),{icon:E.value.icon,class:"w-16 h-16 text-pink-200 dark:text-pink-900/50"},null,8,["icon"])])])):h("",!0),e("div",{class:P($.isNested?"mb-2":"mb-4")},[p.value.title?(l(),r("h4",nr,k(p.value.title),1)):h("",!0),e("p",ur,k(ht.value),1),Ze.value?(l(),r("button",{key:1,onClick:s[3]||(s[3]=a=>Ne.value=!Ne.value),class:"text-vikinger-purple hover:underline text-sm font-medium mt-1"},k(Ne.value?"à¹à¸ªà¸”à¸‡à¸™à¹‰à¸­à¸¢à¸¥à¸‡":"à¸­à¹ˆà¸²à¸™à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡"),1)):h("",!0),R.value.length?(l(),r("div",dr,[(l(!0),r(j,null,O(R.value,a=>(l(),r("span",{key:a,class:"text-sm text-vikinger-purple hover:text-vikinger-cyan hover:underline cursor-pointer transition-colors"}," #"+k(a),1))),128))])):h("",!0),Q.value.length?(l(),r("div",{key:3,class:P(["mt-4 rounded-xl overflow-hidden",$.isNested?"max-h-64":""])},[Q.value.length===1?(l(),r("div",{key:0,onClick:s[4]||(s[4]=a=>xt(0)),class:"cursor-pointer"},[e("img",{src:Q.value[0].url||Q.value[0],class:P(["w-full object-cover hover:scale-[1.02] transition-transform duration-300",$.isNested?"max-h-64":"max-h-[500px]"]),alt:"Post image"},null,10,cr)])):Q.value.length===2?(l(),r("div",vr,[(l(!0),r(j,null,O(Q.value,(a,y)=>(l(),r("img",{key:y,src:a.url||a,class:P(["w-full object-cover cursor-pointer hover:opacity-90 transition-opacity",$.isNested?"h-32":"h-64"]),alt:"Post image",onClick:V=>xt(y)},null,10,gr))),128))])):(l(),r("div",pr,[(l(!0),r(j,null,O(Q.value.slice(0,4),(a,y)=>(l(),r("img",{key:y,src:a.url||a,class:P(["w-full object-cover cursor-pointer hover:opacity-90 transition-opacity",$.isNested?"h-24":"h-40",{"brightness-50":y===3&&Q.value.length>4}]),alt:"Post image",onClick:V=>xt(y)},null,10,kr))),128)),Q.value.length>4?(l(),r("div",fr," +"+k(Q.value.length-4),1)):h("",!0)]))],2)):h("",!0),p.value.media?(l(),r("div",hr,[p.value.media.type==="video"?(l(),r("video",yr,[e("source",{src:p.value.media.url},null,8,xr)])):p.value.media.type==="audio"?(l(),r("audio",br,[e("source",{src:p.value.media.url},null,8,mr)])):h("",!0)])):h("",!0),ve.value&&J.value?(l(),r("div",_r,[v(Ft,{poll:J.value,"show-actions":ge.value&&!$.isNested,"is-nested":$.isNested,onDelete:It,onUpdate:Nt},null,8,["poll","show-actions","is-nested"])])):h("",!0)],2),e("div",{class:P(["flex items-center justify-between border-t border-gray-200 dark:border-vikinger-dark-50/30 text-gray-500 dark:text-gray-400",$.isNested?"py-2 text-xs border-b-0":"py-3 text-sm border-b"])},[e("div",wr,[$.isNested?h("",!0):(l(),r("span",$r,[v(i(n),{icon:"fluent:eye-24-regular",class:"w-4 h-4"}),e("span",Cr,k(we.value),1)])),e("span",{class:P(["flex items-center gap-1.5 transition-colors",$.isNested?"":"hover:text-vikinger-cyan cursor-pointer"]),onClick:s[5]||(s[5]=a=>!$.isNested&&_t())},[v(i(n),{icon:"fluent:comment-24-regular",class:P($.isNested?"w-3.5 h-3.5":"w-4 h-4")},null,8,["class"]),e("span",Pr,k(lt.value),1)],2),e("span",{class:P(["flex items-center gap-1.5 transition-colors",$.isNested?"":"hover:text-vikinger-purple cursor-pointer",{"text-vikinger-purple":X.value&&!$.isNested}]),onClick:s[6]||(s[6]=a=>!$.isNested&&Ct())},[v(i(n),{icon:X.value?"fluent:thumb-like-24-filled":"fluent:thumb-like-24-regular",class:P($.isNested?"w-3.5 h-3.5":"w-4 h-4")},null,8,["icon","class"]),e("span",Ar,k(Re.value),1)],2),e("span",{class:P(["flex items-center gap-1.5 transition-colors",$.isNested?"":"hover:text-red-500 cursor-pointer",{"text-red-500":Z.value&&!$.isNested}]),onClick:s[7]||(s[7]=a=>!$.isNested&&Pt())},[v(i(n),{icon:Z.value?"fluent:thumb-dislike-24-filled":"fluent:thumb-dislike-24-regular",class:P($.isNested?"w-3.5 h-3.5":"w-4 h-4")},null,8,["icon","class"]),e("span",Br,k(ze.value),1)],2),$.isNested?h("",!0):(l(),r("span",Sr,[v(i(n),{icon:"fluent:share-24-regular",class:"w-4 h-4"}),e("span",Lr,k(xe.value),1)]))]),$.isNested&&p.value.post_url?(l(),S(d,{key:0,to:p.value.post_url,class:"flex items-center gap-1.5 text-vikinger-purple hover:text-vikinger-cyan transition-colors"},{default:ne(()=>[s[27]||(s[27]=e("span",{class:"text-xs font-medium"},"à¸”à¸¹à¹‚à¸žà¸ªà¸•à¹Œà¸•à¹‰à¸™à¸‰à¸šà¸±à¸š",-1)),v(i(n),{icon:"fluent:arrow-right-24-regular",class:"w-3.5 h-3.5"})]),_:1},8,["to"])):h("",!0)],2),$.isNested?h("",!0):(l(),r("div",{key:1,class:P(["flex items-center gap-2",$.isNested?"mt-2":"mt-4"])},[e("button",{onClick:Ct,disabled:Ae.value||K.value,class:P(["flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg transition-all duration-300",X.value?"bg-vikinger-purple/10 text-vikinger-purple":K.value?"opacity-50 cursor-not-allowed text-gray-400 dark:text-gray-600":"hover:bg-gray-100 dark:hover:bg-vikinger-dark-200 text-gray-600 dark:text-gray-300"])},[Ae.value?(l(),S(i(n),{key:1,icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin"})):(l(),S(i(n),{key:0,icon:X.value?"fluent:thumb-like-24-filled":"fluent:thumb-like-24-regular",class:"w-5 h-5 transition-transform hover:scale-110"},null,8,["icon"])),e("span",jr,k(X.value?"à¸–à¸¹à¸à¹ƒà¸ˆà¹à¸¥à¹‰à¸§":"à¸–à¸¹à¸à¹ƒà¸ˆ"),1)],10,Dr),e("button",{onClick:Pt,disabled:Ve.value||K.value,class:P(["flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg transition-all duration-300",Z.value?"bg-red-500/10 text-red-500":K.value?"opacity-50 cursor-not-allowed text-gray-400 dark:text-gray-600":"hover:bg-gray-100 dark:hover:bg-vikinger-dark-200 text-gray-600 dark:text-gray-300"])},[Ve.value?(l(),S(i(n),{key:1,icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin"})):(l(),S(i(n),{key:0,icon:Z.value?"fluent:thumb-dislike-24-filled":"fluent:thumb-dislike-24-regular",class:"w-5 h-5 transition-transform hover:scale-110"},null,8,["icon"])),e("span",Er,k(Z.value?"à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆà¹à¸¥à¹‰à¸§":"à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆ"),1)],10,Tr),e("button",{onClick:_t,class:"flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg hover:bg-gray-100 dark:hover:bg-vikinger-dark-200 transition-colors group"},[v(i(n),{icon:"fluent:comment-24-regular",class:"w-5 h-5 text-gray-600 dark:text-gray-300 group-hover:text-vikinger-cyan transition-colors"}),s[28]||(s[28]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™",-1))]),e("div",Ir,[e("button",{onClick:s[8]||(s[8]=a=>at.value=!at.value),disabled:ye.value||K.value,class:P(["w-full flex items-center justify-center gap-2 py-2.5 rounded-lg transition-colors group",K.value?"opacity-50 cursor-not-allowed text-gray-400 dark:text-gray-600":"hover:bg-gray-100 dark:hover:bg-vikinger-dark-200"])},[ye.value?(l(),S(i(n),{key:1,icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin"})):(l(),S(i(n),{key:0,icon:"fluent:share-24-regular",class:"w-5 h-5 text-gray-600 dark:text-gray-300 group-hover:text-vikinger-green transition-colors"})),s[29]||(s[29]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"à¹à¸Šà¸£à¹Œ",-1))],10,Nr),v(kt,{name:"dropdown"},{default:ne(()=>[at.value&&!K.value?(l(),r("div",Fr,[e("button",{onClick:Ht,class:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-vikinger-dark-200 transition-colors text-left"},[v(i(n),{icon:"fluent:flash-24-regular",class:"w-5 h-5 text-vikinger-green"}),s[30]||(s[30]=e("div",null,[e("p",{class:"text-sm font-medium text-gray-800 dark:text-white"},"à¹à¸Šà¸£à¹Œà¹€à¸¥à¸¢"),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"à¹à¸Šà¸£à¹Œà¸—à¸±à¸™à¸—à¸µ - 36 à¹à¸•à¹‰à¸¡")],-1))]),e("button",{onClick:Jt,class:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-vikinger-dark-200 transition-colors text-left"},[v(i(n),{icon:"fluent:edit-24-regular",class:"w-5 h-5 text-vikinger-purple"}),s[31]||(s[31]=e("div",null,[e("p",{class:"text-sm font-medium text-gray-800 dark:text-white"},"à¹à¸Šà¸£à¹Œà¸žà¸£à¹‰à¸­à¸¡à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™"),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"à¹€à¸žà¸´à¹ˆà¸¡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹à¸¥à¸°à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²")],-1))])])):h("",!0)]),_:1})])],2)),$.post.reactions&&!$.isNested?(l(),r("div",Ur,[e("div",Mr,[(l(!0),r(j,null,O(Vt.slice(0,3),a=>(l(),r("div",{key:a.id,class:"w-7 h-7 rounded-full bg-white dark:bg-vikinger-dark-200 flex items-center justify-center text-sm border-2 border-white dark:border-vikinger-dark-100 shadow-sm"},k(a.icon),1))),128))]),e("span",Or,k($.post.reactions.total||"10+")+" à¸„à¸™à¸–à¸¹à¸à¹ƒà¸ˆ",1)])):h("",!0),tt.value&&!$.isNested?(l(),r("div",Rr,[e("div",zr,[e("img",{src:U.value,class:"w-10 h-10 flex-shrink-0 aspect-square rounded-full object-cover",alt:"You"},null,8,Vr),e("div",qr,[ue(e("input",{"onUpdate:modelValue":s[9]||(s[9]=a=>fe.value=a),type:"text",placeholder:"à¹€à¸‚à¸µà¸¢à¸™à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™...",class:"flex-1 px-4 py-2.5 rounded-full bg-gray-100 dark:bg-vikinger-dark-200 border-none outline-none text-gray-800 dark:text-white focus:ring-2 focus:ring-vikinger-purple/30 transition-all",disabled:qe.value,onKeydown:nt($t,["enter"])},null,40,Kr),[[De,fe.value]]),e("button",{onClick:$t,disabled:qe.value||!fe.value.trim(),class:"p-2.5 rounded-full bg-gradient-to-r from-vikinger-purple to-vikinger-cyan text-white hover:shadow-lg transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"},[qe.value?(l(),S(i(n),{key:1,icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin"})):(l(),S(i(n),{key:0,icon:"fluent:send-24-filled",class:"w-5 h-5"}))],8,Gr)])]),he.value.length?(l(),r("div",Wr,[(l(!0),r(j,null,O(he.value,a=>(l(),r("div",{key:a.id,class:"flex gap-3 group"},[e("img",{src:W(a),class:"w-10 h-10 flex-shrink-0 aspect-square rounded-full object-cover",alt:a.user?.username||a.author?.username},null,8,Qr),e("div",Yr,[e("div",Hr,[e("h6",Jr,k(a.user?.username||a.author?.username),1),e("p",Xr,k(a.content),1)]),a.likes||a.dislikes?(l(),r("div",Zr,[a.likes?(l(),r("span",ei,[v(i(n),{icon:"fluent:thumb-like-16-filled",class:"w-3 h-3 text-vikinger-purple"}),e("span",ti,k(a.likes),1)])):h("",!0),a.dislikes?(l(),r("span",si,[v(i(n),{icon:"fluent:thumb-dislike-16-filled",class:"w-3 h-3 text-red-500"}),e("span",li,k(a.dislikes),1)])):h("",!0)])):h("",!0),e("div",ai,[e("span",ri,k(a.create_at||a.diff_humans_created_at||a.createdAt||"à¹€à¸¡à¸·à¹ˆà¸­à¸ªà¸±à¸à¸„à¸£à¸¹à¹ˆ"),1),s[34]||(s[34]=e("span",{class:"text-gray-300 dark:text-gray-600"},"â€¢",-1)),e("button",{onClick:y=>At(a),disabled:a.isLiking||i(f).user?.id===(a.user?.id||a.author?.id),class:P(["flex items-center gap-1 font-medium transition-colors px-1.5 py-0.5 rounded-md hover:bg-gray-100 dark:hover:bg-vikinger-dark-300",a.isLikedByAuth?"text-vikinger-purple bg-vikinger-purple/10":"hover:text-vikinger-purple",i(f).user?.id===(a.user?.id||a.author?.id)?"opacity-50 cursor-not-allowed":""])},[v(i(n),{icon:a.isLikedByAuth?"fluent:thumb-like-20-filled":"fluent:thumb-like-20-regular",class:"w-3.5 h-3.5"},null,8,["icon"]),e("span",oi,k(a.isLikedByAuth?"à¸–à¸¹à¸à¹ƒà¸ˆà¹à¸¥à¹‰à¸§":"à¸–à¸¹à¸à¹ƒà¸ˆ"),1)],10,ii),e("button",{onClick:y=>Bt(a),disabled:a.isDisliking||i(f).user?.id===(a.user?.id||a.author?.id),class:P(["flex items-center gap-1 font-medium transition-colors px-1.5 py-0.5 rounded-md hover:bg-gray-100 dark:hover:bg-vikinger-dark-300",a.isDislikedByAuth?"text-red-500 bg-red-500/10":"hover:text-red-500",i(f).user?.id===(a.user?.id||a.author?.id)?"opacity-50 cursor-not-allowed":""])},[v(i(n),{icon:a.isDislikedByAuth?"fluent:thumb-dislike-20-filled":"fluent:thumb-dislike-20-regular",class:"w-3.5 h-3.5"},null,8,["icon"]),e("span",ui,k((a.isDislikedByAuth,"à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆ")),1)],10,ni),e("button",{onClick:y=>qt(a),class:"flex items-center gap-1 font-medium transition-colors px-1.5 py-0.5 rounded-md hover:bg-gray-100 dark:hover:bg-vikinger-dark-300 hover:text-vikinger-purple"},[v(i(n),{icon:"fluent:arrow-reply-20-regular",class:"w-3.5 h-3.5"}),s[32]||(s[32]=e("span",{class:"hidden sm:inline"},"à¸•à¸­à¸šà¸à¸¥à¸±à¸š",-1))],8,di),a.replies_count>0?(l(),r("button",{key:0,onClick:y=>Kt(a),class:"flex items-center gap-1 font-medium transition-colors px-1.5 py-0.5 rounded-md hover:bg-vikinger-cyan/10 text-vikinger-cyan"},[v(i(n),{icon:se.value[a.id]?"fluent:chevron-up-20-regular":"fluent:chevron-down-20-regular",class:"w-3.5 h-3.5"},null,8,["icon"]),e("span",vi,k(se.value[a.id]?"à¸‹à¹ˆà¸­à¸™":""),1),e("span",null,k(a.replies_count),1),s[33]||(s[33]=e("span",{class:"hidden sm:inline"},"à¸à¸²à¸£à¸•à¸­à¸šà¸à¸¥à¸±à¸š",-1))],8,ci)):h("",!0)]),Ue.value?.id===a.id?(l(),r("div",gi,[e("img",{src:U.value,class:"w-8 h-8 rounded-full object-cover flex-shrink-0",alt:"You"},null,8,pi),e("div",ki,[ue(e("input",{id:`reply-input-${a.id}`,"onUpdate:modelValue":s[10]||(s[10]=y=>ae.value=y),type:"text",placeholder:`à¸•à¸­à¸šà¸à¸¥à¸±à¸š ${a.user?.username||a.author?.username}...`,class:"flex-1 px-3 py-2 text-sm rounded-full bg-gray-100 dark:bg-vikinger-dark-300 border-none focus:ring-2 focus:ring-vikinger-purple/50 placeholder-gray-400 dark:text-white",onKeydown:[nt(y=>Lt(a),["enter"]),nt(St,["escape"])]},null,40,fi),[[De,ae.value]]),e("button",{onClick:y=>Lt(a),disabled:Pe.value||!ae.value.trim(),class:"p-2 rounded-full bg-gradient-to-r from-vikinger-purple to-vikinger-cyan text-white hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[Pe.value?(l(),S(i(n),{key:1,icon:"fluent:spinner-ios-20-regular",class:"w-4 h-4 animate-spin"})):(l(),S(i(n),{key:0,icon:"fluent:send-20-filled",class:"w-4 h-4"}))],8,hi),e("button",{onClick:St,class:"p-2 text-gray-500 hover:text-red-500 transition-colors"},[v(i(n),{icon:"fluent:dismiss-20-regular",class:"w-4 h-4"})])])])):h("",!0),se.value[a.id]?(l(),r("div",yi,[Me.value[a.id]?(l(),r("div",xi,[v(i(n),{icon:"fluent:spinner-ios-20-regular",class:"w-4 h-4 animate-spin text-vikinger-purple"}),s[35]||(s[35]=e("span",{class:"text-xs text-gray-500"},"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸à¸²à¸£à¸•à¸­à¸šà¸à¸¥à¸±à¸š...",-1))])):(l(),r(j,{key:1},[(l(!0),r(j,null,O(re.value[a.id]||[],y=>(l(),r("div",{key:y.id,class:"flex gap-2"},[e("img",{src:W(y),class:"w-8 h-8 flex-shrink-0 rounded-full object-cover",alt:y.user?.username},null,8,bi),e("div",mi,[e("div",_i,[e("h6",wi,k(y.user?.username),1),e("p",$i,k(y.content),1)]),y.likes||y.dislikes?(l(),r("div",Ci,[y.likes?(l(),r("span",Pi,[v(i(n),{icon:"fluent:thumb-like-16-filled",class:"w-2.5 h-2.5 text-vikinger-purple"}),F(" "+k(y.likes),1)])):h("",!0),y.dislikes?(l(),r("span",Ai,[v(i(n),{icon:"fluent:thumb-dislike-16-filled",class:"w-2.5 h-2.5 text-red-500"}),F(" "+k(y.dislikes),1)])):h("",!0)])):h("",!0),e("div",Bi,[e("span",null,k(y.create_at||"à¹€à¸¡à¸·à¹ˆà¸­à¸ªà¸±à¸à¸„à¸£à¸¹à¹ˆ"),1),s[36]||(s[36]=e("span",{class:"text-gray-300 dark:text-gray-600"},"â€¢",-1)),e("button",{onClick:V=>Wt(y),disabled:y.isLiking||i(f).user?.id===y.user?.id,class:P(["flex items-center gap-0.5 font-medium transition-colors px-1 py-0.5 rounded hover:bg-gray-100 dark:hover:bg-vikinger-dark-400",y.isLikedByAuth?"text-vikinger-purple":"hover:text-vikinger-purple"])},[v(i(n),{icon:y.isLikedByAuth?"fluent:thumb-like-16-filled":"fluent:thumb-like-16-regular",class:"w-3 h-3"},null,8,["icon"]),e("span",Li,k(y.isLikedByAuth?"à¸–à¸¹à¸à¹ƒà¸ˆà¹à¸¥à¹‰à¸§":"à¸–à¸¹à¸à¹ƒà¸ˆ"),1)],10,Si),e("button",{onClick:V=>Qt(y),disabled:y.isDisliking||i(f).user?.id===y.user?.id,class:P(["flex items-center gap-0.5 font-medium transition-colors px-1 py-0.5 rounded hover:bg-gray-100 dark:hover:bg-vikinger-dark-400",y.isDislikedByAuth?"text-red-500":"hover:text-red-500"])},[v(i(n),{icon:y.isDislikedByAuth?"fluent:thumb-dislike-16-filled":"fluent:thumb-dislike-16-regular",class:"w-3 h-3"},null,8,["icon"]),e("span",ji,k((y.isDislikedByAuth,"à¹„à¸¡à¹ˆà¸–à¸¹à¸à¹ƒà¸ˆ")),1)],10,Di)])])]))),128)),Oe.value[a.id]?.hasMore?(l(),r("button",{key:0,onClick:y=>Gt(a),class:"text-xs text-vikinger-purple hover:text-vikinger-cyan font-medium transition-colors flex items-center gap-1"},[v(i(n),{icon:"fluent:arrow-down-20-regular",class:"w-3 h-3"}),s[37]||(s[37]=F(" à¹‚à¸«à¸¥à¸”à¸à¸²à¸£à¸•à¸­à¸šà¸à¸¥à¸±à¸šà¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡ ",-1))],8,Ti)):h("",!0)],64))])):h("",!0)])]))),128))])):he.value.length===0?(l(),r("div",Ei," à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™ à¹€à¸›à¹‡à¸™à¸„à¸™à¹à¸£à¸à¸—à¸µà¹ˆà¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™! ")):h("",!0),bt.value&&!g.value?(l(),r("button",{key:2,onClick:wt,class:"w-full py-2 text-sm text-vikinger-purple hover:text-vikinger-cyan font-medium transition-colors flex items-center justify-center gap-2"},[v(i(n),{icon:"fluent:arrow-down-24-regular",class:"w-4 h-4"}),F(" à¸”à¸¹à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¸à¹ˆà¸­à¸™à¸«à¸™à¹‰à¸² ("+k(mt.value)+" à¸£à¸²à¸¢à¸à¸²à¸£) ",1)])):h("",!0),g.value?(l(),r("div",Ii,[v(i(n),{icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin text-vikinger-purple"}),s[38]||(s[38]=e("span",{class:"ml-2 text-sm text-gray-500"},"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”...",-1))])):h("",!0)])):h("",!0)],64)),$.isNested?h("",!0):(l(),S(xs,{key:3,show:yt.value,post:p.value,onClose:s[11]||(s[11]=a=>yt.value=!1),onShare:Xt},null,8,["show","post"])),!$.isNested&&K.value?(l(),S(ql,{key:4,show:dt.value,post:p.value,onClose:s[12]||(s[12]=a=>dt.value=!1),onPostUpdated:us},null,8,["show","post"])):h("",!0),$.isNested?h("",!0):(l(),S(ms,{key:5,show:Ce.value!==null,images:Q.value,"initial-index":Ce.value||0,"post-id":p.value?.id,onClose:Yt},null,8,["show","images","initial-index","post-id"]))],2)}}},wo=Mt(Ni,[["__scopeId","data-v-5cd06945"]]),Fi={class:"vikinger-card vikinger-card-hover relative overflow-hidden !rounded-2xl !p-0"},Ui={class:"relative bg-gradient-to-r from-vikinger-purple via-indigo-500 to-vikinger-cyan p-4"},Mi={class:"relative text-lg font-black text-white flex items-center gap-2 drop-shadow-lg"},Oi={class:"w-8 h-8 rounded-lg bg-white/20 flex items-center justify-center"},Ri={class:"p-5 space-y-5"},zi={class:"text-center"},Vi={class:"relative inline-flex items-center justify-center"},qi={class:"w-36 h-36 transform -rotate-90 relative"},Ki=["stroke","stroke-dashoffset"],Gi=["id"],Wi=["stop-color"],Qi=["stop-color"],Yi={class:"absolute inset-0 flex flex-col items-center justify-center"},Hi={class:"text-4xl font-black text-gray-800 dark:text-white"},Ji={key:0,class:"space-y-2"},Xi={class:"space-y-2"},Zi={class:"w-8 h-8 rounded-lg bg-vikinger-purple/20 flex items-center justify-center group-hover:bg-vikinger-purple/30 transition-colors"},eo={class:"text-sm text-gray-700 dark:text-gray-300 flex-1"},to={class:"text-xs font-bold text-vikinger-cyan bg-vikinger-cyan/10 px-2 py-1 rounded-full"},so={key:1,class:"text-center py-4"},lo={class:"w-16 h-16 mx-auto rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center mb-3"},ao={class:"flex items-center justify-center gap-3 py-3 border-t border-b border-gray-200 dark:border-gray-700"},ro={class:"flex gap-2 justify-center flex-wrap"},io=["onClick"],oo={class:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700"},no={class:"text-center p-3 rounded-xl bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200/50 dark:border-amber-800/30"},uo={class:"text-2xl font-black text-gray-800 dark:text-white"},co={class:"mt-2 flex justify-center"},vo={class:"text-center p-3 rounded-xl bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200/50 dark:border-blue-800/30"},go={class:"text-2xl font-black text-gray-800 dark:text-white"},po={class:"mt-2 flex justify-center"},$o={__name:"ProfileCompletionWidget",props:{percentage:{type:Number,default:0},quests:{type:Object,default:()=>({completed:0,total:30})},badges:{type:Object,default:()=>({unlocked:0,total:46})},missingFields:{type:Array,default:()=>[]},showActions:{type:Boolean,default:!0}},emits:["edit-profile"],setup($,{emit:He}){const f=$,ee=He,q=x("status"),b=["Status","Mentions","Friends","Groups","Blog Posts"],Y=2*Math.PI*58,A=C(()=>Y-f.percentage/100*Y),H=C(()=>f.percentage>=80?{from:"#10B981",to:"#059669"}:f.percentage>=50?{from:"#00D9FF",to:"#615DFA"}:f.percentage>=25?{from:"#F59E0B",to:"#D97706"}:{from:"#EF4444",to:"#DC2626"}),je=ke=>({avatar:"fluent:camera-24-regular",cover:"fluent:image-24-regular",first_name:"fluent:person-24-regular",last_name:"fluent:person-24-regular",bio:"fluent:text-description-24-regular",birthdate:"fluent:calendar-24-regular",gender:"fluent:people-24-regular",location:"fluent:location-24-regular",website:"fluent:globe-24-regular",interests:"fluent:heart-24-regular",social_media:"fluent:share-24-regular"})[ke]||"fluent:add-circle-24-regular",p=()=>{ee("edit-profile")};return(ke,_)=>(l(),r("div",Fi,[e("div",Ui,[_[1]||(_[1]=e("div",{class:"absolute inset-0 bg-[url('/images/patterns/circuit.svg')] bg-repeat opacity-10"},null,-1)),e("h3",Mi,[e("div",Oi,[v(i(n),{icon:"fluent:person-circle-24-filled",class:"w-5 h-5"})]),_[0]||(_[0]=F(" Profile Completion ",-1))])]),e("div",Ri,[e("div",zi,[e("div",Vi,[e("div",{class:"absolute inset-0 m-4 rounded-full blur-xl opacity-30",style:pt({background:`linear-gradient(135deg, ${H.value.from}, ${H.value.to})`})},null,4),(l(),r("svg",qi,[_[2]||(_[2]=e("circle",{cx:"72",cy:"72",r:"58",stroke:"currentColor","stroke-width":"10",fill:"none",class:"text-gray-200 dark:text-gray-700"},null,-1)),e("circle",{cx:"72",cy:"72",r:"58",stroke:`url(#progressGradient-${$.percentage})`,"stroke-width":"10",fill:"none","stroke-linecap":"round","stroke-dasharray":Y,"stroke-dashoffset":A.value,class:"transition-all duration-1000 ease-out drop-shadow-lg"},null,8,Ki),e("defs",null,[e("linearGradient",{id:`progressGradient-${$.percentage}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%"},[e("stop",{offset:"0%","stop-color":H.value.from},null,8,Wi),e("stop",{offset:"100%","stop-color":H.value.to},null,8,Qi)],8,Gi)])])),e("div",Yi,[e("span",Hi,k($.percentage)+"%",1),_[3]||(_[3]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Complete",-1))])])]),$.missingFields&&$.missingFields.length>0?(l(),r("div",Ji,[_[5]||(_[5]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider font-semibold"},"Complete these to boost:",-1)),e("ul",Xi,[(l(!0),r(j,null,O($.missingFields.slice(0,4),D=>(l(),r("li",{key:D.field,class:"flex items-center gap-3 p-2 rounded-xl bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors cursor-pointer group",onClick:p},[e("div",Zi,[v(i(n),{icon:je(D.field),class:"w-4 h-4 text-vikinger-purple"},null,8,["icon"])]),e("span",eo,k(D.label),1),e("span",to,"+"+k(D.weight)+"%",1)]))),128))]),$.showActions?(l(),r("button",{key:0,onClick:p,class:"mt-3 w-full py-2.5 px-4 bg-gradient-to-r from-vikinger-purple to-vikinger-cyan text-white text-sm font-bold rounded-xl hover:opacity-90 transition-all flex items-center justify-center gap-2 shadow-lg hover:shadow-xl hover:scale-[1.02]"},[v(i(n),{icon:"fluent:edit-24-regular",class:"w-4 h-4"}),_[4]||(_[4]=F(" Complete Profile ",-1))])):h("",!0)])):(l(),r("div",so,[e("div",lo,[v(i(n),{icon:"fluent:checkmark-circle-24-filled",class:"w-10 h-10 text-green-500"})]),_[6]||(_[6]=e("p",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},"Profile Complete!",-1)),_[7]||(_[7]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Great job completing your profile",-1))])),e("div",ao,[v(i(n),{icon:"fluent:feed-24-regular",class:"w-5 h-5 text-vikinger-purple"}),_[8]||(_[8]=e("span",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},"All Updates",-1)),v(i(n),{icon:"fluent:chevron-down-24-regular",class:"w-4 h-4 text-gray-500"})]),e("div",ro,[(l(),r(j,null,O(b,D=>e("button",{key:D,onClick:N=>q.value=D.toLowerCase(),class:P(["px-3 py-1.5 text-xs font-medium rounded-xl transition-all",q.value===D.toLowerCase()?"bg-vikinger-purple text-white shadow-md":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-vikinger-purple/20 hover:text-vikinger-purple"])},k(D),11,io)),64))]),e("div",oo,[e("div",no,[e("div",uo,k($.quests.completed)+"/"+k($.quests.total),1),_[9]||(_[9]=e("div",{class:"text-xs font-semibold text-amber-600 dark:text-amber-400 mt-1 uppercase tracking-wider"},"Quests",-1)),_[10]||(_[10]=e("div",{class:"text-[10px] text-gray-500 dark:text-gray-500"},"COMPLETED",-1)),e("div",co,[v(i(n),{icon:"fluent:trophy-24-filled",class:"w-8 h-8 text-amber-500 drop-shadow-lg"})])]),e("div",vo,[e("div",go,k($.badges.unlocked)+"/"+k($.badges.total),1),_[11]||(_[11]=e("div",{class:"text-xs font-semibold text-blue-600 dark:text-blue-400 mt-1 uppercase tracking-wider"},"Badges",-1)),_[12]||(_[12]=e("div",{class:"text-[10px] text-gray-500 dark:text-gray-500"},"UNLOCKED",-1)),e("div",po,[v(i(n),{icon:"fluent:shield-checkmark-24-filled",class:"w-8 h-8 text-blue-500 drop-shadow-lg"})])])])])]))}};export{wo as F,$o as _};
