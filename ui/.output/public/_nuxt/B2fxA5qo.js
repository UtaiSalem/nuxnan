import{_ as N}from"./BP2gnDQ3.js";import{q as V,v as j,ay as C,l as M,c as g,a as e,h as S,b as a,w as c,a1 as B,j as D,u as r,$ as m,aa as L,aN as A,ai as I,g as T,d as w,t as f,r as p,o as x,I as n,e as h,_ as U}from"./Brb_7992.js";import{_ as q}from"./BF4yyfxD.js";const R={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-800 p-4"},$={class:"relative w-full max-w-md"},z={class:"bg-white/10 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 p-8"},E={key:0,class:"mb-6 p-4 bg-red-500/20 border border-red-500/30 rounded-xl flex items-start gap-3"},F={class:"text-red-200 text-sm"},P={class:"relative"},Y={class:"relative"},G=["type"],H={class:"flex items-center justify-between"},J={class:"flex items-center gap-2 cursor-pointer"},K=["disabled"],O={class:"mt-6 text-center"},Q={class:"text-center text-gray-400 text-xs mt-6"},W=V({__name:"login",setup(X){const y=j(),_=C(),u=M(),s=p({email:"",password:"",remember:!1}),i=p(!1),l=p(""),d=p(!1);_.query.error==="unauthorized"&&(l.value="คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กรุณาเข้าสู่ระบบด้วยบัญชีผู้ดูแลระบบ");const k=async()=>{if(!s.value.email||!s.value.password){l.value="กรุณากรอกอีเมลและรหัสผ่าน";return}i.value=!0,l.value="";try{if(await u.login({email:s.value.email,password:s.value.password}),!u.user?.is_plearnd_admin&&!u.user?.is_super_admin){await u.logout(),l.value="บัญชีนี้ไม่มีสิทธิ์เข้าถึงระบบผู้ดูแล";return}y.push("/nuxnan-admin")}catch(b){l.value=b.message||"เข้าสู่ระบบไม่สำเร็จ กรุณาลองใหม่อีกครั้ง"}finally{i.value=!1}};return(b,t)=>{const v=N;return x(),g("div",R,[t[10]||(t[10]=e("div",{class:"absolute inset-0 overflow-hidden"},[e("div",{class:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500/30 rounded-full blur-3xl"}),e("div",{class:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-500/30 rounded-full blur-3xl"})],-1)),e("div",$,[e("div",z,[t[9]||(t[9]=S('<div class="text-center mb-8" data-v-88b82498><div class="inline-flex items-center justify-center w-16 h-16 bg-white rounded-2xl shadow-xl mb-4" data-v-88b82498><img src="'+q+'" alt="Logo" class="w-10 h-10" data-v-88b82498></div><h1 class="text-2xl font-bold text-white mb-2" data-v-88b82498>Nuxnan Admin</h1><p class="text-gray-300 text-sm" data-v-88b82498>เข้าสู่ระบบเพื่อจัดการข้อมูล</p></div>',1)),a(B,{name:"fade"},{default:c(()=>[l.value?(x(),g("div",E,[a(r(n),{icon:"fluent:warning-24-regular",class:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),e("p",F,f(l.value),1)])):w("",!0)]),_:1}),e("form",{onSubmit:D(k,["prevent"]),class:"space-y-5"},[e("div",null,[t[4]||(t[4]=e("label",{for:"email",class:"block text-sm font-medium text-gray-200 mb-2"}," อีเมล ",-1)),e("div",P,[a(r(n),{icon:"fluent:mail-24-regular",class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),m(e("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=o=>s.value.email=o),type:"email",placeholder:"admin@nuxnan.com",class:"w-full pl-12 pr-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"},null,512),[[L,s.value.email]])])]),e("div",null,[t[5]||(t[5]=e("label",{for:"password",class:"block text-sm font-medium text-gray-200 mb-2"}," รหัสผ่าน ",-1)),e("div",Y,[a(r(n),{icon:"fluent:lock-closed-24-regular",class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),m(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=o=>s.value.password=o),type:d.value?"text":"password",placeholder:"••••••••",class:"w-full pl-12 pr-12 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"},null,8,G),[[A,s.value.password]]),e("button",{type:"button",onClick:t[2]||(t[2]=o=>d.value=!d.value),class:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors"},[a(r(n),{icon:d.value?"fluent:eye-off-24-regular":"fluent:eye-24-regular",class:"w-5 h-5"},null,8,["icon"])])])]),e("div",H,[e("label",J,[m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.value.remember=o),type:"checkbox",class:"w-4 h-4 rounded border-white/20 bg-white/10 text-purple-500 focus:ring-purple-500 focus:ring-offset-0"},null,512),[[I,s.value.remember]]),t[6]||(t[6]=e("span",{class:"text-sm text-gray-300"},"จดจำฉัน",-1))]),a(v,{to:"/auth/forgot-password",class:"text-sm text-purple-400 hover:text-purple-300 transition-colors"},{default:c(()=>[...t[7]||(t[7]=[h(" ลืมรหัสผ่าน? ",-1)])]),_:1})]),e("button",{type:"submit",disabled:i.value,class:"w-full py-3 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-semibold rounded-xl shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[i.value?(x(),T(r(n),{key:0,icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin"})):w("",!0),e("span",null,f(i.value?"กำลังเข้าสู่ระบบ...":"เข้าสู่ระบบ"),1)],8,K)],32),e("div",O,[a(v,{to:"/",class:"inline-flex items-center gap-2 text-sm text-gray-400 hover:text-white transition-colors"},{default:c(()=>[a(r(n),{icon:"fluent:arrow-left-24-regular",class:"w-4 h-4"}),t[8]||(t[8]=h(" กลับไปหน้าหลัก ",-1))]),_:1})])]),e("p",Q," © "+f(new Date().getFullYear())+" Nuxnan. All rights reserved. ",1)])])}}}),se=U(W,[["__scopeId","data-v-88b82498"]]);export{se as default};
