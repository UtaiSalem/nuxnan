import{_ as F}from"./DROJGjoa.js";import{q as L,p as N,ay as T,r as y,z as V,c as d,a as e,d as p,b as i,g as v,w as B,t as a,u as l,F as E,T as C,e as u,aH as h,o,I as n}from"./CHs-R6Sv.js";const D={class:"space-y-6 max-w-4xl mx-auto"},I={class:"flex items-center gap-4"},P={class:"flex-1"},R={class:"text-gray-500 dark:text-gray-400 mt-1"},U={key:0,class:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-sm border border-gray-100 dark:border-gray-700"},H={class:"text-center"},M={key:1,class:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-sm border border-gray-100 dark:border-gray-700"},O={class:"text-center"},q={class:"text-gray-500 mt-2"},G={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700"},J={class:"flex flex-col sm:flex-row items-center sm:items-start gap-6"},K={class:"w-24 h-24 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white text-3xl font-bold"},Q={class:"flex-1 text-center sm:text-left"},W={class:"text-2xl font-bold text-gray-800 dark:text-white"},X={class:"text-gray-500 dark:text-gray-400"},Y={class:"flex flex-wrap justify-center sm:justify-start gap-2 mt-3"},Z={key:0,class:"px-3 py-1 text-sm rounded-full bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"},ee={key:1,class:"px-3 py-1 text-sm rounded-full bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},se={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700"},ae={class:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center gap-2"},re={class:"space-y-4"},oe={class:"text-gray-800 dark:text-white"},le={class:"text-gray-800 dark:text-white"},ne={class:"text-gray-800 dark:text-white font-mono"},de={class:"text-gray-800 dark:text-white font-mono"},ie={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700"},ge={class:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center gap-2"},ue={class:"space-y-4"},xe={class:"text-gray-800 dark:text-white"},ce={class:"text-gray-800 dark:text-white"},ye={class:"flex items-center gap-3"},pe={class:"text-gray-800 dark:text-white"},me=["disabled"],ve=["disabled"],be={key:0,class:"text-sm text-green-600 dark:text-green-400 mt-1"},_e={key:1,class:"text-sm text-red-600 dark:text-red-400 mt-1"},fe={class:"text-gray-800 dark:text-white"},ke={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700"},he={class:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center gap-2"},we={class:"space-y-4"},$e={class:"flex justify-between items-center p-3 bg-green-50 dark:bg-green-900/20 rounded-xl"},Be={class:"text-lg font-bold text-green-600 dark:text-green-400"},Ce={class:"flex justify-between items-center p-3 bg-purple-50 dark:bg-purple-900/20 rounded-xl"},Se={class:"text-lg font-bold text-purple-600 dark:text-purple-400"},Ae={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700"},je={class:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center gap-2"},ze={class:"grid grid-cols-2 gap-4"},Fe={class:"text-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl"},Le={class:"text-2xl font-bold text-gray-800 dark:text-white"},Ne={class:"text-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl"},Te={class:"text-2xl font-bold text-gray-800 dark:text-white"},Ve={class:"text-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl"},Ee={class:"text-2xl font-bold text-gray-800 dark:text-white"},De={class:"text-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl"},Ie={class:"text-2xl font-bold text-gray-800 dark:text-white"},Oe=L({__name:"index",setup(Pe){const f=N().public.apiBase,m=T().params.id,s=y(null),k=y(!0),b=y(""),g=y(!1),x=y(""),c=y(""),w=async()=>{k.value=!0,b.value="";try{const r=h("token"),t=await $fetch(`${f}/api/admin/users/${m}`,{headers:{Authorization:`Bearer ${r.value}`}});t.success&&(s.value=t.data)}catch(r){console.error("Failed to fetch user:",r),b.value=r.data?.message||"ไม่สามารถโหลดข้อมูลผู้ใช้ได้"}finally{k.value=!1}},S=r=>{const t={active:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",inactive:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",suspended:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"};return t[r]||t.inactive},A=r=>{const t={admin:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",instructor:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",user:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"};return t[r]||t.user},_=r=>r?new Date(r).toLocaleString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",j=async()=>{if(confirm("ต้องการยืนยันอีเมลของผู้ใช้นี้หรือไม่?")){g.value=!0,x.value="",c.value="";try{const r=h("token"),t=await $fetch(`${f}/api/admin/users/${m}/verify-email`,{method:"POST",headers:{Authorization:`Bearer ${r.value}`}});t.success&&(x.value=t.message,s.value.email_verified_at=t.data.email_verified_at)}catch(r){console.error("Failed to verify email:",r),c.value=r.data?.message||"ไม่สามารถยืนยันอีเมลได้"}finally{g.value=!1}}},z=async()=>{if(confirm("ต้องการยกเลิกการยืนยันอีเมลของผู้ใช้นี้หรือไม่?")){g.value=!0,x.value="",c.value="";try{const r=h("token"),t=await $fetch(`${f}/api/admin/users/${m}/unverify-email`,{method:"POST",headers:{Authorization:`Bearer ${r.value}`}});t.success&&(x.value=t.message,s.value.email_verified_at=null)}catch(r){console.error("Failed to unverify email:",r),c.value=r.data?.message||"ไม่สามารถยกเลิกการยืนยันอีเมลได้"}finally{g.value=!1}}};return V(()=>{w()}),(r,t)=>{const $=F;return o(),d("div",D,[e("div",I,[i($,{to:"/nuxnan-admin/users",class:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors"},{default:B(()=>[i(l(n),{icon:"fluent:arrow-left-24-regular",class:"w-5 h-5"})]),_:1}),e("div",P,[t[0]||(t[0]=e("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white"},"รายละเอียดผู้ใช้",-1)),e("p",R,"ผู้ใช้ #"+a(l(m)),1)]),s.value?(o(),v($,{key:0,to:`/nuxnan-admin/users/${l(m)}/edit`,class:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-white transition-colors"},{default:B(()=>[i(l(n),{icon:"fluent:edit-24-regular",class:"w-5 h-5"}),t[1]||(t[1]=u(" แก้ไข ",-1))]),_:1},8,["to"])):p("",!0)]),k.value?(o(),d("div",U,[e("div",H,[i(l(n),{icon:"fluent:spinner-ios-20-regular",class:"w-8 h-8 text-indigo-600 animate-spin mx-auto"}),t[2]||(t[2]=e("p",{class:"text-gray-500 mt-2"},"กำลังโหลดข้อมูล...",-1))])])):b.value?(o(),d("div",M,[e("div",O,[i(l(n),{icon:"fluent:error-circle-24-regular",class:"w-12 h-12 text-red-400 mx-auto"}),e("p",q,a(b.value),1),e("button",{onClick:w,class:"mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-white transition-colors"}," ลองใหม่อีกครั้ง ")])])):s.value?(o(),d(E,{key:2},[e("div",G,[e("div",J,[e("div",K,a(s.value.name?.charAt(0)?.toUpperCase()||"U"),1),e("div",Q,[e("h2",W,a(s.value.name),1),e("p",X,"@"+a(s.value.username||"no-username"),1),e("div",Y,[e("span",{class:C(["px-3 py-1 text-sm rounded-full",S(s.value.status||"active")])},a(s.value.status==="active"?"ใช้งาน":s.value.status==="suspended"?"ระงับ":"ไม่ใช้งาน"),3),e("span",{class:C(["px-3 py-1 text-sm rounded-full",A(s.value.role||"user")])},a(s.value.role==="admin"?"ผู้ดูแล":s.value.role==="instructor"?"ผู้สอน":"ผู้ใช้"),3),s.value.is_super_admin?(o(),d("span",Z," Super Admin ")):p("",!0),s.value.is_plearnd_admin?(o(),d("span",ee," Plearnd Admin ")):p("",!0)])])])]),e("div",te,[e("div",se,[e("h3",ae,[i(l(n),{icon:"fluent:person-24-regular",class:"w-5 h-5 text-indigo-600"}),t[3]||(t[3]=u(" ข้อมูลติดต่อ ",-1))]),e("div",re,[e("div",null,[t[4]||(t[4]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"อีเมล",-1)),e("p",oe,a(s.value.email||"-"),1)]),e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"เบอร์โทรศัพท์",-1)),e("p",le,a(s.value.phone||"-"),1)]),e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"รหัสอ้างอิง",-1)),e("p",ne,a(s.value.reference_code||"-"),1)]),e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"รหัสส่วนตัว",-1)),e("p",de,a(s.value.personal_code||"-"),1)])])]),e("div",ie,[e("h3",ge,[i(l(n),{icon:"fluent:calendar-24-regular",class:"w-5 h-5 text-indigo-600"}),t[8]||(t[8]=u(" ข้อมูลบัญชี ",-1))]),e("div",ue,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"สร้างเมื่อ",-1)),e("p",xe,a(_(s.value.created_at)),1)]),e("div",null,[t[10]||(t[10]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"อัปเดตล่าสุด",-1)),e("p",ce,a(_(s.value.updated_at)),1)]),e("div",null,[t[13]||(t[13]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"ยืนยันอีเมลเมื่อ",-1)),e("div",ye,[e("p",pe,a(s.value.email_verified_at?_(s.value.email_verified_at):"ยังไม่ยืนยัน"),1),s.value.email_verified_at?(o(),d("button",{key:1,onClick:z,disabled:g.value,class:"inline-flex items-center gap-1 px-3 py-1 text-sm bg-orange-600 hover:bg-orange-700 disabled:bg-orange-400 text-white rounded-lg transition-colors"},[g.value?(o(),v(l(n),{key:0,icon:"fluent:spinner-ios-20-regular",class:"w-4 h-4 animate-spin"})):(o(),v(l(n),{key:1,icon:"fluent:dismiss-circle-24-regular",class:"w-4 h-4"})),t[12]||(t[12]=u(" ยกเลิก ",-1))],8,ve)):(o(),d("button",{key:0,onClick:j,disabled:g.value,class:"inline-flex items-center gap-1 px-3 py-1 text-sm bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white rounded-lg transition-colors"},[g.value?(o(),v(l(n),{key:0,icon:"fluent:spinner-ios-20-regular",class:"w-4 h-4 animate-spin"})):(o(),v(l(n),{key:1,icon:"fluent:checkmark-circle-24-regular",class:"w-4 h-4"})),t[11]||(t[11]=u(" ยืนยัน ",-1))],8,me))]),x.value?(o(),d("p",be,a(x.value),1)):p("",!0),c.value?(o(),d("p",_e,a(c.value),1)):p("",!0)]),e("div",null,[t[14]||(t[14]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"เข้าสู่ระบบล่าสุด",-1)),e("p",fe,a(s.value.last_login_at?_(s.value.last_login_at):"-"),1)])])]),e("div",ke,[e("h3",he,[i(l(n),{icon:"fluent:wallet-24-regular",class:"w-5 h-5 text-indigo-600"}),t[15]||(t[15]=u(" กระเป๋าเงิน & คะแนน ",-1))]),e("div",we,[e("div",$e,[t[16]||(t[16]=e("span",{class:"text-gray-600 dark:text-gray-300"},"ยอดเงิน",-1)),e("span",Be," ฿"+a((s.value.wallet_balance||0).toLocaleString()),1)]),e("div",Ce,[t[17]||(t[17]=e("span",{class:"text-gray-600 dark:text-gray-300"},"คะแนน",-1)),e("span",Se,a((s.value.points||0).toLocaleString())+" pts ",1)])])]),e("div",Ae,[e("h3",je,[i(l(n),{icon:"fluent:data-trending-24-regular",class:"w-5 h-5 text-indigo-600"}),t[18]||(t[18]=u(" สถิติ ",-1))]),e("div",ze,[e("div",Fe,[e("p",Le,a(s.value.courses_count||0),1),t[19]||(t[19]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"คอร์สที่ลงทะเบียน",-1))]),e("div",Ne,[e("p",Te,a(s.value.completed_courses||0),1),t[20]||(t[20]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"คอร์สที่เรียนจบ",-1))]),e("div",Ve,[e("p",Ee,a(s.value.referrals_count||0),1),t[21]||(t[21]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"ผู้ที่แนะนำ",-1))]),e("div",De,[e("p",Ie,a(s.value.login_count||0),1),t[22]||(t[22]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"จำนวนเข้าสู่ระบบ",-1))])])])])],64)):p("",!0)])}}});export{Oe as default};
