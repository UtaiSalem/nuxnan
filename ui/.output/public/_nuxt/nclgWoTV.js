import{u as A}from"./BWv91NqQ.js";import{S as p}from"./BQxta0Da.js";import S from"./BLVhfM2G.js";import{_}from"./BqoYaAWO.js";import{C as x}from"./BBhxYplo.js";import{_ as I}from"./DI_pZzms.js";import{r as s,g as M,w as m,o as r,a as d,t as $,c as u,F as D,k as B,b as n}from"./CHs-R6Sv.js";import"./DROJGjoa.js";import"./DJsVOgax.js";import"./Cpj98o6Y.js";import"./C6kxWCFL.js";import"./3QJUtkDr.js";import"./o5TVmNQv.js";const H={class:""},L={class:"section-header my-4 p-4 bg-white rounded-xl shadow-lg"},T={class:"section-header-info"},U={class:"section-title font-prompt"},k={class:"flex flex-wrap justify-between gap-4"},K={__name:"AcademyCourses",props:{academy:Object,courses:Object,isAcademyAdmin:Boolean,app_url:String},setup(i){const e=i;s(!1);const g=s(e.academy.data.logo?"/storage/images/academies/logos/"+e.academy.data.logo:"/storage/images/academies/logos/default_logo.png"),y=s(e.academy.data.cover?"/storage/images/academies/covers/"+e.academy.data.cover:"/storage/images/academies/covers/default_cover.png"),c=s(e.academy.data.name),l=s(e.academy.data.slogan);A({name:"",slogan:"",address:"",cover:null,logo:null});async function v(o){const a=new FormData;a.append("cover",o),a.append("_method","patch"),await axios.post(`/academies/${e.academy.data.id}/update`,a)}async function f(o){const a=new FormData;a.append("logo",o),a.append("_method","patch"),await axios.post(`/academies/${e.academy.data.id}/update`,a)}async function b(o){await axios.patch(`/academies/${e.academy.data.id}/update`,{name:o})}async function h(o){await axios.patch(`/academies/${e.academy.data.id}/update`,{slogan:o})}async function C(){try{let o=await axios.post(`/academies/${e.academy.data.id}/members`);o.data.success&&(e.academy.data.isMember=o.data.isMember,e.academy.data.total_students=o.data.totalStudents,o.data.isMember?p.fire("เสร็จสิ้น","ขอเป็นสมาชิกเรียบร้อยแล้ว","success"):p.fire("เสร็จสิ้น","ออกจากการเป็นสมาชิกเรียบร้อยแล้ว","success"))}catch{}}return(o,a)=>(r(),M(S,{title:"Academy",appUrl:e.app_url},{coverProfileCard:m(()=>[d("div",H,[n(_,{coverImage:y.value,logoImage:g.value,coverHeader:c.value,"onUpdate:coverHeader":a[0]||(a[0]=t=>c.value=t),coverSubheader:l.value,"onUpdate:coverSubheader":a[1]||(a[1]=t=>l.value=t),model:"Academy",modelTable:"academies",modelableId:e.academy.data.id,modelableType:"app/models/Academy",modelableRoute:`/academies/${e.academy.data.id}`,modelData:e.academy.data,subModelData:e.courses.data,subModelNameTh:"รายวิชา",isAcademyAdmin:e.isAcademyAdmin,onCoverImageChange:a[2]||(a[2]=t=>{v(t)}),onLogoImageChange:a[3]||(a[3]=t=>{f(t)}),onHeaderChange:a[4]||(a[4]=t=>{b(t)}),onSubheaderChange:a[5]||(a[5]=t=>{h(t)}),onRequestTobeMember:a[6]||(a[6]=t=>C())},null,8,["coverImage","logoImage","coverHeader","coverSubheader","modelableId","modelableRoute","modelData","subModelData","isAcademyAdmin"])]),n(I,{academy:i.academy,activeTab:1},null,8,["academy"])]),leftSideWidget:m(()=>[...a[7]||(a[7]=[d("div",null,null,-1)])]),mainContent:m(()=>[d("div",L,[d("div",T,[d("h2",U,"รายวิชาทั้งหมด "+$(" "+e.courses.data.length+" วิชา"||"ยังไม่มีรายวิชา"),1)])]),d("div",k,[(r(!0),u(D,null,B(e.courses.data,(t,w)=>(r(),u("div",{key:w,class:"w-full sm:w-[48%]"},[n(x,{course:t},null,8,["course"])]))),128))])]),_:1},8,["appUrl"]))}};export{K as default};
