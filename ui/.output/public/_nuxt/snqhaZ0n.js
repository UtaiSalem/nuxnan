import{_ as $}from"./ChBnuzYQ.js";import{q as z,p as O,v as E,r as f,V as I,c as s,a as r,d as x,b as u,w as V,u as g,t as n,$ as d,e as v,aa as y,T as C,ab as h,F as w,k as _,ai as L,g as U,j as P,o,I as c,aH as R}from"./cTealXVQ.js";const q={class:"space-y-6 max-w-3xl mx-auto"},A={class:"flex items-center gap-4"},H={key:0,class:"p-4 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded-xl"},G={class:"flex items-center gap-2 text-green-700 dark:text-green-400"},J={key:1,class:"p-4 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-xl"},K={class:"flex items-center gap-2 text-red-700 dark:text-red-400"},Q={key:0,class:"mt-1 text-sm text-red-500"},W={key:0,class:"mt-1 text-sm text-red-500"},X={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Y=["value"],Z=["value"],ee={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},re={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},te=["value"],ae={class:"flex items-center gap-4"},le={class:"flex-1 flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer hover:border-indigo-500 dark:hover:border-indigo-400 transition-colors"},oe={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},se={class:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl"},ne={class:"flex items-center gap-3 cursor-pointer"},de={class:"flex flex-col sm:flex-row gap-3 pt-4"},ie=["disabled"],pe=z({__name:"create",setup(ue){const B=O().public.apiBase,F=E(),b=f(!1),l=f({}),m=f(""),a=I({title:"",description:"",category_id:"",instructor_id:"",price:0,discount_price:null,duration:"",level:"beginner",status:"draft",is_featured:!1,thumbnail:null}),S=[{value:"beginner",label:"เริ่มต้น"},{value:"intermediate",label:"ปานกลาง"},{value:"advanced",label:"ขั้นสูง"}],j=[{value:"draft",label:"แบบร่าง"},{value:"pending",label:"รอตรวจสอบ"},{value:"published",label:"เผยแพร่"},{value:"archived",label:"เก็บถาวร"}],M=f([{value:"1",label:"เทคโนโลยี"},{value:"2",label:"ภาษา"},{value:"3",label:"ธุรกิจ"},{value:"4",label:"สุขภาพ"}]),N=i=>{const e=i.target;e.files&&e.files[0]&&(a.thumbnail=e.files[0])},T=()=>(l.value={},a.title||(l.value.title="กรุณากรอกชื่อคอร์ส"),a.description||(l.value.description="กรุณากรอกคำอธิบาย"),Object.keys(l.value).length===0),D=async()=>{if(T()){b.value=!0,m.value="";try{const i=R("token"),e=new FormData;Object.entries(a).forEach(([t,p])=>{p!=null&&(p instanceof File?e.append(t,p):e.append(t,String(p)))}),(await $fetch(`${B}/api/admin/courses`,{method:"POST",headers:{Authorization:`Bearer ${i.value}`},body:e})).success&&(m.value="สร้างคอร์สสำเร็จ",setTimeout(()=>{F.push("/nuxnan-admin/courses")},1500))}catch(i){i.data?.errors?l.value=i.data.errors:l.value.general=i.data?.message||"เกิดข้อผิดพลาด กรุณาลองใหม่อีกครั้ง"}finally{b.value=!1}}};return(i,e)=>{const k=$;return o(),s("div",q,[r("div",A,[u(k,{to:"/nuxnan-admin/courses",class:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors"},{default:V(()=>[u(g(c),{icon:"fluent:arrow-left-24-regular",class:"w-5 h-5"})]),_:1}),e[9]||(e[9]=r("div",null,[r("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white"},"สร้างคอร์สใหม่"),r("p",{class:"text-gray-500 dark:text-gray-400 mt-1"},"กรอกข้อมูลเพื่อสร้างคอร์สเรียน")],-1))]),m.value?(o(),s("div",H,[r("div",G,[u(g(c),{icon:"fluent:checkmark-circle-24-filled",class:"w-5 h-5"}),r("span",null,n(m.value),1)])])):x("",!0),l.value.general?(o(),s("div",J,[r("div",K,[u(g(c),{icon:"fluent:error-circle-24-filled",class:"w-5 h-5"}),r("span",null,n(l.value.general),1)])])):x("",!0),r("form",{onSubmit:P(D,["prevent"]),class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 space-y-6"},[r("div",null,[e[10]||(e[10]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[v(" ชื่อคอร์ส "),r("span",{class:"text-red-500"},"*")],-1)),d(r("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>a.title=t),type:"text",class:C(["w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",{"border-red-500":l.value.title}]),placeholder:"เช่น เรียน Python เบื้องต้น"},null,2),[[y,a.title]]),l.value.title?(o(),s("p",Q,n(l.value.title),1)):x("",!0)]),r("div",null,[e[11]||(e[11]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[v(" คำอธิบาย "),r("span",{class:"text-red-500"},"*")],-1)),d(r("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.description=t),rows:"4",class:C(["w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",{"border-red-500":l.value.description}]),placeholder:"รายละเอียดคอร์ส..."},null,2),[[y,a.description]]),l.value.description?(o(),s("p",W,n(l.value.description),1)):x("",!0)]),r("div",X,[r("div",null,[e[13]||(e[13]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," หมวดหมู่ ",-1)),d(r("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>a.category_id=t),class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"},[e[12]||(e[12]=r("option",{value:""},"เลือกหมวดหมู่",-1)),(o(!0),s(w,null,_(M.value,t=>(o(),s("option",{key:t.value,value:t.value},n(t.label),9,Y))),128))],512),[[h,a.category_id]])]),r("div",null,[e[14]||(e[14]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ระดับ ",-1)),d(r("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>a.level=t),class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"},[(o(),s(w,null,_(S,t=>r("option",{key:t.value,value:t.value},n(t.label),9,Z)),64))],512),[[h,a.level]])])]),r("div",ee,[r("div",null,[e[15]||(e[15]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ราคา (บาท) ",-1)),d(r("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>a.price=t),type:"number",min:"0",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"0 = ฟรี"},null,512),[[y,a.price,void 0,{number:!0}]])]),r("div",null,[e[16]||(e[16]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ราคาลด (บาท) ",-1)),d(r("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>a.discount_price=t),type:"number",min:"0",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"ไม่มีส่วนลด"},null,512),[[y,a.discount_price,void 0,{number:!0}]])])]),r("div",re,[r("div",null,[e[17]||(e[17]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ระยะเวลา ",-1)),d(r("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>a.duration=t),type:"text",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"เช่น 10 ชั่วโมง"},null,512),[[y,a.duration]])]),r("div",null,[e[18]||(e[18]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," สถานะ ",-1)),d(r("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>a.status=t),class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"},[(o(),s(w,null,_(j,t=>r("option",{key:t.value,value:t.value},n(t.label),9,te)),64))],512),[[h,a.status]])])]),r("div",null,[e[20]||(e[20]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," รูปภาพหน้าปก ",-1)),r("div",ae,[r("label",le,[u(g(c),{icon:"fluent:image-add-24-regular",class:"w-8 h-8 text-gray-400"}),e[19]||(e[19]=r("span",{class:"mt-2 text-sm text-gray-500"},"คลิกเพื่ออัพโหลด",-1)),r("input",{type:"file",accept:"image/*",class:"hidden",onChange:N},null,32)]),a.thumbnail?(o(),s("div",oe,n(a.thumbnail.name),1)):x("",!0)])]),r("div",se,[r("label",ne,[d(r("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>a.is_featured=t),type:"checkbox",class:"w-5 h-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[L,a.is_featured]]),e[21]||(e[21]=r("span",{class:"text-gray-700 dark:text-gray-300"},"แสดงในหน้าแรก (Featured)",-1))])]),r("div",de,[r("button",{type:"submit",disabled:b.value,class:"flex-1 inline-flex justify-center items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 rounded-xl text-white font-medium transition-colors"},[b.value?(o(),U(g(c),{key:0,icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin"})):(o(),U(g(c),{key:1,icon:"fluent:save-24-regular",class:"w-5 h-5"})),v(" "+n(b.value?"กำลังบันทึก...":"สร้างคอร์ส"),1)],8,ie),u(k,{to:"/nuxnan-admin/courses",class:"flex-1 inline-flex justify-center items-center gap-2 px-6 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl text-gray-700 dark:text-gray-300 font-medium transition-colors"},{default:V(()=>[u(g(c),{icon:"fluent:dismiss-24-regular",class:"w-5 h-5"}),e[22]||(e[22]=v(" ยกเลิก ",-1))]),_:1})])],32)])}}});export{pe as default};
