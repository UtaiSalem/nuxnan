import{_ as Be}from"./DROJGjoa.js";import{q as Te,aN as je,l as Le,r as b,n as ae,a3 as oe,c as i,a as t,g as Q,b as d,u as s,w as Y,e as g,j as H,d as y,$ as U,aa as Z,aB as P,T as h,F,k as O,t as x,h as De,ab as ee,a4 as Ie,p as Me,o,I as u,_ as Ue}from"./CHs-R6Sv.js";import{S as B}from"./BQxta0Da.js";const Pe={class:"py-6 px-4"},Ve={class:"mb-6 bg-gradient-to-r from-purple-600 via-pink-500 to-orange-400 rounded-2xl shadow-xl overflow-hidden"},Fe={class:"px-6 py-8 flex flex-col md:flex-row items-center justify-between"},Oe={class:"flex items-center gap-4 mb-4 md:mb-0"},Ne={class:"w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center"},Re={class:"flex gap-3"},qe={class:"max-w-2xl mx-auto"},Ae={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden"},Ge={class:"bg-gradient-to-r from-teal-500 to-cyan-500 px-6 py-4"},ze={class:"text-xl font-bold text-white flex items-center gap-2"},Ee={class:"p-6"},Qe={class:"mb-6 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4"},He={class:"font-semibold text-amber-800 dark:text-amber-400 mb-2 flex items-center gap-2"},Je={key:0,class:"space-y-4"},Ke={class:"space-y-2"},We={class:"relative"},Xe={key:0,class:"absolute z-50 w-full mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl shadow-lg max-h-64 overflow-y-auto"},Ye=["onClick"],Ze=["src","alt"],et={class:"flex-grow"},tt={class:"font-medium text-gray-900 dark:text-white"},st={class:"text-xs text-gray-500"},rt={key:0,class:"text-xs text-purple-500"},at={key:1,class:"absolute z-50 w-full mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl shadow-lg p-4 text-center"},ot={class:"space-y-2"},lt={class:"relative"},nt={key:0,class:"flex justify-end"},it={key:1,class:"text-xs text-red-500 flex items-center gap-1"},dt={key:2,class:"text-xs text-gray-500 flex items-center gap-1"},ut={key:1,class:"animate-pulse bg-gray-100 dark:bg-gray-700 rounded-xl p-4"},pt={key:2,class:"relative bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-4 animate-fade-in-up"},ct={class:"flex items-center gap-4"},gt=["src","alt"],bt={class:"text-lg font-bold text-gray-900 dark:text-white"},ft={class:"text-sm text-gray-600 dark:text-gray-400"},xt={class:"font-semibold"},vt={class:"space-y-3"},mt={class:"flex flex-wrap gap-2"},yt=["onClick"],ht={key:0,type:"button",class:"px-3 py-1.5 rounded-lg text-sm font-medium border bg-purple-500 border-purple-500 text-white shadow-md"},kt=["value"],wt={class:"flex items-center justify-center gap-2 py-3 bg-purple-50 dark:bg-purple-900/20 rounded-xl border border-purple-100 dark:border-purple-800/30"},_t={class:"text-lg font-bold text-purple-600 dark:text-purple-400"},St={key:3,class:"space-y-3"},Ct={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},$t={class:"flex items-center gap-3"},Bt=["disabled"],Tt={class:"flex items-center gap-3"},jt={class:"text-xs text-green-600 dark:text-green-400 font-semibold"},Lt=["disabled"],Dt={class:"flex items-center gap-3"},It={class:"text-xs text-purple-600 dark:text-purple-400 font-semibold"},Mt={key:0,class:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-3"},Ut={class:"text-sm text-purple-700 dark:text-purple-300"},Pt={class:"font-bold"},Vt={key:4,class:"space-y-2"},Ft={class:"flex justify-between items-center"},Ot={key:0,class:"text-xs text-red-500 flex items-center gap-1"},Nt={key:0,class:"relative group"},Rt=["src"],qt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},At={class:"space-y-2"},Gt={class:"flex justify-between"},zt={key:0,class:"text-xs text-red-500 md:hidden"},Et=["max"],Qt={class:"space-y-2"},Ht={class:"flex gap-2"},Jt={class:"relative flex-1"},Kt=["value"],Wt={class:"relative flex-1"},Xt=["value"],Yt={key:5,class:"text-xs text-red-500 -mt-2 hidden md:block"},Zt={class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-3"},es={class:"text-sm text-red-600 dark:text-red-400 flex items-start gap-2"},ts={class:"flex flex-col sm:flex-row gap-3 pt-4"},ss=["disabled"],rs={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm transition-all"},as={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full p-8 text-center animate-bounce-in"},os={class:"w-20 h-20 mx-auto mb-4 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center"},ls={class:"flex gap-3"},ns=Te({__name:"create",setup(is){je({title:"สนับสนุนเว็บไซต์ - Plearnd"});const L=Me(),l=Le(),N=b(!1),k=b(!1),w=b(""),n=b(null),_=b(10),D=b(0),S=b(null),R=new Date,I=b(R.toISOString().split("T")[0]),q=b(R.toTimeString().slice(0,5)),A=b(!1),M=b(null),le=b(""),V=b(!1),m=b("slip"),te=ae(()=>_.value*100),T=b(""),C=b([]),j=b(!1);let J=null;const p=b({personalCode:"",slip:"",dateTime:""}),G=b(!1),K=(a,e,v)=>{const r=[];for(let c=a;c<=e;c+=v)r.push(c);return r},ne=K(10,100,10),ie=K(150,500,50),de=K(600,1e3,100),W=[...ne,...ie,...de],se=[50,100,300,500,1e3],ue=Array.from({length:24},(a,e)=>e.toString().padStart(2,"0")),pe=Array.from({length:60},(a,e)=>e.toString().padStart(2,"0")),z=b(R.getHours().toString().padStart(2,"0")),E=b(R.getMinutes().toString().padStart(2,"0"));oe([z,E],([a,e])=>{q.value=`${a}:${e}`},{immediate:!0});const ce=ae(()=>_.value*1080),ge=()=>{_.value=W[D.value]},be=a=>{_.value=a;const e=W.indexOf(a);e!==-1&&(D.value=e)},fe=()=>{M.value?.click(),p.value.slip=""},re=a=>["image/jpeg","image/png","image/gif"].includes(a.type)?a.size>4*1024*1024?(p.value.slip="ขนาดไฟล์ต้องไม่เกิน 4MB",!1):!0:(p.value.slip="กรุณาอัพโหลดไฟล์รูปภาพเท่านั้น (JPG, PNG, GIF)",!1),xe=a=>{const e=a.target,v=e.files?.[0];v&&(re(v)?(S.value={file:v,url:URL.createObjectURL(v)},p.value.slip=""):e.value="")},ve=a=>{A.value=!1;const e=a.dataTransfer?.items;if(!e)return;const v=[...e].filter(r=>r.kind==="file").map(r=>r.getAsFile());v[0]&&re(v[0])&&(S.value={file:v[0],url:URL.createObjectURL(v[0])},p.value.slip="")},me=()=>{S.value=null,M.value&&(M.value.value="")},ye=async()=>{if(V.value=!0,p.value.personalCode="",j.value=!1,w.value.length===8){k.value=!0;try{const a=await $fetch(`${L.public.apiBase}/api/supports/donates/donor/${w.value}`);a.success?(n.value=a.donor,p.value.personalCode=""):(n.value=null,p.value.personalCode="ไม่พบสมาชิกที่ระบุ")}catch(a){console.error("Donor not found:",a),n.value=null,p.value.personalCode="ไม่พบสมาชิกที่ระบุ"}finally{k.value=!1}}else n.value=null},he=async()=>{if(T.value.length<2){C.value=[],j.value=!1;return}k.value=!0;try{const a=await $fetch(`${L.public.apiBase}/api/users/search`,{method:"GET",headers:l.token?{Authorization:`Bearer ${l.token}`}:{},params:{q:T.value,limit:10}});a.success&&(C.value=a.data||[],j.value=C.value.length>0)}catch(a){console.error("Search users error:",a),C.value=[]}finally{k.value=!1}},ke=()=>{J&&clearTimeout(J),J=setTimeout(()=>{he()},300)},we=a=>{n.value=a,w.value=a.personal_code||"",T.value="",C.value=[],j.value=!1,V.value=!0,p.value.personalCode=""},_e=()=>{n.value=null,w.value="",p.value.personalCode="",V.value=!0},Se=async()=>{if(l.user){if(l.user.personal_code){k.value=!0;try{const a=await $fetch(`${L.public.apiBase}/api/supports/donates/donor/${l.user.personal_code}`);a.success?n.value=a.donor:n.value=l.user}catch{n.value=l.user}finally{k.value=!1}}else n.value=l.user;w.value=l.user.personal_code||"",p.value.personalCode="",V.value=!1}},Ce=async()=>{p.value={personalCode:"",slip:"",dateTime:""},le.value="";let a=!1;const e=!!l.user,v=!!S.value,r=e?m.value:"slip";if(r==="slip"&&!v&&(p.value.slip="กรุณาอัพโหลดสลิปการทำรายการ",a=!0),(!I.value||!q.value)&&(p.value.dateTime="กรุณาระบุวันที่และเวลาที่โอน",a=!0),a)return;const c=_.value;if(e&&r==="wallet"){const f=l.user?.wallet||0;if(f<c){B.fire({icon:"warning",title:"ยอดเงินไม่เพียงพอ",html:`ยอดเงินในกระเป๋าของคุณ: <b>${f.toLocaleString()}</b> บาท<br>จำนวนที่ต้องการสนับสนุน: <b>${c.toLocaleString()}</b> บาท`,confirmButtonText:"ตกลง",confirmButtonColor:"#d33"});return}if(!(await B.fire({icon:"question",title:"ยืนยันการหักเงินจากกระเป๋า",html:`
        <div class="text-left">
          <p class="mb-2">คุณต้องการหักเงินจากกระเป๋าเพื่อสนับสนุนหรือไม่?</p>
          <div class="bg-gray-100 rounded-lg p-3 mt-3">
            <div class="flex justify-between mb-1">
              <span>จำนวนเงินที่สนับสนุน:</span>
              <span class="font-bold text-green-600">${c.toLocaleString()} บาท</span>
            </div>
            <div class="flex justify-between mb-1">
              <span>แต้มที่จะแจกจ่าย:</span>
              <span class="font-bold text-purple-600">${(c*1080).toLocaleString()} แต้ม</span>
            </div>
            <div class="flex justify-between pt-2 border-t border-gray-300">
              <span>ยอดคงเหลือหลังหัก:</span>
              <span class="font-bold">${(f-c).toLocaleString()} บาท</span>
            </div>
          </div>
        </div>
      `,showCancelButton:!0,confirmButtonText:"ยืนยันหักเงิน",cancelButtonText:"ยกเลิก",confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",reverseButtons:!0})).isConfirmed)return}if(e&&r==="points"){const f=l.user?.pp||0,$=c*100;if(f<$){B.fire({icon:"warning",title:"แต้มสะสมไม่เพียงพอ",html:`แต้มสะสมของคุณ: <b>${f.toLocaleString()}</b> แต้ม<br>แต้มที่ต้องใช้: <b>${$.toLocaleString()}</b> แต้ม`,confirmButtonText:"ตกลง",confirmButtonColor:"#d33"});return}if(!(await B.fire({icon:"question",title:"ยืนยันการใช้แต้มสะสม",html:`
        <div class="text-left">
          <p class="mb-2">คุณต้องการใช้แต้มสะสมเพื่อสนับสนุนหรือไม่?</p>
          <div class="bg-purple-50 rounded-lg p-3 mt-3">
            <div class="flex justify-between mb-1">
              <span>มูลค่าการสนับสนุน:</span>
              <span class="font-bold text-green-600">${c.toLocaleString()} บาท</span>
            </div>
            <div class="flex justify-between mb-1">
              <span>แต้มที่ต้องใช้:</span>
              <span class="font-bold text-red-600">-${$.toLocaleString()} แต้ม</span>
            </div>
            <div class="flex justify-between mb-1">
              <span>แต้มที่จะแจกจ่าย:</span>
              <span class="font-bold text-purple-600">${(c*1080).toLocaleString()} แต้ม</span>
            </div>
            <div class="flex justify-between pt-2 border-t border-purple-300">
              <span>แต้มคงเหลือหลังหัก:</span>
              <span class="font-bold">${(f-$).toLocaleString()} แต้ม</span>
            </div>
          </div>
        </div>
      `,showCancelButton:!0,confirmButtonText:"ยืนยันใช้แต้ม",cancelButtonText:"ยกเลิก",confirmButtonColor:"#8b5cf6",cancelButtonColor:"#6b7280",reverseButtons:!0})).isConfirmed)return}N.value=!0;try{const f=new FormData;f.append("user_id",l.user?.id||""),f.append("donor_id",n.value?.id||""),f.append("donor_name",n.value?.name||n.value?.username||"ไม่ระบุนาม"),f.append("amounts",String(c)),f.append("transfer_date",I.value),f.append("transfer_time",q.value),f.append("payment_method",r),S.value&&f.append("slip",S.value.file);const $=await $fetch(`${L.public.apiBase}/api/supports/donates`,{method:"POST",body:f});if($.success){if(r==="wallet")B.fire({icon:"success",title:"สนับสนุนสำเร็จ!",html:`
            <div class="text-left">
              <p class="mb-2">หักเงินจากกระเป๋าเรียบร้อยแล้ว</p>
              <div class="bg-green-50 rounded-lg p-3 mt-3">
                <div class="flex justify-between mb-1">
                  <span>จำนวนเงินที่สนับสนุน:</span>
                  <span class="font-bold">${c.toLocaleString()} บาท</span>
                </div>
                <div class="flex justify-between">
                  <span>แต้มที่แจกจ่าย:</span>
                  <span class="font-bold text-purple-600">${(c*1080).toLocaleString()} แต้ม</span>
                </div>
              </div>
            </div>
          `,confirmButtonText:"ตกลง",confirmButtonColor:"#10b981"}),l.user&&(l.user.wallet=(l.user.wallet||0)-c);else if(r==="points"){const X=c*100;B.fire({icon:"success",title:"สนับสนุนสำเร็จ!",html:`
            <div class="text-left">
              <p class="mb-2">ใช้แต้มสะสมเรียบร้อยแล้ว</p>
              <div class="bg-purple-50 rounded-lg p-3 mt-3">
                <div class="flex justify-between mb-1">
                  <span>แต้มที่ใช้:</span>
                  <span class="font-bold text-red-600">-${X.toLocaleString()} แต้ม</span>
                </div>
                <div class="flex justify-between">
                  <span>แต้มที่แจกจ่าย:</span>
                  <span class="font-bold text-purple-600">${(c*1080).toLocaleString()} แต้ม</span>
                </div>
              </div>
            </div>
          `,confirmButtonText:"ตกลง",confirmButtonColor:"#8b5cf6"}),l.user&&(l.user.pp=(l.user.pp||0)-X)}else G.value=!0;S.value=null,I.value="",q.value="",m.value="slip",l.user?(n.value=l.user,w.value=l.user.personal_code):(n.value=null,w.value=""),D.value=0,_.value=10,M.value&&(M.value.value="")}else B.fire({icon:"error",title:"เกิดข้อผิดพลาด",text:$.message||"เกิดข้อผิดพลาด",confirmButtonText:"ตกลง",confirmButtonColor:"#d33"})}catch(f){console.error("Submit error:",f),B.fire({icon:"error",title:"ล้มเหลว",text:f.data?.message||"เกิดข้อผิดพลาดในการบันทึกข้อมูล",confirmButtonText:"ตกลง",confirmButtonColor:"#d33"})}finally{N.value=!1}},$e=new Date().toISOString().split("T")[0];return oe(()=>l.user,async a=>{if(a&&!n.value&&!V.value){if(a.personal_code){k.value=!0;try{const e=await $fetch(`${L.public.apiBase}/api/supports/donates/donor/${a.personal_code}`);e.success?n.value=e.donor:n.value=a}catch{n.value=a}finally{k.value=!1}}else n.value=a;w.value=a.personal_code||""}},{immediate:!0}),(a,e)=>{const v=Be;return o(),i("div",Pe,[t("div",Ve,[t("div",Fe,[t("div",Oe,[t("div",Ne,[d(s(u),{icon:"mdi:hand-coin",class:"w-10 h-10 text-white"})]),e[14]||(e[14]=t("div",null,[t("h1",{class:"text-2xl md:text-3xl font-bold text-white"},"สนับสนุน เว็บไซต์ เพลินด์"),t("p",{class:"text-white/80 mt-1"},"ร่วมสนับสนุนเพื่อพัฒนาแพลตฟอร์มการเรียนรู้")],-1))]),t("div",Re,[d(v,{to:"/earn/donates",class:"flex items-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-white transition-colors"},{default:Y(()=>[d(s(u),{icon:"mdi:arrow-left",class:"w-5 h-5"}),e[15]||(e[15]=g(" กลับหน้ารวม ",-1))]),_:1})])])]),t("div",qe,[t("div",Ae,[t("div",Ge,[t("h2",ze,[d(s(u),{icon:"mdi:heart",class:"w-6 h-6"}),e[16]||(e[16]=g(" เพลินด์ขอขอบคุณผู้ให้การสนับสนุนทุกท่าน ",-1))]),e[17]||(e[17]=t("p",{class:"text-white/80 text-sm mt-1"},"การสนับสนุนจากท่านจะถูกจัดสรรให้กับสมาชิกผู้ใช้งาน",-1))]),t("div",Ee,[t("div",Qe,[t("h3",He,[d(s(u),{icon:"mdi:information",class:"w-5 h-5"}),e[18]||(e[18]=g(" ขั้นตอนการสนับสนุน ",-1))]),e[19]||(e[19]=t("ol",{class:"text-amber-700 dark:text-amber-300 text-sm space-y-1 list-decimal list-inside"},[t("li",null,[g("โอนเงินเข้าบัญชี "),t("span",{class:"font-bold"},"677-7724-60-5"),g(" ธนาคารกรุงไทย")]),t("li",null,[g("ชื่อบัญชี "),t("span",{class:"font-bold"},"นายอุทัย สาเหล็ม")]),t("li",null,"กรอกข้อมูลให้ครบถ้วน"),t("li",null,"บันทึกข้อมูล")],-1))]),t("form",{onSubmit:H(Ce,["prevent"]),class:"space-y-6"},[s(n)?y("",!0):(o(),i("div",Je,[t("div",Ke,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," ค้นหาสมาชิก (ชื่อ, อีเมล หรือรหัส) ",-1)),t("div",We,[U(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>P(T)?T.value=r:null),onInput:ke,onFocus:e[1]||(e[1]=r=>j.value=s(C).length>0),type:"text",placeholder:"พิมพ์ชื่อ, อีเมล หรือรหัสสมาชิก...",class:"w-full px-4 py-3 pl-10 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-all"},null,544),[[Z,s(T)]]),d(s(u),{icon:s(k)?"mdi:loading":"mdi:magnify",class:h(["absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",{"animate-spin":s(k)}])},null,8,["icon","class"]),s(j)&&s(C).length>0?(o(),i("div",Xe,[(o(!0),i(F,null,O(s(C),r=>(o(),i("div",{key:r.id,class:"flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",onClick:c=>we(r)},[t("img",{src:r.avatar||r.profile_photo_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(r.name)}&background=random&color=fff`,alt:r.name,class:"w-10 h-10 rounded-full object-cover"},null,8,Ze),t("div",et,[t("p",tt,x(r.name),1),t("p",st,x(r.email),1),r.personal_code?(o(),i("p",rt,x(r.personal_code),1)):y("",!0)]),d(s(u),{icon:"mdi:chevron-right",class:"w-5 h-5 text-gray-400"})],8,Ye))),128))])):y("",!0),s(j)&&s(T).length>=2&&s(C).length===0&&!s(k)?(o(),i("div",at,[d(s(u),{icon:"mdi:account-search",class:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e[20]||(e[20]=t("p",{class:"text-gray-500 dark:text-gray-400"},"ไม่พบสมาชิก",-1))])):y("",!0)])]),e[25]||(e[25]=t("div",{class:"flex items-center gap-3"},[t("div",{class:"flex-1 border-t border-gray-200 dark:border-gray-700"}),t("span",{class:"text-xs text-gray-400"},"หรือ"),t("div",{class:"flex-1 border-t border-gray-200 dark:border-gray-700"})],-1)),t("div",ot,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," รหัสประจำตัวสมาชิก (8 หลัก) ",-1)),t("div",lt,[U(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>P(w)?w.value=r:null),onInput:ye,type:"text",maxlength:"8",placeholder:"กรอกรหัส 8 หลัก",class:h(["w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-all",{"border-red-500 focus:ring-red-500":s(p).personalCode}])},null,34),[[Z,s(w)]]),s(k)?(o(),Q(s(u),{key:0,icon:"mdi:loading",class:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-purple-500 animate-spin"})):y("",!0)])]),s(l).user?(o(),i("div",nt,[t("button",{type:"button",onClick:Se,class:"text-xs text-purple-600 dark:text-purple-400 hover:underline flex items-center gap-1"},[d(s(u),{icon:"mdi:account-circle",class:"w-4 h-4"}),e[23]||(e[23]=g(" ใช้ข้อมูลของฉัน ",-1))])])):y("",!0),s(p).personalCode?(o(),i("p",it,[d(s(u),{icon:"mdi:alert-circle",class:"w-4 h-4"}),g(" "+x(s(p).personalCode),1)])):(o(),i("p",dt,[d(s(u),{icon:"mdi:information-outline",class:"w-3 h-3"}),e[24]||(e[24]=g(' ไม่จำเป็นต้องระบุสมาชิก หากไม่ระบุ ระบบจะกำหนดให้เป็น "ไม่ประสงค์ออกนาม" ',-1))]))])),s(k)&&!s(n)?(o(),i("div",ut,[...e[26]||(e[26]=[De('<div class="flex items-center gap-4" data-v-709e55f3><div class="w-16 h-16 bg-gray-300 dark:bg-gray-600 rounded-full" data-v-709e55f3></div><div class="flex-1 space-y-2" data-v-709e55f3><div class="h-4 bg-gray-300 dark:bg-gray-600 rounded w-3/4" data-v-709e55f3></div><div class="h-3 bg-gray-300 dark:bg-gray-600 rounded w-1/2" data-v-709e55f3></div></div></div>',1)])])):y("",!0),s(n)?(o(),i("div",pt,[t("button",{onClick:_e,type:"button",class:"absolute top-2 right-2 p-2 bg-white dark:bg-gray-700 rounded-full shadow hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"เปลี่ยนสมาชิก"},[d(s(u),{icon:"mdi:close",class:"w-4 h-4 text-red-500"})]),t("div",ct,[t("img",{src:s(n).avatar||s(n).profile_photo_url||`${s(L).public.apiBase}/storage/images/plearnd-logo.png`,alt:s(n).name||s(n).username,class:"w-16 h-16 rounded-full border-4 border-purple-500 shadow-lg object-cover"},null,8,gt),t("div",null,[t("h4",bt,x(s(n).name||s(n).username),1),t("p",ft,[e[27]||(e[27]=g(" รหัสประจำตัว: ",-1)),t("span",xt,x(s(n).personal_code),1)])])])])):y("",!0),t("div",vt,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," จำนวนเงิน (บาท) ",-1)),t("div",mt,[(o(),i(F,null,O(se,r=>t("button",{key:r,type:"button",onClick:c=>be(r),class:h(["px-3 py-1.5 rounded-lg text-sm font-medium transition-all border",s(_)===r?"bg-purple-500 border-purple-500 text-white shadow-md":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:border-purple-400"])},x(r.toLocaleString()),11,yt)),64)),se.includes(s(_))?y("",!0):(o(),i("button",ht,x(s(_).toLocaleString()),1))]),U(t("select",{"onUpdate:modelValue":e[3]||(e[3]=r=>P(D)?D.value=r:null),onChange:ge,class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-lg font-semibold text-center transition-all"},[(o(),i(F,null,O(W,(r,c)=>t("option",{key:c,value:c},x(r.toLocaleString())+" บาท ",9,kt)),64))],544),[[ee,s(D)]]),t("div",wt,[d(s(u),{icon:"mdi:star-circle",class:"w-8 h-8 text-amber-500"}),t("span",_t,x(s(ce).toLocaleString())+" แต้ม ",1)])]),s(l).user?(o(),i("div",St,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," วิธีการชำระ ",-1)),t("div",Ct,[t("button",{type:"button",onClick:e[4]||(e[4]=r=>m.value="slip"),class:h(["p-4 rounded-xl border-2 text-left transition-all",s(m)==="slip"?"border-teal-500 bg-teal-50 dark:bg-teal-900/20":"border-gray-200 dark:border-gray-700 hover:border-teal-300"])},[t("div",$t,[t("div",{class:h(["w-10 h-10 rounded-lg flex items-center justify-center",s(m)==="slip"?"bg-teal-500":"bg-gray-200 dark:bg-gray-700"])},[d(s(u),{icon:"mdi:receipt",class:h(["w-5 h-5",s(m)==="slip"?"text-white":"text-gray-500"])},null,8,["class"])],2),e[29]||(e[29]=t("div",null,[t("p",{class:"font-medium text-gray-900 dark:text-white"},"สลิปโอนเงิน"),t("p",{class:"text-xs text-gray-500"},"รอ Admin อนุมัติ")],-1))])],2),t("button",{type:"button",onClick:e[5]||(e[5]=r=>m.value="wallet"),disabled:(s(l).user?.wallet||0)<s(_),class:h(["p-4 rounded-xl border-2 text-left transition-all disabled:opacity-50 disabled:cursor-not-allowed",s(m)==="wallet"?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 hover:border-green-300"])},[t("div",Tt,[t("div",{class:h(["w-10 h-10 rounded-lg flex items-center justify-center",s(m)==="wallet"?"bg-green-500":"bg-gray-200 dark:bg-gray-700"])},[d(s(u),{icon:"mdi:wallet",class:h(["w-5 h-5",s(m)==="wallet"?"text-white":"text-gray-500"])},null,8,["class"])],2),t("div",null,[e[30]||(e[30]=t("p",{class:"font-medium text-gray-900 dark:text-white"},"กระเป๋าเงิน",-1)),t("p",jt,x((s(l).user?.wallet||0).toLocaleString())+" บาท ",1)])])],10,Bt),t("button",{type:"button",onClick:e[6]||(e[6]=r=>m.value="points"),disabled:(s(l).user?.points||0)<s(te),class:h(["p-4 rounded-xl border-2 text-left transition-all disabled:opacity-50 disabled:cursor-not-allowed",s(m)==="points"?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-purple-300"])},[t("div",Dt,[t("div",{class:h(["w-10 h-10 rounded-lg flex items-center justify-center",s(m)==="points"?"bg-purple-500":"bg-gray-200 dark:bg-gray-700"])},[d(s(u),{icon:"mdi:star-circle",class:h(["w-5 h-5",s(m)==="points"?"text-white":"text-gray-500"])},null,8,["class"])],2),t("div",null,[e[31]||(e[31]=t("p",{class:"font-medium text-gray-900 dark:text-white"},"แต้มสะสม",-1)),t("p",It,x((s(l).user?.points||0).toLocaleString())+" แต้ม ",1)])])],10,Lt)]),s(m)==="points"?(o(),i("div",Mt,[t("p",Ut,[d(s(u),{icon:"mdi:information",class:"w-4 h-4 inline mr-1"}),e[32]||(e[32]=g(" ต้องใช้ ",-1)),t("span",Pt,x(s(te).toLocaleString()),1),e[33]||(e[33]=g(" แต้ม (อัตรา 1 บาท = 100 แต้ม) ",-1))])])):y("",!0)])):y("",!0),s(m)==="slip"||!s(l).user?(o(),i("div",Vt,[t("div",Ft,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[g(" สลิปการโอนเงิน "),t("span",{class:"text-red-500"},"*")],-1)),s(p).slip?(o(),i("span",Ot,[d(s(u),{icon:"mdi:alert-circle",class:"w-3 h-3"}),g(" "+x(s(p).slip),1)])):y("",!0)]),s(S)?(o(),i("div",Nt,[e[36]||(e[36]=t("div",{class:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors rounded-xl pointer-events-none"},null,-1)),t("img",{src:s(S).url,alt:"Slip",class:"w-full max-h-80 object-contain rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"},null,8,Rt),t("button",{onClick:me,type:"button",class:"absolute top-2 right-2 p-2 bg-white/90 dark:bg-gray-800/90 hover:bg-red-500 hover:text-white text-gray-700 rounded-full shadow-lg transition-all backdrop-blur-sm"},[d(s(u),{icon:"mdi:delete",class:"w-5 h-5"})])])):(o(),i("div",{key:1,onDragover:e[7]||(e[7]=H(r=>A.value=!0,["prevent"])),onDragleave:e[8]||(e[8]=H(r=>A.value=!1,["prevent"])),onDrop:H(ve,["prevent"]),class:h(["border-2 border-dashed rounded-xl p-8 text-center transition-all cursor-pointer relative overflow-hidden",s(A)?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 scale-[1.01]":"border-gray-300 dark:border-gray-600 hover:border-purple-400 hover:bg-gray-50 dark:hover:bg-gray-700/50",s(p).slip?"border-red-300 bg-red-50 dark:border-red-800 dark:bg-red-900/10":""]),onClick:fe},[d(s(u),{icon:"mdi:cloud-upload",class:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e[37]||(e[37]=t("p",{class:"text-gray-600 dark:text-gray-400 mb-2"},[t("span",{class:"font-semibold text-purple-600 dark:text-purple-400"},"คลิกเพื่อเลือกไฟล์"),g(" หรือลากไฟล์มาวางที่นี่ ")],-1)),e[38]||(e[38]=t("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF (ไม่เกิน 4MB)",-1)),t("input",{ref_key:"inputSlip",ref:M,type:"file",accept:"image/png, image/jpeg, image/gif",class:"hidden",onChange:xe},null,544)],34))])):y("",!0),t("div",qt,[t("div",At,[t("div",Gt,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[g(" วันที่โอน "),t("span",{class:"text-red-500"},"*")],-1)),s(p).dateTime?(o(),i("span",zt,x(s(p).dateTime),1)):y("",!0)]),U(t("input",{"onUpdate:modelValue":e[9]||(e[9]=r=>P(I)?I.value=r:null),type:"date",max:s($e),class:h(["w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-all",{"border-red-500":s(p).dateTime}])},null,10,Et),[[Z,s(I)]])]),t("div",Qt,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[g(" เวลาที่โอน "),t("span",{class:"text-red-500"},"*")],-1)),t("div",Ht,[t("div",Jt,[U(t("select",{"onUpdate:modelValue":e[10]||(e[10]=r=>P(z)?z.value=r:null),class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent dark:bg-gray-700 dark:text-white appearance-none"},[(o(!0),i(F,null,O(s(ue),r=>(o(),i("option",{key:r,value:r},x(r),9,Kt))),128))],512),[[ee,s(z)]]),d(s(u),{icon:"mdi:chevron-down",class:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500 pointer-events-none"}),e[40]||(e[40]=t("span",{class:"absolute -top-6 left-0 text-xs text-gray-500"},"นาฬิกา",-1))]),e[42]||(e[42]=t("span",{class:"flex items-center text-2xl font-bold text-gray-400"},":",-1)),t("div",Wt,[U(t("select",{"onUpdate:modelValue":e[11]||(e[11]=r=>P(E)?E.value=r:null),class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent dark:bg-gray-700 dark:text-white appearance-none"},[(o(!0),i(F,null,O(s(pe),r=>(o(),i("option",{key:r,value:r},x(r),9,Xt))),128))],512),[[ee,s(E)]]),d(s(u),{icon:"mdi:chevron-down",class:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500 pointer-events-none"}),e[41]||(e[41]=t("span",{class:"absolute -top-6 left-0 text-xs text-gray-500"},"นาที",-1))])])])]),s(p).dateTime?(o(),i("p",Yt,x(s(p).dateTime),1)):y("",!0),t("div",Zt,[t("p",es,[d(s(u),{icon:"mdi:alert",class:"w-5 h-5 flex-shrink-0 mt-0.5"}),e[44]||(e[44]=t("span",null,[g(" กรุณาตรวจสอบวันที่และเวลาให้ตรงกับใบสลิปโอนเงิน "),t("br",{class:"hidden sm:block"}),g(" (หากเกิดข้อผิดพลาดจะไม่สามารถคืนเงินได้) ")],-1))])]),t("div",ts,[t("button",{type:"submit",disabled:s(N),class:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all"},[s(N)?(o(),Q(s(u),{key:0,icon:"mdi:loading",class:"w-5 h-5 animate-spin"})):(o(),Q(s(u),{key:1,icon:"mdi:content-save",class:"w-5 h-5"})),e[45]||(e[45]=g(" บันทึกข้อมูล ",-1))],8,ss),d(v,{to:"/earn/donates",class:"flex items-center justify-center gap-2 px-6 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-semibold rounded-xl transition-all"},{default:Y(()=>[d(s(u),{icon:"mdi:close",class:"w-5 h-5"}),e[46]||(e[46]=g(" ยกเลิก ",-1))]),_:1})])],32)])])]),(o(),Q(Ie,{to:"body"},[s(G)?(o(),i("div",rs,[t("div",as,[t("div",os,[d(s(u),{icon:"mdi:check-circle",class:"w-12 h-12 text-green-500"})]),e[48]||(e[48]=t("h3",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"},"เสร็จสมบูรณ์!",-1)),e[49]||(e[49]=t("p",{class:"text-gray-600 dark:text-gray-400 mb-6"}," ขอบคุณที่สนับสนุนเว็บไซต์เพลินด์ ทางทีมงานจะตรวจสอบข้อมูลและทำการอัพเดทข้อมูลให้เร็วที่สุด ",-1)),t("div",ls,[t("button",{onClick:e[12]||(e[12]=r=>G.value=!1),class:"flex-1 px-4 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-semibold rounded-xl transition-colors"}," สนับสนุนเพิ่ม "),d(v,{to:"/earn/donates",class:"flex-1 px-4 py-3 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white font-semibold rounded-xl transition-all text-center",onClick:e[13]||(e[13]=r=>G.value=!1)},{default:Y(()=>[...e[47]||(e[47]=[g(" กลับหน้ารวม ",-1)])]),_:1})])])])):y("",!0)]))])}}}),cs=Ue(ns,[["__scopeId","data-v-709e55f3"]]);export{cs as default};
