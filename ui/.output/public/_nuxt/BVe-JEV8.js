import{a as q}from"./BB7BZ0Dd.js";import{n as s,_ as $,o as g,c as f,a as e,b as m,w as z,d as k,T as c,u as t,t as l,I as h,a7 as D,av as B}from"./Brb_7992.js";function P(x,n){const r=s(()=>{if(!n.value||n.value===0)return 0;const a=x.value?.achieved_score||0;return Math.round(a/n.value*100)}),u=s(()=>{const a=r.value;return a>=80?"excellent":a>=50?"good":"fair"}),v=s(()=>{switch(u.value){case"excellent":return"ยอดเยี่ยม";case"good":return"ดี";default:return"พอใช้"}}),p=s(()=>{switch(u.value){case"excellent":return"fluent:ribbon-star-20-filled";case"good":return"fluent:thumb-like-20-filled";default:return"fluent:battery-3-20-filled"}}),b=s(()=>{switch(u.value){case"excellent":return{ring:"ring-green-500",bg:"bg-green-500",text:"text-green-600",gradient:"from-green-400 to-green-600"};case"good":return{ring:"ring-yellow-400",bg:"bg-yellow-400",text:"text-yellow-600",gradient:"from-yellow-300 to-yellow-500"};default:return{ring:"ring-orange-500",bg:"bg-orange-500",text:"text-orange-600",gradient:"from-orange-400 to-orange-600"}}}),_=s(()=>{const a=x.value?.achieved_score||0,y=n.value||0;return Math.max(0,y-a)}),i=s(()=>Math.max(0,100-r.value)),w=s(()=>({width:`${r.value}%`}));return{percentage:r,progressStatus:u,progressColor:b,statusMessage:v,statusIcon:p,remainingScore:_,remainingPercentage:i,progressBarStyle:w}}const S={},A={class:"relative inline-block text-left"};function V(x,n){return g(),f("div",A,[...n[0]||(n[0]=[e("button",{class:"text-gray-500 hover:text-gray-700"}," ... ",-1)])])}const O=$(S,[["render",V]]),R=["aria-label"],T={key:0,class:"absolute top-3 right-3 z-10"},U={class:"flex items-center w-full lg:w-64 lg:flex-shrink-0"},E={class:"relative flex-shrink-0"},G=["src","alt"],F={class:"ml-4 min-w-0 flex-1"},H=["href","title"],J={class:"truncate"},K=["title"],L={class:"text-xs font-semibold"},Q={class:"flex items-center space-x-3 text-sm"},W={class:"font-medium"},X={class:"flex items-center text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"},Y={class:"font-medium"},Z={class:"flex flex-col items-start lg:items-end w-full flex-1"},ee={class:"flex items-center justify-between mb-2 w-full"},te={class:"flex items-center"},re={class:"relative w-full bg-gray-100 dark:bg-gray-700 rounded-full h-7 overflow-hidden shadow-inner"},se=["aria-valuenow","aria-label"],ae={class:"relative z-10 font-bold"},oe={key:0,class:"absolute inset-0 flex items-center justify-center"},ne={class:"flex items-center justify-between w-full mt-2 text-xs"},le={class:"text-gray-500 dark:text-gray-400"},ie={__name:"MemberCard",props:{member:{type:Object,required:!0,default:()=>({})},dataIndex:{type:Number,default:0}},emits:["request-unmember-course"],setup(x,{emit:n}){const r=x,u=n,v=s(()=>q().props),p=s(()=>v.value.course?.data?.total_score||100),b=s(()=>v.value.isCourseAdmin),_=B(r,"member"),{percentage:i,progressStatus:w,progressColor:a,statusMessage:y,statusIcon:C}=P(_,p),d=s(()=>r.member?.member_name||r.member?.user?.name||r.member?.student?.name||r.member?.name||"Unknown"),M=s(()=>r.member?.order_number||"#"),N=s(()=>r.member?.group?.name||"-"),I=s(()=>r.member?.avatar||r.member?.user?.avatar||r.member?.user?.profile_photo_url||"/images/default-avatar.png"),j=()=>{u("request-unmember-course",{memberId:r.member.id,memberName:d.value})};return(de,o)=>r.member?.role!==3?(g(),f("li",{key:0,class:"group relative bg-white dark:bg-gray-800 hover:bg-gradient-to-br hover:from-white hover:to-indigo-50 dark:hover:from-gray-800 dark:hover:to-gray-700 shadow-lg hover:shadow-xl p-4 rounded-xl w-full mb-3 transition-all duration-300 border border-gray-100 dark:border-gray-700 hover:border-indigo-200 dark:hover:border-indigo-900","aria-label":`Member card for ${d.value}`,role:"article"},[b.value?(g(),f("div",T,[m(O,{onDeleteModel:j},{deleteModel:z(()=>[...o[0]||(o[0]=[e("span",null,"ลบสมาชิก",-1)])]),_:1})])):k("",!0),e("div",{class:c(["flex flex-col lg:flex-row gap-4 items-start",{"pr-10":b.value}])},[e("div",U,[e("div",E,[e("img",{class:c(["w-16 h-16 rounded-full ring-2 transition-all duration-300",[t(a).ring,`group-hover:${t(a).ring}`]]),src:I.value,alt:`${d.value}'s avatar`,loading:"lazy"},null,10,G),e("div",{class:c(["absolute -bottom-1 -right-1 px-2 py-0.5 rounded-full text-[10px] font-bold text-white shadow-lg",t(a).bg])},l(t(i))+"% ",3)]),e("div",F,[b.value?(g(),f("a",{key:0,href:`/courses/${v.value.course?.data?.id}/members/${r.member.id}/member-settings`,target:"_blank",rel:"noopener noreferrer",title:d.value,class:"text-gray-900 dark:text-white font-bold tracking-wide text-lg hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors duration-300 cursor-pointer inline-flex items-center group/link max-w-full"},[e("span",J,l(d.value),1),m(t(h),{icon:"heroicons:arrow-top-right-on-square",class:"w-4 h-4 ml-1.5 flex-shrink-0 opacity-0 group-hover/link:opacity-100 transition-opacity duration-200"})],8,H)):(g(),f("p",{key:1,title:d.value,class:"text-gray-900 dark:text-white font-bold tracking-wide text-lg truncate"},l(d.value),9,K)),e("div",{class:c(["flex items-center mt-1 mb-2",t(a).text])},[m(t(h),{icon:t(C),class:"w-4 h-4 mr-1.5"},null,8,["icon"]),e("span",L,l(t(y)),1)],2),e("div",Q,[e("span",{class:c(["flex items-center transition-colors",M.value==="#"?"text-orange-500 dark:text-orange-400 font-bold":"text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400"])},[m(t(h),{icon:"fluent:number-symbol-square-20-filled",class:"w-5 h-5 mr-1"}),e("span",W,l(M.value),1)],2),e("span",X,[m(t(h),{icon:"heroicons:user-group-solid",class:"w-5 h-5 mr-1"}),e("span",Y,l(N.value),1)])])])]),e("div",Z,[e("div",ee,[e("div",te,[m(t(h),{icon:"heroicons:academic-cap-solid",class:"w-5 h-5 text-indigo-500 dark:text-indigo-400 mr-2"}),o[1]||(o[1]=e("span",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},"ความคืบหน้า",-1))])]),e("div",re,[e("div",{class:c(["h-full text-xs font-bold text-white flex items-center justify-center rounded-full transition-all duration-500 ease-out relative overflow-hidden bg-gradient-to-r",t(a).gradient]),style:D(`width: ${t(i)}%`),role:"progressbar","aria-valuenow":t(i),"aria-valuemin":"0","aria-valuemax":"100","aria-label":`Progress: ${t(i)}% - ${t(w)}`},[o[2]||(o[2]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer"},null,-1)),e("span",ae,l(t(i))+"%",1)],14,se),t(i)===0?(g(),f("div",oe,[...o[3]||(o[3]=[e("span",{class:"text-xs font-medium text-gray-500"},"ยังไม่มีคะแนน",-1)])])):k("",!0)]),e("div",ne,[e("div",le,[e("span",{class:c(["font-medium",t(a).text])},l(r.member?.achieved_score||0),3),o[4]||(o[4]=e("span",{class:"mx-1"},"/",-1)),e("span",null,l(p.value),1),o[5]||(o[5]=e("span",{class:"ml-1"},"คะแนน",-1))])])])],2)],8,R)):k("",!0)}},me=$(ie,[["__scopeId","data-v-4ac99d98"]]);export{me as M};
