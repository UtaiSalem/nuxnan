import{_ as V}from"./0NabHjdI.js";import{q as N,p as P,r as i,z,c,a as e,b as s,t as d,w as f,$ as _,u as r,aa as F,aj as M,ab as T,F as w,k,d as U,aH as D,o as u,e as I,I as l,T as K}from"./DvtEeXFW.js";const R={class:"space-y-6"},q={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},A={class:"text-gray-500 dark:text-gray-400 mt-1"},E={class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700"},H={class:"flex flex-col sm:flex-row gap-4"},Q={class:"flex-1 relative"},G=["value"],J={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden"},O={key:0,class:"p-8 text-center"},W={key:1,class:"divide-y divide-gray-100 dark:divide-gray-700"},X={class:"flex flex-col sm:flex-row gap-4"},Y={class:"w-full sm:w-40 h-24 flex-shrink-0"},Z=["src","alt"],ee={class:"flex-1 min-w-0"},te={class:"flex items-start justify-between gap-4"},ae={class:"font-semibold text-gray-800 dark:text-white line-clamp-1"},se={class:"text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-2"},re={class:"flex flex-wrap items-center gap-4 mt-3 text-sm text-gray-500 dark:text-gray-400"},le={class:"flex items-center gap-1"},oe={class:"flex items-center gap-1"},ne={class:"flex items-center gap-1"},ie={class:"flex items-center gap-2 sm:flex-col sm:justify-center"},de={class:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors"},ce={key:0,class:"p-8 text-center"},he=N({__name:"index",setup(ue){const S=P().public.apiBase,g=i([]),h=i(!0),x=i(""),p=i("all"),y=i(1),C=i(1),B=i(10),b=i(0),L=[{value:"all",label:"ทั้งหมด"},{value:"published",label:"เผยแพร่แล้ว"},{value:"draft",label:"ฉบับร่าง"},{value:"archived",label:"เก็บถาวร"}],m=async()=>{h.value=!0;try{const n=D("token"),a=new URLSearchParams({page:y.value.toString(),per_page:B.value.toString(),...x.value&&{search:x.value},...p.value!=="all"&&{status:p.value}}),o=await $fetch(`${S}/api/admin/courses?${a}`,{headers:{Authorization:`Bearer ${n.value}`}});o.success&&(g.value=o.data.data||o.data,C.value=o.data.last_page||1,b.value=o.data.total||g.value.length)}catch(n){console.error("Failed to fetch courses:",n)}finally{h.value=!1}},v=()=>{y.value=1,m()},$=n=>{const a={published:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",draft:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",archived:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"};return a[n]||a.draft},j=n=>({published:"เผยแพร่",draft:"ฉบับร่าง",archived:"เก็บถาวร"})[n]||"ไม่ทราบ";return z(()=>{m()}),(n,a)=>{const o=V;return u(),c("div",R,[e("div",q,[e("div",null,[a[2]||(a[2]=e("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white"},"จัดการคอร์สเรียน",-1)),e("p",A," คอร์สทั้งหมด "+d(b.value.toLocaleString())+" คอร์ส ",1)]),s(o,{to:"/nuxnan-admin/courses/create",class:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-white transition-colors"},{default:f(()=>[s(r(l),{icon:"fluent:add-24-regular",class:"w-5 h-5"}),a[3]||(a[3]=I(" สร้างคอร์สใหม่ ",-1))]),_:1})]),e("div",E,[e("div",H,[e("div",Q,[s(r(l),{icon:"fluent:search-24-regular",class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),_(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>x.value=t),type:"text",placeholder:"ค้นหาคอร์ส...",class:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",onKeyup:M(v,["enter"])},null,544),[[F,x.value]])]),_(e("select",{"onUpdate:modelValue":a[1]||(a[1]=t=>p.value=t),class:"px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",onChange:v},[(u(),c(w,null,k(L,t=>e("option",{key:t.value,value:t.value},d(t.label),9,G)),64))],544),[[T,p.value]]),e("button",{onClick:v,class:"px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-white transition-colors"}," ค้นหา ")])]),e("div",J,[h.value?(u(),c("div",O,[s(r(l),{icon:"fluent:spinner-ios-20-regular",class:"w-8 h-8 text-indigo-600 animate-spin mx-auto"}),a[4]||(a[4]=e("p",{class:"text-gray-500 mt-2"},"กำลังโหลดข้อมูล...",-1))])):(u(),c("div",W,[(u(!0),c(w,null,k(g.value,t=>(u(),c("div",{key:t.id,class:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors"},[e("div",X,[e("div",Y,[e("img",{src:t.thumbnail||"/storage/images/default-course.jpg",alt:t.title,class:"w-full h-full object-cover rounded-xl"},null,8,Z)]),e("div",ee,[e("div",te,[e("div",null,[e("h3",ae,d(t.title),1),e("p",se,d(t.description),1)]),e("span",{class:K([$(t.status),"px-2.5 py-1 rounded-full text-xs font-medium whitespace-nowrap"])},d(j(t.status)),3)]),e("div",re,[e("div",le,[s(r(l),{icon:"fluent:person-24-regular",class:"w-4 h-4"}),e("span",null,d(t.instructor?.name||"ไม่ระบุ"),1)]),e("div",oe,[s(r(l),{icon:"fluent:people-24-regular",class:"w-4 h-4"}),e("span",null,d(t.enrollments_count||0)+" ผู้เรียน",1)]),e("div",ne,[s(r(l),{icon:"fluent:money-24-regular",class:"w-4 h-4"}),e("span",null,"฿"+d((t.price||0).toLocaleString()),1)])])]),e("div",ie,[s(o,{to:`/nuxnan-admin/courses/${t.id}`,class:"p-2 text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors"},{default:f(()=>[s(r(l),{icon:"fluent:eye-24-regular",class:"w-5 h-5"})]),_:1},8,["to"]),s(o,{to:`/nuxnan-admin/courses/${t.id}/edit`,class:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors"},{default:f(()=>[s(r(l),{icon:"fluent:edit-24-regular",class:"w-5 h-5"})]),_:1},8,["to"]),e("button",de,[s(r(l),{icon:"fluent:delete-24-regular",class:"w-5 h-5"})])])])]))),128)),g.value.length===0?(u(),c("div",ce,[s(r(l),{icon:"fluent:hat-graduation-24-regular",class:"w-12 h-12 text-gray-300 mx-auto"}),a[5]||(a[5]=e("p",{class:"text-gray-500 mt-2"},"ไม่พบคอร์สเรียน",-1))])):U("",!0)]))])])}}});export{he as default};
