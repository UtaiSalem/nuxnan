import{a9 as B,r as c,a3 as F,z as I,c as n,a as e,d as f,b as g,u,t as i,F as h,k,o as l,I as v,T as N,e as P,g as V,l as _}from"./DvtEeXFW.js";import{_ as S}from"./DAla1l8p.js";const z={class:"space-y-6"},D={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},L={class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700 flex items-center gap-4"},M={class:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-xl flex items-center justify-center text-gray-600 dark:text-gray-300"},R={class:"text-2xl font-bold text-gray-800 dark:text-white"},T={class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-yellow-500/20 dark:border-yellow-500/20 flex items-center gap-4"},E={class:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl flex items-center justify-center text-yellow-600 dark:text-yellow-400"},q={class:"text-2xl font-bold text-yellow-600 dark:text-yellow-400"},G={class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-green-500/20 dark:border-green-500/20 flex items-center gap-4"},H={class:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center text-green-600 dark:text-green-400"},J={class:"text-2xl font-bold text-green-600 dark:text-green-400"},K={class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-red-500/20 dark:border-red-500/20 flex items-center gap-4"},O={class:"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-xl flex items-center justify-center text-red-600 dark:text-red-400"},Q={class:"text-2xl font-bold text-red-600 dark:text-red-400"},U={class:"flex flex-wrap gap-2"},W=["onClick"],X={key:0,class:"ml-1 px-1.5 py-0.5 bg-white/20 rounded-full text-xs"},Y={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Z={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},ee={key:2,class:"text-center py-12 bg-white dark:bg-gray-800 rounded-2xl"},te={key:3,class:"flex justify-center mt-8"},ae={class:"flex items-center gap-2 bg-white dark:bg-gray-800 p-2 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700"},se=["disabled"],re={class:"px-4 text-sm font-medium text-gray-600 dark:text-gray-300"},le=["disabled"],ce={__name:"index",setup(oe){const w=B(),o=c([]),r=c({total:0,pending:0,approved:0,rejected:0}),b=c(!0),d=c(1),p=c(1),j=c(12),x=c("all"),C=[{value:"all",label:"ทั้งหมด",color:"bg-indigo-500"},{value:"pending",label:"รออนุมัติ",color:"bg-yellow-500"},{value:"approved",label:"อนุมัติแล้ว",color:"bg-green-500"},{value:"rejected",label:"ปฏิเสธ",color:"bg-red-500"}],y=async()=>{b.value=!0;try{const s={page:d.value,per_page:j.value};if(x.value!=="all"){const a={pending:0,approved:1,rejected:2};a[x.value]!==void 0&&(s.status=a[x.value])}const t=await w.get("/api/plearnd-admin/supports/donates",{params:s});if(t){o.value=t.donates.data||t.donates,t.stats&&(r.value=t.stats);const a=t.donates.meta||{};d.value=a.current_page||1,p.value=a.last_page||1}}catch(s){console.error("Failed to fetch donations:",s)}finally{b.value=!1}};F(x,()=>{d.value=1,y()});const $=s=>{const t=o.value.findIndex(a=>a.id===s);t!==-1&&(o.value[t].status=1,o.value[t].approved_by=_().user?.id,r.value.pending--,r.value.approved++)},A=s=>{const t=o.value.findIndex(a=>a.id===s);t!==-1&&(o.value[t].status=2,o.value[t].approved_by=_().user?.id,r.value.pending--,r.value.rejected++)},m=s=>{s>=1&&s<=p.value&&(d.value=s,y())};return I(()=>{y()}),(s,t)=>(l(),n("div",z,[t[7]||(t[7]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white"},"อนุมัติการสนับสนุนแต้ม"),e("p",{class:"text-gray-500 dark:text-gray-400 mt-1"},"ตรวจสอบและอนุมัติการสนับสนุนจากผู้บริจาค")],-1)),e("div",D,[e("div",L,[e("div",M,[g(u(v),{icon:"fluent:list-24-regular",class:"w-6 h-6"})]),e("div",null,[e("p",R,i(r.value.total),1),t[2]||(t[2]=e("p",{class:"text-sm text-gray-500"},"ทั้งหมด",-1))])]),e("div",T,[e("div",E,[g(u(v),{icon:"fluent:clock-24-regular",class:"w-6 h-6"})]),e("div",null,[e("p",q,i(r.value.pending),1),t[3]||(t[3]=e("p",{class:"text-sm text-gray-500"},"รออนุมัติ",-1))])]),e("div",G,[e("div",H,[g(u(v),{icon:"fluent:checkmark-circle-24-regular",class:"w-6 h-6"})]),e("div",null,[e("p",J,i(r.value.approved),1),t[4]||(t[4]=e("p",{class:"text-sm text-gray-500"},"อนุมัติแล้ว",-1))])]),e("div",K,[e("div",O,[g(u(v),{icon:"fluent:dismiss-circle-24-regular",class:"w-6 h-6"})]),e("div",null,[e("p",Q,i(r.value.rejected),1),t[5]||(t[5]=e("p",{class:"text-sm text-gray-500"},"ปฏิเสธ",-1))])])]),e("div",U,[(l(),n(h,null,k(C,a=>e("button",{key:a.value,onClick:de=>x.value=a.value,class:N(["px-4 py-2 rounded-xl text-sm font-medium transition-all",x.value===a.value?`${a.color} text-white shadow-lg`:"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"])},[P(i(a.label)+" ",1),a.value==="pending"&&r.value.pending>0?(l(),n("span",X,i(r.value.pending),1)):f("",!0)],10,W)),64))]),b.value?(l(),n("div",Y,[(l(),n(h,null,k(6,a=>e("div",{key:a,class:"bg-white dark:bg-gray-800 h-80 rounded-xl animate-pulse"})),64))])):o.value.length>0?(l(),n("div",Z,[(l(!0),n(h,null,k(o.value,a=>(l(),V(S,{key:a.id,donate:a,onApproved:$,onRejected:A,class:"h-full"},null,8,["donate"]))),128))])):(l(),n("div",ee,[g(u(v),{icon:"fluent:box-search-24-regular",class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t[6]||(t[6]=e("p",{class:"text-gray-500"},"ไม่พบข้อมูลการสนับสนุน",-1))])),!b.value&&p.value>1?(l(),n("div",te,[e("div",ae,[e("button",{disabled:d.value===1,onClick:t[0]||(t[0]=a=>m(d.value-1)),class:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg disabled:opacity-50 transition-colors"},[g(u(v),{icon:"fluent:chevron-left-24-regular",class:"w-5 h-5"})],8,se),e("span",re," หน้า "+i(d.value)+" / "+i(p.value),1),e("button",{disabled:d.value===p.value,onClick:t[1]||(t[1]=a=>m(d.value+1)),class:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg disabled:opacity-50 transition-colors"},[g(u(v),{icon:"fluent:chevron-right-24-regular",class:"w-5 h-5"})],8,le)])])):f("",!0)]))}};export{ce as default};
