import{_ as A}from"./DROJGjoa.js";import{q as C,p as V,r as n,z as D,c as i,a as e,b as o,w as N,u as l,t as r,$ as m,aa as z,ab as F,F as f,k as _,aH as v,o as c,e as j,I as d,d as M,T as x}from"./CHs-R6Sv.js";const q={class:"space-y-6"},I={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},U={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},E={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700"},H={class:"flex items-center gap-3"},P={class:"p-3 bg-green-100 dark:bg-green-900/30 rounded-xl"},Q={class:"text-xl font-bold text-gray-800 dark:text-white"},R={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700"},G={class:"flex items-center gap-3"},J={class:"p-3 bg-red-100 dark:bg-red-900/30 rounded-xl"},K={class:"text-xl font-bold text-gray-800 dark:text-white"},O={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700"},X={class:"flex items-center gap-3"},Y={class:"p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl"},Z={class:"text-xl font-bold text-gray-800 dark:text-white"},ee={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700"},te={class:"flex items-center gap-3"},ae={class:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl"},se={class:"text-xl font-bold text-gray-800 dark:text-white"},re={class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700"},oe={class:"flex flex-col sm:flex-row gap-4"},le={class:"flex-1 relative"},de=["value"],ne={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden"},ie={key:0,class:"p-8 text-center"},ce={key:1,class:"overflow-x-auto"},ge={class:"w-full"},ue={class:"divide-y divide-gray-100 dark:divide-gray-700"},pe={class:"px-6 py-4 text-gray-600 dark:text-gray-300"},xe={class:"px-6 py-4 font-medium text-gray-800 dark:text-white"},ye={class:"flex flex-col"},be={class:"font-medium"},he={key:0,class:"text-xs text-gray-500"},me={class:"px-6 py-4"},fe={class:"px-6 py-4 text-center"},_e={class:"px-6 py-4 text-right text-gray-500"},ve={class:"px-6 py-4 text-right"},we={class:"p-2 text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors"},Le=C({__name:"index",setup(ke){const y=V().public.apiBase,u=n([]),p=n(!0),b=n(""),h=n("all");n(1);const w=n(1),g=n({totalDeposits:485e3,totalWithdrawals:125e3,pendingApprovals:12,activeWallets:8956}),k=async()=>{try{const s=v("token"),t=await $fetch(`${y}/api/nuxnan-admin/wallet/stats`,{headers:{Authorization:`Bearer ${s.value}`}});t.success&&(g.value={totalDeposits:t.data.total_wallet||0,totalWithdrawals:t.data.total_withdrawals||0,pendingApprovals:(t.data.deposit_requests?.pending||0)+(t.data.pending_withdrawals||0),activeWallets:t.data.total_users||0})}catch(s){console.error("Failed to fetch summary stats:",s)}},B=[{value:"all",label:"ทั้งหมด"},{value:"deposit",label:"เติมเงิน"},{value:"withdrawal",label:"ถอนเงิน"},{value:"transfer",label:"โอนเงิน"},{value:"purchase",label:"ซื้อสินค้า"}],S=async()=>{p.value=!0;try{const s=v("token"),t=await $fetch(`${y}/api/admin/wallet-transactions`,{headers:{Authorization:`Bearer ${s.value}`}});t.success&&(u.value=t.data.data||t.data,w.value=t.data.last_page||1)}catch(s){console.error("Failed to fetch wallet transactions:",s),u.value=[{id:1,user:"สมชาย ใจดี",type:"deposit",amount:1e3,status:"completed",date:"2026-01-18 10:30"},{id:2,user:"สุดา สวยงาม",type:"withdrawal",amount:500,status:"pending",date:"2026-01-18 09:15"},{id:3,user:"วิชัย มั่นคง",type:"purchase",amount:350,status:"completed",date:"2026-01-17 14:20"},{id:4,user:"พิมพ์ใจ รักเรียน",type:"deposit",amount:2e3,status:"completed",date:"2026-01-17 11:45"},{id:5,user:"ชาติชาย เก่งมาก",type:"transfer",amount:150,status:"completed",date:"2026-01-16 16:30"}]}finally{p.value=!1}},W=s=>({deposit:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",withdrawal:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",transfer:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",purchase:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400"})[s]||"bg-gray-100 text-gray-700",L=s=>({deposit:"เติมเงิน",withdrawal:"ถอนเงิน",transfer:"โอนเงิน",purchase:"ซื้อสินค้า"})[s]||s,T=s=>{const t={completed:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",pending:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",failed:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"};return t[s]||t.pending};return D(()=>{S(),k()}),(s,t)=>{const $=A;return c(),i("div",q,[e("div",I,[t[2]||(t[2]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white"},"จัดการ Wallet"),e("p",{class:"text-gray-500 dark:text-gray-400 mt-1"},"จัดการธุรกรรม Wallet และอนุมัติรายการ")],-1)),o($,{to:"/nuxnan-admin/wallet/pending",class:"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 rounded-xl text-white transition-colors"},{default:N(()=>[o(l(d),{icon:"fluent:clock-24-regular",class:"w-5 h-5"}),j(" รอการอนุมัติ ("+r(g.value.pendingApprovals)+") ",1)]),_:1})]),e("div",U,[e("div",E,[e("div",H,[e("div",P,[o(l(d),{icon:"fluent:arrow-download-24-regular",class:"w-6 h-6 text-green-600"})]),e("div",null,[t[3]||(t[3]=e("p",{class:"text-sm text-gray-500"},"เติมเงินทั้งหมด",-1)),e("p",Q,"฿"+r(g.value.totalDeposits.toLocaleString()),1)])])]),e("div",R,[e("div",G,[e("div",J,[o(l(d),{icon:"fluent:arrow-upload-24-regular",class:"w-6 h-6 text-red-600"})]),e("div",null,[t[4]||(t[4]=e("p",{class:"text-sm text-gray-500"},"ถอนเงินทั้งหมด",-1)),e("p",K,"฿"+r(g.value.totalWithdrawals.toLocaleString()),1)])])]),e("div",O,[e("div",X,[e("div",Y,[o(l(d),{icon:"fluent:clock-24-regular",class:"w-6 h-6 text-yellow-600"})]),e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm text-gray-500"},"รอการอนุมัติ",-1)),e("p",Z,r(g.value.pendingApprovals),1)])])]),e("div",ee,[e("div",te,[e("div",ae,[o(l(d),{icon:"fluent:wallet-24-regular",class:"w-6 h-6 text-blue-600"})]),e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm text-gray-500"},"Wallet ที่ใช้งาน",-1)),e("p",se,r(g.value.activeWallets.toLocaleString()),1)])])])]),e("div",re,[e("div",oe,[e("div",le,[o(l(d),{icon:"fluent:search-24-regular",class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>b.value=a),type:"text",placeholder:"ค้นหาผู้ใช้หรือรหัสธุรกรรม...",class:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[z,b.value]])]),m(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>h.value=a),class:"px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"},[(c(),i(f,null,_(B,a=>e("option",{key:a.value,value:a.value},r(a.label),9,de)),64))],512),[[F,h.value]])])]),e("div",ne,[p.value?(c(),i("div",ie,[o(l(d),{icon:"fluent:spinner-ios-20-regular",class:"w-8 h-8 text-indigo-600 animate-spin mx-auto"}),t[7]||(t[7]=e("p",{class:"text-gray-500 mt-2"},"กำลังโหลดข้อมูล...",-1))])):(c(),i("div",ce,[e("table",ge,[t[8]||(t[8]=e("thead",{class:"bg-gray-50 dark:bg-gray-700/50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase"},"รหัส"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase"},"ผู้ใช้"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase"},"ประเภท"),e("th",{class:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase"},"จำนวน"),e("th",{class:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase"},"สถานะ"),e("th",{class:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase"},"วันที่"),e("th",{class:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase"},"จัดการ")])],-1)),e("tbody",ue,[(c(!0),i(f,null,_(u.value,a=>(c(),i("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/30"},[e("td",pe,"#"+r(a.id),1),e("td",xe,[e("div",ye,[e("span",be,r(typeof a.user=="object"?a.user.name:a.user),1),typeof a.user=="object"&&a.user.email?(c(),i("span",he,r(a.user.email),1)):M("",!0)])]),e("td",me,[e("span",{class:x([W(a.type),"px-2.5 py-1 rounded-full text-xs font-medium"])},r(L(a.type)),3)]),e("td",{class:x(["px-6 py-4 text-right font-medium",a.type==="withdrawal"?"text-red-600":"text-green-600"])},r(a.type==="withdrawal"?"-":"+")+"฿"+r(a.amount.toLocaleString()),3),e("td",fe,[e("span",{class:x([T(a.status),"px-2.5 py-1 rounded-full text-xs font-medium"])},r(a.status==="completed"?"สำเร็จ":a.status==="pending"?"รอดำเนินการ":"ล้มเหลว"),3)]),e("td",_e,r(a.date),1),e("td",ve,[e("button",we,[o(l(d),{icon:"fluent:eye-24-regular",class:"w-5 h-5"})])])]))),128))])])]))])])}}});export{Le as default};
