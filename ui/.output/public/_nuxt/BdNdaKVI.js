import{q as G,n as u,a6 as I,c as n,o as s,a as e,j as p,b as m,u as o,I as c,a7 as T,T as f,d as h,t as l,F as V,k as F,g as $,p as N}from"./CHs-R6Sv.js";import{S as O}from"./BQxta0Da.js";import{u as P}from"./CWbKy_m_.js";const U={key:0,class:"absolute top-3 right-3 flex items-center gap-1 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-full px-2 py-1 shadow-lg"},q={key:1,class:"absolute top-3 right-3 w-10 h-10 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-full flex items-center justify-center shadow-lg"},J={class:"relative px-5 pb-5"},R={class:"flex justify-center -mt-12 mb-3"},D={class:"relative"},E={class:"relative w-24 h-24 rounded-2xl border-4 border-white dark:border-gray-800 bg-white dark:bg-gray-700 overflow-hidden shadow-xl"},K=["src","alt"],L={class:"text-3xl font-bold text-white"},H={class:"text-center text-xl font-bold text-gray-900 dark:text-white mb-1 line-clamp-1 group-hover/card:text-purple-600 dark:group-hover/card:text-purple-400 transition-colors"},Q={key:0,class:"text-center text-sm text-gray-500 dark:text-gray-400 mb-4 line-clamp-2 uppercase tracking-wide font-medium"},W={key:1,class:"mb-4"},X={class:"flex items-center justify-center gap-6 mb-5"},Y={class:"text-center"},Z={class:"text-2xl font-black text-gray-900 dark:text-white"},ee={class:"text-center"},te={class:"text-2xl font-black text-gray-900 dark:text-white"},re={class:"text-center"},oe={class:"text-2xl font-black text-gray-900 dark:text-white"},se={key:2,class:"flex items-center justify-center mb-5"},ne={class:"flex -space-x-2"},ie=["title"],ae=["src","alt"],le={key:0,class:"relative w-10 h-10 rounded-full border-2 border-white dark:border-gray-800 bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-md"},de={class:"text-xs font-bold text-white"},ue=["disabled"],ce={key:4,class:"w-full py-3 bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-bold rounded-xl shadow-lg flex items-center justify-center gap-2"},pe=G({__name:"GroupCard",props:{group:{},isCourseAdmin:{type:Boolean,default:!1},courseId:{},loading:{type:Boolean,default:!1}},emits:["edit","delete","click","join"],setup(r,{emit:A}){const i=r,g=A,v=N(),x=["from-cyan-400 to-blue-500","from-purple-400 to-pink-500","from-green-400 to-teal-500","from-orange-400 to-red-500","from-indigo-400 to-purple-500","from-yellow-400 to-orange-500"],y=u(()=>{const a=i.group.id%x.length;return x[a]}),k=u(()=>i.group.cover?`${v.public.apiBase}/storage/images/courses/groups/covers/${i.group.cover}`:null),w=u(()=>i.group.image_url?`${v.public.apiBase}/storage/images/courses/groups/${i.group.image_url}`:null),C=u(()=>!i.group.members||i.group.members.length===0?[]:i.group.members.slice(0,5).map(a=>{const t=a.user||a.member;return{name:t?.name||"User",avatar:t?.avatar||"/images/default-avatar.png"}})),j=u(()=>{const a=(i.group.members_count||0)-5;return a>0?a:0}),B=u(()=>!!i.group.groupMemberOfAuth),S=P(),{member:M}=I(S),b=u(()=>M.value?.group_id&&M.value.group_id!=i.group.id),_=async()=>{b.value&&!(await O.fire({icon:"warning",title:"ยืนยันการย้ายกลุ่ม",text:"คุณเป็นสมาชิกกลุ่มอื่นอยู่แล้ว การเข้าร่วมกลุ่มใหม่จะเป็นการออกจากกลุ่มเดิมโดยอัตโนมัติ คุณต้องการดำเนินการต่อหรือไม่?",showCancelButton:!0,confirmButtonText:"ใช่, ย้ายกลุ่ม",cancelButtonText:"ยกเลิก",confirmButtonColor:"#f59e0b",cancelButtonColor:"#6b7280"})).isConfirmed||g("join",i.group.id)};return(a,t)=>(s(),n("div",{class:"group/card relative bg-white dark:bg-gray-800 rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-100 dark:border-gray-700 hover:scale-[1.02] cursor-pointer",onClick:t[3]||(t[3]=d=>g("click",r.group))},[e("div",{class:f(["relative h-32 bg-gradient-to-br flex items-center justify-center",o(y)]),style:T(o(k)?{backgroundImage:`url(${o(k)})`,backgroundSize:"cover",backgroundPosition:"center"}:{})},[t[4]||(t[4]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"},null,-1)),r.isCourseAdmin?(s(),n("div",U,[e("button",{onClick:t[0]||(t[0]=p(d=>g("edit",r.group),["stop"])),class:"p-1.5 text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-full transition-colors",title:"แก้ไข"},[m(o(c),{icon:"fluent:edit-24-filled",class:"w-4 h-4"})]),e("button",{onClick:t[1]||(t[1]=p(d=>g("delete",r.group.id),["stop"])),class:"p-1.5 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-full transition-colors",title:"ลบ"},[m(o(c),{icon:"fluent:delete-24-filled",class:"w-4 h-4"})])])):(s(),n("div",q,[m(o(c),{icon:"heroicons:user-group-solid",class:"w-5 h-5 text-purple-600"})]))],6),e("div",J,[e("div",R,[e("div",D,[t[5]||(t[5]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 rounded-2xl blur-lg opacity-50 group-hover/card:opacity-70 transition-opacity"},null,-1)),e("div",E,[o(w)?(s(),n("img",{key:0,src:o(w),alt:r.group.name,class:"w-full h-full object-cover"},null,8,K)):(s(),n("div",{key:1,class:f(`w-full h-full flex items-center justify-center bg-gradient-to-br ${o(y)}`)},[e("span",L,l(r.group.name?.charAt(0)||"G"),1)],2))])])]),e("h3",H,l(r.group.name),1),r.group.description?(s(),n("p",Q,l(r.group.description),1)):(s(),n("div",W)),e("div",X,[e("div",Y,[e("div",Z,l(r.group.members_count||0),1),t[6]||(t[6]=e("div",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Members ",-1))]),e("div",ee,[e("div",te,l(r.group.posts_count||0),1),t[7]||(t[7]=e("div",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Posts ",-1))]),e("div",re,[e("div",oe,l(r.group.visits_count&&r.group.visits_count>=1e3?(r.group.visits_count/1e3).toFixed(1)+"K":r.group.visits_count||0),1),t[8]||(t[8]=e("div",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Visits ",-1))])]),o(C).length>0?(s(),n("div",se,[e("div",ne,[(s(!0),n(V,null,F(o(C),(d,z)=>(s(),n("div",{key:z,class:"relative w-10 h-10 rounded-full border-2 border-white dark:border-gray-800 overflow-hidden shadow-md hover:scale-110 hover:z-10 transition-transform",title:d.name},[e("img",{src:d.avatar,alt:d.name,class:"w-full h-full object-cover"},null,8,ae)],8,ie))),128)),o(j)>0?(s(),n("div",le,[e("span",de,"+"+l(o(j)),1)])):h("",!0)])])):h("",!0),!o(B)&&!r.isCourseAdmin?(s(),n("button",{key:3,onClick:p(_,["stop"]),disabled:r.loading,class:f(["w-full py-3 bg-gradient-to-r text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center gap-2 group/btn disabled:opacity-70 disabled:cursor-not-allowed",o(b)?"from-amber-500 via-orange-600 to-red-600 hover:from-amber-600 hover:via-orange-700 hover:to-red-700":"from-purple-500 via-blue-500 to-purple-600 hover:from-purple-600 hover:via-blue-600 hover:to-purple-700"])},[r.loading?(s(),$(o(c),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5 animate-spin"})):(s(),$(o(c),{key:1,icon:o(b)?"heroicons:arrow-path-rounded-square":"heroicons:user-plus-solid",class:"w-5 h-5 group-hover/btn:scale-110 transition-transform"},null,8,["icon"])),e("span",null,l(r.loading?"Processing...":o(b)?"Move Group":"Join Group!"),1)],10,ue)):o(B)?(s(),n("div",ce,[m(o(c),{icon:"heroicons:check-circle-solid",class:"w-5 h-5"}),t[9]||(t[9]=e("span",null,"Member",-1))])):r.isCourseAdmin?(s(),n("button",{key:5,onClick:t[2]||(t[2]=p(d=>g("click",r.group),["stop"])),class:"w-full py-3 bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center gap-2"},[m(o(c),{icon:"heroicons:cog-6-tooth-solid",class:"w-5 h-5"}),t[10]||(t[10]=e("span",null,"Manage",-1))])):h("",!0)])]))}});export{pe as _};
