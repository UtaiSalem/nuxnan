import{q as M,a9 as U,r as u,n as g,z as P,c as r,o as i,a as s,d as k,$ as x,ab as L,h as R,t as p,F as q,k as z,g as N,_ as S,T,j as A,aa as I,b as j}from"./CHs-R6Sv.js";import{C as E}from"./Bx38AaM3.js";import{u as Q}from"./C6kxWCFL.js";const G={class:"coupon-list"},H={class:"filters"},J={key:0,class:"stats-bar"},K={class:"stat-item"},O={class:"stat-value"},W={class:"stat-item"},X={class:"stat-value"},Y={class:"stat-item"},Z={class:"stat-value"},h={class:"stat-item"},ss={class:"stat-value"},es={class:"stat-item"},ts={class:"stat-value"},as={key:1,class:"coupons-grid"},os={key:2,class:"empty-state"},ls={class:"empty-message"},ns={key:3,class:"loading-state"},is=M({__name:"CouponList",setup(D){const d=U(),y=u([]),v=u(null),t=u(!1),a=u("all"),n=u("all"),b=g(()=>{let o=[...y.value];return a.value!=="all"&&(o=o.filter(e=>e.coupon_type===a.value)),n.value!=="all"&&(o=o.filter(e=>e.status===n.value)),o}),c=g(()=>a.value!=="all"||n.value!=="all"),C=g(()=>c.value?"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á ‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á":"‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!");P(()=>{f()});async function f(){t.value=!0;try{const[o,e]=await Promise.all([d.get("/api/coupons"),d.get("/api/coupons/statistics")]);o.success&&(y.value=o.data.coupons),e.success&&(v.value=e.data)}catch(o){console.error("Failed to load coupons:",o)}finally{t.value=!1}}function w(){a.value="all",n.value="all"}function V(o){const e=y.value.findIndex(m=>m.id===o.id);e!==-1&&(y.value[e]={...o,status:"cancelled"}),B()}function F(o){console.log("Coupon printed:",o.coupon_code)}async function B(){try{const o=await d.get("/api/coupons/statistics");o.success&&(v.value=o.data)}catch(o){console.error("Failed to load statistics:",o)}}return(o,e)=>(i(),r("div",G,[s("div",H,[x(s("select",{"onUpdate:modelValue":e[0]||(e[0]=m=>a.value=m),class:"filter-select"},[...e[2]||(e[2]=[s("option",{value:"all"},"‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó",-1),s("option",{value:"points"},"‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡πÅ‡∏ï‡πâ‡∏°",-1),s("option",{value:"wallet"},"‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô",-1)])],512),[[L,a.value]]),x(s("select",{"onUpdate:modelValue":e[1]||(e[1]=m=>n.value=m),class:"filter-select"},[...e[3]||(e[3]=[R('<option value="all" data-v-a53ae1c2>‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</option><option value="active" data-v-a53ae1c2>‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ</option><option value="redeemed" data-v-a53ae1c2>‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß</option><option value="expired" data-v-a53ae1c2>‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏</option><option value="cancelled" data-v-a53ae1c2>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</option>',5)])],512),[[L,n.value]])]),v.value?(i(),r("div",J,[s("div",K,[s("span",O,p(v.value.total_coupons),1),e[4]||(e[4]=s("span",{class:"stat-label"},"‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",-1))]),s("div",W,[s("span",X,p(v.value.active_coupons),1),e[5]||(e[5]=s("span",{class:"stat-label"},"‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ",-1))]),s("div",Y,[s("span",Z,p(v.value.redeemed_coupons),1),e[6]||(e[6]=s("span",{class:"stat-label"},"‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß",-1))]),s("div",h,[s("span",ss,p(v.value.total_points_in_coupons),1),e[7]||(e[7]=s("span",{class:"stat-label"},"‡πÅ‡∏ï‡πâ‡∏°‡πÉ‡∏ô‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á",-1))]),s("div",es,[s("span",ts,p(v.value.total_wallet_in_coupons.toFixed(2)),1),e[8]||(e[8]=s("span",{class:"stat-label"},"‡∏ö‡∏≤‡∏ó‡πÉ‡∏ô‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á",-1))])])):k("",!0),b.value.length>0?(i(),r("div",as,[(i(!0),r(q,null,z(b.value,m=>(i(),N(E,{key:m.id,coupon:m,onCancelled:V,onPrinted:F},null,8,["coupon"]))),128))])):(i(),r("div",os,[e[9]||(e[9]=s("div",{class:"empty-icon"},"üéü",-1)),e[10]||(e[10]=s("h3",{class:"empty-title"},"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á",-1)),s("p",ls,p(C.value),1),c.value?(i(),r("button",{key:0,onClick:w,class:"reset-btn"}," ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á ")):k("",!0)])),t.value?(i(),r("div",ns,[...e[11]||(e[11]=[s("div",{class:"spinner"},null,-1),s("p",null,"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...",-1)])])):k("",!0)]))}}),us=S(is,[["__scopeId","data-v-a53ae1c2"]]),ds={class:"coupon-creation-form"},rs={class:"coupon-type-selector"},ps={class:"form-group"},vs={for:"amount"},cs=["min","step"],ms={class:"unit"},fs={class:"form-group"},_s={class:"form-group"},ys={class:"balance-info"},bs={class:"balance-card"},Cs={class:"label"},$s={class:"value"},gs={class:"info-card"},ks={class:"info-text"},xs=["disabled"],ws={key:0,class:"spinner"},Vs={key:1},Fs={key:0,class:"error-message"},Bs=M({__name:"CouponCreationForm",emits:["created","cancel"],setup(D,{emit:d}){const y=d,v=U(),t=Q(),a=u("points"),n=u(0),b=u(""),c=u(null),C=u(!1),f=u(""),w=u(5e3),V=u(100.5),F=g(()=>a.value==="points"?1:10),B=g(()=>a.value==="points"?w.value:V.value),o=g(()=>n.value>=F.value&&n.value<=B.value&&(!c.value||c.value>=1&&c.value<=365));function e(_){a.value=_,n.value=0,f.value=""}async function m(){if(!(!o.value||C.value)){C.value=!0,f.value="";try{const _=await v.post("/api/coupons",{type:a.value,amount:n.value,description:b.value||void 0,expires_in_days:c.value||void 0});_.success?(t.success("‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!"),a.value==="points"?w.value-=n.value:V.value-=n.value,y("created",_.data.coupon),n.value=0,b.value="",c.value=null):(f.value=_.message||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡πÑ‡∏î‡πâ",t.error(_.message||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡πÑ‡∏î‡πâ"))}catch(_){f.value=_.message||"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà",t.error(f.value)}finally{C.value=!1}}}return(_,l)=>(i(),r("div",ds,[l[10]||(l[10]=s("h2",{class:"form-title"},"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á",-1)),s("div",rs,[s("button",{onClick:l[0]||(l[0]=$=>e("points")),class:T([{active:a.value==="points"},"type-btn"])},[...l[5]||(l[5]=[s("span",{class:"icon"},"üéØ",-1),s("span",null,"‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡πÅ‡∏ï‡πâ‡∏°",-1)])],2),s("button",{onClick:l[1]||(l[1]=$=>e("wallet")),class:T([{active:a.value==="wallet"},"type-btn"])},[...l[6]||(l[6]=[s("span",{class:"icon"},"üí∞",-1),s("span",null,"‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô",-1)])],2)]),s("form",{onSubmit:A(m,["prevent"]),class:"coupon-form"},[s("div",ps,[s("label",vs,p(a.value==="points"?"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏ï‡πâ‡∏°":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó)"),1),x(s("input",{"onUpdate:modelValue":l[2]||(l[2]=$=>n.value=$),type:"number",id:"amount",min:F.value,step:a.value==="wallet"?"0.01":"1",required:"",class:"form-input"},null,8,cs),[[I,n.value,void 0,{number:!0}]]),s("span",ms,p(a.value==="points"?"‡πÅ‡∏ï‡πâ‡∏°":"‡∏ö‡∏≤‡∏ó"),1)]),s("div",fs,[l[7]||(l[7]=s("label",{for:"expiresInDays"},"‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ (‡∏ß‡∏±‡∏ô) - ‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö",-1)),x(s("input",{"onUpdate:modelValue":l[3]||(l[3]=$=>c.value=$),type:"number",id:"expiresInDays",min:"1",max:"365",class:"form-input",placeholder:"‡πÄ‡∏ä‡πà‡∏ô 30, 60, 90"},null,512),[[I,c.value,void 0,{number:!0}]])]),s("div",_s,[l[8]||(l[8]=s("label",{for:"description"},"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)",-1)),x(s("textarea",{"onUpdate:modelValue":l[4]||(l[4]=$=>b.value=$),id:"description",rows:"3",class:"form-textarea",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏ô‡∏µ‡πâ..."},null,512),[[I,b.value]])]),s("div",ys,[s("div",bs,[s("span",Cs,"‡∏¢‡∏≠‡∏î"+p(a.value==="points"?"‡πÅ‡∏ï‡πâ‡∏°":"‡πÄ‡∏á‡∏¥‡∏ô")+"‡∏ó‡∏µ‡πà‡∏°‡∏µ:",1),s("span",$s,p(B.value)+" "+p(a.value==="points"?"‡πÅ‡∏ï‡πâ‡∏°":"‡∏ö‡∏≤‡∏ó"),1)]),s("div",gs,[l[9]||(l[9]=s("span",{class:"info-icon"},"‚ÑπÔ∏è",-1)),s("span",ks," ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏´‡∏±‡∏Å‡∏à‡∏≤‡∏Å"+p(a.value==="points"?"‡πÅ‡∏ï‡πâ‡∏°":"‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô")+"‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô‡∏ú‡πà‡∏≤‡∏ô QR Code ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á ",1)])]),s("button",{type:"submit",disabled:!o.value||C.value,class:"submit-btn"},[C.value?(i(),r("span",ws)):(i(),r("span",Vs,"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á"))],8,xs)],32),f.value?(i(),r("div",Fs,p(f.value),1)):k("",!0)]))}}),Is=S(Bs,[["__scopeId","data-v-d28fee15"]]),Ms={class:"coupons-page"},Ss={class:"page-header"},Ds={class:"modal-header"},Ls=M({__name:"index",setup(D){const d=u(!1);function y(v){d.value=!1,location.reload()}return(v,t)=>(i(),r("div",Ms,[s("div",Ss,[t[6]||(t[6]=s("h1",{class:"page-title"},"‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô",-1)),s("button",{onClick:t[0]||(t[0]=a=>d.value=!0),class:"create-btn"},[...t[5]||(t[5]=[s("span",{class:"btn-icon"},"‚ûï",-1),s("span",null,"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á",-1)])])]),d.value?k("",!0):(i(),N(us,{key:0})),d.value?(i(),r("div",{key:1,class:"modal-overlay",onClick:t[4]||(t[4]=a=>d.value=!1)},[s("div",{class:"modal-content",onClick:t[3]||(t[3]=A(()=>{},["stop"]))},[s("div",Ds,[t[7]||(t[7]=s("h2",null,"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà",-1)),s("button",{onClick:t[1]||(t[1]=a=>d.value=!1),class:"close-btn"}," ‚úï ")]),j(Is,{onCreated:y,onCancel:t[2]||(t[2]=a=>d.value=!1)})])])):k("",!0)]))}}),As=S(Ls,[["__scopeId","data-v-b881f4f4"]]);export{As as default};
