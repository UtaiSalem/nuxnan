import{_ as B}from"./ChBnuzYQ.js";import{q as I,a9 as T,a6 as F,l as J,r as l,n as O,z as j,c as i,a as r,e as p,b as o,u as n,$ as z,aa as R,T as x,F as C,k as N,t as c,o as s,I as g,h as U,g as q,w as D,a7 as E,d as Q,p as W}from"./cTealXVQ.js";const G={class:"min-h-screen bg-gray-200 dark:bg-vikinger-dark-300"},H={class:"max-w-7xl mx-auto px-4 py-6"},K={class:"bg-white dark:bg-vikinger-dark-200 rounded-xl shadow-sm p-6 mb-6"},P={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},X={class:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-3"},Y={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-vikinger-purple to-vikinger-cyan flex items-center justify-center"},Z={class:"relative w-full md:w-80"},ee={class:"flex gap-2 mt-6"},te={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},re={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ae={class:"p-5 -mt-8 relative"},se={class:"w-14 h-14 rounded-xl border-2 border-white dark:border-vikinger-dark-200 shadow-lg overflow-hidden bg-white mb-3"},le=["src","alt"],ie={class:"font-bold text-gray-900 dark:text-white group-hover:text-vikinger-purple transition-colors line-clamp-1 mb-1"},oe={key:0,class:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-3"},ne={class:"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400"},ge={class:"flex items-center gap-1"},de={key:2,class:"bg-white dark:bg-vikinger-dark-200 rounded-xl p-12 text-center"},ce={class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},ue={class:"text-gray-600 dark:text-gray-400"},ve=I({__name:"index",setup(pe){const h=T(),A=W(),{user:b}=F(J()),y=l([]),k=l([]),f=l(!0),m=l(""),d=l("all"),L=l(1),S=l(!1),w=O(()=>{const e=d.value==="all"?y.value:k.value;if(!m.value.trim())return e;const t=m.value.toLowerCase();return e.filter(u=>u.name?.toLowerCase().includes(t)||u.slogan?.toLowerCase().includes(t)||u.address?.toLowerCase().includes(t))}),V=async()=>{if(b.value){f.value=!0;try{const e=await h.get("/api/academies/all-academies",{params:{per_page:20,page:L.value}});if(e.success){const t=e.academies?.data||e.academies||[];y.value=JSON.parse(JSON.stringify(t)),e.academies?.current_page&&e.academies?.last_page&&(S.value=e.academies.current_page<e.academies.last_page)}}catch(e){console.error("Failed to fetch academies:",e)}finally{f.value=!1}}},$=async()=>{if(b.value)try{const e=await h.get(`/api/academies/users/${b.value.id}/membered-academies`,{params:{per_page:20}});if(e.success){const t=e.academies?.data||e.academies||[];k.value=JSON.parse(JSON.stringify(t))}}catch(e){console.error("Failed to fetch my academies:",e)}},M=e=>e.logo?(e.logo.startsWith("http"),e.logo):`${A.public.apiBase}/storage/images/academies/logos/default_logo.png`,v=e=>({public:{label:"รัฐบาล",icon:"fluent:building-government-24-regular",color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/30"},private:{label:"เอกชน",icon:"fluent:building-bank-24-regular",color:"text-purple-600",bg:"bg-purple-100 dark:bg-purple-900/30"},foundation:{label:"มูลนิธิ",icon:"fluent:heart-24-regular",color:"text-pink-600",bg:"bg-pink-100 dark:bg-pink-900/30"},international:{label:"นานาชาติ",icon:"fluent:globe-24-regular",color:"text-green-600",bg:"bg-green-100 dark:bg-green-900/30"}})[e||""]||{label:"ทั่วไป",icon:"fluent:building-24-regular",color:"text-gray-600",bg:"bg-gray-100 dark:bg-gray-700"},_=e=>{d.value=e,e==="my"&&k.value.length===0&&$()};return j(()=>{b.value&&V()}),(e,t)=>{const u=B;return s(),i("div",G,[r("div",H,[r("div",K,[r("div",P,[r("div",null,[r("h1",X,[r("div",Y,[o(n(g),{icon:"fluent:building-multiple-24-regular",class:"w-5 h-5 text-white"})]),t[3]||(t[3]=p(" โรงเรียนทั้งหมด ",-1))]),t[4]||(t[4]=r("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"ค้นหาและเข้าร่วมโรงเรียนที่คุณสนใจ",-1))]),r("div",Z,[o(n(g),{icon:"fluent:search-24-regular",class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),z(r("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>m.value=a),type:"text",placeholder:"ค้นหาโรงเรียน...",class:"w-full pl-10 pr-4 py-2.5 bg-gray-100 dark:bg-vikinger-dark-100 border-0 rounded-lg focus:ring-2 focus:ring-vikinger-purple text-gray-900 dark:text-white"},null,512),[[R,m.value]])])]),r("div",ee,[r("button",{onClick:t[1]||(t[1]=a=>_("all")),class:x(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",d.value==="all"?"bg-vikinger-purple text-white":"bg-gray-100 dark:bg-vikinger-dark-100 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-vikinger-dark-300"])},[o(n(g),{icon:"fluent:building-multiple-24-regular",class:"w-4 h-4 inline mr-1.5"}),t[5]||(t[5]=p(" โรงเรียนทั้งหมด ",-1))],2),r("button",{onClick:t[2]||(t[2]=a=>_("my")),class:x(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",d.value==="my"?"bg-vikinger-purple text-white":"bg-gray-100 dark:bg-vikinger-dark-100 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-vikinger-dark-300"])},[o(n(g),{icon:"fluent:building-24-regular",class:"w-4 h-4 inline mr-1.5"}),t[6]||(t[6]=p(" โรงเรียนที่สังกัด ",-1))],2)])]),f.value?(s(),i("div",te,[(s(),i(C,null,N(6,a=>r("div",{key:a,class:"bg-white dark:bg-vikinger-dark-200 rounded-xl p-5 animate-pulse"},[...t[7]||(t[7]=[U('<div class="flex items-start gap-4"><div class="w-16 h-16 rounded-xl bg-gray-200 dark:bg-gray-700"></div><div class="flex-1 space-y-3"><div class="h-5 bg-gray-200 dark:bg-gray-700 rounded w-3/4"></div><div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"></div></div></div>',1)])])),64))])):w.value.length>0?(s(),i("div",re,[(s(!0),i(C,null,N(w.value,a=>(s(),q(u,{key:a.id,to:`/academies/${encodeURIComponent(a.name)}`,class:"bg-white dark:bg-vikinger-dark-200 rounded-xl shadow-sm hover:shadow-lg transition-all group overflow-hidden"},{default:D(()=>[r("div",{class:"h-24 bg-gray-200 dark:bg-gray-700 bg-cover bg-center",style:E({backgroundImage:a.cover?`url(${a.cover})`:"none"})},[...t[8]||(t[8]=[r("div",{class:"w-full h-full bg-gradient-to-br from-vikinger-purple/30 to-vikinger-cyan/30"},null,-1)])],4),r("div",ae,[r("div",se,[r("img",{src:M(a),alt:a.name,class:"w-full h-full object-cover"},null,8,le)]),r("h3",ie,c(a.name),1),a.slogan?(s(),i("p",oe,c(a.slogan),1)):Q("",!0),r("div",ne,[r("span",{class:x(["inline-flex items-center gap-1 px-2 py-1 rounded-full",v(a.type).bg,v(a.type).color])},[o(n(g),{icon:v(a.type).icon,class:"w-3.5 h-3.5"},null,8,["icon"]),p(" "+c(v(a.type).label),1)],2),r("span",ge,[o(n(g),{icon:"fluent:people-24-regular",class:"w-3.5 h-3.5"}),p(" "+c(a.total_students||0),1)])])])]),_:2},1032,["to"]))),128))])):(s(),i("div",de,[o(n(g),{icon:"fluent:building-multiple-24-regular",class:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),r("h3",ce,c(d.value==="my"?"ยังไม่ได้สังกัดโรงเรียน":"ไม่พบโรงเรียน"),1),r("p",ue,c(d.value==="my"?"เข้าร่วมโรงเรียนเพื่อเริ่มต้นการเรียนรู้":"ลองค้นหาด้วยคำค้นอื่น"),1)]))])])}}});export{ve as default};
