import{z as W,N as V,c as f,o as d,a as e,d as q,q as j,u as t,$ as Z,A as ee,r as g,f as te,b as o,j as y,e as m,t as v,F as C,w as D,n as M,I as l,l as n,y as u,p as re,v as U,aE as se}from"./DuB962GZ.js";import{_ as F}from"./NJPlgGdb.js";import{u as ae}from"./BzDSISzB.js";import{u as ie}from"./BvUhKmsv.js";const le={class:"relative inline-block"},ne=["src","alt"],oe=W({__name:"BaseAvatar",props:{src:{type:String,default:""},alt:{type:String,default:"User Avatar"},size:{type:String,default:"md",validator:b=>["sm","md","lg","xl"].includes(b)},status:{type:String,default:null,validator:b=>[null,"online","offline","busy"].includes(b)}},setup(b){const x=b,z=V(()=>({sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12",xl:"w-16 h-16"})[x.size]),S=V(()=>{const w={online:"bg-green-500",offline:"bg-gray-400",busy:"bg-red-500"};return x.status?w[x.status]:""});return(w,E)=>(d(),f("div",le,[e("img",{src:b.src||"/images/default-avatar.png",alt:b.alt,class:j(["rounded-full object-cover border-2 border-white dark:border-gray-800",t(z)])},null,10,ne),b.status?(d(),f("span",{key:0,class:j(["absolute bottom-0 right-0 block w-3 h-3 rounded-full ring-2 ring-white dark:ring-gray-800",t(S)])},null,2)):q("",!0)]))}}),de={class:"flex items-center justify-between mb-6"},ue={class:"flex items-center gap-4"},ce=["disabled"],ge={key:0,class:"flex items-center justify-center min-h-[400px]"},pe={class:"h-48 md:h-64 w-full bg-gradient-to-r from-vikinger-purple to-blue-500 relative group"},be=["src"],fe={class:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"},ke=["disabled"],ye={class:"px-6 pb-6"},me={class:"relative -mt-16 md:-mt-20 inline-block"},ve={class:"relative group"},xe={class:"flex gap-2 mb-6 overflow-x-auto pb-2"},he=["onClick"],we={class:"space-y-6"},_e={class:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2"},Ce={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ue=["value"],Ve={class:"space-y-6"},je={class:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2"},ze={class:"space-y-6"},Se={class:"mt-1 text-sm text-gray-500"},Ae={class:"space-y-6"},$e={class:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2"},Be={class:"space-y-4"},Pe={class:"flex items-center gap-4"},Le={class:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center flex-shrink-0"},Me={class:"flex items-center gap-4"},Ee={class:"w-12 h-12 rounded-full bg-sky-500 flex items-center justify-center flex-shrink-0"},Ie={class:"flex items-center gap-4"},Oe={class:"w-12 h-12 rounded-full bg-gradient-to-tr from-yellow-400 via-red-500 to-purple-500 flex items-center justify-center flex-shrink-0"},Re={class:"flex items-center gap-4"},Ne={class:"w-12 h-12 rounded-full bg-red-600 flex items-center justify-center flex-shrink-0"},Te={class:"flex items-center gap-4"},De={class:"w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center flex-shrink-0"},Fe={class:"flex items-center gap-4"},We={class:"w-12 h-12 rounded-full bg-black flex items-center justify-center flex-shrink-0"},qe={class:"space-y-6"},He={class:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2"},Ge={class:"space-y-4"},Je={class:"space-y-3"},Ke=["value"],Qe={class:"flex-1"},Xe={class:"flex items-center gap-2"},Ye={class:"font-medium text-gray-900 dark:text-white"},Ze={class:"text-sm text-gray-500 mt-1"},et={class:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700 md:hidden"},tt=["disabled"],lt=W({__name:"edit",setup(b){Z({title:"Edit Profile"});const x=ee(),{fetchMyProfile:z,updateProfile:S,updateAvatar:w,updateCover:E}=ae(),c=ie(),A=g(null),$=g(!0),k=g(!1),h=g("basic"),a=g({first_name:"",last_name:"",bio:"",birthdate:"",gender:"",location:"",website:"",interests:"",social_media_links:{facebook:"",twitter:"",instagram:"",linkedin:"",youtube:"",tiktok:""},privacy_settings:"public"}),I=g(null),O=g(null),B=g(null),P=g(null),L=g(!1),_=g(!1),H=[{value:"",label:"เลือกเพศ"},{value:"male",label:"ชาย"},{value:"female",label:"หญิง"},{value:"other",label:"อื่นๆ"},{value:"prefer_not_to_say",label:"ไม่ระบุ"}],G=[{value:"public",label:"สาธารณะ",description:"ทุกคนสามารถดูโปรไฟล์ได้",icon:"fluent:globe-24-regular"},{value:"friends",label:"เพื่อนเท่านั้น",description:"เฉพาะเพื่อนเท่านั้นที่ดูได้",icon:"fluent:people-24-regular"},{value:"private",label:"ส่วนตัว",description:"เฉพาะตัวเองเท่านั้น",icon:"fluent:lock-closed-24-regular"}],J=[{key:"basic",label:"ข้อมูลพื้นฐาน",icon:"fluent:person-24-regular"},{key:"about",label:"เกี่ยวกับ",icon:"fluent:info-24-regular"},{key:"social",label:"โซเชียลมีเดีย",icon:"fluent:share-24-regular"},{key:"privacy",label:"ความเป็นส่วนตัว",icon:"fluent:shield-24-regular"}],K=async()=>{$.value=!0;try{const i=await z();i&&(A.value=i,a.value={first_name:i.first_name||"",last_name:i.last_name||"",bio:i.bio||"",birthdate:i.birthdate||"",gender:i.gender||"",location:i.location||"",website:i.website||"",interests:i.interests||"",social_media_links:{facebook:i.social_media_links?.facebook||"",twitter:i.social_media_links?.twitter||"",instagram:i.social_media_links?.instagram||"",linkedin:i.social_media_links?.linkedin||"",youtube:i.social_media_links?.youtube||"",tiktok:i.social_media_links?.tiktok||""},privacy_settings:i.privacy_settings||"public"})}catch(i){console.error("Error loading profile:",i),c.error("ไม่สามารถโหลดข้อมูลโปรไฟล์ได้")}finally{$.value=!1}},Q=async i=>{const s=i.target.files?.[0];if(s){if(!s.type.startsWith("image/")){c.error("กรุณาเลือกไฟล์รูปภาพ");return}if(s.size>5*1024*1024){c.error("ไฟล์ต้องมีขนาดไม่เกิน 5MB");return}B.value=URL.createObjectURL(s),L.value=!0;try{await w(s)&&c.success("อัพเดทรูปโปรไฟล์สำเร็จ")}catch(p){c.error(p.message||"ไม่สามารถอัพโหลดรูปได้"),B.value=null}finally{L.value=!1}}},X=async i=>{const s=i.target.files?.[0];if(s){if(!s.type.startsWith("image/")){c.error("กรุณาเลือกไฟล์รูปภาพ");return}if(s.size>10*1024*1024){c.error("ไฟล์ต้องมีขนาดไม่เกิน 10MB");return}P.value=URL.createObjectURL(s),_.value=!0;try{await E(s)&&c.success("อัพเดทรูปปกสำเร็จ")}catch(p){c.error(p.message||"ไม่สามารถอัพโหลดรูปได้"),P.value=null}finally{_.value=!1}}},R=async()=>{k.value=!0;try{const i={};Object.entries(a.value.social_media_links||{}).forEach(([p,T])=>{T&&(i[p]=T)});const r={...a.value,social_media_links:Object.keys(i).length>0?i:void 0};await S(r)&&(c.success("อัพเดทโปรไฟล์สำเร็จ"),x.push("/profile/me"))}catch(i){c.error(i.message||"ไม่สามารถบันทึกข้อมูลได้")}finally{k.value=!1}};te(()=>{K()});const Y=V(()=>B.value||A.value?.avatar),N=V(()=>P.value||A.value?.cover_image);return(i,r)=>(d(),f("div",null,[e("div",de,[e("div",ue,[e("button",{onClick:r[0]||(r[0]=s=>t(x).back()),class:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},[o(t(l),{icon:"fluent:arrow-left-24-regular",class:"w-6 h-6"})]),r[18]||(r[18]=e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Edit Profile",-1))]),e("button",{onClick:R,disabled:t(k),class:"px-6 py-2 bg-vikinger-purple text-white rounded-vikinger hover:bg-vikinger-purple/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[t(k)?(d(),y(t(l),{key:0,icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin"})):(d(),y(t(l),{key:1,icon:"fluent:save-24-regular",class:"w-5 h-5"})),m(" "+v(t(k)?"Saving...":"Save Changes"),1)],8,ce)]),t($)?(d(),f("div",ge,[o(t(l),{icon:"fluent:spinner-ios-20-regular",class:"w-12 h-12 animate-spin text-vikinger-purple"})])):(d(),f(C,{key:1},[o(F,{"no-padding":"",class:"mb-6 overflow-hidden"},{default:D(()=>[e("div",pe,[t(N)?(d(),f("img",{key:0,src:t(N),alt:"Cover",class:"w-full h-full object-cover"},null,8,be)):q("",!0),e("div",fe,[e("button",{onClick:r[1]||(r[1]=s=>t(O)?.click()),disabled:t(_),class:"px-6 py-3 bg-white text-gray-900 rounded-vikinger font-medium flex items-center gap-2"},[t(_)?(d(),y(t(l),{key:0,icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin"})):(d(),y(t(l),{key:1,icon:"fluent:camera-24-regular",class:"w-5 h-5"})),m(" "+v(t(_)?"Uploading...":"Change Cover"),1)],8,ke)]),e("input",{ref_key:"coverInput",ref:O,type:"file",accept:"image/*",class:"hidden",onChange:X},null,544)]),e("div",ye,[e("div",me,[e("div",ve,[o(oe,{src:t(Y)||"",size:"xl",class:"w-32 h-32 md:w-40 md:h-40 ring-4 ring-white dark:ring-gray-800 shadow-lg"},null,8,["src"]),e("div",{onClick:r[2]||(r[2]=s=>t(I)?.click()),class:"absolute inset-0 rounded-full bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer"},[t(L)?(d(),y(t(l),{key:0,icon:"fluent:spinner-ios-20-regular",class:"w-8 h-8 text-white animate-spin"})):(d(),y(t(l),{key:1,icon:"fluent:camera-24-filled",class:"w-8 h-8 text-white"}))]),e("input",{ref_key:"avatarInput",ref:I,type:"file",accept:"image/*",class:"hidden",onChange:Q},null,544)])]),r[19]||(r[19]=e("p",{class:"mt-4 text-sm text-gray-500 dark:text-gray-400"}," คลิกที่รูปโปรไฟล์หรือรูปปกเพื่อเปลี่ยน ",-1))])]),_:1}),e("div",xe,[(d(),f(C,null,M(J,s=>e("button",{key:s.key,onClick:p=>h.value=s.key,class:j(["px-4 py-2 rounded-vikinger font-medium text-sm flex items-center gap-2 whitespace-nowrap transition-colors",t(h)===s.key?"bg-vikinger-purple text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"])},[o(t(l),{icon:s.icon,class:"w-5 h-5"},null,8,["icon"]),m(" "+v(s.label),1)],10,he)),64))]),o(F,null,{default:D(()=>[n(e("div",we,[e("h3",_e,[o(t(l),{icon:"fluent:person-24-regular",class:"w-6 h-6 text-vikinger-purple"}),r[20]||(r[20]=m(" ข้อมูลพื้นฐาน ",-1))]),e("div",Ce,[e("div",null,[r[21]||(r[21]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ชื่อจริง ",-1)),n(e("input",{"onUpdate:modelValue":r[3]||(r[3]=s=>t(a).first_name=s),type:"text",placeholder:"ชื่อจริง",class:"w-full px-4 py-3 rounded-vikinger border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-vikinger-purple focus:border-transparent"},null,512),[[u,t(a).first_name]])]),e("div",null,[r[22]||(r[22]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," นามสกุล ",-1)),n(e("input",{"onUpdate:modelValue":r[4]||(r[4]=s=>t(a).last_name=s),type:"text",placeholder:"นามสกุล",class:"w-full px-4 py-3 rounded-vikinger border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-vikinger-purple focus:border-transparent"},null,512),[[u,t(a).last_name]])]),e("div",null,[r[23]||(r[23]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," วันเกิด ",-1)),n(e("input",{"onUpdate:modelValue":r[5]||(r[5]=s=>t(a).birthdate=s),type:"date",class:"w-full px-4 py-3 rounded-vikinger border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-vikinger-purple focus:border-transparent"},null,512),[[u,t(a).birthdate]])]),e("div",null,[r[24]||(r[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," เพศ ",-1)),n(e("select",{"onUpdate:modelValue":r[6]||(r[6]=s=>t(a).gender=s),class:"w-full px-4 py-3 rounded-vikinger border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-vikinger-purple focus:border-transparent"},[(d(),f(C,null,M(H,s=>e("option",{key:s.value,value:s.value},v(s.label),9,Ue)),64))],512),[[re,t(a).gender]])]),e("div",null,[r[25]||(r[25]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ที่อยู่/ตำแหน่ง ",-1)),n(e("input",{"onUpdate:modelValue":r[7]||(r[7]=s=>t(a).location=s),type:"text",placeholder:"เช่น กรุงเทพมหานคร, ประเทศไทย",class:"w-full px-4 py-3 rounded-vikinger border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-vikinger-purple focus:border-transparent"},null,512),[[u,t(a).location]])]),e("div",null,[r[26]||(r[26]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," เว็บไซต์ ",-1)),n(e("input",{"onUpdate:modelValue":r[8]||(r[8]=s=>t(a).website=s),type:"url",placeholder:"https://example.com",class:"w-full px-4 py-3 rounded-vikinger border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-vikinger-purple focus:border-transparent"},null,512),[[u,t(a).website]])])])],512),[[U,t(h)==="basic"]]),n(e("div",Ve,[e("h3",je,[o(t(l),{icon:"fluent:info-24-regular",class:"w-6 h-6 text-vikinger-purple"}),r[27]||(r[27]=m(" เกี่ยวกับคุณ ",-1))]),e("div",ze,[e("div",null,[r[28]||(r[28]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ประวัติย่อ (Bio) ",-1)),n(e("textarea",{"onUpdate:modelValue":r[9]||(r[9]=s=>t(a).bio=s),rows:"4",maxlength:"500",placeholder:"บอกเล่าเกี่ยวกับตัวคุณ...",class:"w-full px-4 py-3 rounded-vikinger border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-vikinger-purple focus:border-transparent resize-none"},null,512),[[u,t(a).bio]]),e("p",Se,v((t(a).bio||"").length)+"/500 ตัวอักษร ",1)]),e("div",null,[r[29]||(r[29]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ความสนใจ ",-1)),n(e("textarea",{"onUpdate:modelValue":r[10]||(r[10]=s=>t(a).interests=s),rows:"3",maxlength:"1000",placeholder:"เช่น การเดินทาง, ถ่ายภาพ, อ่านหนังสือ...",class:"w-full px-4 py-3 rounded-vikinger border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-vikinger-purple focus:border-transparent resize-none"},null,512),[[u,t(a).interests]])])])],512),[[U,t(h)==="about"]]),n(e("div",Ae,[e("h3",$e,[o(t(l),{icon:"fluent:share-24-regular",class:"w-6 h-6 text-vikinger-purple"}),r[30]||(r[30]=m(" โซเชียลมีเดีย ",-1))]),e("div",Be,[e("div",Pe,[e("div",Le,[o(t(l),{icon:"logos:facebook",class:"w-6 h-6"})]),n(e("input",{"onUpdate:modelValue":r[11]||(r[11]=s=>t(a).social_media_links.facebook=s),type:"url",placeholder:"https://facebook.com/username",class:"flex-1 px-4 py-3 rounded-vikinger border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-vikinger-purple focus:border-transparent"},null,512),[[u,t(a).social_media_links.facebook]])]),e("div",Me,[e("div",Ee,[o(t(l),{icon:"logos:twitter",class:"w-6 h-6"})]),n(e("input",{"onUpdate:modelValue":r[12]||(r[12]=s=>t(a).social_media_links.twitter=s),type:"url",placeholder:"https://twitter.com/username",class:"flex-1 px-4 py-3 rounded-vikinger border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-vikinger-purple focus:border-transparent"},null,512),[[u,t(a).social_media_links.twitter]])]),e("div",Ie,[e("div",Oe,[o(t(l),{icon:"mdi:instagram",class:"w-6 h-6 text-white"})]),n(e("input",{"onUpdate:modelValue":r[13]||(r[13]=s=>t(a).social_media_links.instagram=s),type:"url",placeholder:"https://instagram.com/username",class:"flex-1 px-4 py-3 rounded-vikinger border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-vikinger-purple focus:border-transparent"},null,512),[[u,t(a).social_media_links.instagram]])]),e("div",Re,[e("div",Ne,[o(t(l),{icon:"logos:youtube-icon",class:"w-6 h-6"})]),n(e("input",{"onUpdate:modelValue":r[14]||(r[14]=s=>t(a).social_media_links.youtube=s),type:"url",placeholder:"https://youtube.com/@username",class:"flex-1 px-4 py-3 rounded-vikinger border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-vikinger-purple focus:border-transparent"},null,512),[[u,t(a).social_media_links.youtube]])]),e("div",Te,[e("div",De,[o(t(l),{icon:"logos:linkedin-icon",class:"w-6 h-6"})]),n(e("input",{"onUpdate:modelValue":r[15]||(r[15]=s=>t(a).social_media_links.linkedin=s),type:"url",placeholder:"https://linkedin.com/in/username",class:"flex-1 px-4 py-3 rounded-vikinger border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-vikinger-purple focus:border-transparent"},null,512),[[u,t(a).social_media_links.linkedin]])]),e("div",Fe,[e("div",We,[o(t(l),{icon:"logos:tiktok-icon",class:"w-6 h-6"})]),n(e("input",{"onUpdate:modelValue":r[16]||(r[16]=s=>t(a).social_media_links.tiktok=s),type:"url",placeholder:"https://tiktok.com/@username",class:"flex-1 px-4 py-3 rounded-vikinger border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-vikinger-purple focus:border-transparent"},null,512),[[u,t(a).social_media_links.tiktok]])])])],512),[[U,t(h)==="social"]]),n(e("div",qe,[e("h3",He,[o(t(l),{icon:"fluent:shield-24-regular",class:"w-6 h-6 text-vikinger-purple"}),r[31]||(r[31]=m(" ความเป็นส่วนตัว ",-1))]),e("div",Ge,[r[32]||(r[32]=e("p",{class:"text-gray-600 dark:text-gray-400"}," ควบคุมว่าใครสามารถดูโปรไฟล์ของคุณได้ ",-1)),e("div",Je,[(d(),f(C,null,M(G,s=>e("label",{key:s.value,class:j(["flex items-start gap-4 p-4 border rounded-vikinger cursor-pointer transition-colors",[t(a).privacy_settings===s.value?"border-vikinger-purple bg-vikinger-purple/5":"border-gray-200 dark:border-gray-700 hover:border-vikinger-purple/50"]])},[n(e("input",{"onUpdate:modelValue":r[17]||(r[17]=p=>t(a).privacy_settings=p),type:"radio",value:s.value,class:"mt-1 text-vikinger-purple focus:ring-vikinger-purple"},null,8,Ke),[[se,t(a).privacy_settings]]),e("div",Qe,[e("div",Xe,[o(t(l),{icon:s.icon,class:"w-5 h-5 text-vikinger-purple"},null,8,["icon"]),e("span",Ye,v(s.label),1)]),e("p",Ze,v(s.description),1)])],2)),64))])])],512),[[U,t(h)==="privacy"]]),e("div",et,[e("button",{onClick:R,disabled:t(k),class:"w-full py-3 bg-vikinger-purple text-white rounded-vikinger font-medium hover:bg-vikinger-purple/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[t(k)?(d(),y(t(l),{key:0,icon:"fluent:spinner-ios-20-regular",class:"w-5 h-5 animate-spin"})):(d(),y(t(l),{key:1,icon:"fluent:save-24-regular",class:"w-5 h-5"})),m(" "+v(t(k)?"กำลังบันทึก...":"บันทึกการเปลี่ยนแปลง"),1)],8,tt)])]),_:1})],64))]))}});export{lt as default};
