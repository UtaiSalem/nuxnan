import{u as C}from"./Czq9JhUr.js";import{r as t,j as A,w as m,o as S,a as n,b as i}from"./DuB962GZ.js";import{S as c}from"./BQxta0Da.js";import w from"./DlGh3WWW.js";import{_ as I}from"./CeNU_Arc.js";import{_ as $}from"./9FJTssRe.js";import"./fgoR5NrX.js";import"./CZOFP7UD.js";import"./Dz4Xxw99.js";import"./Dn9pp5cj.js";const M={class:""},j={__name:"AcademyMembers",props:{academy:Object,courses:Object,isAcademyAdmin:Boolean,app_url:String},setup(l){const e=l;t(!1);const p=t(e.academy.data.logo?"/storage/images/academies/logos/"+e.academy.data.logo:"/storage/images/academies/logos/default_logo.png"),u=t(e.academy.data.cover?"/storage/images/academies/covers/"+e.academy.data.cover:"/storage/images/academies/covers/default_cover.png"),s=t(e.academy.data.name),r=t(e.academy.data.slogan);C({name:"",slogan:"",address:"",cover:null,logo:null});async function g(o){const a=new FormData;a.append("cover",o),a.append("_method","patch"),await axios.post(`/academies/${e.academy.data.id}/update`,a)}async function y(o){const a=new FormData;a.append("logo",o),a.append("_method","patch"),await axios.post(`/academies/${e.academy.data.id}/update`,a)}async function v(o){await axios.patch(`/academies/${e.academy.data.id}/update`,{name:o})}async function b(o){await axios.patch(`/academies/${e.academy.data.id}/update`,{slogan:o})}async function f(){try{let o=await axios.post(`/academies/${e.academy.data.id}/members`);o.data.success&&(e.academy.data.isMember=o.data.isMember,e.academy.data.total_students=o.data.totalStudents,o.data.isMember?c.fire("เสร็จสิ้น","ขอเป็นสมาชิกเรียบร้อยแล้ว","success"):c.fire("เสร็จสิ้น","ออกจากการเป็นสมาชิกเรียบร้อยแล้ว","success"))}catch{}}return(o,a)=>(S(),A(w,{title:"Academy",appUrl:e.app_url},{coverProfileCard:m(()=>[n("div",M,[i(I,{coverImage:u.value,logoImage:p.value,coverHeader:s.value,"onUpdate:coverHeader":a[0]||(a[0]=d=>s.value=d),coverSubheader:r.value,"onUpdate:coverSubheader":a[1]||(a[1]=d=>r.value=d),model:"Academy",modelTable:"academies",modelableId:e.academy.data.id,modelableType:"app/models/Academy",modelableRoute:`/academies/${e.academy.data.id}`,modelData:e.academy.data,subModelData:e.courses.data,subModelNameTh:"รายวิชา",isAcademyAdmin:e.isAcademyAdmin,onCoverImageChange:a[2]||(a[2]=d=>{g(d)}),onLogoImageChange:a[3]||(a[3]=d=>{y(d)}),onHeaderChange:a[4]||(a[4]=d=>{v(d)}),onSubheaderChange:a[5]||(a[5]=d=>{b(d)}),onRequestTobeMember:a[6]||(a[6]=d=>f())},null,8,["coverImage","logoImage","coverHeader","coverSubheader","modelableId","modelableRoute","modelData","subModelData","isAcademyAdmin"])]),i($,{academy:e.academy,activeTab:2},null,8,["academy"])]),leftSideWidget:m(()=>[...a[7]||(a[7]=[n("div",null,null,-1)])]),mainContent:m(()=>[...a[8]||(a[8]=[])]),_:1},8,["appUrl"]))}};export{j as default};
