import{z as v,r as _,af as w,a4 as k,c as a,a as e,b as d,e as z,u as t,F as b,n as q,t as o,ae as c,q as j,Y as h,o as i,I as n}from"./DuB962GZ.js";const $={class:"space-y-6"},B={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},A={class:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2"},C={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-4"},F={class:"bg-gradient-to-r from-cyan-500 to-blue-500 rounded-xl p-6 text-white"},M={class:"flex items-center justify-between mb-4"},N={class:"text-4xl font-bold"},P={class:"w-24 h-24 relative"},V={class:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100"},I=["stroke-dasharray"],L={class:"absolute inset-0 flex items-center justify-center"},O={class:"w-full h-2 bg-white/20 rounded-full overflow-hidden"},S={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},D={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6"},E={class:"flex items-center gap-4"},T={class:"w-12 h-12 rounded-xl bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center"},Y={class:"text-2xl font-bold text-gray-900 dark:text-white"},G={class:"mt-4 w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},H={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6"},J={class:"flex items-center gap-4"},K={class:"w-12 h-12 rounded-xl bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center"},Q={class:"text-2xl font-bold text-gray-900 dark:text-white"},R={class:"mt-4 w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},U={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6"},W={class:"flex items-center gap-4"},X={class:"w-12 h-12 rounded-xl bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center"},Z={class:"text-2xl font-bold text-gray-900 dark:text-white"},ee={class:"mt-4 w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},te={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6"},se={class:"flex items-center justify-between"},re={class:"flex items-center gap-6 text-sm text-gray-600 dark:text-gray-400"},le={class:"text-center"},oe={class:"text-lg font-semibold text-gray-900 dark:text-white"},ae={class:"text-center"},de={class:"text-lg font-semibold text-gray-900 dark:text-white"},ie={class:"text-center"},ne={class:"text-lg font-semibold text-gray-900 dark:text-white"},ue=v({__name:"my-progress",setup(ce){const g=h("course"),u=h("courseMemberOfAuth"),s=_(null),x=_(!0),y=w(),f=async()=>{if(!(!g?.value?.id||!u?.value?.id)){x.value=!0;try{const l=await y.get(`/api/courses/${g.value.id}/members/${u.value.id}/progress`);l.success&&(s.value=l.progress||l.data||{})}catch(l){console.error("Failed to fetch my progress:",l)}finally{x.value=!1}}},p=l=>l>=80?"text-green-500":l>=50?"text-yellow-500":l>=20?"text-orange-500":"text-red-500";return k(()=>[g?.value?.id,u?.value?.id],([l,r])=>{l&&r&&f()},{immediate:!0}),(l,r)=>(i(),a("div",$,[e("div",B,[e("h2",A,[d(t(n),{icon:"mdi:graph-box-plus-outline",class:"w-5 h-5 text-cyan-500"}),r[0]||(r[0]=z(" ผลการเรียนของฉัน ",-1))])]),t(x)?(i(),a("div",C,[(i(),a(b,null,q(3,m=>e("div",{key:m,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 animate-pulse"},[...r[1]||(r[1]=[e("div",{class:"h-16 bg-gray-200 dark:bg-gray-700 rounded mb-4"},null,-1),e("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"},null,-1)])])),64))])):(i(),a(b,{key:1},[e("div",F,[e("div",M,[e("div",null,[r[2]||(r[2]=e("p",{class:"text-white/80 text-sm"},"ความก้าวหน้าโดยรวม",-1)),e("p",N,o(t(s)?.progress_percent||0)+"%",1)]),e("div",P,[(i(),a("svg",V,[r[3]||(r[3]=e("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"rgba(255,255,255,0.2)","stroke-width":"10"},null,-1)),e("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"white","stroke-width":"10","stroke-dasharray":`${(t(s)?.progress_percent||0)*2.83} 283`,"stroke-linecap":"round"},null,8,I)])),e("div",L,[d(t(n),{icon:"fluent:trophy-24-filled",class:"w-8 h-8"})])])]),e("div",O,[e("div",{class:"h-full bg-white rounded-full transition-all duration-500",style:c({width:`${t(s)?.progress_percent||0}%`})},null,4)])]),e("div",S,[e("div",D,[e("div",E,[e("div",T,[d(t(n),{icon:"fluent:book-24-regular",class:"w-6 h-6 text-blue-500"})]),e("div",null,[r[4]||(r[4]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"บทเรียน",-1)),e("p",Y,o(t(s)?.completed_lessons||0)+"/"+o(t(s)?.total_lessons||0),1)])]),e("div",G,[e("div",{class:"h-full bg-blue-500 rounded-full transition-all duration-500",style:c({width:`${t(s)?.total_lessons?t(s).completed_lessons/t(s).total_lessons*100:0}%`})},null,4)])]),e("div",H,[e("div",J,[e("div",K,[d(t(n),{icon:"material-symbols:assignment-outline",class:"w-6 h-6 text-orange-500"})]),e("div",null,[r[5]||(r[5]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"ภาระงาน",-1)),e("p",Q,o(t(s)?.completed_assignments||0)+"/"+o(t(s)?.total_assignments||0),1)])]),e("div",R,[e("div",{class:"h-full bg-orange-500 rounded-full transition-all duration-500",style:c({width:`${t(s)?.total_assignments?t(s).completed_assignments/t(s).total_assignments*100:0}%`})},null,4)])]),e("div",U,[e("div",W,[e("div",X,[d(t(n),{icon:"healthicons:i-exam-qualification-outline",class:"w-6 h-6 text-purple-500"})]),e("div",null,[r[6]||(r[6]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"แบบทดสอบ",-1)),e("p",Z,o(t(s)?.completed_quizzes||0)+"/"+o(t(s)?.total_quizzes||0),1)])]),e("div",ee,[e("div",{class:"h-full bg-purple-500 rounded-full transition-all duration-500",style:c({width:`${t(s)?.total_quizzes?t(s).completed_quizzes/t(s).total_quizzes*100:0}%`})},null,4)])])]),e("div",te,[e("div",se,[e("div",null,[r[7]||(r[7]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-1"},"คะแนนรวม",-1)),e("p",{class:j(["text-4xl font-bold",p(t(s)?.progress_percent||0)])},o(t(s)?.total_score||0),3)]),e("div",re,[e("div",le,[e("p",oe,o(t(s)?.attendance_score||0),1),r[8]||(r[8]=e("p",null,"คะแนนเข้าเรียน",-1))]),e("div",ae,[e("p",de,o(t(s)?.assignment_score||0),1),r[9]||(r[9]=e("p",null,"คะแนนภาระงาน",-1))]),e("div",ie,[e("p",ne,o(t(s)?.quiz_score||0),1),r[10]||(r[10]=e("p",null,"คะแนนแบบทดสอบ",-1))])])])])],64))]))}});export{ue as default};
