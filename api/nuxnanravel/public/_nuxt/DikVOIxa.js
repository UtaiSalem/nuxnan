import{_ as fe,af as ve,az as ye,N as w,r as f,Q as Ue,f as pe,g as qe,c as i,o as s,a as e,b as n,ae as Ne,d as m,i as C,j as d,u as t,I as a,t as k,e as he,q as l,F as P,n as me,w as x,l as be,y as ge,z as xe,an as we,a4 as Se,am as Be,aC as Ee,O as Te,a0 as V,$ as Fe}from"./DuB962GZ.js";import{S as H}from"./BQxta0Da.js";import{u as De}from"./C_KBwUJh.js";import{_ as ke}from"./fgoR5NrX.js";import{_ as Ge}from"./CehGOp-7.js";import{u as Ve}from"./BldT-Pqa.js";import"./CouwXKwP.js";const Pe={class:"relative w-full bg-white dark:bg-gray-900 rounded-2xl overflow-hidden shadow-2xl border border-gray-100 dark:border-gray-800 transition-all duration-300"},He={key:0,class:"absolute top-4 left-4 z-10"},We=["disabled"],Ke={key:1,class:"absolute top-4 right-4 z-10 animate-pulse"},Qe={class:"relative group"},Je={class:"relative flex items-center px-4 py-2.5 space-x-2 font-bold text-white rounded-xl bg-gradient-to-r from-yellow-400 to-orange-500 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 border border-yellow-300/50"},Xe={class:"text-lg"},Ye={class:"flex flex-col sm:flex-row items-center justify-between w-full px-4 sm:px-6 -mt-[70px] sm:-mt-[80px] md:-mt-[90px] transition-all duration-300"},Ze={class:"flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto"},et={class:"relative flex-shrink-0 group"},tt={class:"relative w-24 h-24 sm:w-28 sm:h-28 md:w-32 md:h-32 lg:w-36 lg:h-36 rounded-full border-4 border-white dark:border-gray-800 overflow-hidden bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 shadow-2xl transition-all duration-300 group-hover:scale-105 group-hover:shadow-3xl z-10"},rt=["src"],ot=["disabled"],st={class:"space-y-2 text-center sm:text-left mt-3 sm:mt-6"},at={class:"flex items-center gap-2 flex-wrap justify-center sm:justify-start"},nt={class:"relative group"},lt={class:"relative z-10 px-5 py-3 text-lg sm:text-xl md:text-2xl font-black text-white bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 dark:from-gray-800 dark:via-gray-700 dark:to-gray-800 rounded-2xl shadow-2xl border border-slate-700/50 dark:border-gray-600/50 backdrop-blur-sm transition-all duration-300 group-hover:shadow-3xl group-hover:scale-105"},it={class:"bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent"},dt={class:"flex items-center gap-2 justify-center sm:justify-start"},ut={key:0,class:"group relative px-5 py-2.5 text-sm font-bold text-white bg-gradient-to-r from-cyan-500 via-blue-600 to-purple-600 rounded-full shadow-xl border-2 border-cyan-400/30 transition-all duration-300 hover:shadow-2xl hover:scale-105 cursor-default"},ct={class:"tracking-wider"},mt={key:0,class:"hidden md:block mt-4 sm:mt-0"},bt={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border z-50"},gt=["disabled"],ft=["disabled"],vt=["disabled"],yt={key:0,class:"absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-xl border z-50 max-h-64 overflow-y-auto"},pt={key:0,class:"px-4 py-6 text-center text-gray-500"},ht=["onClick","disabled"],xt={class:"w-8 h-8 rounded-full bg-cyan-100 flex items-center justify-center flex-shrink-0"},wt={class:"flex-1 min-w-0"},kt={class:"font-medium text-gray-900 truncate"},_t={class:"text-xs text-gray-500"},Ct={class:"py-6 px-4 sm:px-6"},$t={class:"flex flex-wrap justify-center gap-4 md:gap-6"},jt={class:"group relative flex items-center gap-3 px-5 py-3 rounded-2xl bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 border-2 border-blue-200 dark:border-blue-700 hover:shadow-xl transition-all duration-300 hover:scale-105 cursor-pointer overflow-hidden"},At={class:"relative flex items-center justify-center w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300"},Mt={class:"relative"},zt={class:"text-2xl font-black text-blue-600 dark:text-blue-400 leading-none"},It={class:"group relative flex items-center gap-3 px-5 py-3 rounded-2xl bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 border-2 border-purple-200 dark:border-purple-700 hover:shadow-xl transition-all duration-300 hover:scale-105 cursor-pointer overflow-hidden"},Ot={class:"relative flex items-center justify-center w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300"},Lt={class:"relative"},Rt={class:"text-2xl font-black text-purple-600 dark:text-purple-400 leading-none"},Ut={class:"group relative flex items-center gap-3 px-5 py-3 rounded-2xl bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 border-2 border-green-200 dark:border-green-700 hover:shadow-xl transition-all duration-300 hover:scale-105 cursor-pointer overflow-hidden"},qt={class:"relative flex items-center justify-center w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300"},Nt={class:"relative"},St={class:"text-2xl font-black text-green-600 dark:text-green-400 leading-none"},Bt={class:"relative flex items-center justify-center w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl shadow-lg overflow-hidden group-hover:shadow-xl group-hover:scale-110 transition-all duration-300"},Et=["src"],Tt={class:"relative text-left"},Ft={class:"text-sm font-black text-orange-700 dark:text-orange-400 truncate max-w-[140px] leading-tight"},Dt={key:0,class:"flex justify-center mt-4 md:hidden"},Gt={key:0,class:"relative w-56"},Vt={class:"flex items-center gap-2"},Pt={key:0,class:"absolute left-0 right-0 mt-2 bg-white rounded-lg shadow-xl border z-50"},Ht=["disabled"],Wt=["disabled"],Kt={key:2,class:"relative w-56"},Qt=["disabled"],Jt={class:"flex items-center gap-2"},Xt={key:0,class:"absolute left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border z-50 max-h-64 overflow-y-auto"},Yt={key:0,class:"px-4 py-6 text-center text-gray-500"},Zt=["onClick","disabled"],er={class:"w-8 h-8 rounded-full bg-cyan-100 flex items-center justify-center flex-shrink-0"},tr={class:"flex-1 min-w-0"},rr={class:"font-medium text-gray-900 truncate"},or={class:"text-xs text-gray-500"},sr={class:"flex items-center gap-3"},ar={class:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl"},nr={class:"space-y-6"},lr={class:"space-y-2"},ir={class:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"},dr={class:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1"},ur={class:"space-y-2"},cr={class:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"},mr={class:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1"},br={class:"p-4 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-xl border-2 border-blue-200 dark:border-blue-800"},gr={class:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-1"},fr={class:"flex items-center gap-2 flex-wrap"},vr={class:"px-4 py-2 bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 dark:from-gray-800 dark:via-gray-700 dark:to-gray-800 rounded-xl shadow-lg border border-slate-700/50"},yr={class:"text-sm font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent"},pr={key:0,class:"px-3 py-1.5 bg-gradient-to-r from-cyan-500 via-blue-600 to-purple-600 rounded-full shadow-lg"},hr={class:"text-xs font-bold text-white tracking-wider"},xr={class:"flex items-center justify-end gap-3"},wr=["disabled"],kr=["disabled"],_r={__name:"CourseProfileCover",props:{courseMemberOfAuth:{type:Object,default:null}},emits:["request-member","request-unmember","refresh"],setup(u,{emit:F}){const O=u,o=F,g=ve(),S=Ue(),c=ye(),y=w(()=>c.currentCourse),L=w(()=>c.academy),h=w(()=>c.isCourseAdmin),$=w(()=>y.value?.groups||[]),A=w(()=>y.value?.id),N=w(()=>y.value?.name||""),M=w(()=>y.value?.code||""),W=w(()=>y.value?.tuition_fees),ee=w(()=>y.value?.lessons_count??0),te=w(()=>y.value?.enrolled_students??0),re=w(()=>y.value?.groups??0),p=w(()=>O.courseMemberOfAuth?.status||y.value?.member_status),b=w(()=>(y.value?.groups?.length??0)>0),K=f(null),Q=f(null),oe=f(null),se=f(null),R=f(!1),U=f(!1),ae=f(!1),q=f(""),B=f(""),J=f(!1),X=f(!1),E=f(!1),_e=f(!1),z=f(!1),I=f(!1),D=f(null),G=f(null),Ce=w(()=>D.value?D.value:y.value?.cover?`${S.public.apiBase}/storage/images/courses/covers/${y.value.cover}`:"/images/default-cover.jpg"),$e=w(()=>G.value?G.value:y.value?.logo?`${S.public.apiBase}/storage/images/courses/logos/${y.value.logo}`:y.value?.user?.avatar?y.value.user.avatar:"/images/default-logo.png"),je=()=>Q.value?.click(),Ae=()=>K.value?.click();function le(){q.value=N.value,B.value=M.value,ae.value=!0}function ne(){ae.value=!1,q.value="",B.value="",E.value=!1,_e.value=!1}async function Me(){if(!q.value.trim()){alert("กรุณากรอกชื่อรายวิชา");return}E.value=!0;try{const v={name:q.value.trim(),code:B.value.trim()};await g.put(`/api/courses/${A.value}`,v),c.updateCourse(v),o("refresh"),ne()}catch(v){console.error("Failed to update course info:",v),alert("เกิดข้อผิดพลาดในการบันทึก กรุณาลองใหม่อีกครั้ง")}finally{E.value=!1}}async function ze(v){const r=v.target.files?.[0];if(r){D.value=URL.createObjectURL(r),J.value=!0;try{const j=new FormData;j.append("cover",r);const T=await g.post(`/api/courses/${A.value}/cover`,j);T.cover&&c.updateCourse({cover:T.cover}),o("refresh")}catch(j){console.error("Failed to update cover:",j),D.value=null}finally{J.value=!1}}}async function Ie(v){const r=v.target.files?.[0];if(r){G.value=URL.createObjectURL(r),X.value=!0;try{const j=new FormData;j.append("logo",r);const T=await g.post(`/api/courses/${A.value}/logo`,j);T.logo&&c.updateCourse({logo:T.logo}),o("refresh")}catch(j){console.error("Failed to update logo:",j),G.value=null}finally{X.value=!1}}}function Oe(){le()}function Le(){le()}async function Y(v=null){if(!z.value){z.value=!0;try{const r=v?{group_id:v}:{},j=await g.post(`/api/courses/${A.value}/members`,r);c.updateCourse({isMember:!0,member_status:j.memberStatus||"pending"}),R.value=!1,o("request-member",v),o("refresh")}catch(r){console.error("Failed to request membership:",r)}finally{z.value=!1}}}async function Z(){if(O.courseMemberOfAuth?.id&&!I.value&&!((p.value==="1"||p.value==="active")&&!confirm("คุณต้องการออกจากรายวิชานี้ใช่หรือไม่?"))){I.value=!0;try{await g.delete(`/api/courses/${A.value}/members/${O.courseMemberOfAuth.id}`),c.updateCourse({isMember:!1,member_status:null}),U.value=!1,o("request-unmember",O.courseMemberOfAuth.id),o("refresh")}catch(v){console.error("Failed to cancel membership:",v)}finally{I.value=!1}}}function ie(){R.value=!R.value,U.value=!1}function de(){U.value=!U.value,R.value=!1}function ue(v){oe.value&&!oe.value.contains(v.target)&&(R.value=!1),se.value&&!se.value.contains(v.target)&&(U.value=!1)}function ce(v){v.key==="Escape"&&(R.value=!1,U.value=!1)}return pe(()=>{document.addEventListener("click",ue),document.addEventListener("keydown",ce)}),qe(()=>{document.removeEventListener("click",ue),document.removeEventListener("keydown",ce),D.value&&URL.revokeObjectURL(D.value),G.value&&URL.revokeObjectURL(G.value)}),(v,r)=>{const j=ke,T=Ge;return s(),i(P,null,[e("div",Pe,[e("div",{class:"relative h-48 sm:h-64 md:h-72 lg:h-80 bg-cover bg-center bg-no-repeat transition-all duration-500",style:Ne({backgroundImage:`url(${Ce.value})`})},[r[7]||(r[7]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-blue-600/20 via-purple-600/10 to-pink-600/20 dark:from-blue-900/30 dark:via-purple-900/20 dark:to-pink-900/30"},null,-1)),r[8]||(r[8]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"},null,-1)),r[9]||(r[9]=e("div",{class:"absolute inset-0 opacity-10 dark:opacity-5",style:{"background-image":"radial-gradient(circle at 1px 1px, white 1px, transparent 0)","background-size":"40px 40px"}},null,-1)),h.value?(s(),i("div",He,[e("input",{type:"file",class:"hidden",ref_key:"coverInput",ref:Q,accept:"image/*",onChange:ze},null,544),e("button",{type:"button",onClick:C(je,["prevent"]),disabled:J.value,class:"group relative p-3 text-gray-700 dark:text-gray-200 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-xl hover:bg-white dark:hover:bg-gray-700 transition-all duration-300 disabled:opacity-50 shadow-lg hover:shadow-xl hover:scale-110 border border-white/20"},[J.value?(s(),d(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(s(),d(t(a),{key:1,icon:"fluent:camera-edit-20-filled",class:"w-5 h-5 group-hover:scale-110 transition-transform"})),r[4]||(r[4]=e("div",{class:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap"}," แก้ไขปก ",-1))],8,We)])):m("",!0),W.value?(s(),i("div",Ke,[e("div",Qe,[r[6]||(r[6]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl blur-md opacity-75 group-hover:opacity-100 transition-opacity"},null,-1)),e("div",Je,[n(t(a),{icon:"ri:bit-coin-fill",class:"w-6 h-6 animate-spin-slow"}),e("span",Xe,k(W.value),1),r[5]||(r[5]=e("span",{class:"text-sm opacity-90"},"บาท",-1))])])])):m("",!0)],4),e("div",Ye,[e("div",Ze,[e("div",et,[r[11]||(r[11]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full blur-xl opacity-0 group-hover:opacity-60 transition-opacity duration-500 animate-pulse pointer-events-none -z-10"},null,-1)),e("div",tt,[e("img",{src:$e.value,alt:"Course Logo",class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"},null,8,rt),r[10]||(r[10]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1))]),h.value?(s(),i("input",{key:0,type:"file",class:"hidden",ref_key:"logoInput",ref:K,accept:"image/*",onChange:Ie},null,544)):m("",!0),h.value?(s(),i("button",{key:1,type:"button",onClick:C(Ae,["prevent"]),disabled:X.value,class:"absolute bottom-2 right-2 p-2.5 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full hover:from-blue-600 hover:to-purple-700 transition-all duration-300 disabled:opacity-50 shadow-lg hover:shadow-xl hover:scale-110 border-2 border-white dark:border-gray-800 z-10"},[X.value?(s(),d(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-4 h-4"})):(s(),d(t(a),{key:1,icon:"fluent:camera-edit-20-filled",class:"w-4 h-4"}))],8,ot)):m("",!0)]),e("div",st,[e("div",at,[e("div",nt,[r[12]||(r[12]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-2xl blur-xl opacity-0 group-hover:opacity-30 transition-opacity duration-500 pointer-events-none -z-10"},null,-1)),e("h1",lt,[e("span",it,k(N.value||"ไม่มีชื่อรายวิชา"),1)])]),h.value?(s(),i("button",{key:0,onClick:Oe,class:"group relative z-20 p-2.5 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl border border-gray-200 dark:border-gray-600 hover:scale-110"},[n(t(a),{icon:"fluent:edit-24-filled",class:"w-5 h-5 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform"}),r[13]||(r[13]=e("div",{class:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50"}," แก้ไขข้อมูล ",-1))])):m("",!0)]),e("div",dt,[M.value?(s(),i("span",ut,[n(t(a),{icon:"fluent:number-symbol-square-24-filled",class:"w-4 h-4 inline-block mr-1.5"}),e("span",ct,k(M.value),1),r[14]||(r[14]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent transform -skew-x-12 translate-x-full group-hover:translate-x-[-200%] transition-transform duration-1000"},null,-1))])):h.value?(s(),i("span",{key:1,onClick:Le,class:"px-4 py-2 text-sm font-medium text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-gray-800 rounded-full border-2 border-dashed border-gray-300 dark:border-gray-600 hover:border-cyan-400 dark:hover:border-cyan-600 transition-colors cursor-pointer"},[n(t(a),{icon:"fluent:add-circle-24-regular",class:"w-4 h-4 inline-block mr-1"}),r[15]||(r[15]=he(" เพิ่มรหัสวิชา ",-1))])):m("",!0)])])]),h.value?m("",!0):(s(),i("div",mt,[u.courseMemberOfAuth&&(p.value==="0"||p.value==="pending")?(s(),i("div",{key:0,ref_key:"membershipDropdownRef",ref:se,class:"relative"},[e("button",{onClick:C(de,["prevent"]),class:"flex items-center gap-2 px-5 py-2.5 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold rounded-lg transition-colors shadow-md"},[n(t(a),{icon:"heroicons:clock",class:"w-5 h-5"}),r[16]||(r[16]=e("span",null,"รอการตอบรับ",-1)),n(t(a),{icon:"heroicons:chevron-down",class:l(["w-4 h-4 transition-transform",{"rotate-180":U.value}])},null,8,["class"])]),U.value?(s(),i("div",bt,[e("button",{onClick:C(Z,["prevent"]),disabled:I.value,class:"w-full px-4 py-3 text-red-600 hover:bg-red-50 rounded-lg font-medium flex items-center gap-2 disabled:opacity-50"},[I.value?(s(),d(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(s(),d(t(a),{key:1,icon:"heroicons:x-circle",class:"w-5 h-5"})),r[17]||(r[17]=e("span",null,"ยกเลิกคำขอ",-1))],8,gt)])):m("",!0)],512)):u.courseMemberOfAuth&&(p.value==="1"||p.value==="active")?(s(),i("button",{key:1,onClick:C(Z,["prevent"]),disabled:I.value,class:"flex items-center gap-2 px-5 py-2.5 bg-emerald-500 hover:bg-red-500 text-white font-semibold rounded-lg transition-colors shadow-md disabled:opacity-50"},[I.value?(s(),d(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(s(),d(t(a),{key:1,icon:"fluent:checkmark-circle-24-filled",class:"w-5 h-5"})),r[18]||(r[18]=e("span",null,"เป็นสมาชิก",-1))],8,ft)):u.courseMemberOfAuth?m("",!0):(s(),i("div",{key:2,ref_key:"dropdownRef",ref:oe,class:"relative"},[b.value?(s(),i(P,{key:1},[e("button",{onClick:C(ie,["prevent"]),class:"flex items-center gap-2 px-5 py-2.5 bg-cyan-500 hover:bg-cyan-600 text-white font-semibold rounded-lg transition-colors shadow-md"},[z.value?(s(),d(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(s(),d(t(a),{key:1,icon:"heroicons:user-plus",class:"w-5 h-5"})),r[20]||(r[20]=e("span",null,"สมัครเรียน",-1)),n(t(a),{icon:"heroicons:chevron-down",class:l(["w-4 h-4 transition-transform",{"rotate-180":R.value}])},null,8,["class"])]),R.value?(s(),i("div",yt,[r[22]||(r[22]=e("div",{class:"sticky top-0 bg-gray-50 px-4 py-2 border-b"},[e("p",{class:"text-xs font-medium text-gray-600"},"เลือกกลุ่มที่ต้องการเข้าร่วม")],-1)),!$.value||$.value.length===0?(s(),i("div",pt,[n(t(a),{icon:"heroicons:user-group",class:"w-12 h-12 mx-auto mb-2 opacity-30"}),r[21]||(r[21]=e("p",{class:"text-sm"},"ไม่มีกลุ่มในรายวิชานี้",-1))])):m("",!0),(s(!0),i(P,null,me($.value,_=>(s(),i("button",{key:_.id,onClick:C(Re=>Y(_.id),["prevent"]),disabled:z.value,class:"w-full px-4 py-3 text-left hover:bg-cyan-50 flex items-center gap-3 disabled:opacity-50"},[e("div",xt,[n(t(a),{icon:"heroicons:user-group",class:"w-4 h-4 text-cyan-600"})]),e("div",wt,[e("p",kt,k(_.name),1),e("p",_t,k(_.members_count||0)+" สมาชิก",1)])],8,ht))),128))])):m("",!0)],64)):(s(),i("button",{key:0,onClick:r[0]||(r[0]=C(_=>Y(null),["prevent"])),disabled:z.value,class:"flex items-center gap-2 px-5 py-2.5 bg-cyan-500 hover:bg-cyan-600 text-white font-semibold rounded-lg transition-colors shadow-md disabled:opacity-50"},[z.value?(s(),d(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(s(),d(t(a),{key:1,icon:"heroicons:user-plus",class:"w-5 h-5"})),r[19]||(r[19]=e("span",null,"สมัครเรียน",-1))],8,vt))],512))]))]),e("div",Ct,[e("div",$t,[e("div",jt,[r[24]||(r[24]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500/0 via-blue-500/10 to-blue-500/0 transform translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"},null,-1)),e("div",At,[n(t(a),{icon:"heroicons:book-open-solid",class:"w-6 h-6 text-white"})]),e("div",Mt,[e("div",zt,k(ee.value),1),r[23]||(r[23]=e("div",{class:"text-xs font-semibold text-blue-700/70 dark:text-blue-300/70 mt-0.5"},"บทเรียน",-1))])]),e("div",It,[r[26]||(r[26]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-purple-500/0 via-purple-500/10 to-purple-500/0 transform translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"},null,-1)),e("div",Ot,[n(t(a),{icon:"heroicons:users-solid",class:"w-6 h-6 text-white"})]),e("div",Lt,[e("div",Rt,k(te.value||0),1),r[25]||(r[25]=e("div",{class:"text-xs font-semibold text-purple-700/70 dark:text-purple-300/70 mt-0.5"},"ผู้เรียน",-1))])]),e("div",Ut,[r[28]||(r[28]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-green-500/0 via-green-500/10 to-green-500/0 transform translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"},null,-1)),e("div",qt,[n(t(a),{icon:"heroicons:user-group-solid",class:"w-6 h-6 text-white"})]),e("div",Nt,[e("div",St,k(re.value||0),1),r[27]||(r[27]=e("div",{class:"text-xs font-semibold text-green-700/70 dark:text-green-300/70 mt-0.5"},"กลุ่ม",-1))])]),L.value?(s(),d(j,{key:0,to:`/academies/${L.value.id}`,class:"group relative flex items-center gap-3 px-5 py-3 rounded-2xl bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 border-2 border-orange-200 dark:border-orange-700 hover:shadow-xl transition-all duration-300 hover:scale-105 overflow-hidden"},{default:x(()=>[r[30]||(r[30]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-orange-500/0 via-orange-500/10 to-orange-500/0 transform translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"},null,-1)),e("div",Bt,[L.value.logo?(s(),i("img",{key:0,src:`${v.$config.public.apiBase}/storage/images/academies/logos/${L.value.logo}`,class:"w-full h-full object-cover"},null,8,Et)):(s(),d(t(a),{key:1,icon:"heroicons:academic-cap-solid",class:"w-6 h-6 text-white"}))]),e("div",Tt,[e("div",Ft,k(L.value.name),1),r[29]||(r[29]=e("div",{class:"text-xs font-semibold text-orange-600/70 dark:text-orange-300/70"},"สถาบัน",-1))])]),_:1},8,["to"])):m("",!0)]),h.value?m("",!0):(s(),i("div",Dt,[u.courseMemberOfAuth&&(p.value==="0"||p.value==="pending")?(s(),i("div",Gt,[e("button",{onClick:C(de,["prevent"]),class:"w-full flex items-center justify-between gap-2 px-5 py-2.5 bg-yellow-500 active:bg-yellow-600 text-white font-semibold rounded-lg transition-colors shadow-md"},[e("span",Vt,[n(t(a),{icon:"heroicons:clock",class:"w-5 h-5"}),r[31]||(r[31]=e("span",null,"รอการตอบรับ",-1))]),n(t(a),{icon:"heroicons:chevron-down",class:l(["w-4 h-4 transition-transform",{"rotate-180":U.value}])},null,8,["class"])]),U.value?(s(),i("div",Pt,[e("button",{onClick:C(Z,["prevent"]),disabled:I.value,class:"w-full px-4 py-3 text-red-600 active:bg-red-50 rounded-lg font-medium flex items-center justify-center gap-2 disabled:opacity-50"},[I.value?(s(),d(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(s(),d(t(a),{key:1,icon:"heroicons:x-circle",class:"w-5 h-5"})),r[32]||(r[32]=e("span",null,"ยกเลิกคำขอ",-1))],8,Ht)])):m("",!0)])):u.courseMemberOfAuth&&(p.value==="1"||p.value==="active")?(s(),i("button",{key:1,onClick:C(Z,["prevent"]),disabled:I.value,class:"w-56 flex items-center justify-center gap-2 px-5 py-2.5 bg-yellow-300 active:bg-red-500 active:text-white text-gray-700 font-semibold rounded-lg transition-all shadow-md disabled:opacity-50"},[I.value?(s(),d(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(s(),d(t(a),{key:1,icon:"majesticons:door-exit-line",class:"w-5 h-5"})),r[33]||(r[33]=e("span",null,"ออกจากสมาชิก",-1))],8,Wt)):u.courseMemberOfAuth?m("",!0):(s(),i("div",Kt,[b.value?(s(),i(P,{key:1},[e("button",{onClick:C(ie,["prevent"]),class:"w-full flex items-center justify-between gap-2 px-5 py-2.5 bg-cyan-500 active:bg-cyan-600 text-white font-semibold rounded-lg transition-colors shadow-md"},[e("span",Jt,[z.value?(s(),d(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(s(),d(t(a),{key:1,icon:"heroicons:user-plus",class:"w-5 h-5"})),r[35]||(r[35]=e("span",null,"สมัครเรียน",-1))]),n(t(a),{icon:"heroicons:chevron-down",class:l(["w-4 h-4 transition-transform",{"rotate-180":R.value}])},null,8,["class"])]),R.value?(s(),i("div",Xt,[r[37]||(r[37]=e("div",{class:"sticky top-0 bg-gray-50 px-4 py-2 border-b"},[e("p",{class:"text-xs font-medium text-gray-600"},"เลือกกลุ่มที่ต้องการเข้าร่วม")],-1)),!$.value||$.value.length===0?(s(),i("div",Yt,[n(t(a),{icon:"heroicons:user-group",class:"w-12 h-12 mx-auto mb-2 opacity-30"}),r[36]||(r[36]=e("p",{class:"text-sm"},"ไม่มีกลุ่มในรายวิชานี้",-1))])):m("",!0),(s(!0),i(P,null,me($.value,_=>(s(),i("button",{key:_.id,onClick:C(Re=>Y(_.id),["prevent"]),disabled:z.value,class:"w-full px-4 py-3 text-left active:bg-cyan-50 flex items-center gap-3 border-b last:border-b-0 disabled:opacity-50"},[e("div",er,[n(t(a),{icon:"heroicons:user-group",class:"w-4 h-4 text-cyan-600"})]),e("div",tr,[e("p",rr,k(_.name),1),e("p",or,k(_.members_count||0)+" สมาชิก",1)])],8,Zt))),128))])):m("",!0)],64)):(s(),i("button",{key:0,onClick:r[1]||(r[1]=C(_=>Y(null),["prevent"])),disabled:z.value,class:"w-full flex items-center justify-center gap-2 px-5 py-2.5 bg-cyan-500 active:bg-cyan-600 text-white font-semibold rounded-lg transition-colors shadow-md disabled:opacity-50"},[z.value?(s(),d(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(s(),d(t(a),{key:1,icon:"heroicons:user-plus",class:"w-5 h-5"})),r[34]||(r[34]=e("span",null,"สมัครเรียน",-1))],8,Qt))]))]))])]),n(T,{show:ae.value,onClose:ne,"max-width":"2xl"},{title:x(()=>[e("div",sr,[e("div",ar,[n(t(a),{icon:"fluent:edit-24-filled",class:"w-6 h-6 text-white"})]),r[38]||(r[38]=e("div",null,[e("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"},"แก้ไขข้อมูลรายวิชา"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"อัพเดทชื่อและรหัสวิชา")],-1))])]),content:x(()=>[e("div",nr,[e("div",lr,[e("label",ir,[n(t(a),{icon:"heroicons:book-open-solid",class:"w-5 h-5 text-blue-600 dark:text-blue-400"}),r[39]||(r[39]=e("span",null,"ชื่อรายวิชา",-1)),r[40]||(r[40]=e("span",{class:"text-red-500"},"*",-1))]),be(e("textarea",{"onUpdate:modelValue":r[2]||(r[2]=_=>q.value=_),rows:"3",placeholder:"กรอกชื่อรายวิชา (สามารถใส่ชื่อยาวได้)",class:l(["w-full px-4 py-3 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl font-medium text-base focus:outline-none focus:ring-4 focus:ring-blue-500/50 border-2 border-gray-200 dark:border-gray-700 hover:border-blue-400 dark:hover:border-blue-600 transition-all resize-none",{"border-red-500 focus:ring-red-500/50":!q.value.trim()}])},null,2),[[ge,q.value]]),e("p",dr,[n(t(a),{icon:"heroicons:information-circle",class:"w-4 h-4"}),e("span",null,"ตัวอักษร: "+k(q.value.length)+" / 500",1)])]),e("div",ur,[e("label",cr,[n(t(a),{icon:"fluent:number-symbol-square-24-filled",class:"w-5 h-5 text-cyan-600 dark:text-cyan-400"}),r[41]||(r[41]=e("span",null,"รหัสวิชา",-1)),r[42]||(r[42]=e("span",{class:"text-gray-400 text-xs"},"(ไม่บังคับ)",-1))]),be(e("input",{"onUpdate:modelValue":r[3]||(r[3]=_=>B.value=_),type:"text",placeholder:"เช่น CS101, MATH201",maxlength:"50",class:"w-full px-4 py-3 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl font-medium text-base focus:outline-none focus:ring-4 focus:ring-cyan-500/50 border-2 border-gray-200 dark:border-gray-700 hover:border-cyan-400 dark:hover:border-cyan-600 transition-all"},null,512),[[ge,B.value]]),e("p",mr,[n(t(a),{icon:"heroicons:light-bulb",class:"w-4 h-4"}),r[43]||(r[43]=e("span",null,"รหัสวิชาจะแสดงเป็น badge ที่สวยงาม",-1))])]),e("div",br,[e("p",gr,[n(t(a),{icon:"heroicons:eye",class:"w-4 h-4"}),r[44]||(r[44]=e("span",null,"ตัวอย่างการแสดงผล:",-1))]),e("div",fr,[e("div",vr,[e("span",yr,k(q.value||"ชื่อรายวิชา"),1)]),B.value.trim()?(s(),i("div",pr,[e("span",hr,k(B.value),1)])):m("",!0)])])])]),footer:x(()=>[e("div",xr,[e("button",{onClick:ne,disabled:E.value,class:"px-6 py-2.5 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-semibold rounded-xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"}," ยกเลิก ",8,wr),e("button",{onClick:Me,disabled:!q.value.trim()||E.value,class:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-bold rounded-xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl"},[E.value?(s(),d(t(a),{key:0,icon:"svg-spinners:ring-resize",class:"w-5 h-5"})):(s(),d(t(a),{key:1,icon:"fluent:save-24-filled",class:"w-5 h-5"})),e("span",null,k(E.value?"กำลังบันทึก...":"บันทึกการแก้ไข"),1)],8,kr)])]),_:1},8,["show"])],64)}}},Cr=fe(_r,[["__scopeId","data-v-9f3c1438"]]),$r={class:"w-full mt-4 overflow-hidden bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700"},jr={class:"flex flex-row justify-around relative"},Ar={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Mr={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},zr={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Ir={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Or={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Lr={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Rr={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Ur={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},qr={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Nr={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Sr={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Br={class:"flex flex-col items-center justify-center py-3 text-slate-600/80 dark:text-gray-300 transition-all duration-300"},Er=xe({__name:"CourseNavbarTab",props:{courseId:{},isCourseAdmin:{type:Boolean,default:!1},courseMemberOfAuth:{default:null}},setup(u){const F=u,O=we(),o=w(()=>{const g=O.path;return g.includes("/basic-info")?12:g.includes("/feeds")?11:g.includes("/attendances")?7:g.includes("/lessons")?1:g.includes("/assignments")?2:g.includes("/quizzes")?3:g.includes("/play/groups")?5:g.includes("/members")?4:g.includes("/settings")?8:g.includes("/member-settings")||g.includes("/my-progress")?9:g.includes("/progress")?10:g.includes("/admin")?13:(g.endsWith(`/courses/${F.courseId}`)||g.endsWith(`/courses/${F.courseId}/`),12)});return(g,S)=>{const c=ke;return s(),i("div",$r,[e("div",jr,[n(c,{to:`/courses/${u.courseId}`,class:l(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(o)===12,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(o)!==12}])},{default:x(()=>[e("div",Ar,[n(t(a),{icon:"heroicons:information-circle",class:l(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(o)===12,"hover:text-cyan-400":t(o)!==12}])},null,8,["class"]),e("span",{class:l(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(o)===12}])},"ข้อมูลทั่วไป",2)])]),_:1},8,["to","class"]),n(c,{to:`/courses/${u.courseId}/feeds`,class:l(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(o)===11,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(o)!==11}])},{default:x(()=>[e("div",Mr,[n(t(a),{icon:"codicon:feedback",class:l(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(o)===11,"hover:text-cyan-400":t(o)!==11}])},null,8,["class"]),e("span",{class:l(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(o)===11}])},"กระดาน",2)])]),_:1},8,["to","class"]),u.isCourseAdmin||u.courseMemberOfAuth?(s(),d(c,{key:0,to:`/courses/${u.courseId}/attendances`,class:l(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(o)===7,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(o)!==7}])},{default:x(()=>[e("div",zr,[n(t(a),{icon:"tabler:calendar-user",class:l(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(o)===7,"hover:text-cyan-400":t(o)!==7}])},null,8,["class"]),e("span",{class:l(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(o)===7}])},"การเข้าเรียน",2)])]),_:1},8,["to","class"])):m("",!0),n(c,{to:`/courses/${u.courseId}/lessons`,class:l(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(o)===1,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(o)!==1}])},{default:x(()=>[e("div",Ir,[n(t(a),{icon:"icon-park-outline:view-grid-detail",class:l(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(o)===1,"hover:text-cyan-400":t(o)!==1}])},null,8,["class"]),e("span",{class:l(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(o)===1}])},"บทเรียน",2)])]),_:1},8,["to","class"]),n(c,{to:`/courses/${u.courseId}/assignments`,class:l(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(o)===2,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(o)!==2}])},{default:x(()=>[e("div",Or,[n(t(a),{icon:"material-symbols:assignment-add-outline",class:l(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(o)===2,"hover:text-cyan-400":t(o)!==2}])},null,8,["class"]),e("span",{class:l(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(o)===2}])},"ภาระงาน",2)])]),_:1},8,["to","class"]),u.courseMemberOfAuth||u.isCourseAdmin?(s(),d(c,{key:1,to:`/courses/${u.courseId}/quizzes`,class:l(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(o)===3,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(o)!==3}])},{default:x(()=>[e("div",Lr,[n(t(a),{icon:"healthicons:i-exam-qualification-outline",class:l(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(o)===3,"hover:text-cyan-400":t(o)!==3}])},null,8,["class"]),e("span",{class:l(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(o)===3}])},"ทดสอบ",2)])]),_:1},8,["to","class"])):m("",!0),n(c,{to:`/courses/${u.courseId}/groups`,class:l(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(o)===5,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(o)!==5}])},{default:x(()=>[e("div",Rr,[n(t(a),{icon:"heroicons-outline:user-group",class:l(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(o)===5,"hover:text-cyan-400":t(o)!==5}])},null,8,["class"]),e("span",{class:l(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(o)===5}])},"กลุ่ม",2)])]),_:1},8,["to","class"]),u.courseMemberOfAuth!==null?(s(),d(c,{key:2,to:`/courses/${u.courseId}/members`,class:l(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(o)===4,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(o)!==4}])},{default:x(()=>[e("div",Ur,[n(t(a),{icon:"ph:users-four",class:l(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(o)===4,"hover:text-cyan-400":t(o)!==4}])},null,8,["class"]),e("span",{class:l(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(o)===4}])},"สมาชิก",2)])]),_:1},8,["to","class"])):m("",!0),u.isCourseAdmin?(s(),d(c,{key:3,to:`/courses/${u.courseId}/settings`,class:l(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(o)===8,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(o)!==8}])},{default:x(()=>[e("div",qr,[n(t(a),{icon:"mdi-light:settings",class:l(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(o)===8,"hover:text-cyan-400":t(o)!==8}])},null,8,["class"]),e("span",{class:l(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(o)===8}])},"ตั้งค่า",2)])]),_:1},8,["to","class"])):m("",!0),!u.isCourseAdmin&&u.courseMemberOfAuth?(s(),d(c,{key:4,to:`/courses/${u.courseId}/my-progress`,class:l(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(o)===9,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(o)!==9}])},{default:x(()=>[e("div",Nr,[n(t(a),{icon:"mdi:graph-box-plus-outline",class:l(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(o)===9,"hover:text-cyan-400":t(o)!==9}])},null,8,["class"]),e("span",{class:l(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(o)===9}])},"ผลการเรียน",2)])]),_:1},8,["to","class"])):m("",!0),u.isCourseAdmin?(s(),d(c,{key:5,to:`/courses/${u.courseId}/progress`,class:l(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(o)===10,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(o)!==10}])},{default:x(()=>[e("div",Sr,[n(t(a),{icon:"mdi:graph-box-plus-outline",class:l(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(o)===10,"hover:text-cyan-400":t(o)!==10}])},null,8,["class"]),e("span",{class:l(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(o)===10}])},"ผลการเรียน",2)])]),_:1},8,["to","class"])):m("",!0),u.isCourseAdmin?(s(),d(c,{key:6,to:`/courses/${u.courseId}/admin`,class:l(["flex-row justify-center w-full text-center border-b-4 rounded-none tab-item hover:border-gray-400 transition-all duration-300 ease-in-out transform hover:scale-105",{"border-b-4 border-cyan-500 bg-gradient-to-t from-cyan-50 dark:from-cyan-900/20 to-white dark:to-gray-800 shadow-sm":t(o)===13,"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent":t(o)!==13}])},{default:x(()=>[e("div",Br,[n(t(a),{icon:"eos-icons:admin-outlined",class:l(["w-6 h-6 md:w-8 md:h-8 transition-all duration-300",{"text-cyan-500 scale-110":t(o)===13,"hover:text-cyan-400":t(o)!==13}])},null,8,["class"]),e("span",{class:l(["hidden md:block mt-1 text-sm font-medium transition-all duration-300",{"text-cyan-500 font-semibold":t(o)===13}])},"ผู้ดูแล",2)])]),_:1},8,["to","class"])):m("",!0)])])}}}),Tr=fe(Er,[["__scopeId","data-v-39e62ff7"]]),Fr={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden animate-pulse"},Dr={key:1,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-12 text-center"},Gr={class:"text-gray-500 dark:text-gray-400 mb-4"},Vr={key:0,class:"mb-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4 flex flex-col md:flex-row items-center justify-between shadow-lg mx-4 mt-4 gap-4"},Pr={class:"flex items-center gap-3"},Hr={class:"text-sm text-yellow-700 dark:text-yellow-300"},Wr={class:"font-semibold"},to=xe({__name:"[id]",setup(u){const F=we(),O=ve(),o=ye(),g=Ve(),S=De(),c=f(null),y=f(null),L=f(!1),h=f(null),$=f(!0),A=f(null),N=w(()=>F.params.id),M=async(p=!1)=>{if(!p&&o.isCacheValid&&o.currentCourse?.id==N.value){c.value=o.currentCourse,y.value=o.academy,L.value=o.isCourseAdmin,S.member&&(h.value=S.member),$.value=!1;return}$.value=!0,A.value=null;try{const b=await O.get(`/api/courses/${N.value}/feeds`);b.success&&(c.value=b.course,y.value=b.academy,L.value=b.isCourseAdmin,h.value=b.courseMemberOfAuth,o.setCourse(b.course),o.setAcademy(b.academy),o.setIsCourseAdmin(b.isCourseAdmin),g.setGroups(b.courseGroups||[],N.value),S.setMember(b.courseMemberOfAuth))}catch{A.value="ไม่สามารถโหลดข้อมูลรายวิชาได้"}finally{$.value=!1}},W=p=>{M(!0)},ee=()=>{M(!0)};V("course",c),V("academy",y),V("isCourseAdmin",L),V("courseMemberOfAuth",h),V("isLoading",$),V("refreshCourse",M),Se(c,p=>{p?.name&&Fe({title:`${p.name} - รายวิชา`})}),pe(()=>{M()});const te=async()=>{try{(await O.post(`/api/courses/${N.value}/admins/invitations/${h.value.id}/accept`)).success&&(H.fire({title:"สำเร็จ",text:"คุณได้เข้าร่วมรายวิชาแล้ว",icon:"success"}),M(!0))}catch{H.fire({title:"ผิดพลาด",text:"ไม่สามารถตอบรับได้",icon:"error"})}},re=async()=>{if((await H.fire({title:"ยืนยันการปฏิเสธ?",text:"คุณต้องการปฏิเสธคำเชิญนี้ใช่หรือไม่?",icon:"warning",showCancelButton:!0,confirmButtonText:"ใช่, ปฏิเสธ",cancelButtonText:"ยกเลิก",confirmButtonColor:"#d33"})).isConfirmed)try{(await O.post(`/api/courses/${N.value}/admins/invitations/${h.value.id}/decline`)).success&&(H.fire({title:"ปฏิเสธแล้ว",text:"คุณได้ปฏิเสธคำเชิญเรียบร้อยแล้ว",icon:"success"}),Te("/dashboard"))}catch{H.fire({title:"ผิดพลาด",text:"ไม่สามารถปฏิเสธได้",icon:"error"})}};return(p,b)=>{const K=Ee,Q=Be;return s(),d(Q,{name:"main"},{hero:x(()=>[t($)?(s(),i("div",Fr,[...b[1]||(b[1]=[e("div",{class:"h-48 bg-gray-200 dark:bg-gray-700"},null,-1),e("div",{class:"p-6 space-y-4"},[e("div",{class:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-2/3"}),e("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/3"})],-1)])])):t(A)?(s(),i("div",Dr,[n(t(a),{icon:"fluent:error-circle-24-regular",class:"w-20 h-20 text-red-500 mx-auto mb-4"}),b[2]||(b[2]=e("h3",{class:"text-xl font-bold text-gray-900 dark:text-white mb-2"},"เกิดข้อผิดพลาด",-1)),e("p",Gr,k(t(A)),1),e("button",{onClick:b[0]||(b[0]=()=>M(!0)),class:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"}," ลองใหม่ ")])):t(c)?(s(),i(P,{key:2},[n(Cr,{"course-member-of-auth":t(h),onRequestMember:W,onRequestUnmember:ee,onRefresh:M},null,8,["course-member-of-auth"]),t(h)&&t(h).status===2?(s(),i("div",Vr,[e("div",Pr,[n(t(a),{icon:"mdi:email-alert",class:"w-8 h-8 text-yellow-600 dark:text-yellow-500"}),e("div",null,[b[4]||(b[4]=e("h3",{class:"font-bold text-yellow-800 dark:text-yellow-200 text-lg"},"คุณได้รับเชิญเข้าร่วมรายวิชานี้",-1)),e("p",Hr,[b[3]||(b[3]=he("ในฐานะ ",-1)),e("span",Wr,k(t(h).role===4?"ผู้ดูแลระบบ (Admin)":"ผู้ช่วยสอน (TA)"),1)])])]),e("div",{class:"flex gap-2 w-full md:w-auto"},[e("button",{onClick:te,class:"flex-1 md:flex-none px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-bold shadow-sm transition-colors"}," ตอบรับ "),e("button",{onClick:re,class:"flex-1 md:flex-none px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-bold shadow-sm transition-colors"}," ปฏิเสธ ")])])):m("",!0),n(Tr,{"course-id":t(N),"is-course-admin":t(L),"course-member-of-auth":t(h)},null,8,["course-id","is-course-admin","course-member-of-auth"])],64)):m("",!0)]),default:x(()=>[t(c)&&!t($)&&!t(A)?(s(),d(K,{key:0})):m("",!0)]),_:1})}}});export{to as default};
