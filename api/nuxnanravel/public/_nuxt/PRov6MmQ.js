import{r as o,c as p,b as r,a as t,w as v,u as d,x as L,i as c,d as f,l as U,y as J,t as S,p as Q,F as K,n as W,q as X,j as N,e as g,m as Y,o as i,I as x,s as Z}from"./DuB962GZ.js";import{H as ee,L as h}from"./Czq9JhUr.js";import{S as k}from"./BQxta0Da.js";const te={class:"mx-4"},le={class:"flex items-center justify-between max-w-7xl mx-auto mt-2 mb-4 shadow-lg bg-cover bg-no-repeat rounded-lg overflow-hidden",style:{backgroundImage:"url(/storage/images/banner/banner-bg.png)"}},se={class:"hidden md:flex items-center"},ae={class:"flex"},oe={class:"flex flex-row items-center justify-center mb-4"},ne={class:"max-w-xl plearnd-card"},re={class:"grid grid-cols-1 gap-4 mt-4"},de={key:0,class:"mb-2"},ie={key:1,class:"text-xl font-semibold text-gray-700 dark:text-white"},ue={key:2,class:"w-full p-4 bg-white rounded shadow"},pe={key:3,class:"relative flex p-2 mb-4 bg-gray-300 rounded-md"},ce={class:"flex-shrink-0"},me=["src","alt"],ve={class:"ps-3"},fe={class:"mb-1 md:space-x-2 text-sm text-gray-700 dark:text-gray-400 flex flex-col md:flex-row md:items-center"},ge={class:"text-2xl font-bold"},xe={class:"font-semibold"},be=["value","selected"],ye={class:"grid grid-cols-1 gap-4 mt-4"},we={key:0},he={class:"relative mb-2 overflow-hidden max-h-fit"},ke=["src"],_e={key:0,class:"grid grid-cols-1 gap-4 mt-4"},De={class:"text-center"},Se={class:"mt-2 text-sm font-medium text-gray-900"},Ve={class:"relative"},Ce={class:"grid grid-cols-1 gap-2"},Ie={class:"flex flex-wrap -mx-3"},je={class:"w-full px-3 sm:w-1/2"},Me={class:""},Fe={class:"w-full px-3 sm:w-1/2"},Le={class:"mt-2 sm:mt-0"},Ue={class:"flex justify-end mt-8 space-x-2"},Ne=["disabled"],Oe={__name:"CreateDonate",props:{donor:{type:Object,default:()=>({id:null,name:null,personal_code:null})}},setup(B){o(!1);const b=o(!1),j=o(10),V=o(0),u=o(null),_=o(new Date),y=o(null),s=o(B.donor),w=o(null),D=o(!1),M=o(null),C=o(!1),I=(n,e,a)=>{const l=[];for(let m=n;m<=e;m+=a)l.push(m);return l},H=()=>{M.value.click()};function P(n){u.value={file:n.target.files[0],url:URL.createObjectURL(n.target.files[0])}}const q=o(I(10,100,10)),O=o(I(150,500,50)),R=o(I(600,1e3,100)),F=o([...q.value,...O.value,...R.value]);function T(n){let e=[...n.dataTransfer.items].filter(a=>a.kind==="file").map(a=>a.getAsFile());u.value={file:e[0],url:Z(e[0])}}function G(){j.value=F.value[V.value]}async function $(n){if(n.preventDefault(),!u.value){k.fire("เกิดข้อผิดพลาด","กรุณาอัพโหลดสลิปการทำรายการ","error");return}b.value=!0;const e={headers:{"content-type":"multipart/form-data"}},a=new FormData;a.append("user_id",s.value?s.value.id:7),a.append("donor_id",s.value?s.value.id:null),a.append("donor_name",s.value?s.value.name:"ไม่ระบุนาม"),a.append("amounts",j.value),a.append("transfer_date",_.value.toDateString()),a.append("transfer_time",y.value.hours+":"+y.value.minutes),a.append("slip",u.value.file);try{let l=await axios.post("/supports/donates",a,e);l.data&&l.data.success?(k.fire("เสร็จสมบูรณ์","ขอบคุณที่สนับสนุนเว็บไซต์เพลินด์ ทางทีมงานจะตรวจสอบข้อมูลและทำการอัพเดทข้อมูลให้เร็วที่สุด","success"),u.value=null,_.value=new Date,y.value=null):k.fire("เกิดข้อผิดพลาด",l.data.message,"error"),b.value=!1}catch(l){k.fire("เกิดข้อผิดพลาด",l.response.data.message,"error")}b.value=!1}function z(){u.value=null}async function E(){if(w.value.length===8){D.value=!0;try{let n=await axios.get(`/supports/donates/donor/${w.value}`);n.data&&n.data.success&&(s.value=n.data.donor),w.value=null,D.value=!1}catch{k.fire("ขออภัย","ไม่พบสมาชิกที่ระบุ","error")}}else s.value=null}function A(){s.value=null}return(n,e)=>{const a=Y("VueDatePicker");return i(),p("div",null,[r(d(ee),null,{default:v(()=>[...e[6]||(e[6]=[t("title",null,S("Donate"),-1)])]),_:1}),t("div",te,[t("div",le,[t("div",se,[e[8]||(e[8]=t("img",{class:"",src:"/storage/images/banner/badges-icon.png",alt:"forums-icon"},null,-1)),r(d(h),{href:"/",class:"text-xl font-bold text-white underline flex items-center"},{default:v(()=>[...e[7]||(e[7]=[g(" สนับสนุน เว็บไซต์ เพลินด์ ",-1)])]),_:1})]),t("div",ae,[r(d(h),{href:"/",class:"text-xl font-bold text-white mx-2 underline flex items-center"},{default:v(()=>[r(d(x),{icon:"heroicons-solid:home"}),e[9]||(e[9]=g("Home",-1))]),_:1}),r(d(h),{href:"/play/newsfeed",class:"text-xl font-bold text-white mx-2 underline flex items-center"},{default:v(()=>[r(d(x),{icon:"heroicons:newspaper-solid"}),e[10]||(e[10]=g("กระดานข่าว",-1))]),_:1})])])]),t("div",oe,[t("div",ne,[e[25]||(e[25]=L('<h2 class="mb-2 text-xl font-semibold text-gray-700 dark:text-white"> เพลินด์ขอขอบคุณผู้ให้การสนับสนุนทุกท่าน </h2><h4 class="mb-2 text-base font-semibold text-gray-700 dark:text-white"> การสนับสนุนจากท่านจะถูกจัดสรรให้กับสมาชิกผู้ใช้งาน </h4><h2 class="mb-2 text-xl font-semibold text-gray-700 dark:text-white">ข้อมูลการสนับสนุน</h2><div class="px-6"><ol class="text-red-600 list-decimal"><li>โอนเงินเข้าบัญชีหมายเลข 677-7724-60-5 ธนาคารกรุงไทย</li><li>ชื่อบัญชี นายอุทัย สาเหล็ม</li><li>กรอกข้อมูลให้ครบถ้วน</li><li>บันทึกข้อมูล</li></ol></div>',4)),t("form",{id:"create-new-academy-form",onSubmit:c($,["prevent"]),class:"flex flex-col justify-center",enctype:"multipart/form-data"},[t("div",re,[s.value?f("",!0):(i(),p("div",de,[e[11]||(e[11]=t("label",{for:"personal_code",class:"block mb-2 font-medium text-gray-700"},"รหัสประจำตัวสมาชิก (ถ้ามี) ",-1)),U(t("input",{type:"text",id:"personal_code",name:"personal_code","onUpdate:modelValue":e[0]||(e[0]=l=>w.value=l),onInput:E,class:"w-full p-2 border border-gray-400 rounded-lg focus:outline-none focus:border-blue-400"},null,544),[[J,w.value]])])),s.value?(i(),p("h3",ie," ผู้สนับสนุนทุนการเรียนรู้ ")):f("",!0),D.value?(i(),p("div",ue,[...e[12]||(e[12]=[L('<div class="flex space-x-4 animate-pulse"><div class="w-12 h-12 bg-gray-300 rounded-full"></div><div class="flex-1 py-1 space-y-4"><div class="w-3/4 h-4 bg-gray-300 rounded"></div><div class="space-y-2"><div class="h-4 bg-gray-300 rounded"></div></div></div></div>',1)])])):f("",!0),s.value&&!D.value?(i(),p("figure",pe,[t("button",{onClick:c(A,["prevent"]),class:"absolute top-0 right-0 p-1 m-2 bg-white rounded-full opacity-60"},[r(d(x),{icon:"heroicons-outline:trash",class:"w-5 h-5 text-red-500"})]),t("div",ce,[t("img",{class:"w-16 h-16 rounded-full",src:s.value.profile_photo_url,alt:s.value.name+"photo"},null,8,me)]),t("div",ve,[t("div",fe,[t("span",ge,S(s.value.name),1),e[13]||(e[13]=t("span",{class:""},"รหัสประจำตัว",-1)),t("span",xe,S(s.value.personal_code),1)]),r(d(h),{href:s.value.referal_link,class:"text-base text-white bg-teal-500 py-1 px-4 rounded-lg"},{default:v(()=>[...e[14]||(e[14]=[g(" สมัครต่อ ",-1)])]),_:1},8,["href"])])])):f("",!0),t("div",null,[e[15]||(e[15]=t("label",{for:"money-quantity",class:"block mb-1 text-gray-700 dark:text-white"}," จำนวนเงิน ",-1)),U(t("select",{id:"money-quantity","onUpdate:modelValue":e[1]||(e[1]=l=>V.value=l),onChange:G,class:"w-full px-3 py-2 text-center border border-gray-400 rounded-lg dark:bg-gray-700 dark:text-white dark:border-none"},[(i(!0),p(K,null,W(F.value,(l,m)=>(i(),p("option",{key:m,value:m,selected:l.value==20},S(l),9,be))),128))],544),[[Q,V.value]])])]),t("div",ye,[u.value?(i(),p("div",we,[t("div",he,[t("img",{src:u.value.url,class:"rounded-lg"},null,8,ke),t("button",{onClick:c(z,["prevent"]),class:"absolute p-2 bg-gray-100 rounded-full cursor-pointer top-1 left-1"},[r(d(x),{icon:"fa-solid:trash-alt",class:"w-5 h-5 text-red-500"})])])])):f("",!0)]),u.value?f("",!0):(i(),p("div",_e,[e[20]||(e[20]=t("p",null,"สลิปการทำรายการ",-1)),t("div",{id:"dropzone",onDragover:e[2]||(e[2]=c(l=>C.value=!0,["prevent"])),onDragleave:e[3]||(e[3]=c(l=>C.value=!1,["prevent"])),onDrop:c(T,["prevent"]),class:X([C.value?"bg-blue-200 border-blue-400":"bg-gray-200 border-gray-400","relative w-full p-2 border-2 border-dashed rounded-lg"])},[t("div",De,[e[18]||(e[18]=t("img",{class:"w-8 h-8 mx-auto opacity-70",src:"https://www.svgrepo.com/show/357902/image-upload.svg",alt:""},null,-1)),t("h3",Se,[t("p",Ve,[e[16]||(e[16]=t("span",null,"Drag and drop",-1)),t("button",{class:"mx-2 plearnd-btn-primary w-36",onClick:c(H,["prevent"])}," or browse "),e[17]||(e[17]=t("span",null,"to upload",-1))]),t("input",{id:"slip-file-upload",type:"file",accept:"image/*",ref_key:"inputSlip",ref:M,class:"hidden",onChange:c(P,["prevent"])},null,544)]),e[19]||(e[19]=t("p",{class:"mt-1 text-xs text-gray-500"},"PNG, JPG, GIF up to 4MB",-1))])],34)])),e[23]||(e[23]=t("div",{class:"grid grid-cols-1 mt-4"},[t("p",{class:"block mb-1 text-gray-700 dark:text-white"},"วัน/เวลา ที่ทำรายการ")],-1)),t("div",Ce,[t("div",Ie,[t("div",je,[t("div",Me,[r(a,{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=l=>_.value=l),format:"dd-MM-yyyy","enable-time-picker":!1},null,8,["modelValue"])])]),t("div",Fe,[t("div",Le,[r(a,{modelValue:y.value,"onUpdate:modelValue":e[5]||(e[5]=l=>y.value=l),format:"HH:mm","calendar-button":!1,"time-picker":"",required:""},null,8,["modelValue"])])])])]),e[24]||(e[24]=t("div",{class:"grid grid-cols-1 gap-4"},[t("p",{class:"block my-1 text-sm text-red-500 dark:text-white"}," กรุณาตรวจสอบวันที่และเวลาให้ตรงกับใบสลิปโอนเงิน (หากเกิดข้อผิดพลาดจะไม่สามารถคืนเงินได้) ")],-1)),t("div",Ue,[t("button",{type:"submit",disabled:b.value,class:"flex items-center justify-center px-4 py-2 text-white bg-teal-500 rounded-lg hover:bg-teal-700 dark:bg-teal-600 dark:text-white dark:hover:bg-teal-900"},[b.value?(i(),N(d(x),{key:0,icon:"fa-solid:spinner",class:"w-5 h-5 mx-1 animate-spin"})):(i(),N(d(x),{key:1,icon:"fa-solid:save",class:"w-5 h-5 mx-1"})),e[21]||(e[21]=g(" บันทึกข้อมูล ",-1))],8,Ne),r(d(h),{href:"/",class:"px-4 py-2 text-white bg-red-400 rounded-lg hover:bg-red-700 dark:bg-red-600 dark:text-white dark:hover:bg-red-900"},{default:v(()=>[...e[22]||(e[22]=[g(" ยกเลิก ",-1)])]),_:1})])],32)])])])}}};export{Oe as default};
