import{r as s,f as X,c as d,b as m,w as x,m as Y,o as i,a as t,i as r,d as w,l as L,F as T,n as $,t as M,p as j,u as G,I as q,q as B,s as N}from"./DuB962GZ.js";import Z from"./DlGh3WWW.js";import{S as _}from"./BQxta0Da.js";import"./fgoR5NrX.js";import"./CZOFP7UD.js";import"./Dz4Xxw99.js";import"./Dn9pp5cj.js";const ee={class:"plearnd-card mt-4"},te={class:"grid grid-cols-1 gap-4 mt-4"},le=["value","selected"],oe={class:"grid grid-cols-1 gap-4 mt-4"},se=["value","selected"],ae={class:"grid grid-cols-1 gap-4 mt-4"},re={class:"w-full rounded-lg border border-gray-400 bg-gray-300 text-center py-2 px-3 dark:bg-gray-700 dark:text-white dark:border-none"},ne={class:"grid grid-cols-1 gap-4 mt-4"},de={key:0},ie={class:"relative mb-2 max-h-fit overflow-hidden"},ue=["src"],pe={key:0,class:"grid grid-cols-1 gap-4 mt-4"},ge={class:"text-center"},ve={class:"mt-2 text-sm font-medium text-gray-900"},me={class:"relative"},ce={class:"grid grid-cols-1 gap-4"},fe={class:"-mx-3 flex flex-wrap"},be={class:"w-full px-3 sm:w-1/2"},xe={class:""},we={class:"w-full px-3 sm:w-1/2"},ye={class:""},ke={class:"grid grid-cols-1 gap-4 mt-2"},he={key:0},Se={class:"relative mb-2 max-h-fit overflow-hidden"},De=["src"],Me={key:1,class:"grid grid-cols-1 gap-4 mt-4"},_e={class:"text-center"},Ce={class:"mt-2 text-sm font-medium text-gray-900"},Ie={class:"relative"},Pe={class:"mt-8 flex justify-end space-x-2"},qe={__name:"SupportLoan",setup(Ve){s(!1);const C=s(!1),c=s(20),v=s(1),y=s(0),f=s(0),k=s(0),h=s(0),u=s(null),p=s(null),S=s(new Date),b=s(null),I=s(null),P=s(null),g=s(!1),V=(a,e,o)=>{const l=[];for(let n=a;n<=e;n+=o)l.push(n);return l},R=()=>{I.value.click()},O=()=>{P.value.click()};function z(a){u.value={file:a.target.files[0],url:URL.createObjectURL(a.target.files[0])}}function A(a){p.value={file:a.target.files[0],url:URL.createObjectURL(a.target.files[0])}}const F=s(V(20,100,10)),U=s(V(1,15,1));function D(a=0,e=0){c.value=F.value[a],v.value=U.value[e],k.value=Math.floor(c.value*684/(v.value*64)),h.value=c.value>=50&&v.value>=5?k.value+v.value:k.value}function H(a){let e=[...a.dataTransfer.items].filter(o=>o.kind==="file").map(o=>o.getAsFile());u.value={file:e[0],url:N(e[0])}}function J(a){let e=[...a.dataTransfer.items].filter(o=>o.kind==="file").map(o=>o.getAsFile());p.value={file:e[0],url:N(e[0])}}X(()=>{D()});async function W(a){a.preventDefault(),C.value=!0;const e={headers:{"content-type":"multipart/form-data"}},o=new FormData;o.append("amounts",c.value),o.append("duration",v.value),o.append("total_views",h.value),o.append("transfer_date",S.value.toLocaleDateString()),o.append("transfer_time",b.value.hours+":"+b.value.minutes),o.append("slip",u.value.file),o.append("media_image",p.value.file);try{let l=await axios.post("/supports",o,e);l.data&&l.data.success?_.fire("เสร็จสมบูรณ์","เพิ่มแหล่งเรียนรู้ใหม่เรียบร้อยแล้ว","success"):_.fire("เกิดข้อผิดพลาด",l.data.message,"error")}catch(l){_.fire("เกิดข้อผิดพลาด",l.response.data.message,"error")}C.value=!1}function E(){u.value=null}function Q(){p.value=null}function K(){window.location="/"}return(a,e)=>{const o=Y("VueDatePicker");return i(),d("div",null,[m(Z,{title:"Support Plearnd.com"},{coverProfileCard:x(()=>[...e[10]||(e[10]=[t("div",{class:"hidden md:flex items-center max-w-7xl mx-auto jusb mt-2 shadow-lg bg-cover bg-no-repeat rounded-lg overflow-hidden",style:{backgroundImage:"url(/storage/images/banner/banner-bg.png)"}},[t("img",{class:"",src:"/storage/images/banner/badges-icon.png",alt:"forums-icon"}),t("p",{class:"text-white font-bold text-xl"},"สนับสนุน เว็บไซต์ เพลินด์")],-1)])]),leftSideWidget:x(()=>[...e[11]||(e[11]=[t("div",null,null,-1)])]),mainContent:x(()=>[t("div",ee,[e[28]||(e[28]=t("h2",{class:"text-xl font-semibold text-gray-700 dark:text-white mb-2"}," ข้อมูลการสนับสนุน ",-1)),t("form",{id:"create-new-academy-form",onSubmit:r(W,["prevent"]),class:"flex flex-col justify-center",enctype:"multipart/form-data"},[t("div",te,[t("div",null,[e[12]||(e[12]=t("label",{for:"money-quantity",class:"block text-gray-700 dark:text-white mb-1"}," จำนวนเงิน ",-1)),L(t("select",{id:"money-quantity","onUpdate:modelValue":e[0]||(e[0]=l=>y.value=l),onChange:e[1]||(e[1]=r(l=>D(y.value,f.value),["prevent"])),class:"w-full text-center rounded-lg border border-gray-400 py-2 px-3 dark:bg-gray-700 dark:text-white dark:border-none"},[(i(!0),d(T,null,$(F.value,(l,n)=>(i(),d("option",{key:n,value:n,selected:l.value==20},M(l),9,le))),128))],544),[[j,y.value]])])]),t("div",oe,[t("div",null,[e[13]||(e[13]=t("label",{for:"time-to-show-Product-media-dropdown",class:"block text-gray-700 dark:text-white mb-1 w-3/4"},"ระยะเวลาแสดงผลสื่อประชาสัมพันธ์สินค้า(วินาที/ครั้ง)",-1)),L(t("select",{id:"time-to-show-Product-media-dropdown","onUpdate:modelValue":e[2]||(e[2]=l=>f.value=l),onChange:e[3]||(e[3]=r(l=>D(0,f.value),["prevent"])),class:"w-full text-center rounded-lg border border-gray-400 py-2 px-3 dark:bg-gray-700 dark:text-white dark:border-none"},[(i(!0),d(T,null,$(U.value,(l,n)=>(i(),d("option",{key:n,value:n,selected:l.value==1},M(l),9,se))),128))],544),[[j,f.value]])])]),t("div",ae,[t("div",null,[e[14]||(e[14]=t("p",{class:"block text-gray-700 dark:text-white mb-1"}," จำนวนครั้งที่ผู้ใช้สามารถกดรับและแสดงผลสื่อประชาสัมพันธ์สินค้า ",-1)),t("p",re,M(h.value),1)])]),t("div",ne,[u.value?(i(),d("div",de,[t("div",ie,[t("img",{src:u.value.url,class:"rounded-lg"},null,8,ue),t("button",{onClick:r(E,["prevent"]),class:"absolute top-1 left-1 rounded-full cursor-pointer bg-gray-100 p-2"},[m(G(q),{icon:"fa-solid:trash-alt",class:"w-5 h-5 text-red-500"})])])])):w("",!0)]),u.value?w("",!0):(i(),d("div",pe,[e[19]||(e[19]=t("p",null,"สลิปการทำรายการ",-1)),t("div",{id:"dropzone",onDragover:e[4]||(e[4]=r(l=>g.value=!0,["prevent"])),onDragleave:e[5]||(e[5]=r(l=>g.value=!1,["prevent"])),onDrop:r(H,["prevent"]),class:B([g.value?"bg-blue-200 border-blue-400":"bg-gray-200 border-gray-400","w-full relative border-2 border-dashed rounded-lg p-2"])},[t("div",ge,[e[17]||(e[17]=t("img",{class:"mx-auto h-8 w-8 opacity-70",src:"https://www.svgrepo.com/show/357902/image-upload.svg",alt:""},null,-1)),t("h3",ve,[t("p",me,[e[15]||(e[15]=t("span",null,"Drag and drop",-1)),t("button",{class:"plearnd-btn-primary w-36 mx-2",onClick:r(R,["prevent"])}," or browse "),e[16]||(e[16]=t("span",null,"to upload",-1))]),t("input",{id:"slip-file-upload",type:"file",accept:"image/*",ref_key:"inputSlip",ref:I,class:"hidden",onChange:r(z,["prevent"])},null,544)]),e[18]||(e[18]=t("p",{class:"mt-1 text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1))])],34)])),e[26]||(e[26]=t("div",{class:"grid grid-cols-2 gap-4 mt-4"},[t("p",{class:"block text-gray-700 dark:text-white mb-1"},"วัน/เวลา ที่ทำรายการ")],-1)),t("div",ce,[t("div",fe,[t("div",be,[t("div",xe,[m(o,{modelValue:S.value,"onUpdate:modelValue":e[6]||(e[6]=l=>S.value=l),format:"dd-MM-yyyy","enable-time-picker":!1},null,8,["modelValue"])])]),t("div",we,[t("div",ye,[m(o,{modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=l=>b.value=l),format:"HH:mm","calendar-button":!1,"time-picker":"",required:""},null,8,["modelValue"])])])])]),e[27]||(e[27]=t("div",{class:"grid grid-cols-1 gap-4"},[t("p",{class:"block text-red-500 text-sm dark:text-white mb-1"}," กรุณาตรวจสอบวันที่และเวลาให้ตรงกับใบสลิปโอนเงิน (หากเกิดข้อผิดพลาดจะไม่สามารถคืนเงินได้) ")],-1)),t("div",ke,[p.value?(i(),d("div",he,[t("div",Se,[t("img",{src:p.value.url,class:"rounded-lg"},null,8,De),t("button",{onClick:r(Q,["prevent"]),class:"absolute top-1 left-1 rounded-full cursor-pointer bg-gray-100 p-2"},[m(G(q),{icon:"fa-solid:trash-alt",class:"w-5 h-5 text-red-500"})])])])):w("",!0)]),p.value?w("",!0):(i(),d("div",Me,[e[24]||(e[24]=t("p",null,"รูปสื่อประชาสัมพันธ์",-1)),t("div",{id:"dropzone",onDragover:e[8]||(e[8]=r(l=>g.value=!0,["prevent"])),onDragleave:e[9]||(e[9]=r(l=>g.value=!1,["prevent"])),onDrop:r(J,["prevent"]),class:B([g.value?"bg-blue-200 border-blue-400":"bg-gray-200 border-gray-400","w-full relative border-2 border-dashed rounded-lg p-2"])},[t("div",_e,[e[22]||(e[22]=t("img",{class:"mx-auto h-8 w-8 opacity-70",src:"https://www.svgrepo.com/show/357902/image-upload.svg",alt:""},null,-1)),t("h3",Ce,[t("p",Ie,[e[20]||(e[20]=t("span",null,"Drag and drop",-1)),t("button",{class:"plearnd-btn-primary w-36 mx-2",onClick:r(O,["prevent"])}," or browse "),e[21]||(e[21]=t("span",null,"to upload",-1))]),t("input",{id:"media-image-upload",type:"file",accept:"image/*",ref_key:"inputMediaImage",ref:P,class:"hidden",onChange:r(A,["prevent"])},null,544)]),e[23]||(e[23]=t("p",{class:"mt-1 text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1))])],34)])),t("div",Pe,[e[25]||(e[25]=t("button",{type:"submit",class:"bg-teal-500 text-white px-4 py-2 rounded-lg hover:bg-teal-700 dark:bg-teal-600 dark:text-white dark:hover:bg-teal-900"}," บันทึกข้อมูล ",-1)),t("button",{type:"button",onClick:r(K,["prevent"]),class:"bg-red-400 text-white px-4 py-2 rounded-lg hover:bg-red-700 dark:bg-red-600 dark:text-white dark:hover:bg-red-900"}," ยกเลิก ")])],32)])]),rightSideWidget:x(()=>[...e[29]||(e[29]=[t("div",null,null,-1)])]),_:1})])}}};export{qe as default};
