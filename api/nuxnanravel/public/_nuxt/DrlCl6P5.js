import{u as C}from"./Czq9JhUr.js";import{S as p}from"./BQxta0Da.js";import A from"./DlGh3WWW.js";import{_ as S}from"./CeNU_Arc.js";import{_ as x}from"./CWJPiVh7.js";import{_ as $}from"./9FJTssRe.js";import{r as s,j as I,w as m,o as r,a as d,t as M,c as u,F as D,n as B,b as n}from"./DuB962GZ.js";import"./fgoR5NrX.js";import"./CZOFP7UD.js";import"./Dz4Xxw99.js";import"./Dn9pp5cj.js";const H={class:""},T={class:"section-header my-4 p-4 bg-white rounded-xl shadow-lg"},U={class:"section-header-info"},F={class:"section-title font-prompt"},L={class:"flex flex-wrap justify-between gap-4"},G={__name:"AcademyCourses",props:{academy:Object,courses:Object,isAcademyAdmin:Boolean,app_url:String},setup(i){const e=i;s(!1);const g=s(e.academy.data.logo?"/storage/images/academies/logos/"+e.academy.data.logo:"/storage/images/academies/logos/default_logo.png"),y=s(e.academy.data.cover?"/storage/images/academies/covers/"+e.academy.data.cover:"/storage/images/academies/covers/default_cover.png"),c=s(e.academy.data.name),l=s(e.academy.data.slogan);C({name:"",slogan:"",address:"",cover:null,logo:null});async function f(o){const a=new FormData;a.append("cover",o),a.append("_method","patch"),await axios.post(`/academies/${e.academy.data.id}/update`,a)}async function v(o){const a=new FormData;a.append("logo",o),a.append("_method","patch"),await axios.post(`/academies/${e.academy.data.id}/update`,a)}async function b(o){await axios.patch(`/academies/${e.academy.data.id}/update`,{name:o})}async function h(o){await axios.patch(`/academies/${e.academy.data.id}/update`,{slogan:o})}async function _(){try{let o=await axios.post(`/academies/${e.academy.data.id}/members`);o.data.success&&(e.academy.data.isMember=o.data.isMember,e.academy.data.total_students=o.data.totalStudents,o.data.isMember?p.fire("เสร็จสิ้น","ขอเป็นสมาชิกเรียบร้อยแล้ว","success"):p.fire("เสร็จสิ้น","ออกจากการเป็นสมาชิกเรียบร้อยแล้ว","success"))}catch{}}return(o,a)=>(r(),I(A,{title:"Academy",appUrl:e.app_url},{coverProfileCard:m(()=>[d("div",H,[n(S,{coverImage:y.value,logoImage:g.value,coverHeader:c.value,"onUpdate:coverHeader":a[0]||(a[0]=t=>c.value=t),coverSubheader:l.value,"onUpdate:coverSubheader":a[1]||(a[1]=t=>l.value=t),model:"Academy",modelTable:"academies",modelableId:e.academy.data.id,modelableType:"app/models/Academy",modelableRoute:`/academies/${e.academy.data.id}`,modelData:e.academy.data,subModelData:e.courses.data,subModelNameTh:"รายวิชา",isAcademyAdmin:e.isAcademyAdmin,onCoverImageChange:a[2]||(a[2]=t=>{f(t)}),onLogoImageChange:a[3]||(a[3]=t=>{v(t)}),onHeaderChange:a[4]||(a[4]=t=>{b(t)}),onSubheaderChange:a[5]||(a[5]=t=>{h(t)}),onRequestTobeMember:a[6]||(a[6]=t=>_())},null,8,["coverImage","logoImage","coverHeader","coverSubheader","modelableId","modelableRoute","modelData","subModelData","isAcademyAdmin"])]),n($,{academy:i.academy,activeTab:1},null,8,["academy"])]),leftSideWidget:m(()=>[...a[7]||(a[7]=[d("div",null,null,-1)])]),mainContent:m(()=>[d("div",T,[d("div",U,[d("h2",F,"รายวิชาทั้งหมด "+M(" "+e.courses.data.length+" วิชา"||"ยังไม่มีรายวิชา"),1)])]),d("div",L,[(r(!0),u(D,null,B(e.courses.data,(t,w)=>(r(),u("div",{key:w,class:"w-full sm:w-[48%]"},[n(x,{course:t},null,8,["course"])]))),128))])]),_:1},8,["appUrl"]))}};export{G as default};
