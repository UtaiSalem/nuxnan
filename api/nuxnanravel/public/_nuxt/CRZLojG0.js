import{a as n}from"./B9ygI19o.js";import{u as $,L as D,H as _}from"./Czq9JhUr.js";import x from"./DlGh3WWW.js";import{_ as k}from"./DK_Nz8t5.js";import{c,o as u,a as d,ae as H,t as g,r as m,b as l,w as r,F as T,n as L,u as v,e as P}from"./DuB962GZ.js";import{S as h}from"./BQxta0Da.js";import"./fgoR5NrX.js";import"./CZOFP7UD.js";import"./Dz4Xxw99.js";import"./Dn9pp5cj.js";const A={class:"relative bg-white shadow rounded-lg overflow-hidden mb-4"},N={class:"absolute bottom-4 left-4 flex items-end"},R=["src"],F={class:"ml-4 mb-2"},B={class:"text-3xl font-bold text-white shadow-black drop-shadow-md"},U={class:"text-white drop-shadow-md"},j={__name:"ProfileCover",props:{coverImage:String,logoImage:String,coverHeader:String,coverSubheader:String,model:String,modelTable:String,modelableId:Number,modelableType:String,modelableRoute:String,modelData:Object,subModelData:Array,subModelNameTh:String},setup(s){return(a,i)=>(u(),c("div",A,[d("div",{class:"h-64 bg-gray-300 w-full bg-cover bg-center",style:H({backgroundImage:`url(${s.coverImage})`})},null,4),d("div",N,[d("img",{src:s.logoImage,class:"w-32 h-32 rounded-full border-4 border-white shadow-lg bg-white"},null,8,R),d("div",F,[d("h1",B,g(s.coverHeader),1),d("p",U,g(s.coverSubheader),1)])])]))}},O={class:"bg-white rounded-lg"},Y={__name:"Academy",props:{academy:Object,courses:Object,imagePath:String},setup(s){const a=s,i=m(!1),f=m(a.imagePath+"storage/images/"+a.academy.data.logo||a.imagePath+"storage/images/default_logo.png"),y=m(a.imagePath+"storage/images/"+a.academy.data.cover||a.imagePath+"storage/images/default_cover.png"),b=m(a.academy.data.name),p=m(a.academy.data.slogan);$({name:"",slogan:"",address:"",cover:null,logo:null});async function S(t){const e=new FormData;e.append("cover",t),e.append("_method","patch"),await n.post(`/academies/${a.academy.data.id}/update`,e)}async function w(t){const e=new FormData;e.append("logo",t),e.append("_method","patch"),await n.post(`/academies/${a.academy.data.id}/update`,e)}async function C(t){await n.patch(`/academies/${a.academy.data.id}/update`,{name:t})}async function I(t){await n.patch(`/academies/${a.academy.data.id}/update`,{slogan:t})}async function M(){try{let t=await n.post(`/academies/${a.academy.data.id}/members`);t.data.success&&(a.academy.data.isMember=t.data.isMember,a.academy.data.total_students=t.data.totalStudents,t.data.isMember?h.fire("เสร็จสิ้น","ขอเป็นสมาชิกเรียบร้อยแล้ว","success"):h.fire("เสร็จสิ้น","ออกจากการเป็นสมาชิกเรียบร้อยแล้ว","success"))}catch{}}return(t,e)=>(u(),c("div",null,[l(x,null,{header:r(()=>[l(v(_),{title:"Academy"})]),navbar:r(()=>[l(k,{isDarkMode:i.value,onToggleDarkMode:e[0]||(e[0]=o=>i.value=!i.value)},null,8,["isDarkMode"])]),coverProfileCard:r(()=>[l(j,{coverImage:y.value,logoImage:f.value,coverHeader:b.value,"onUpdate:coverHeader":e[1]||(e[1]=o=>b.value=o),coverSubheader:p.value,"onUpdate:coverSubheader":e[2]||(e[2]=o=>p.value=o),model:"Academy",modelTable:"academies",modelableId:a.academy.data.id,modelableType:"app/models/Academy",modelableRoute:`/academies/${a.academy.data.id}`,modelData:a.academy.data,subModelData:a.courses.data,subModelNameTh:"รายวิชา",onCoverImageChange:e[3]||(e[3]=o=>{S(o)}),onLogoImageChange:e[4]||(e[4]=o=>{w(o)}),onHeaderChange:e[5]||(e[5]=o=>{C(o)}),onSubheaderChange:e[6]||(e[6]=o=>{I(o)}),onRequestTobeMember:e[7]||(e[7]=o=>M())},null,8,["coverImage","logoImage","coverHeader","coverSubheader","modelableId","modelableRoute","modelData","subModelData"])]),leftSideWidget:r(()=>[...e[8]||(e[8]=[d("div",null,null,-1)])]),mainContent:r(()=>[d("div",O,[(u(!0),c(T,null,L(a.courses.data,o=>(u(),c("div",{key:o.id,class:"my-2"},[l(v(D),{href:`/courses/${o.id}`},{default:r(()=>[P(g(o.name),1)]),_:2},1032,["href"])]))),128))])]),rightSideWidget:r(()=>[...e[9]||(e[9]=[d("div",null,null,-1)])]),_:1})]))}};export{Y as default};
