import{_ as H}from"./BgB4xtqt.js";import{z as M,an as O,af as G,r as l,N as k,f as J,c as t,j,d as a,b as d,a as s,u,t as m,e as _,q as K,F as B,n as E,O as P,o as e,I as c}from"./DuB962GZ.js";import{_ as Q,a as U}from"./BtFEd6Q7.js";import{C as W}from"./DvOU9n0k.js";import{u as X}from"./CaSR6SuD.js";import{u as Y}from"./BmpSa16v.js";import"./BQxta0Da.js";const Z={class:"max-w-5xl mx-auto px-4 py-8"},ee={key:2,class:"space-y-8"},te={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700"},se={class:"flex items-start justify-between mb-4"},re={class:"flex items-center gap-3"},ae={class:"w-12 h-12 rounded-xl bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400"},oe={class:"text-2xl font-bold text-gray-900 dark:text-white"},ne={class:"flex items-center gap-3 text-sm text-gray-500 mt-1"},le={key:0,class:"flex items-center gap-1"},ie={key:1,class:"flex items-center gap-1"},de={key:0},ue={key:0,class:"prose prose-sm dark:prose-invert max-w-none mt-6"},ce={key:1,class:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4"},ge=["src"],me={key:0,class:"mt-8"},be={key:1,class:"space-y-6"},ve={key:0,class:"bg-blue-50 dark:bg-blue-900/10 rounded-2xl p-6 border border-blue-100 dark:border-blue-800"},_e={class:"flex justify-between items-start mb-4"},fe={class:"font-bold text-blue-900 dark:text-blue-300 flex items-center gap-2"},xe={class:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-blue-100 dark:border-blue-800/50 shadow-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap"},pe={key:0,class:"mt-4 grid grid-cols-2 sm:grid-cols-4 gap-3"},ke=["src"],he={key:1,class:"mt-4 bg-amber-50 dark:bg-amber-900/20 p-4 rounded-xl border border-amber-100 dark:border-amber-800/50 flex items-center gap-3"},ye={class:"p-2 bg-amber-100 dark:bg-amber-800/50 rounded-full text-amber-600 dark:text-amber-400"},we={class:"text-amber-700 dark:text-amber-400"},Ce={key:1},Ie={key:3,class:"text-center py-20 text-gray-500"},Fe=M({__name:"[assignmentId]",setup(Ae){const h=O(),N=G(),V=X();Y();const f=h.params.id,$=h.params.assignmentId,b=l(!0),r=l(null),F=l(null),L=l([]),x=l(!1),y=l(""),w=l([]),C=l([]),I=l([]);l(!1);const v=l(!1),T=()=>{P(`/courses/${f}/assignments`)},A=async()=>{b.value=!0;try{const n=await N.get(`/api/courses/${f}/assignments/${$}`);r.value=n.assignment,F.value=n.course,L.value=n.groups||[],x.value=n.isCourseAdmin}catch(n){console.error("Failed to fetch assignment:",n),V.toast("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ","error")}finally{b.value=!1}},o=k(()=>x.value?null:r.value?.answers?.[0]||null),S=k(()=>o.value?o.value.graded_score!==null?"graded":"submitted":"not_started"),p=k(()=>{const n={not_started:{icon:"fluent:circle-24-regular",text:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏≥",color:"text-gray-700 dark:text-gray-300",bgColor:"bg-gray-50 dark:bg-gray-800 ring-1 ring-inset ring-gray-600/20 dark:ring-gray-500/30"},submitted:{icon:"fluent:checkmark-circle-24-filled",text:"‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß - ‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à",color:"text-blue-700 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/30 ring-1 ring-inset ring-blue-700/10 dark:ring-blue-500/30"},graded:{icon:"fluent:trophy-24-filled",text:"‡∏ï‡∏£‡∏ß‡∏à‡πÅ‡∏•‡πâ‡∏ß",color:"text-amber-700 dark:text-amber-400",bgColor:"bg-amber-50 dark:bg-amber-900/30 ring-1 ring-inset ring-amber-600/20 dark:ring-amber-500/30"}};return n[S.value]||n.not_started}),D=()=>{o.value&&(y.value=o.value.content||"",C.value=[...o.value.images||[]],I.value=[],w.value=[],v.value=!0)},z=()=>{v.value=!1,y.value="",w.value=[],C.value=[],I.value=[]},R=n=>n?new Date(n).toLocaleString("th-TH",{dateStyle:"medium",timeStyle:"short"}):"-";return J(()=>{A()}),(n,i)=>{const q=H;return e(),t("div",Z,[b.value?(e(),j(W,{key:0})):a("",!0),b.value?a("",!0):(e(),t("button",{key:1,onClick:T,class:"mb-6 flex items-center gap-2 text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors"},[d(u(c),{icon:"fluent:arrow-left-24-regular",class:"w-5 h-5"}),i[0]||(i[0]=s("span",null,"‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏ß‡∏°‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô",-1))])),!b.value&&r.value?(e(),t("div",ee,[s("div",te,[s("div",se,[s("div",re,[s("div",ae,[d(u(c),{icon:"fluent:clipboard-task-24-filled",class:"w-6 h-6"})]),s("div",null,[s("h1",oe,m(r.value.title),1),s("div",ne,[r.value.points?(e(),t("span",le,[d(u(c),{icon:"fluent:star-20-filled",class:"w-4 h-4 text-amber-500"}),_(" "+m(r.value.points)+" ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ",1)])):a("",!0),r.value.due_date?(e(),t("span",ie,[d(u(c),{icon:"fluent:calendar-ltr-20-regular",class:"w-4 h-4"}),_(" ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡πà‡∏á: "+m(R(r.value.due_date)),1)])):a("",!0)])])]),x.value?a("",!0):(e(),t("div",de,[s("div",{class:K(["inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold shadow-sm",p.value.bgColor+" "+p.value.color])},[d(u(c),{icon:p.value.icon,class:"w-5 h-5"},null,8,["icon"]),_(" "+m(p.value.text),1)],2)]))]),r.value.description?(e(),t("div",ue,[d(q,{content:r.value.description},null,8,["content"])])):a("",!0),r.value.images?.length?(e(),t("div",ce,[(e(!0),t(B,null,E(r.value.images,g=>(e(),t("img",{key:g.id,src:g.full_url||g.image_url,class:"w-full h-40 object-cover rounded-xl shadow-sm hover:opacity-95 transition-opacity cursor-pointer border border-gray-100 dark:border-gray-700"},null,8,ge))),128))])):a("",!0)]),x.value?(e(),t("div",me,[r.value?(e(),j(Q,{key:0,assignment:r.value,courseId:u(f)},null,8,["assignment","courseId"])):a("",!0)])):(e(),t("div",be,[o.value&&!v.value?(e(),t("div",ve,[s("div",_e,[s("h3",fe,[d(u(c),{icon:"fluent:document-checkmark-24-filled",class:"w-6 h-6"}),i[1]||(i[1]=_(" ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ",-1))]),S.value!=="graded"?(e(),t("button",{key:0,onClick:D,class:"text-sm font-semibold text-blue-600 hover:text-blue-700 flex items-center gap-1"},[d(u(c),{icon:"fluent:edit-16-filled",class:"w-4 h-4"}),i[2]||(i[2]=_(" ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ",-1))])):a("",!0)]),s("div",xe,m(o.value.content),1),o.value.images?.length?(e(),t("div",pe,[(e(!0),t(B,null,E(o.value.images,g=>(e(),t("img",{key:g.id,src:g.full_url||g.image_url,class:"w-full h-32 object-cover rounded-lg border border-blue-100 dark:border-blue-800"},null,8,ke))),128))])):a("",!0),o.value.graded_score!==null?(e(),t("div",he,[s("div",ye,[d(u(c),{icon:"fluent:trophy-24-filled",class:"w-6 h-6"})]),s("div",null,[i[3]||(i[3]=s("div",{class:"font-bold text-amber-900 dark:text-amber-300"},"‡πÄ‡∏Ç‡πâ‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡πÅ‡∏•‡πâ‡∏ß",-1)),s("div",we,"‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô "+m(o.value.graded_score)+" / "+m(r.value.points),1)])])):a("",!0)])):a("",!0),!o.value||v.value?(e(),t("div",Ce,[d(U,{assignment:r.value,courseId:u(f),existingAnswer:v.value?o.value:null,isEditing:v.value,onSubmitted:A,onCancel:z},null,8,["assignment","courseId","existingAnswer","isEditing"])])):a("",!0)]))])):b.value?a("",!0):(e(),t("div",Ie,[...i[4]||(i[4]=[s("div",{class:"text-6xl mb-4"},"üòï",-1),s("h2",{class:"text-xl font-bold"},"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô",-1)])]))])}}});export{Fe as default};
