import{_ as D}from"./fgoR5NrX.js";import{V as se,z as Q,af as W,r as v,f as H,a4 as z,c as r,o as l,a as e,F as m,n as _,j as ae,w as G,t as d,b as u,u as a,I as c,Q as T,$ as le,A as re,N as oe,l as U,y as ne,ay as A,p as M,d as P,e as S,q as R,x as E,_ as ie}from"./DuB962GZ.js";import{u as de}from"./BfQfvC4n.js";const q=se("/images/default-avatar.png"),ue={class:"bg-white dark:bg-vikinger-dark-200 rounded-xl p-4 shadow-sm mb-6"},ce={key:0,class:"space-y-3"},ge={key:1,class:"space-y-4"},ve={class:"relative shrink-0 w-12 h-12 mt-1"},fe=["src","alt"],be={class:"flex-1 min-w-0"},pe={class:"text-sm font-medium text-gray-900 dark:text-white line-clamp-2 leading-tight group-hover:text-vikinger-purple transition-colors mb-1"},xe={class:"flex items-center justify-between"},he={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},me={class:"flex items-center justify-center text-gray-400 group-hover:text-vikinger-purple transition-colors mt-2"},ye={key:2,class:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm"},we=Q({__name:"MyCoursesWidget",setup(K){const B=W(),{user:$}=de(),f=v([]),k=v(!0),C=async()=>{if($.value){k.value=!0;try{const n=await B.get(`/api/courses/users/${$.value.id}/membered`);n.success&&(f.value=n.courses.data||n.courses)}catch(n){console.error("Failed to fetch my courses",n)}finally{k.value=!1}}},b=n=>n.cover?n.cover.startsWith("http")?n.cover:`${T().public.apiBase}/storage/images/courses/covers/${n.cover}`:"https://via.placeholder.com/150";return H(()=>{$.value&&C()}),z($,n=>{n&&C()}),(n,g)=>{const y=D;return l(),r("div",ue,[g[3]||(g[3]=e("h3",{class:"font-semibold text-gray-900 dark:text-white mb-4"},"คอร์สของฉัน",-1)),k.value?(l(),r("div",ce,[(l(),r(m,null,_(3,i=>e("div",{key:i,class:"flex gap-3 animate-pulse"},[...g[1]||(g[1]=[e("div",{class:"w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded-lg shrink-0"},null,-1),e("div",{class:"flex-1 space-y-2 py-1"},[e("div",{class:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e("div",{class:"h-2 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})],-1)])])),64))])):f.value.length>0?(l(),r("div",ge,[(l(!0),r(m,null,_(f.value,i=>(l(),ae(y,{key:i.id,to:`/courses/${i.id}`,class:"flex items-start gap-3 group hover:bg-gray-50 dark:hover:bg-vikinger-dark-100 p-2 -mx-2 rounded-lg transition-colors"},{default:G(()=>[e("div",ve,[e("img",{src:b(i),alt:i.name,class:"w-full h-full object-cover rounded-lg shadow-sm",onError:g[0]||(g[0]=w=>w.target.src="https://via.placeholder.com/150")},null,40,fe)]),e("div",be,[e("h4",pe,d(i.name),1),e("div",xe,[e("span",he,d(i.user?i.user.name:i.instructor?i.instructor.name:"Unknown"),1)])]),e("div",me,[u(a(c),{icon:"fluent:chevron-right-24-regular",class:"w-5 h-5"})])]),_:2},1032,["to"]))),128))])):(l(),r("div",ye,[u(a(c),{icon:"fluent:hat-graduation-24-regular",class:"w-8 h-8 mx-auto mb-2 opacity-50"}),g[2]||(g[2]=e("p",null,"คุณยังไม่ได้ลงทะเบียนเรียน",-1))]))])}}}),_e={class:"max-w-7xl mx-auto px-4 py-6"},ke={class:"flex flex-col lg:flex-row gap-6"},Ce={class:"flex-1 min-w-0"},$e={class:"flex flex-wrap gap-3 mb-6"},je={class:"relative flex-1 min-w-[200px]"},Pe=["value"],Ue=["value"],Ae=["value"],Be={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Le={key:1,class:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center shadow-lg"},Me={class:"text-gray-500 mb-4"},Se={key:2,class:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center shadow-lg"},Te={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ve=["onClick"],Ne={class:"relative h-44 overflow-hidden bg-gray-100 dark:bg-gray-700"},Ie=["src","alt"],Fe={class:"absolute bottom-3 left-3 px-2 py-1 bg-yellow-500 text-gray-900 rounded text-xs font-bold flex items-center gap-1"},Re={class:"p-4"},Ee={class:"flex items-center justify-between mb-3"},qe={key:0,class:"flex items-center gap-2"},De=["src","alt"],Qe={class:"min-w-0"},We={class:"text-xs text-gray-500 dark:text-gray-400"},He={class:"text-xs text-blue-500 truncate"},ze={class:"flex items-center gap-1 text-gray-700 dark:text-gray-300 font-bold"},Ge={class:"text-gray-800 dark:text-white font-bold mb-3 line-clamp-2 group-hover:text-blue-500 transition-colors"},Ke={class:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 pt-3 border-t border-gray-100 dark:border-gray-700"},Oe={class:"flex items-center gap-1"},Je={class:"flex items-center gap-1"},Xe={key:0,class:"mt-3 flex items-center justify-center gap-2 py-2 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-lg text-sm font-medium"},Ye={key:0,class:"mt-8 text-center"},Ze=["disabled"],et={class:"w-full lg:w-80 space-y-6 flex-shrink-0"},tt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden"},st={class:"divide-y divide-gray-100 dark:divide-gray-700"},at=["onClick"],lt=["src","alt"],rt={class:"flex-1 min-w-0"},ot={class:"text-sm font-medium text-gray-800 dark:text-white line-clamp-2 mb-1"},nt={class:"text-xs text-blue-500"},it={class:"p-1 text-gray-400 hover:text-blue-500 transition-colors flex-shrink-0"},dt={key:0,class:"p-4 text-center text-gray-500 text-sm"},ut={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4"},ct={class:"flex items-start gap-3 mb-4"},gt={class:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0"},vt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden"},ft={class:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between"},bt={class:"p-4 space-y-3"},pt={class:"relative h-24 rounded-lg overflow-hidden bg-gradient-to-r from-cyan-500 to-blue-500 p-3 flex items-end cursor-pointer hover:opacity-90 transition-opacity"},xt={class:"relative"},ht={class:"relative h-24 rounded-lg overflow-hidden bg-gradient-to-r from-green-500 to-teal-500 p-3 flex items-end cursor-pointer hover:opacity-90 transition-opacity"},mt={class:"relative"},yt=Q({__name:"index",setup(K){le({title:"Courses - Marketplace"});const B=W(),$=re(),f=v([]),k=v([]),C=v(!0),b=v(!1),n=v(null),g=v(""),y=v("all"),i=v("all"),w=v("latest"),p=v({currentPage:1,lastPage:1,total:0,perPage:8}),V=oe(()=>p.value.currentPage<p.value.lastPage),O=[{value:"all",label:"ทุกหมวดหมู่"},{value:"programming",label:"การเขียนโปรแกรม"},{value:"design",label:"การออกแบบ"},{value:"business",label:"ธุรกิจ"},{value:"marketing",label:"การตลาด"},{value:"math",label:"คณิตศาสตร์"},{value:"science",label:"วิทยาศาสตร์"},{value:"language",label:"ภาษา"},{value:"other",label:"อื่นๆ"}],J=[{value:"all",label:"ทุกระดับ"},{value:"beginner",label:"เริ่มต้น"},{value:"intermediate",label:"กลาง"},{value:"advanced",label:"สูง"}],X=[{value:"latest",label:"ล่าสุด"},{value:"popular",label:"ยอดนิยม"},{value:"price-low",label:"ราคาต่ำ-สูง"},{value:"price-high",label:"ราคาสูง-ต่ำ"},{value:"rating",label:"คะแนนสูงสุด"}],j=async(o=1,s=!1)=>{o===1?C.value=!0:b.value=!0,n.value=null;try{const x=new URLSearchParams({page:String(o),per_page:String(p.value.perPage)});g.value&&x.append("search",g.value),y.value!=="all"&&x.append("category",y.value),i.value!=="all"&&x.append("level",i.value),w.value&&x.append("sort",w.value);const t=await B.get(`/api/courses?${x.toString()}`);if(t.courses){const h=Array.isArray(t.courses)?t.courses:t.courses.data||[];s?f.value=[...f.value,...h]:(f.value=h,k.value=h.slice(0,3)),t.courses.current_page!==void 0?p.value={currentPage:t.courses.current_page||o,lastPage:t.courses.last_page||1,total:t.courses.total||0,perPage:t.courses.per_page||8}:(p.value.currentPage=o,h.length<p.value.perPage?p.value.lastPage=o:p.value.lastPage=o+1)}}catch(x){console.error("Error fetching courses:",x),n.value="ไม่สามารถโหลดรายวิชาได้ กรุณาลองใหม่อีกครั้ง"}finally{C.value=!1,b.value=!1}},Y=async()=>{b.value||!V.value||await j(p.value.currentPage+1,!0)};let N;const Z=()=>{clearTimeout(N),N=setTimeout(()=>{j(1)},300)},I=o=>o.cover?o.cover.startsWith("http")?o.cover:`${T().public.apiBase}/storage/images/courses/covers/${o.cover}`:`${T().public.apiBase}/storage/images/courses/covers/default_cover.jpg`,ee=o=>o.user?.avatar||"/images/default-avatar.png",te=o=>new Intl.NumberFormat("th-TH").format(o||0),L=(o,s)=>o.enrolled_students>50?"bestseller":s<3?"trending":null,F=o=>{$.push(`/courses/${o}`)};return H(()=>{j()}),z([y,i,w],()=>{j(1)}),(o,s)=>{const x=D;return l(),r("div",_e,[s[21]||(s[21]=e("div",{class:"mb-6 flex items-center gap-3"},[e("div",{class:"w-1 h-8 bg-blue-500 rounded-full"}),e("h1",{class:"text-2xl font-bold text-white"},"Courses")],-1)),e("div",ke,[e("div",Ce,[e("div",$e,[e("div",je,[u(a(c),{icon:"fluent:search-24-regular",class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),U(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>A(g)?g.value=t:null),onInput:Z,type:"text",placeholder:"ค้นหารายวิชา...",class:"w-full bg-gray-800 border border-gray-700 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,544),[[ne,a(g)]])]),U(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>A(y)?y.value=t:null),class:"bg-gray-800 border border-gray-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[(l(),r(m,null,_(O,t=>e("option",{key:t.value,value:t.value},d(t.label),9,Pe)),64))],512),[[M,a(y)]]),U(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>A(i)?i.value=t:null),class:"bg-gray-800 border border-gray-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[(l(),r(m,null,_(J,t=>e("option",{key:t.value,value:t.value},d(t.label),9,Ue)),64))],512),[[M,a(i)]]),U(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>A(w)?w.value=t:null),class:"bg-gray-800 border border-gray-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[(l(),r(m,null,_(X,t=>e("option",{key:t.value,value:t.value},d(t.label),9,Ae)),64))],512),[[M,a(w)]])]),a(C)?(l(),r("div",Be,[(l(),r(m,null,_(6,t=>e("div",{key:t,class:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden animate-pulse shadow-lg"},[...s[5]||(s[5]=[E('<div class="h-44 bg-gray-200 dark:bg-gray-700" data-v-ef23af52></div><div class="p-4 space-y-3" data-v-ef23af52><div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4" data-v-ef23af52></div><div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2" data-v-ef23af52></div><div class="h-8 bg-gray-200 dark:bg-gray-700 rounded" data-v-ef23af52></div></div>',2)])])),64))])):a(n)?(l(),r("div",Le,[u(a(c),{icon:"fluent:error-circle-24-regular",class:"w-20 h-20 text-red-500 mx-auto mb-4"}),s[6]||(s[6]=e("h3",{class:"text-xl font-bold text-gray-800 dark:text-white mb-2"},"เกิดข้อผิดพลาด",-1)),e("p",Me,d(a(n)),1),e("button",{onClick:s[4]||(s[4]=t=>j(1)),class:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"}," ลองใหม่ ")])):a(f).length===0?(l(),r("div",Se,[u(a(c),{icon:"fluent:book-24-regular",class:"w-20 h-20 text-gray-400 mx-auto mb-4"}),s[7]||(s[7]=e("h3",{class:"text-xl font-bold text-gray-800 dark:text-white mb-2"},"ไม่พบรายวิชา",-1)),s[8]||(s[8]=e("p",{class:"text-gray-500"},"ลองค้นหาด้วยคำค้นอื่น หรือเปลี่ยนตัวกรอง",-1))])):(l(),r(m,{key:3},[e("div",Te,[(l(!0),r(m,null,_(a(f),(t,h)=>(l(),r("div",{key:t.id,class:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all cursor-pointer group",onClick:wt=>F(t.id)},[e("div",Ne,[e("img",{src:I(t),alt:t.name,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,Ie),L(t,h)?(l(),r("div",{key:0,class:R(["absolute top-3 left-3 px-3 py-1 text-white text-xs font-bold rounded shadow-lg",L(t,h)==="bestseller"?"bg-blue-500":"bg-orange-500"])},d(L(t,h)==="bestseller"?"Best Seller":"Trending"),3)):P("",!0),e("div",Fe,[u(a(c),{icon:"fluent:star-16-filled",class:"w-3 h-3"}),e("span",null,d(t.rating||"4.5"),1)])]),e("div",Re,[e("div",Ee,[t.user?(l(),r("div",qe,[e("img",{src:ee(t),alt:t.user.name,class:"w-8 h-8 rounded-full object-cover border-2 border-gray-200 dark:border-gray-600"},null,8,De),e("div",Qe,[e("p",We," By: "+d(t.user.name),1),e("p",He,d(t.category||"General"),1)])])):P("",!0),e("div",ze,[u(a(c),{icon:"ri:bit-coin-line",class:"w-5 h-5 text-yellow-500"}),e("span",null,d(te(t.price)),1)])]),e("h3",Ge,d(t.name),1),e("div",Ke,[e("div",Oe,[u(a(c),{icon:"fluent:book-open-16-regular",class:"w-4 h-4"}),e("span",null,d(t.lessons_count||20)+" Lectures",1)]),e("div",Je,[u(a(c),{icon:"fluent:clock-16-regular",class:"w-4 h-4"}),e("span",null,d(t.hours||20)+"Hrs",1)])]),t.isMember?(l(),r("div",Xe,[u(a(c),{icon:"fluent:checkmark-circle-16-filled",class:"w-4 h-4"}),s[9]||(s[9]=S(" เป็นสมาชิกแล้ว ",-1))])):P("",!0)])],8,Ve))),128))]),a(V)?(l(),r("div",Ye,[e("button",{onClick:Y,disabled:a(b),class:"px-8 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 flex items-center gap-2 mx-auto font-medium"},[u(a(c),{icon:a(b)?"fluent:spinner-ios-20-regular":"fluent:arrow-down-24-regular",class:R(["w-5 h-5",{"animate-spin":a(b)}])},null,8,["icon","class"]),S(" "+d(a(b)?"กำลังโหลด...":"โหลดเพิ่มเติม"),1)],8,Ze)])):P("",!0)],64))]),e("div",et,[u(we),e("div",tt,[s[10]||(s[10]=e("div",{class:"p-4 border-b border-gray-100 dark:border-gray-700"},[e("h3",{class:"font-bold text-gray-800 dark:text-white"},"Popular Courses")],-1)),e("div",st,[(l(!0),r(m,null,_(a(k),t=>(l(),r("div",{key:t.id,class:"p-4 flex items-start gap-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",onClick:h=>F(t.id)},[e("img",{src:I(t),alt:t.name,class:"w-16 h-16 rounded-lg object-cover flex-shrink-0"},null,8,lt),e("div",rt,[e("h4",ot,d(t.name),1),e("p",nt,d(t.user?.name||"Unknown"),1)]),e("button",it,[u(a(c),{icon:"fluent:bookmark-24-regular",class:"w-5 h-5"})])],8,at))),128)),a(k).length===0&&!a(C)?(l(),r("div",dt," ไม่มีข้อมูล ")):P("",!0)])]),e("div",ut,[s[12]||(s[12]=e("h3",{class:"font-bold text-gray-800 dark:text-white mb-3"},"Ask Research Question?",-1)),e("div",ct,[e("div",gt,[u(a(c),{icon:"fluent:question-circle-24-regular",class:"w-5 h-5 text-blue-500"})]),s[11]||(s[11]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Ask questions in Q&A to get help from experts in your field. ",-1))]),s[13]||(s[13]=e("button",{class:"w-full py-2.5 border-2 border-blue-500 text-blue-500 rounded-lg font-medium hover:bg-blue-500 hover:text-white transition-colors"}," Ask a question ",-1))]),e("div",vt,[e("div",ft,[s[15]||(s[15]=e("h3",{class:"font-bold text-gray-800 dark:text-white"},"Explore Events",-1)),u(x,{to:"/events",class:"text-sm text-blue-500 hover:underline"},{default:G(()=>[...s[14]||(s[14]=[S("See All",-1)])]),_:1})]),e("div",bt,[e("div",pt,[s[17]||(s[17]=e("div",{class:"absolute inset-0 bg-black/20"},null,-1)),e("div",xt,[u(a(c),{icon:"fluent:building-24-regular",class:"w-6 h-6 text-white mb-1"}),s[16]||(s[16]=e("p",{class:"text-white text-sm font-medium line-clamp-2"}," University good night event in columbia ",-1))])]),e("div",ht,[s[19]||(s[19]=e("div",{class:"absolute inset-0 bg-black/20"},null,-1)),e("div",mt,[u(a(c),{icon:"fluent:people-audience-24-regular",class:"w-6 h-6 text-white mb-1"}),s[18]||(s[18]=e("p",{class:"text-white text-sm font-medium"},"The 3rd International Conference 2020",-1))])])])]),s[20]||(s[20]=E('<div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden" data-v-ef23af52><div class="p-4 border-b border-gray-100 dark:border-gray-700" data-v-ef23af52><h3 class="font-bold text-gray-800 dark:text-white" data-v-ef23af52>Who&#39;s Following</h3></div><div class="divide-y divide-gray-100 dark:divide-gray-700" data-v-ef23af52><div class="p-4 flex items-center justify-between" data-v-ef23af52><div class="flex items-center gap-3" data-v-ef23af52><div class="relative" data-v-ef23af52><img src="'+q+'" alt="User" class="w-10 h-10 rounded-full object-cover" data-v-ef23af52><div class="absolute -bottom-1 -right-1 w-4 h-4 bg-yellow-400 rounded text-[8px] flex items-center justify-center font-bold text-gray-900" data-v-ef23af52> 5 </div></div><div data-v-ef23af52><p class="text-sm font-medium text-gray-800 dark:text-white" data-v-ef23af52>Kelly Bill</p><p class="text-xs text-gray-500" data-v-ef23af52>Dept colleague</p></div></div><button class="text-blue-500 text-sm font-medium hover:underline" data-v-ef23af52>Follow</button></div><div class="p-4 flex items-center justify-between" data-v-ef23af52><div class="flex items-center gap-3" data-v-ef23af52><div class="relative" data-v-ef23af52><img src="'+q+'" alt="User" class="w-10 h-10 rounded-full object-cover" data-v-ef23af52><div class="absolute -bottom-1 -right-1 w-4 h-4 bg-yellow-400 rounded text-[8px] flex items-center justify-center font-bold text-gray-900" data-v-ef23af52> 5 </div></div><div data-v-ef23af52><p class="text-sm font-medium text-gray-800 dark:text-white" data-v-ef23af52>Issabel</p><p class="text-xs text-gray-500" data-v-ef23af52>Dept colleague</p></div></div><button class="text-blue-500 text-sm font-medium hover:underline" data-v-ef23af52>Follow</button></div></div></div>',1))])])])}}}),$t=ie(yt,[["__scopeId","data-v-ef23af52"]]);export{$t as default};
