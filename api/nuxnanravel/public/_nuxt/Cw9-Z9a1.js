import{r as a,f as Z,c as i,b as g,w as y,m as ee,o as d,a as t,t as w,i as r,d as k,l as L,F as T,n as $,p as G,u as q,I as B,q as N,s as O}from"./DuB962GZ.js";import te from"./DlGh3WWW.js";import{S as C}from"./BQxta0Da.js";import"./fgoR5NrX.js";import"./CZOFP7UD.js";import"./Dz4Xxw99.js";import"./Dn9pp5cj.js";const le={class:"plearnd-card"},se={class:"max-w-sm space-y-2 sm:flex sm:items-center sm:space-y-0 sm:space-x-2"},ae=["src","alt"],oe={class:"text-center space-y-2 sm:text-left"},re={class:"space-y-0.5"},ne={class:"text-xl text-black font-semibold"},ie={class:"grid grid-cols-1 gap-4 mt-4"},de=["value","selected"],ue={class:"grid grid-cols-1 gap-4 mt-4"},pe=["value","selected"],me={class:"grid grid-cols-1 gap-4 mt-4"},ve={class:"w-full rounded-lg border border-gray-400 bg-gray-300 text-center py-2 px-3 dark:bg-gray-700 dark:text-white dark:border-none"},ge={class:"grid grid-cols-1 gap-4 mt-4"},ce={key:0},fe={class:"relative mb-2 max-h-fit overflow-hidden"},be=["src"],xe={key:0,class:"grid grid-cols-1 gap-4 mt-4"},ye={class:"text-center"},we={class:"mt-2 text-sm font-medium text-gray-900"},ke={class:"relative"},he={class:"grid grid-cols-1 gap-4"},Se={class:"-mx-3 flex flex-wrap"},De={class:"w-full px-3 sm:w-1/2"},Me={class:""},_e={class:"w-full px-3 sm:w-1/2"},Ce={class:""},Ie={class:"grid grid-cols-1 gap-4 mt-2"},Pe={key:0},Ve={class:"relative mb-2 max-h-fit overflow-hidden"},Fe=["src"],Ue={key:1,class:"grid grid-cols-1 gap-4 mt-4"},je={class:"text-center"},Le={class:"mt-2 text-sm font-medium text-gray-900"},Te={class:"relative"},$e={class:"mt-8 flex justify-end space-x-2"},ze={__name:"SupportAndAdvert",props:{Supporter:Object},setup(c){const R=c;a(!1);const I=a(!1),f=a(20),v=a(1),h=a(0),b=a(0),S=a(0),D=a(0),u=a(null),p=a(null),M=a(new Date),x=a(null),P=a(null),V=a(null),m=a(!1),F=(o,e,s)=>{const l=[];for(let n=o;n<=e;n+=s)l.push(n);return l},A=()=>{P.value.click()},z=()=>{V.value.click()};function H(o){u.value={file:o.target.files[0],url:URL.createObjectURL(o.target.files[0])}}function J(o){p.value={file:o.target.files[0],url:URL.createObjectURL(o.target.files[0])}}const U=a(F(20,100,10)),j=a(F(1,15,1));function _(o=0,e=0){f.value=U.value[o],v.value=j.value[e],S.value=Math.floor(f.value*684/(v.value*64)),D.value=f.value>=50&&v.value>=5?S.value+v.value:S.value}function W(o){let e=[...o.dataTransfer.items].filter(s=>s.kind==="file").map(s=>s.getAsFile());u.value={file:e[0],url:O(e[0])}}function E(o){let e=[...o.dataTransfer.items].filter(s=>s.kind==="file").map(s=>s.getAsFile());p.value={file:e[0],url:O(e[0])}}Z(()=>{_()});async function Q(o){o.preventDefault(),I.value=!0;const e={headers:{"content-type":"multipart/form-data"}},s=new FormData;s.append("supporter",R.Supporter.data.id),s.append("amounts",f.value),s.append("duration",v.value),s.append("total_views",D.value),s.append("transfer_date",M.value.toLocaleDateString()),s.append("transfer_time",x.value.hours+":"+x.value.minutes),s.append("slip",u.value.file),s.append("media_image",p.value.file);try{const l=await axios.post("/supports",s,e);l.data&&l.data.success?C.fire("เสร็จสมบูรณ์","เพิ่มแหล่งเรียนรู้ใหม่เรียบร้อยแล้ว","success"):C.fire("เกิดข้อผิดพลาด",l.data.message,"error")}catch(l){C.fire("เกิดข้อผิดพลาด",l.response.data.message,"error")}I.value=!1}function K(){u.value=null}function X(){p.value=null}function Y(){window.location="/"}return(o,e)=>{const s=ee("VueDatePicker");return d(),i("div",null,[g(te,{title:"Support Plearnd.com"},{coverProfileCard:y(()=>[...e[10]||(e[10]=[t("div",{class:"flex items-center max-w-7xl mx-auto jusb mt-2 mb-4 shadow-lg bg-cover bg-no-repeat rounded-lg overflow-hidden",style:{backgroundImage:"url(/storage/images/banner/banner-bg.png)"}},[t("img",{class:"",src:"/storage/images/banner/badges-icon.png",alt:"forums-icon"}),t("p",{class:"text-white font-bold text-4xl"},"สนับสนุน เว็บไซต์ เพลินด์")],-1)])]),leftSideWidget:y(()=>[...e[11]||(e[11]=[t("div",null,null,-1)])]),mainContent:y(()=>[t("div",le,[e[28]||(e[28]=t("h2",{class:"text-xl font-semibold text-gray-700 dark:text-white mb-2"}," ข้อมูลการสนับสนุน ",-1)),e[29]||(e[29]=t("h3",{class:"text-lg font-semibold text-gray-600 dark:text-white py-2"},"ผู้สนับสนุน",-1)),t("div",se,[t("img",{class:"block mx-auto h-14 rounded-full sm:mx-0 sm:shrink-0",src:c.Supporter.data.avatar,alt:c.Supporter.data.name},null,8,ae),t("div",oe,[t("div",re,[t("p",ne,w(c.Supporter.data.name),1)])])]),t("form",{id:"create-new-academy-form",onSubmit:r(Q,["prevent"]),class:"flex flex-col justify-center",enctype:"multipart/form-data"},[t("div",ie,[t("div",null,[e[12]||(e[12]=t("label",{for:"money-quantity",class:"block text-gray-700 dark:text-white mb-1"}," จำนวนเงิน ",-1)),L(t("select",{id:"money-quantity","onUpdate:modelValue":e[0]||(e[0]=l=>h.value=l),onChange:e[1]||(e[1]=r(l=>_(h.value,b.value),["prevent"])),class:"w-full text-center rounded-lg border border-gray-400 py-2 px-3 dark:bg-gray-700 dark:text-white dark:border-none"},[(d(!0),i(T,null,$(U.value,(l,n)=>(d(),i("option",{key:n,value:n,selected:l.value==20},w(l),9,de))),128))],544),[[G,h.value]])])]),t("div",ue,[t("div",null,[e[13]||(e[13]=t("label",{for:"time-to-show-Product-media-dropdown",class:"block text-gray-700 dark:text-white mb-1 w-3/4"},"ระยะเวลาแสดงผลสื่อประชาสัมพันธ์สินค้า(วินาที/ครั้ง)",-1)),L(t("select",{id:"time-to-show-Product-media-dropdown","onUpdate:modelValue":e[2]||(e[2]=l=>b.value=l),onChange:e[3]||(e[3]=r(l=>_(0,b.value),["prevent"])),class:"w-full text-center rounded-lg border border-gray-400 py-2 px-3 dark:bg-gray-700 dark:text-white dark:border-none"},[(d(!0),i(T,null,$(j.value,(l,n)=>(d(),i("option",{key:n,value:n,selected:l.value==1},w(l),9,pe))),128))],544),[[G,b.value]])])]),t("div",me,[t("div",null,[e[14]||(e[14]=t("p",{class:"block text-gray-700 dark:text-white mb-1"}," จำนวนที่จะแสดงผลสื่อประชาสัมพันธ์สินค้า ",-1)),t("p",ve,w(D.value),1)])]),t("div",ge,[u.value?(d(),i("div",ce,[t("div",fe,[t("img",{src:u.value.url,class:"rounded-lg"},null,8,be),t("button",{onClick:r(K,["prevent"]),class:"absolute top-1 left-1 rounded-full cursor-pointer bg-gray-100 p-2"},[g(q(B),{icon:"fa-solid:trash-alt",class:"w-5 h-5 text-red-500"})])])])):k("",!0)]),u.value?k("",!0):(d(),i("div",xe,[e[19]||(e[19]=t("p",null,"สลิปการทำรายการ",-1)),t("div",{id:"dropzone",onDragover:e[4]||(e[4]=r(l=>m.value=!0,["prevent"])),onDragleave:e[5]||(e[5]=r(l=>m.value=!1,["prevent"])),onDrop:r(W,["prevent"]),class:N([m.value?"bg-blue-200 border-blue-400":"bg-gray-200 border-gray-400","w-full relative border-2 border-dashed rounded-lg p-2"])},[t("div",ye,[e[17]||(e[17]=t("img",{class:"mx-auto h-8 w-8 opacity-70",src:"https://www.svgrepo.com/show/357902/image-upload.svg",alt:""},null,-1)),t("h3",we,[t("p",ke,[e[15]||(e[15]=t("span",null,"Drag and drop",-1)),t("button",{class:"plearnd-btn-primary w-36 mx-2",onClick:r(A,["prevent"])}," or browse "),e[16]||(e[16]=t("span",null,"to upload",-1))]),t("input",{id:"slip-file-upload",type:"file",accept:"image/*",ref_key:"inputSlip",ref:P,class:"hidden",onChange:r(H,["prevent"])},null,544)]),e[18]||(e[18]=t("p",{class:"mt-1 text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1))])],34)])),e[26]||(e[26]=t("div",{class:"grid grid-cols-2 gap-4 mt-4"},[t("p",{class:"block text-gray-700 dark:text-white mb-1"},"วัน/เวลา ที่ทำรายการ")],-1)),t("div",he,[t("div",Se,[t("div",De,[t("div",Me,[g(s,{id:"slip-date-input",name:"slipdateinput",modelValue:M.value,"onUpdate:modelValue":e[6]||(e[6]=l=>M.value=l),format:"dd-MM-yyyy","enable-time-picker":!1},null,8,["modelValue"])])]),t("div",_e,[t("div",Ce,[g(s,{id:"slip-time-input",name:"sliptimeinput",modelValue:x.value,"onUpdate:modelValue":e[7]||(e[7]=l=>x.value=l),format:"HH:mm","calendar-button":!1,"time-picker":"",required:""},null,8,["modelValue"])])])])]),e[27]||(e[27]=t("div",{class:"grid grid-cols-1 gap-4"},[t("p",{class:"block text-red-500 text-sm dark:text-white mb-1"}," กรุณาตรวจสอบวันที่และเวลาให้ตรงกับใบสลิปโอนเงิน (หากเกิดข้อผิดพลาดจะไม่สามารถคืนเงินได้) ")],-1)),t("div",Ie,[p.value?(d(),i("div",Pe,[t("div",Ve,[t("img",{src:p.value.url,class:"rounded-lg"},null,8,Fe),t("button",{type:"button",onClick:r(X,["prevent"]),class:"absolute top-1 left-1 rounded-full cursor-pointer bg-gray-100 p-2"},[g(q(B),{icon:"fa-solid:trash-alt",class:"w-5 h-5 text-red-500"})])])])):k("",!0)]),p.value?k("",!0):(d(),i("div",Ue,[e[24]||(e[24]=t("p",null,"รูปสื่อประชาสัมพันธ์",-1)),t("div",{id:"dropzone",onDragover:e[8]||(e[8]=r(l=>m.value=!0,["prevent"])),onDragleave:e[9]||(e[9]=r(l=>m.value=!1,["prevent"])),onDrop:r(E,["prevent"]),class:N([m.value?"bg-blue-200 border-blue-400":"bg-gray-200 border-gray-400","w-full relative border-2 border-dashed rounded-lg p-2"])},[t("div",je,[e[22]||(e[22]=t("img",{class:"mx-auto h-8 w-8 opacity-70",src:"https://www.svgrepo.com/show/357902/image-upload.svg",alt:""},null,-1)),t("h3",Le,[t("p",Te,[e[20]||(e[20]=t("span",null,"Drag and drop",-1)),t("button",{class:"plearnd-btn-primary w-36 mx-2",onClick:r(z,["prevent"])}," or browse "),e[21]||(e[21]=t("span",null,"to upload",-1))]),t("input",{id:"media-image-upload",type:"file",accept:"image/*",ref_key:"inputMediaImage",ref:V,class:"hidden",onChange:r(J,["prevent"])},null,544)]),e[23]||(e[23]=t("p",{class:"mt-1 text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1))])],34)])),t("div",$e,[e[25]||(e[25]=t("button",{type:"submit",class:"bg-teal-500 text-white px-4 py-2 rounded-lg hover:bg-teal-700 dark:bg-teal-600 dark:text-white dark:hover:bg-teal-900"}," บันทึกข้อมูล ",-1)),t("button",{type:"button",onClick:r(Y,["prevent"]),class:"bg-red-400 text-white px-4 py-2 rounded-lg hover:bg-red-700 dark:bg-red-600 dark:text-white dark:hover:bg-red-900"}," ยกเลิก ")])],32)])]),rightSideWidget:y(()=>[...e[30]||(e[30]=[t("div",null,null,-1)])]),_:1})])}}};export{ze as default};
